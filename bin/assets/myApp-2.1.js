/**
 * myApp - v2.1 - 2015-09-30
 *
 * Copyright (c) 2015 ravitejvaranasi@gmail.com
 */
function dtmlXMLLoaderObject(a,b,c,d){return this.xmlDoc="",this.async="undefined"!=typeof c?c:!0,this.onloadAction=a||null,this.mainObject=b||null,this.waitCall=null,this.rSeed=d||!1,this}function callerFunction(a,b){return this.handler=function(c){return c||(c=window.event),a(c,b),!0},this.handler}function getAbsoluteLeft(a){for(var b=a.offsetLeft,c=a.offsetParent;null!=c;)b+=c.offsetLeft,c=c.offsetParent;return b}function getAbsoluteTop(a){for(var b=a.offsetTop,c=a.offsetParent;null!=c;)b+=c.offsetTop,c=c.offsetParent;return b}function convertStringToBoolean(a){switch("string"==typeof a&&(a=a.toLowerCase()),a){case"1":case"true":case"yes":case"y":case 1:case!0:return!0;default:return!1}}function getUrlSymbol(a){return-1!=a.indexOf("?")?"&":"?"}function dhtmlDragAndDropObject(){return window.dhtmlDragAndDrop?window.dhtmlDragAndDrop:(this.lastLanding=0,this.dragNode=0,this.dragStartNode=0,this.dragStartObject=0,this.tempDOMU=null,this.tempDOMM=null,this.waitDrag=0,window.dhtmlDragAndDrop=this,this)}function _dhtmlxError(){return this.catches||(this.catches=new Array),this}function dhtmlXHeir(a,b){for(var c in b)"function"==typeof b[c]&&(a[c]=b[c]);return a}function dhtmlxEvent(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function dhtmlxArray(a){return dhtmlXHeir(a||new Array,dhtmlxArray._master)}function dhtmlXGridObject(id){if(_isIE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}id?"object"==typeof id?(this.entBox=id,this.entBox.id="cgrid2_"+this.uid()):this.entBox=document.getElementById(id):(this.entBox=document.createElement("DIV"),this.entBox.id="cgrid2_"+this.uid()),this.entBox.innerHTML="",dhtmlxEventable(this);var self=this;this._wcorr=0,this.cell=null,this.row=null,this.iconURL="",this.editor=null,this._f2kE=!0,this._dclE=!0,this.combos=new Array(0),this.defVal=new Array(0),this.rowsAr={},this.rowsBuffer=dhtmlxArray(),this.rowsCol=dhtmlxArray(),this._data_cache={},this._ecache={},this._ud_enabled=!0,this.xmlLoader=new dtmlXMLLoaderObject(this.doLoadDetails,this,!0,this.no_cashe),this._maskArr=[],this.selectedRows=dhtmlxArray(),this.UserData={},this._sizeFix=this._borderFix=0,this.entBox.className+=" gridbox",this.entBox.style.width=this.entBox.getAttribute("width")||(window.getComputedStyle?this.entBox.style.width||window.getComputedStyle(this.entBox,null).width:this.entBox.currentStyle?this.entBox.currentStyle.width:this.entBox.style.width||0)||"100%",this.entBox.style.height=this.entBox.getAttribute("height")||(window.getComputedStyle?this.entBox.style.height||window.getComputedStyle(this.entBox,null).height:this.entBox.currentStyle?this.entBox.currentStyle.height:this.entBox.style.height||0)||"100%",this.entBox.style.cursor="default",this.entBox.onselectstart=function(){return!1};var t_creator=function(a){var b=document.createElement("TABLE");return b.cellSpacing=b.cellPadding=0,b.style.cssText="width:100%;table-layout:fixed;",b.className=a.substr(2),b};return this.obj=t_creator("c_obj"),this.hdr=t_creator("c_hdr"),this.hdr.style.marginRight="20px",this.hdr.style.paddingRight="20px",this.objBox=document.createElement("DIV"),this.objBox.style.width="100%",this.objBox.style.overflow="auto",this.objBox.appendChild(this.obj),this.objBox.className="objbox",this.hdrBox=document.createElement("DIV"),this.hdrBox.style.width="100%",this.hdrBox.style.height="25px",this.hdrBox.style.overflow="hidden",this.hdrBox.className="xhdr",this.preloadImagesAr=new Array(0),this.sortImg=document.createElement("IMG"),this.sortImg.style.display="none",this.hdrBox.appendChild(this.sortImg),this.hdrBox.appendChild(this.hdr),this.hdrBox.style.position="relative",this.entBox.appendChild(this.hdrBox),this.entBox.appendChild(this.objBox),this.entBox.grid=this,this.objBox.grid=this,this.hdrBox.grid=this,this.obj.grid=this,this.hdr.grid=this,this.cellWidthPX=[],this.cellWidthPC=[],this.cellWidthType=this.entBox.cellwidthtype||"px",this.delim=this.entBox.delimiter||",",this._csvDelim=",",this.hdrLabels=[],this.columnIds=[],this.columnColor=[],this._hrrar=[],this.cellType=dhtmlxArray(),this.cellAlign=[],this.initCellWidth=[],this.fldSort=[],this._srdh=20,this.imgURL=window.dhx_globalImgPath||"",this.isActive=!1,this.isEditable=!0,this.useImagesInHeader=!1,this.pagingOn=!1,this.rowsBufferOutSize=0,dhtmlxEvent(window,"unload",function(){try{self.destructor&&self.destructor()}catch(a){}}),this.setSkin=function(a){switch(this.skin_name=a,this.entBox.className="gridbox gridbox_"+a,this.skin_h_correction=0,this.enableAlterCss("ev_"+a,"odd_"+a,this.isTreeGrid()),this._fixAlterCss(),a){case"clear":this._topMb=document.createElement("DIV"),this._topMb.className="topMumba",this._topMb.innerHTML="<img style='left:0px' src='"+this.imgURL+"skinC_top_left.gif'><img style='right:20px' src='"+this.imgURL+"skinC_top_right.gif'>",this.entBox.appendChild(this._topMb),this._botMb=document.createElement("DIV"),this._botMb.className="bottomMumba",this._botMb.innerHTML="<img style='left:0px' src='"+this.imgURL+"skinD_bottom_left.gif'><img style='right:20px' src='"+this.imgURL+"skinD_bottom_right.gif'>",this.entBox.appendChild(this._botMb),this.entBox.style.position="relative",this.skin_h_correction=20;break;case"glassy_blue":case"dhx_black":case"dhx_blue":case"modern":case"light":this.forceDivInHeader=!0;break;case"xp":this.forceDivInHeader=!0,this._srdh=_isIE&&"BackCompat"!=document.compatMode?25:22;break;case"mt":this._srdh=_isIE&&"BackCompat"!=document.compatMode?25:22;break;case"gray":_isIE&&"BackCompat"!=document.compatMode&&(this._srdh=22);break;case"sbdark":}if(_isIE&&this.hdr){var b=this.hdr.parentNode;b.removeChild(this.hdr),b.appendChild(this.hdr)}this.setSizes()},_isIE&&this.preventIECaching(!0),window.dhtmlDragAndDropObject&&(this.dragger=new dhtmlDragAndDropObject),this._doOnScroll=function(a,b){this.callEvent("onScroll",[this.objBox.scrollLeft,this.objBox.scrollTop]),this.doOnScroll(a,b)},this.doOnScroll=function(a,b){this.hdrBox.scrollLeft=this.objBox.scrollLeft,this.ftr&&(this.ftr.parentNode.scrollLeft=this.objBox.scrollLeft),b||this._srnd&&(this._dLoadTimer&&window.clearTimeout(this._dLoadTimer),this._dLoadTimer=window.setTimeout(function(){self._update_srnd_view()},100))},this.attachToObject=function(a){a.appendChild(this.globalBox?this.globalBox:this.entBox),this.setSizes()},this.init=function(a){if(this.isTreeGrid()&&!this._h2&&(this._h2=new dhtmlxHierarchy,this._fake&&!this._realfake&&(this._fake._h2=this._h2),this._tgc={imgURL:null}),this._hstyles){this.editStop(),this.lastClicked=null,this.resized=null,this.fldSorted=this.r_fldSorted=null,this.cellWidthPX=[],this.cellWidthPC=[],this.hdr.rows.length>0&&this.clearAll(!0);for(var b=this.hdr.insertRow(0),c=0;c<this.hdrLabels.length;c++)b.appendChild(document.createElement("TH")),b.childNodes[c]._cellIndex=c,b.childNodes[c].style.height="0px";_isIE&&8>_isIE?b.style.position="absolute":b.style.height="auto";var b=this.hdr.insertRow(_isKHTML?2:1);b._childIndexes=new Array;for(var d=0,c=0;c<this.hdrLabels.length;c++)b._childIndexes[c]=c-d,this.hdrLabels[c]!=this.splitSign||0==c?(b.insertCell(c-d),b.childNodes[c-d]._cellIndex=c,b.childNodes[c-d]._cellIndexS=c,this.setColumnLabel(c,this.hdrLabels[c])):(_isKHTML&&b.insertCell(c-d),b.cells[c-d-1].colSpan=(b.cells[c-d-1].colSpan||1)+1,b.childNodes[c-d-1]._cellIndex++,d++,b._childIndexes[c]=c-d);0==d&&(b._childIndexes=null),this._cCount=this.hdrLabels.length,_isIE&&window.setTimeout(function(){self.setSizes()},1),this.obj.firstChild||this.obj.appendChild(document.createElement("TBODY"));var e=this.obj.firstChild;if(!e.firstChild){e.appendChild(document.createElement("TR")),e=e.firstChild,_isIE&&8>_isIE?e.style.position="absolute":e.style.height="auto";for(var c=0;c<this.hdrLabels.length;c++)e.appendChild(document.createElement("TH")),e.childNodes[c].style.height="0px"}this._c_order=null,1!=this.multiLine&&(this.obj.className+=" row20px"),this.sortImg.style.position="absolute",this.sortImg.style.display="none",this.sortImg.src=this.imgURL+"sort_desc.gif",this.sortImg.defLeft=0,this.noHeader?this.hdrBox.style.display="none":this.noHeader=!1,this._ivizcol&&this.setColHidden(),this.attachHeader(),this.attachHeader(0,0,"_aFoot"),this.setSizes(),a&&this.parseXML(),this.obj.scrollTop=0,this.dragAndDropOff&&this.dragger.addDragLanding(this.entBox,this),this._initDrF&&this._initD(),this._init_point&&this._init_point()}},this.setColumnSizes=function(a){for(var b=0,c=[],d=0;d<this._cCount;d++)"*"!=this.initCellWidth[d]||this._hrrar[d]?("%"==this.cellWidthType?("undefined"==typeof this.cellWidthPC[d]&&(this.cellWidthPC[d]=this.initCellWidth[d]),this.cellWidthPX[d]=Math.floor(a*this.cellWidthPC[d]/100)||0):"undefined"==typeof this.cellWidthPX[d]&&(this.cellWidthPX[d]=this.initCellWidth[d]),this._hrrar[d]||(b+=1*this.cellWidthPX[d])):(this._awdth=!1,c.push(d));if(c.length){var e=Math.floor((a-b)/c.length);0>e&&(e=1);for(var d=0;d<c.length;d++){var f=Math.max(this._drsclmW?this._drsclmW[c[d]]:0,e);this.cellWidthPX[c[d]]=f,b+=f}this._setAutoResize()}return this.obj.style.width=b+"px",this.hdr.style.width=b+"px",this.ftr&&(this.ftr.style.width=b+"px"),this.chngCellWidth(),b},this.setSizes=function(){if(this.hdr.rows[0]){if(window.clearTimeout(this._sizeTime),!(this.entBox.offsetWidth||this.globalBox&&this.globalBox.offsetWidth))return void(this._sizeTime=window.setTimeout(function(){self.setSizes()},250));var a=this.quirks=_isIE&&"BackCompat"==document.compatMode,b=(this.entBox.offsetWidth-this.entBox.clientWidth)/2;if(this.globalBox){var c=(this.globalBox.offsetWidth-this.globalBox.clientWidth)/2;this._delta_x&&!this._realfake&&(this.globalBox.style.width=this._delta_x,this.entBox.style.width=Math.max(0,this.globalBox.clientWidth+(a?2*c:0)-this._fake.entBox.clientWidth)+"px"),this._delta_y&&!this._realfake&&(this.globalBox.style.height=this._delta_y,this.entBox.style.overflow=this._fake.entBox.style.overflow="hidden",this.entBox.style.height=this._fake.entBox.style.height=this.globalBox.clientHeight+(a?2*c:0)+"px")}else this._delta_x&&("TD"==this.entBox.parentNode.tagName?(this.entBox.style.width="1px",this.entBox.style.width=parseInt(this._delta_x)*this.entBox.parentNode.clientWidth/100-2*b+"px"):this.entBox.style.width=this._delta_x),this._delta_y&&(this.entBox.style.height=this._delta_y);var d=this.parentGrid?!1:this.objBox.scrollHeight>this.objBox.offsetHeight,e=this.parentGrid?!1:this.objBox.scrollWidth>this.objBox.offsetWidth||"scroll"==this.objBox.style.overflowX,f=18,g=this.entBox.clientWidth-(this.skin_h_correction||0)*(a?0:1),h=this.entBox.clientWidth-(this.skin_h_correction||0),i=this.entBox.clientHeight,j=this.setColumnSizes(h-(d?f:0)),k=this.hdr.clientHeight,l=this.ftr?this.ftr.clientHeight:0,m=g,n=i-k-l;if(this._awdth&&this._awdth[0]&&99999==this._awdth[1]&&(e=0),this._ahgr&&(n=this._ahgrMA?this.entBox.parentNode.clientHeight-k-l:this.obj.offsetHeight+(e?f:0),this._ahgrM&&(n=this._ahgrF?Math.min(this._ahgrM,n+k+l)-k-l:Math.min(this._ahgrM,n)),d&&n>=this.obj.scrollHeight+(e?f:0)&&(d=!1,this.setColumnSizes(h))),this._awdth&&this._awdth[0]){"%"==this.cellWidthType&&(this.cellWidthType="px"),this._fake&&(j+=this._fake.entBox.clientWidth);var m=Math.min(Math.max(j+(d?f:0),this._awdth[2]),this._awdth[1]);this._fake&&(m-=this._fake.entBox.clientWidth)}n=Math.max(0,n),this._ff_size_delta=.1==this._ff_size_delta?.2:.1,_isFF||(this._ff_size_delta=0),this.entBox.style.width=m+(a?2:0)*b+this._ff_size_delta+"px",this.entBox.style.height=n+(a?2:0)*b+k+l+"px",this.objBox.style.height=n+(a&&!d?2:0)*b+"px",this.hdrBox.style.height=k+"px",n!=i&&this.doOnScroll(0,!this._srnd);var o=this["setSizes_"+this.skin_name];o&&o.call(this),this.setSortImgPos(),k!=this.hdr.clientHeight&&this._ahgr&&this.setSizes()}},this.setSizes_clear=function(){var a=this.hdr.offsetHeight,b=this.entBox.offsetWidth,c=a+this.objBox.offsetHeight;this._topMb.style.top=(a||0)+"px",this._topMb.style.width=b+20+"px",this._botMb.style.top=c-3+"px",this._botMb.style.width=b+20+"px"},this.chngCellWidth=function(){_isOpera&&this.ftr&&(this.ftr.width=this.objBox.scrollWidth+"px");for(var a=this._cCount,b=0;a>b;b++)this.hdr.rows[0].cells[b].style.width=this.cellWidthPX[b]+"px",this.obj.rows[0].childNodes[b].style.width=this.cellWidthPX[b]+"px",this.ftr&&(this.ftr.rows[0].cells[b].style.width=this.cellWidthPX[b]+"px")},this.setDelimiter=function(a){this.delim=a},this.setInitWidthsP=function(a){this.cellWidthType="%",this.initCellWidth=a.split(this.delim.replace(/px/gi,"")),arguments[1]||this._setAutoResize()},this._setAutoResize=function(){if(!this._realfake){var a=(window,this);dhtmlxEvent(window,"resize",function(){window.clearTimeout(a._resize_timer),a.setSizes&&(a._resize_timer=window.setTimeout(function(){a.setSizes(),a._fake&&a._fake._correctSplit()},100))})}},this.setInitWidths=function(a){if(this.cellWidthType="px",this.initCellWidth=a.split(this.delim),_isFF)for(var b=0;b<this.initCellWidth.length;b++)"*"!=this.initCellWidth[b]&&(this.initCellWidth[b]=parseInt(this.initCellWidth[b]))},this.enableMultiline=function(a){this.multiLine=convertStringToBoolean(a)},this.enableMultiselect=function(a){this.selMultiRows=convertStringToBoolean(a)},this.setImagePath=function(a){this.imgURL=a},this.setImagesPath=this.setImagePath,this.setIconPath=function(a){this.iconURL=a},this.setIconsPath=this.setIconPath,this.changeCursorState=function(a){var b=a.target||a.srcElement;if("TD"!=b.tagName&&(b=this.getFirstParentOfType(b,"TD")),b){if("TD"==b.tagName&&this._drsclmn&&!this._drsclmn[b._cellIndex])return b.style.cursor="default";var c=(a.layerX||0)+(_isIE||"DIV"!=a.target.tagName?0:b.offsetLeft);b.style.cursor=b.offsetWidth-(a.offsetX||-1*(parseInt(this.getPosition(b,this.hdrBox))-c))<(_isOpera?20:10)?"E-resize":"default",_isOpera&&(this.hdrBox.scrollLeft=this.objBox.scrollLeft)}},this.startColResize=function(a){this.resized=null;var b=a.target||a.srcElement;"TD"!=b.tagName&&(b=this.getFirstParentOfType(b,"TD"));var c=a.clientX,d=this.hdr.offsetWidth,e=parseInt(b.offsetWidth);if("TD"==b.tagName&&"default"!=b.style.cursor){if(this._drsclmn&&!this._drsclmn[b._cellIndex])return;self._old_d_mm=document.body.onmousemove,self._old_d_mu=document.body.onmouseup,document.body.onmousemove=function(a){self.doColResize(a||window.event,b,e,c,d)},document.body.onmouseup=function(){self.stopColResize()}}},this.stopColResize=function(){document.body.onmousemove=self._old_d_mm,document.body.onmouseup=self._old_d_mu,this.setSizes(),this.doOnScroll(0,1),this.callEvent("onResizeEnd",[this])},this.doColResize=function(a,b,c,d,e){b.style.cursor="E-resize",this.resized=b;{var f=c+(a.clientX-d);e+(a.clientX-d)}if(this.callEvent("onResize",[b._cellIndex,f,this])){if(_isIE&&(this.objBox.scrollLeft=this.hdrBox.scrollLeft),b.colSpan>1){for(var g=new Array,h=0;h<b.colSpan;h++)g[h]=Math.round(f*this.hdr.rows[0].childNodes[b._cellIndexS+h].offsetWidth/b.offsetWidth);for(var h=0;h<b.colSpan;h++)this._setColumnSizeR(b._cellIndexS+1*h,g[h])}else this._setColumnSizeR(b._cellIndex,f);this.doOnScroll(0,1),this.setSizes()}},this._setColumnSizeR=function(a,b){if(b>(this._drsclmW&&!this._notresize?this._drsclmW[a]||10:10)){if(this.obj.rows[0].childNodes[a].style.width=b+"px",this.hdr.rows[0].childNodes[a].style.width=b+"px",this.ftr&&(this.ftr.rows[0].childNodes[a].style.width=b+"px"),"px"==this.cellWidthType)this.cellWidthPX[a]=b;else{var c=parseInt(this.entBox.offsetWidth);this.objBox.scrollHeight>this.objBox.offsetHeight&&(c-=this._scrFix||17);var d=Math.round(b/c*100);this.cellWidthPC[a]=d}"none"!=this.sortImg.style.display&&this.setSortImgPos()}},this.setSortImgState=function(a,b,c,d){if(c=(c||"asc").toLowerCase(),!convertStringToBoolean(a))return this.sortImg.style.display="none",void(this.fldSorted=null);this.sortImg.src="asc"==c?this.imgURL+"sort_asc.gif":this.imgURL+"sort_desc.gif",this.sortImg.style.display="",this.fldSorted=this.hdr.rows[0].childNodes[b];var e=this.hdr.rows[d||1];if(e){for(var f=0;f<e.childNodes.length;f++)if(e.childNodes[f]._cellIndexS==b)return this.r_fldSorted=e.childNodes[f],this.setSortImgPos();return this.setSortImgState(a,b,c,(d||1)+1)}},this.setSortImgPos=function(a,b,c,d){if(!this._hrrar||!this._hrrar[this.r_fldSorted?this.r_fldSorted._cellIndex:a]){if(!d)if(a)var d=this.hdr.rows[c||0].cells[a];else var d=this.r_fldSorted;if(null!=d){var e=this.getPosition(d,this.hdrBox),f=d.offsetWidth;this.sortImg.style.left=Number(e[0]+f-13)+"px",this.sortImg.defLeft=parseInt(this.sortImg.style.left),this.sortImg.style.top=Number(e[1]+5)+"px",this.useImagesInHeader||b||(this.sortImg.style.display="inline"),this.sortImg.style.left=this.sortImg.defLeft+"px"}}},this.setActive=function(a){if(0==arguments.length)var a=!0;1==a?(globalActiveDHTMLGridObject&&globalActiveDHTMLGridObject!=this&&globalActiveDHTMLGridObject.editStop(),globalActiveDHTMLGridObject=this,this.isActive=!0):this.isActive=!1},this._doClick=function(a){var b=0,c=this.getFirstParentOfType(_isIE?a.srcElement:a.target,"TD");if(c){var d=!0;if(this.markedCells){var e=0;return(a.shiftKey||a.metaKey)&&(e=1),a.ctrlKey&&(e=2),this.doMark(c,e),!0}0!=this.selMultiRows&&(a.shiftKey&&null!=this.row&&(b=1),(a.ctrlKey||a.metaKey)&&(b=2)),this.doClick(c,d,b)}},this._doContClick=function(a){var b=this.getFirstParentOfType(_isIE?a.srcElement:a.target,"TD");if(!b||"undefined"==typeof b.parentNode.idd)return!0;if(2==a.button||_isMacOS&&a.ctrlKey){if(!this.callEvent("onRightClick",[b.parentNode.idd,b._cellIndex,a])){var c=function(a){return document.body.oncontextmenu=Function("return true;"),(a||event).cancelBubble=!0,!1};return _isIE?a.srcElement.oncontextmenu=c:_isMacOS||(document.body.oncontextmenu=c),!1}if(this._ctmndx){if(!this.callEvent("onBeforeContextMenu",[b.parentNode.idd,b._cellIndex,this]))return!0;if(_isIE&&(a.srcElement.oncontextmenu=function(){return event.cancelBubble=!0,!1}),this._ctmndx.showContextMenu){var d=window.document.documentElement,e=window.document.body,f=new Array(d.scrollLeft||e.scrollLeft,d.scrollTop||e.scrollTop);if(_isIE)var g=a.clientX+f[0],h=a.clientY+f[1];else var g=a.pageX,h=a.pageY;this._ctmndx.showContextMenu(g-1,h-1),this.contextID=this._ctmndx.contextMenuZoneId=b.parentNode.idd+"_"+b._cellIndex,this._ctmndx._skip_hide=!0}else b.contextMenuId=b.parentNode.idd+"_"+b._cellIndex,b.contextMenu=this._ctmndx,b.a=this._ctmndx._contextStart,b.a(b,a),b.a=null;a.cancelBubble=!0}}else this._ctmndx&&(this._ctmndx.hideContextMenu?this._ctmndx.hideContextMenu():this._ctmndx._contextEnd());return!0},this.doClick=function(a,b,c,d){this.selMultiRows||(c=0);var e=this.row?this.row.idd:0;if(this.setActive(!0),c||(c=0),null!=this.cell&&(this.cell.className=this.cell.className.replace(/cellselected/g,"")),"TD"==a.tagName){if(this.checkEvent("onSelectStateChanged"))var f=this.getSelectedId();var g=this.row;if(1==c){var h=this.rowsCol._dhx_find(a.parentNode),i=this.rowsCol._dhx_find(this.lastClicked);if(h>i)var j=i,k=h;else var j=h,k=i;for(var l=0;l<this.rowsCol.length;l++)if(l>=j&&k>=l){if(!this.rowsCol[l]||this.rowsCol[l]._sRow)return this.clearSelection(),this.doClick(a,b,0,d);-1==this.rowsCol[l].className.indexOf("rowselected")&&this.callEvent("onBeforeSelect",[this.rowsCol[l].idd,e])&&(this.rowsCol[l].className+=" rowselected",this.selectedRows[this.selectedRows.length]=this.rowsCol[l])}}else if(2==c&&-1!=a.parentNode.className.indexOf("rowselected")){a.parentNode.className=a.parentNode.className.replace(/rowselected/g,""),this.selectedRows._dhx_removeAt(this.selectedRows._dhx_find(a.parentNode));var m=!0}if(this.editStop(),"undefined"==typeof a.parentNode.idd)return!0;if(!m&&!a.parentNode._sRow&&this.callEvent("onBeforeSelect",[a.parentNode.idd,e])){if(0==c&&this.clearSelection(),this.cell=a,g==a.parentNode&&this._chRRS&&(b=!1),this.row=a.parentNode,this.row.className+=" rowselected",this.cell&&_isIE&&8==_isIE){var n=this.cell.nextSibling,o=this.cell.parentNode;o.removeChild(this.cell),o.insertBefore(this.cell,n)}-1==this.selectedRows._dhx_find(this.row)&&(this.selectedRows[this.selectedRows.length]=this.row)}if(this.cell&&-1!=this.cell.parentNode.className.indexOf("rowselected")&&(this.cell.className=this.cell.className.replace(/cellselected/g,"")+" cellselected"),1!=c&&!this.row)return;this.lastClicked=a.parentNode;var p=this.row.idd,q=this.cell;if(b&&"undefined"!=typeof p&&q&&!m&&(self.onRowSelectTime=setTimeout(function(){self.callEvent("onRowSelect",[p,q._cellIndex])},100)),this.checkEvent("onSelectStateChanged")){var r=this.getSelectedId();f!=r&&this.callEvent("onSelectStateChanged",[r,f])}}this.isActive=!0,d!==!1&&this.cell&&this.cell.parentNode.idd&&this.moveToVisible(this.cell)},this.selectAll=function(){this.clearSelection(),this.selectedRows=dhtmlxArray([].concat(this.rowsCol));for(var a=this.rowsCol.length-1;a>=0;a--)this.rowsCol[a]._cntr?this.selectedRows.splice(a,1):this.rowsCol[a].className+=" rowselected";this.selectedRows.length&&(this.row=this.selectedRows[0],this.cell=this.row.cells[0]),this._fake&&!this._realfake&&this._fake.selectAll()},this.selectCell=function(a,b,c,d,e,f){if(c||(c=!1),"object"!=typeof a&&(a=this.render_row(a)),!a||-1==a)return null;if(a._childIndexes)var g=a.childNodes[a._childIndexes[b]];else var g=a.childNodes[b];g||(g=a.childNodes[0]),d?this.doClick(g,c,3,f):this.doClick(g,c,0,f),e&&this.editCell()},this.moveToVisible=function(a,b){if(this.pagingOn){var c=Math.floor(this.getRowIndex(a.parentNode.idd)/this.rowsBufferOutSize)+1;c!=this.currentPage&&this.changePage(c)}if(!a.offsetHeight){var d=this._realfake?this._fake.rowsAr[a.parentNode.idd]:a.parentNode,e=this.rowsBuffer._dhx_find(d)*this._srdh;return this.objBox.scrollTop=e}try{var f=a.offsetLeft+a.offsetWidth+20,g=0;f>this.objBox.offsetWidth+this.objBox.scrollLeft?a.offsetLeft>this.objBox.scrollLeft&&(g=a.offsetLeft-5):a.offsetLeft<this.objBox.scrollLeft&&(f-=2*a.offsetWidth/3,f<this.objBox.scrollLeft&&(g=a.offsetLeft-5)),g&&!b&&(this.objBox.scrollLeft=g);var f=a.offsetTop+a.offsetHeight+20;if(f>this.objBox.offsetHeight+this.objBox.scrollTop)var h=f-this.objBox.offsetHeight;else if(a.offsetTop<this.objBox.scrollTop)var h=a.offsetTop-5;h&&(this.objBox.scrollTop=h)}catch(i){}},this.editCell=function(){if(!this.editor||this.cell!=this.editor.cell){if(this.editStop(),1!=this.isEditable||!this.cell)return!1;var a=this.cell;if(a.parentNode._locked)return!1;if(this.editor=this.cells4(a),null!=this.editor){if(this.editor.isDisabled())return this.editor=null,!1;0!=this.callEvent("onEditCell",[0,this.row.idd,this.cell._cellIndex])&&this.editor.edit?(this._Opera_stop=(new Date).valueOf(),a.className+=" editable",this.editor.edit(),this.callEvent("onEditCell",[1,this.row.idd,this.cell._cellIndex])):this.editor=null}}},this.editStop=function(a){if(_isOpera&&this._Opera_stop){if(1*this._Opera_stop+50>(new Date).valueOf())return;this._Opera_stop=null}if(this.editor&&null!=this.editor){if(this.editor.cell.className=this.editor.cell.className.replace("editable",""),a){var b=this.editor.val;return this.editor.detach(),this.editor.setValue(b),void(this.editor=null)}this.editor.detach()&&(this.cell.wasChanged=!0);var c=this.editor;this.editor=null;var d=this.callEvent("onEditCell",[2,this.row.idd,this.cell._cellIndex,c.getValue(),c.val]);"string"==typeof d||"number"==typeof d?c[c.setImage?"setLabel":"setValue"](d):d||c[c.setImage?"setLabel":"setValue"](c.val)}},this._nextRowCell=function(a,b,c){return a=this._nextRow((this._groups?this.rowsCol:this.rowsBuffer)._dhx_find(a),b),a?a.childNodes[a._childIndexes?a._childIndexes[c]:c]:null},this._getNextCell=function(a,b,c){a=a||this.cell;var d=a.parentNode;if(this._tabOrder)c=this._tabOrder[a._cellIndex],"undefined"!=typeof c&&(a=0>c?this._nextRowCell(d,b,Math.abs(c)-1):d.childNodes[c]);else{var c=a._cellIndex+b;c>=0&&c<this._cCount?(d._childIndexes&&(c=d._childIndexes[a._cellIndex]+b),a=d.childNodes[c]):a=this._nextRowCell(d,b,1==b?0:this._cCount-1)}return a?"none"==a.style.display||this.smartTabOrder&&this.cells(a.parentNode.idd,a._cellIndex).isDisabled()?this._getNextCell(a,b):a:(1==b&&this.tabEnd&&(this.tabEnd.focus(),this.tabEnd.focus()),-1==b&&this.tabStart&&(this.tabStart.focus(),this.tabStart.focus()),null)},this._nextRow=function(a,b){var c=this.render_row(a+b);return c&&-1!=c?c&&"none"==c.style.display?this._nextRow(a+b,b):c:null},this.scrollPage=function(a){var b=this._realfake?this._fake:this,c=Math.floor((b._r_select||this.getRowIndex(this.row.idd)||0)+a*this.objBox.offsetHeight/(this._srdh||20));0>c&&(c=0),c>=this.rowsBuffer.length&&(c=this.rowsBuffer.length-1),this._srnd&&!this.rowsBuffer[c]?(this.objBox.scrollTop+=Math.floor(a*this.objBox.offsetHeight/(this._srdh||20))*(this._srdh||20),b._r_select=c):(this.selectCell(c,this.cell._cellIndex,!0,!1,!1,this.multiLine||this._srnd),this.multiLine||this._srnd||this._realfake||(this.objBox.scrollTop=this.getRowById(this.getRowId(c)).offsetTop),b._r_select=null)},this.doKey=function(a){if(!a)return!0;if((a.target||a.srcElement).value!==window.undefined){var b=a.target||a.srcElement;if(!b.parentNode||-1==b.parentNode.className.indexOf("editable"))return!0}if(globalActiveDHTMLGridObject&&this!=globalActiveDHTMLGridObject)return globalActiveDHTMLGridObject.doKey(a);if(0==this.isActive)return!0;if(this._htkebl)return!0;if(!this.callEvent("onKeyPress",[a.keyCode,a.ctrlKey,a.shiftKey,a]))return!1;var c="k"+a.keyCode+"_"+(a.ctrlKey?1:0)+"_"+(a.shiftKey?1:0);if(this.cell){if(this._key_events[c])return!1===this._key_events[c].call(this)?!0:(a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,!1);this._key_events.k_other&&this._key_events.k_other.call(this,a)}return!0},this.selectRow=function(a,b,c,d){"object"!=typeof a&&(a=this.render_row(a)),this.selectCell(a,0,b,c,!1,d)},this.wasDblClicked=function(a){var b=this.getFirstParentOfType(_isIE?a.srcElement:a.target,"TD");if(b){var c=b.parentNode.idd;return this.callEvent("onRowDblClicked",[c,b._cellIndex])}},this._onHeaderClick=function(a,b){var c=this.grid;if(b=b||c.getFirstParentOfType(_isIE?event.srcElement:a.target,"TD"),null==this.grid.resized){if(!this.grid.callEvent("onHeaderClick",[b._cellIndexS,a||window.event]))return!1;c.sortField(b._cellIndexS,!1,b)}},this.deleteSelectedRows=function(){var a=this.selectedRows.length;if(0!=a){var b=this.selectedRows;this.selectedRows=dhtmlxArray();for(var c=a-1;c>=0;c--){var d=b[c];if(this.deleteRow(d.idd,d)){if(d==this.row)var e=c}else this.selectedRows[this.selectedRows.length]=d}if(e)try{e+1>this.rowsCol.length&&e--,this.selectCell(e,0,!0)}catch(f){this.row=null,this.cell=null}}},this.getSelectedRowId=function(){for(var a=new Array(0),b={},c=0;c<this.selectedRows.length;c++){var d=this.selectedRows[c].idd;b[d]||(a[a.length]=d,b[d]=!0)}return 0==a.length?null:a.join(this.delim)},this.getSelectedCellIndex=function(){return null!=this.cell?this.cell._cellIndex:-1},this.getColWidth=function(a){return parseInt(this.cellWidthPX[a])+(_isFF?2:0)},this.setColWidth=function(a,b){this._hrrar[a]||("px"==this.cellWidthType?this.cellWidthPX[a]=parseInt(b)-+(_isFF?2:0):this.cellWidthPC[a]=parseInt(b),this.setSizes())},this.getRowIndex=function(a){for(var b=0;b<this.rowsBuffer.length;b++)if(this.rowsBuffer[b]&&this.rowsBuffer[b].idd==a)return b;return-1},this.getRowId=function(a){return this.rowsBuffer[a]?this.rowsBuffer[a].idd:this.undefined},this.setRowId=function(a,b){this.changeRowId(this.getRowId(a),b)},this.changeRowId=function(a,b){if(a!=b){var c=this.rowsAr[a];c.idd=b,this.UserData[a]&&(this.UserData[b]=this.UserData[a],this.UserData[a]=null),this._h2&&this._h2.get[a]&&(this._h2.get[b]=this._h2.get[a],this._h2.get[b].id=b,delete this._h2.get[a]),this.rowsAr[a]=null,this.rowsAr[b]=c;for(var d=0;d<c.childNodes.length;d++)c.childNodes[d]._code&&(c.childNodes[d]._code=this._compileSCL(c.childNodes[d]._val,c.childNodes[d]));if(this._mat_links&&this._mat_links[a]){var e=this._mat_links[a];delete this._mat_links[a];for(var f in e)for(var d=0;d<e[f].length;d++)this._compileSCL(e[f][d].original,e[f][d])}this.callEvent("onRowIdChange",[a,b])}},this.setColumnIds=function(a){this.columnIds=a.split(this.delim)},this.setColumnId=function(a,b){this.columnIds[a]=b},this.getColIndexById=function(a){for(var b=0;b<this.columnIds.length;b++)if(this.columnIds[b]==a)return b},this.getColumnId=function(a){return this.columnIds[a]},this.getColumnLabel=function(a,b,c){for(var d=(c||this.hdr).rows[(b||0)+1],e=0;e<d.cells.length;e++)if(d.cells[e]._cellIndexS==a)return _isIE?d.cells[e].innerText:d.cells[e].textContent;return""},this.getFooterLabel=function(a,b){return this.getColumnLabel(a,b,this.ftr)},this.setRowTextBold=function(a){var b=this.getRowById(a);b&&(b.style.fontWeight="bold")},this.setRowTextStyle=function(a,b){var c=this.getRowById(a);if(c)for(var d=0;d<c.childNodes.length;d++){var e=c.childNodes[d]._attrs.style||"";this._hrrar&&this._hrrar[d]&&(e="display:none;"),c.childNodes[d].style.cssText=_isIE?e+"width:"+c.childNodes[d].style.width+";"+b:e+"width:"+c.childNodes[d].style.width+";"+b}},this.setRowColor=function(a,b){for(var c=this.getRowById(a),d=0;d<c.childNodes.length;d++)c.childNodes[d].bgColor=b},this.setCellTextStyle=function(a,b,c){var d=this.getRowById(a);if(d){var e=d.childNodes[d._childIndexes?d._childIndexes[b]:b];if(e){var f="";this._hrrar&&this._hrrar[b]&&(f="display:none;"),e.style.cssText=_isIE?f+"width:"+e.style.width+";"+c:f+"width:"+e.style.width+";"+c}}},this.setRowTextNormal=function(a){var b=this.getRowById(a);b&&(b.style.fontWeight="normal")},this.doesRowExist=function(a){return null!=this.getRowById(a)?!0:!1},this.getColumnsNum=function(){return this._cCount},this.moveRowUp=function(a){var b=this.getRowById(a);if(this.isTreeGrid())return this.moveRowUDTG(a,-1);var c=this.rowsCol._dhx_find(b);if(b.previousSibling&&0!=c){b.parentNode.insertBefore(b,b.previousSibling),this.rowsCol._dhx_swapItems(c,c-1),this.setSizes();var d=this.rowsBuffer._dhx_find(b);this.rowsBuffer._dhx_swapItems(d,d-1),this._cssEven&&this._fixAlterCss(c-1)}},this.moveRowDown=function(a){var b=this.getRowById(a);if(this.isTreeGrid())return this.moveRowUDTG(a,1);var c=this.rowsCol._dhx_find(b);if(b.nextSibling){this.rowsCol._dhx_swapItems(c,c+1),b.nextSibling.nextSibling?b.parentNode.insertBefore(b,b.nextSibling.nextSibling):b.parentNode.appendChild(b),this.setSizes();var d=this.rowsBuffer._dhx_find(b);this.rowsBuffer._dhx_swapItems(d,d+1),this._cssEven&&this._fixAlterCss(c)}},this.getCombo=function(a){return this.combos[a]||(this.combos[a]=new dhtmlXGridComboObject),this.combos[a]},this.setUserData=function(a,b,c){a||(a="gridglobaluserdata"),this.UserData[a]||(this.UserData[a]=new Hashtable),this.UserData[a].put(b,c)},this.getUserData=function(a,b){a||(a="gridglobaluserdata"),this.getRowById(a);var c=this.UserData[a];return c?c.get(b):""},this.setEditable=function(a){this.isEditable=convertStringToBoolean(a)},this.selectRowById=function(a,b,c,d){d||(d=!1),this.selectCell(this.getRowById(a),0,d,b,!1,c)},this.clearSelection=function(){this.editStop();for(var a=0;a<this.selectedRows.length;a++){var b=this.rowsAr[this.selectedRows[a].idd];b&&(b.className=b.className.replace(/rowselected/g,""))}this.selectedRows=dhtmlxArray(),this.row=null,null!=this.cell&&(this.cell.className=this.cell.className.replace(/cellselected/g,""),this.cell=null)},this.copyRowContent=function(a,b){var c=this.getRowById(a);if(this.isTreeGrid())this._copyTreeGridRowContent(c,a,b);else for(var d=0;d<c.cells.length;d++)this.cells(b,d).setValue(this.cells(a,d).getValue());_isIE||(this.getRowById(a).cells[0].height=c.cells[0].offsetHeight)},this.setFooterLabel=function(a,b,c){return this.setColumnLabel(a,b,c,this.ftr)},this.setColumnLabel=function(a,b,c,d){var e=(d||this.hdr).rows[c||1],f=e._childIndexes?e._childIndexes[a]:a;if(e.cells[f]){if(this.useImagesInHeader){e.cells[f].style.textAlign="left",e.cells[f].innerHTML="<img src='"+this.imgURL+b+"' onerror='this.src = \""+this.imgURL+"imageloaderror.gif\"'>";var g=new Image;g.src=this.imgURL+""+b.replace(/(\.[a-z]+)/,".des$1"),this.preloadImagesAr[this.preloadImagesAr.length]=g;var h=new Image;h.src=this.imgURL+""+b.replace(/(\.[a-z]+)/,".asc$1"),this.preloadImagesAr[this.preloadImagesAr.length]=h
}else{var i="<div class='hdrcell'>";if(-1!=b.indexOf("img:[")){var j=b.replace(/.*\[([^>]+)\].*/,"$1");b=b.substr(b.indexOf("]")+1,b.length),i+="<img width='18px' height='18px' align='absmiddle' src='"+j+"' hspace='2'>"}i+=b,i+="</div>",e.cells[f].innerHTML=i,this._hstyles[f]&&(e.cells[f].style.cssText=this._hstyles[f])}if(-1!=(b||"").indexOf("#")){var k=b.match(/(^|{)#([^}]+)(}|$)/);if(k){var l="_in_header_"+k[2];this[l]&&this[l](this.forceDivInHeader?e.cells[f].firstChild:e.cells[f],f,b.split(k[0]))}}}},this.clearAll=function(a){if(this.obj.rows[0]){this._h2&&(this._h2=new dhtmlxHierarchy,this._fake&&(this._realfake?this._h2=this._fake._h2:this._fake._h2=this._h2)),this.limit=this._limitC=0,this.editStop(!0),this._dLoadTimer&&window.clearTimeout(this._dLoadTimer),this._dload&&(this.objBox.scrollTop=0,this.limit=this._limitC||0,this._initDrF=!0);var b=this.rowsCol.length;b=this.obj.rows.length;for(var c=b-1;c>0;c--){var d=this.obj.rows[c];d.parentNode.removeChild(d)}if(a){this._master_row=null,this.obj.rows[0].parentNode.removeChild(this.obj.rows[0]);for(var c=this.hdr.rows.length-1;c>=0;c--){var d=this.hdr.rows[c];d.parentNode.removeChild(d)}this.ftr&&(this.ftr.parentNode.removeChild(this.ftr),this.ftr=null),this._aHead=this.ftr=this._aFoot=null,this._hrrar=[],this.columnIds=[],this.combos=[]}this.row=null,this.cell=null,this.rowsCol=dhtmlxArray(),this.rowsAr=[],this._RaSeCol=[],this.rowsBuffer=dhtmlxArray(),this.UserData=[],this.selectedRows=dhtmlxArray(),(this.pagingOn||this._srnd)&&(this.xmlFileUrl=""),this.pagingOn&&this.changePage(1),this._contextCallTimer&&window.clearTimeout(this._contextCallTimer),this._sst&&this.enableStableSorting(!0),this._fillers=this.undefined,this.setSortImgState(!1),this.setSizes(),this.callEvent("onClearAll",[])}},this.sortField=function(a,b,c){if(0==this.getRowsNum())return!1;var d=this.hdr.rows[0].cells[a];if(d&&"TH"==d.tagName&&this.fldSort.length-1>=d._cellIndex&&"na"!=this.fldSort[d._cellIndex]){var e=this.getSortingState(),f=e[0]==a&&"asc"==e[1]?"des":"asc";if(!this.callEvent("onBeforeSorting",[a,this.fldSort[a],f]))return;if(this.sortImg.src=this.imgURL+"sort_"+("asc"==f?"asc":"desc")+".gif",this.useImagesInHeader){var g=this.hdr.rows[1].cells[d._cellIndex].firstChild;if(null!=this.fldSorted){var h=this.hdr.rows[1].cells[this.fldSorted._cellIndex].firstChild;h.src=h.src.replace(/(\.asc\.)|(\.des\.)/,".")}g.src=g.src.replace(/(\.[a-z]+)$/,"."+f+"$1")}this.sortRows(d._cellIndex,this.fldSort[d._cellIndex],f),this.fldSorted=d,this.r_fldSorted=c;{var i=this.hdr.rows[1],i=c.parentNode;i._childIndexes?i._childIndexes[d._cellIndex]:d._cellIndex}this.setSortImgPos(!1,!1,!1,c)}},this.setCustomSorting=function(func,col){this._customSorts||(this._customSorts=new Array),this._customSorts[col]="string"==typeof func?eval(func):func,this.fldSort[col]="cus"},this.enableHeaderImages=function(a){this.useImagesInHeader=a},this.setHeader=function(a,b,c){if("object"!=typeof a)var d=this._eSplit(a);else d=[].concat(a);for(var e=new Array(0),f=new dhtmlxArray(0),g=new Array(0),h=new Array(0),i=new Array(0),j=0;j<d.length;j++)e[e.length]=Math.round(100/d.length),f[f.length]="ed",g[g.length]="left",h[h.length]="",i[i.length]="na";this.splitSign=b||"#cspan",this.hdrLabels=d,this.cellWidth=e,this.initCellWidth.length||this.setInitWidthsP(e.join(this.delim),!0),this.cellType=f,this.cellAlign=g,this.cellVAlign=h,this.fldSort=i,this._hstyles=c||[]},this._eSplit=function(a){if(![].push)return a.split(this.delim);var b="r"+(new Date).valueOf(),c=this.delim.replace(/([\|\+\*\^])/g,"\\$1");return(a||"").replace(RegExp(c,"g"),b).replace(RegExp("\\\\"+b,"g"),this.delim).split(b)},this.getColType=function(a){return this.cellType[a]},this.getColTypeById=function(a){return this.cellType[this.getColIndexById(a)]},this.setColTypes=function(a){this.cellType=dhtmlxArray(a.split(this.delim)),this._strangeParams=new Array;for(var b=0;b<this.cellType.length;b++){if(-1!=this.cellType[b].indexOf("[")){var c=this.cellType[b].split(/[\[\]]+/g);this.cellType[b]=c[0],this.defVal[b]=c[1],0==c[1].indexOf("=")&&(this.cellType[b]="math",this._strangeParams[b]=c[0])}window["eXcell_"+this.cellType[b]]||dhtmlxError.throwError("Configuration","Incorrect cell type: "+this.cellType[b],[this,this.cellType[b]])}},this.setColSorting=function(a){this.fldSort=a.split(this.delim);for(var b=0;b<this.fldSort.length;b++)this.fldSort[b].length>4&&"function"==typeof window[this.fldSort[b]]&&(this._customSorts||(this._customSorts=new Array),this._customSorts[b]=window[this.fldSort[b]],this.fldSort[b]="cus")},this.setColAlign=function(a){this.cellAlign=a.split(this.delim)},this.setColVAlign=function(a){this.cellVAlign=a.split(this.delim)},this.setNoHeader=function(a){this.noHeader=convertStringToBoolean(a)},this.showRow=function(a){this.getRowById(a),this._h2&&this.openItem(this._h2.get[a].parent.id);for(var b=this.getRowById(a).childNodes[0];b&&"none"==b.style.display;)b=b.nextSibling;b&&this.moveToVisible(b,!0)},this.setStyle=function(a,b,c,d){this.ssModifier=[a,b,c,c,d];for(var e=["#"+this.entBox.id+" table.hdr td","#"+this.entBox.id+" table.obj td","#"+this.entBox.id+" table.obj tr.rowselected td.cellselected","#"+this.entBox.id+" table.obj td.cellselected","#"+this.entBox.id+" table.obj tr.rowselected td"],f=0;f<e.length;f++)this.ssModifier[f]&&(_isIE?document.styleSheets[0].addRule(e[f],this.ssModifier[f]):document.styleSheets[0].insertRule(e[f]+" {"+this.ssModifier[f]+" };",0))},this.setColumnColor=function(a){this.columnColor=a.split(this.delim)},this.enableAlterCss=function(a,b,c,d){(a||b)&&this.attachEvent("onGridReconstructed",function(){this._fixAlterCss(),this._fake&&this._fake._fixAlterCss()}),this._cssSP=c,this._cssSU=d,this._cssEven=a,this._cssUnEven=b},this._fixAlterCss=function(a){if(this._cssSP&&this._h2)return this._fixAlterCssTGR(a);if(this._cssEven||this._cssUnEven){a=a||0;for(var b=a,c=a;c<this.rowsCol.length;c++)this.rowsCol[c]&&"none"!=this.rowsCol[c].style.display&&(this.rowsCol[c].className=-1!=this.rowsCol[c].className.indexOf("rowselected")?b%2==1?this._cssUnEven+" rowselected "+(this.rowsCol[c]._css||""):this._cssEven+" rowselected "+(this.rowsCol[c]._css||""):b%2==1?this._cssUnEven+" "+(this.rowsCol[c]._css||""):this._cssEven+" "+(this.rowsCol[c]._css||""),b++)}},this.clearChangedState=function(){for(var a=0;a<this.rowsCol.length;a++)for(var b=this.rowsCol[a],c=b.childNodes.length,d=0;c>d;d++)b.childNodes[d].wasChanged=!1},this.getChangedRows=function(a){var b=new Array;return this.forEachRow(function(c){var d=this.rowsAr[c];if("TR"==d.tagName){var e=d.childNodes.length;if(a&&d._added)b[b.length]=d.idd;else for(var f=0;e>f;f++)if(d.childNodes[f].wasChanged){b[b.length]=d.idd;break}}}),b.join(this.delim)},this._sUDa=!1,this._sAll=!1,this.setSerializationLevel=function(a,b,c,d,e,f){this._sUDa=a,this._sAll=b,this._sConfig=c,this._chAttr=d,this._onlChAttr=e,this._asCDATA=f},this.setSerializableColumns=function(a){if(!a)return void(this._srClmn=null);this._srClmn=(a||"").split(",");for(var b=0;b<this._srClmn.length;b++)this._srClmn[b]=convertStringToBoolean(this._srClmn[b])},this._serialise=function(){this.editStop();var a=[],b="</"+this.xml.s_row+">";if(this.isTreeGrid())this._h2.forEachChildF(0,function(b){var c=this._serializeRow(this.render_row_tree(-1,b.id));return a.push(c),c?!0:!1},this,function(){a.push(b)});else for(var c=0;c<this.rowsBuffer.length;c++)if(this.rowsBuffer[c]){var d=this._serializeRow(this.render_row(c));a.push(d),d&&a.push(b)}return[a.join("")]},this._serializeRow=function(a,b){var c=[],d=this.xml.row_attrs,e=this.xml.cell_attrs;if(c.push("<"+this.xml.s_row),c.push(" id='"+a.idd+"'"),this._sAll&&-1!=this.selectedRows._dhx_find(a)&&c.push(" selected='1'"),this._h2&&"minus"==this._h2.get[a.idd].state&&c.push(" open='1'"),d.length)for(var b=0;b<d.length;b++)c.push(" "+d[b]+"='"+a._attrs[d[b]]+"'");if(c.push(">"),this._sUDa&&this.UserData[a.idd]){keysAr=this.UserData[a.idd].getKeys();for(var f=0;f<keysAr.length;f++)c.push("<userdata name='"+keysAr[f]+"'>"+(this._asCDATA?"<![CDATA[":"")+this.UserData[a.idd].get(keysAr[f])+(this._asCDATA?"]]>":"")+"</userdata>")}for(var g=!1,h=0;h<this._cCount;h++)if(!this._srClmn||this._srClmn[h]){var i=this.cells3(a,h);if(c.push("<cell"),e.length)for(var b=0;b<e.length;b++)c.push(" "+e[b]+"='"+i.cell._attrs[e[b]]+"'");if(zxVal=i[this._agetm](),this._asCDATA&&(zxVal="<![CDATA["+zxVal+"]]>"),this._ecspn&&i.cell.colSpan&&i.cell.colSpan>1&&c.push(' colspan="'+i.cell.colSpan+'" '),this._chAttr?i.wasChanged()&&(c.push(' changed="1"'),g=!0):this._onlChAttr&&i.wasChanged()&&(g=!0),c.push(this._sAll&&"tree"==this.cellType[h]?(this._h2?" image='"+this._h2.get[a.idd].image+"'":"")+">"+zxVal+"</cell>":">"+zxVal+"</cell>"),this._ecspn&&i.cell.colSpan)for(var j=0;j<i.cell.colSpan-1;j++)c.push("<cell/>"),h++}return!this._onlChAttr||g||a._added?c.join(""):""},this._serialiseConfig=function(){for(var a="<head>",b=0;b<this.hdr.rows[0].cells.length;b++)if(!this._srClmn||this._srClmn[b]){var c=this.fldSort[b];"cus"==c&&(c=this._customSorts[b].toString(),c=c.replace(/function[\ ]*/,"").replace(/\([^\f]*/,"")),a+="<column width='"+this.cellWidthPX[b]+"' align='"+this.cellAlign[b]+"' type='"+this.cellType[b]+"' sort='"+(c||"na")+"' color='"+this.columnColor[b]+"'"+(this.columnIds[b]?" id='"+this.columnIds[b]+"'":"")+">",a+=this._asCDATA?"<![CDATA["+this.getHeaderCol(b)+"]]>":this.getHeaderCol(b);var d=this.getCombo(b);if(d)for(var e=0;e<d.keys.length;e++)a+="<option value='"+d.keys[e]+"'>"+d.values[e]+"</option>";a+="</column>"}return a+="</head>"},this.serialize=function(){var a='<?xml version="1.0"?><rows>';if(this._agetm=this._mathSerialization?"getMathValue":"getValue",this._sUDa&&this.UserData.gridglobaluserdata)for(var b=this.UserData.gridglobaluserdata.getKeys(),c=0;c<b.length;c++)a+="<userdata name='"+b[c]+"'>"+this.UserData.gridglobaluserdata.get(b[c])+"</userdata>";return this._sConfig&&(a+=this._serialiseConfig()),a+=this._serialise(),a+="</rows>"},this.getPosition=function(a,b){if(!b)var b=document.body;for(var c=a,d=0,e=0;c&&c!=b;)d+=c.offsetLeft-c.scrollLeft,e+=c.offsetTop-c.scrollTop,c=c.offsetParent;return b==document.body&&(_isIE?(document.documentElement.scrollTop&&(e+=document.documentElement.scrollTop),document.documentElement.scrollLeft&&(d+=document.documentElement.scrollLeft)):_isFF||(d+=document.body.offsetLeft,e+=document.body.offsetTop)),new Array(d,e)},this.getFirstParentOfType=function(a,b){for(;a&&a.tagName!=b&&"BODY"!=a.tagName;)a=a.parentNode;return a},this.objBox.onscroll=function(){this.grid._doOnScroll()},(!_isOpera||_OperaRv>8.5)&&(this.hdr.onmousemove=function(a){this.grid.changeCursorState(a||window.event)},this.hdr.onmousedown=function(a){return this.grid.startColResize(a||window.event)}),this.obj.onmousemove=this._drawTooltip,this.obj.onclick=function(a){this.grid._doClick(a||window.event),this.grid._sclE&&this.grid.editCell(a||window.event),(a||event).cancelBubble=!0},_isMacOS?this.entBox.oncontextmenu=function(a){return this.grid._doContClick(a||window.event)}:(this.entBox.onmousedown=function(a){return this.grid._doContClick(a||window.event)},this.entBox.oncontextmenu=function(a){return(a||event).cancelBubble=!0,!this._ctmndx}),this.obj.ondblclick=function(a){return this.grid.wasDblClicked(a||window.event)?(this.grid._dclE&&this.grid.editCell(a||window.event),(a||event).cancelBubble=!0,_isOpera?!1:void 0):!1},this.hdr.onclick=this._onHeaderClick,this.sortImg.onclick=function(){self._onHeaderClick.apply({grid:self},[null,self.r_fldSorted])},this.hdr.ondblclick=this._onHeaderDblClick,document.body._dhtmlxgrid_onkeydown||(dhtmlxEvent(document,_isOpera?"keypress":"keydown",function(a){return globalActiveDHTMLGridObject?globalActiveDHTMLGridObject.doKey(a||window.event):void 0}),document.body._dhtmlxgrid_onkeydown=!0),dhtmlxEvent(document.body,"click",function(){self.editStop&&self.editStop()}),this.entBox.onbeforeactivate=function(){this._still_active=null,this.grid.setActive(),event.cancelBubble=!0},this.entBox.onbeforedeactivate=function(){this.grid._still_active?this.grid._still_active=null:this.grid.isActive=!1,event.cancelBubble=!0},-1!=this.entBox.style.height.toString().indexOf("%")&&(this._delta_y=this.entBox.style.height),-1!=this.entBox.style.width.toString().indexOf("%")&&(this._delta_x=this.entBox.style.width),(this._delta_x||this._delta_y)&&this._setAutoResize(),this.setColHidden=this.setColumnsVisibility,this.enableCollSpan=this.enableColSpan,this.setMultiselect=this.enableMultiselect,this.setMultiLine=this.enableMultiline,this.deleteSelectedItem=this.deleteSelectedRows,this.getSelectedId=this.getSelectedRowId,this.getHeaderCol=this.getColumnLabel,this.isItemExists=this.doesRowExist,this.getColumnCount=this.getColumnsNum,this.setSelectedRow=this.selectRowById,this.setHeaderCol=this.setColumnLabel,this.preventIECashing=this.preventIECaching,this.enableAutoHeigth=this.enableAutoHeight,this.getUID=this.uid,this}function dhtmlXGridCellObject(a){this.destructor=function(){return this.cell.obj=null,this.cell=null,this.grid=null,this.base=null,null},this.cell=a,this.getValue=function(){return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell.innerHTML._dhx_trim()},this.getMathValue=function(){return this.cell.original?this.cell.original:this.getValue()},this.getFont=function(){return arOut=new Array(3),this.cell.style.fontFamily&&(arOut[0]=this.cell.style.fontFamily),("bold"==this.cell.style.fontWeight||"bold"==this.cell.parentNode.style.fontWeight)&&(arOut[1]="bold"),("italic"==this.cell.style.fontStyle||"italic"==this.cell.parentNode.style.fontWeight)&&(arOut[1]+="italic"),arOut[2]=this.cell.style.fontSize?this.cell.style.fontSize:"",arOut.join("-")},this.getTextColor=function(){return this.cell.style.color?this.cell.style.color:"#000000"},this.getBgColor=function(){return this.cell.bgColor?this.cell.bgColor:"#FFFFFF"},this.getHorAlign=function(){return this.cell.style.textAlign?this.cell.style.textAlign:this.cell.style.textAlign?this.cell.style.textAlign:"left"},this.getWidth=function(){return this.cell.scrollWidth},this.setFont=function(a){fntAr=a.split("-"),this.cell.style.fontFamily=fntAr[0],this.cell.style.fontSize=fntAr[fntAr.length-1],3==fntAr.length&&(/bold/.test(fntAr[1])&&(this.cell.style.fontWeight="bold"),/italic/.test(fntAr[1])&&(this.cell.style.fontStyle="italic"),/underline/.test(fntAr[1])&&(this.cell.style.textDecoration="underline"))},this.setTextColor=function(a){this.cell.style.color=a},this.setBgColor=function(a){""==a&&(a=null),this.cell.bgColor=a},this.setHorAlign=function(a){this.cell.style.textAlign=1==a.length?"c"==a?"center":"l"==a?"left":"right":a},this.wasChanged=function(){return this.cell.wasChanged?!0:!1},this.isCheckbox=function(){var a=this.cell.firstChild;return a&&"INPUT"==a.tagName?(type=a.type,"radio"==type||"checkbox"==type?!0:!1):!1},this.isChecked=function(){return this.isCheckbox()?this.cell.firstChild.checked:void 0},this.isDisabled=function(){return this.cell._disabled},this.setChecked=function(a){this.isCheckbox()&&("true"!=a&&1!=a&&(a=!1),this.cell.firstChild.checked=a)},this.setDisabled=function(a){"true"!=a&&1!=a&&(a=!1),this.isCheckbox()&&(this.cell.firstChild.disabled=a,this.disabledF&&this.disabledF(a)),this.cell._disabled=a}}function eXcell(){this.obj=null,this.val=null,this.changeState=function(){return!1},this.edit=function(){this.val=this.getValue()},this.detach=function(){return!1},this.getPosition=function(a){for(var b=a,c=0,d=0;"BODY"!=b.tagName;)c+=b.offsetLeft,d+=b.offsetTop,b=b.offsetParent;return new Array(c,d)}}function eXcell_ed(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.edit=function(){this.cell.atag=!this.grid.multiLine&&(_isKHTML||_isMacOS||_isFF)?"INPUT":"TEXTAREA",this.val=this.getValue(),this.obj=document.createElement(this.cell.atag),this.obj.setAttribute("autocomplete","off"),this.obj.style.height=this.cell.offsetHeight-(_isIE?4:2)+"px",this.obj.className="dhx_combo_edit",this.obj.wrap="soft",this.obj.style.textAlign=this.cell.style.textAlign,this.obj.onclick=function(a){(a||event).cancelBubble=!0},this.obj.onmousedown=function(a){(a||event).cancelBubble=!0},this.obj.value=this.val,this.cell.innerHTML="",this.cell.appendChild(this.obj),_isFF&&(this.obj.style.overflow="visible",this.grid.multiLine&&this.obj.offsetHeight>=18&&this.obj.offsetHeight<40&&(this.obj.style.height="36px",this.obj.style.overflow="scroll")),this.obj.onselectstart=function(a){return a||(a=event),a.cancelBubble=!0,!0},_isIE&&this.obj.focus(),this.obj.focus()},this.getValue=function(){return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()},this.detach=function(){return this.setValue(this.obj.value),this.val!=this.getValue()}}function eXcell_edtxt(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":_isIE?this.cell.innerText:this.cell.textContent},this.setValue=function(a){a&&""!=a.toString()._dhx_trim()?this.cell._clearCell=!1:(a=" ",this.cell._clearCell=!0),this.setCTxtValue(a)}}function eXcell_edn(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell._clearCell?"":this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex)},this.detach=function(){var a=this.obj.value;return this.setValue(a),this.val!=this.getValue()}}function eXcell_ch(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid,this.cell.obj=this),this.disabledF=function(a){this.cell.innerHTML=1==a||1==a?this.cell.innerHTML.replace("item_chk0.","item_chk0_dis.").replace("item_chk1.","item_chk1_dis."):this.cell.innerHTML.replace("item_chk0_dis.","item_chk0.").replace("item_chk1_dis.","item_chk1.")},this.changeState=function(){!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled()||(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),this.setValue("1"==this.val?"0":"1"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)},this.getValue=function(){return this.cell.chstate?this.cell.chstate.toString():"0"},this.isCheckbox=function(){return!0},this.isChecked=function(){return"1"==this.getValue()?!0:!1},this.setChecked=function(a){this.setValue(a.toString())},this.detach=function(){return this.val!=this.getValue()},this.edit=null}function eXcell_ra(a){this.base=eXcell_ch,this.base(a),this.grid=a.parentNode.grid,this.disabledF=function(a){this.cell.innerHTML=1==a||1==a?this.cell.innerHTML.replace("radio_chk0.","radio_chk0_dis.").replace("radio_chk1.","radio_chk1_dis."):this.cell.innerHTML.replace("radio_chk0_dis.","radio_chk0.").replace("radio_chk1_dis.","radio_chk1.")},this.changeState=function(a){(a!==!1||1!=this.getValue())&&this.grid.isEditable&&!this.cell.parentNode._locked&&(0!=this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),"1"==this.val?this.setValue("0",!0):this.setValue("1",!0),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)},this.edit=null}function eXcell_txt(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.edit=function(){this.val=this.getValue(),this.obj=document.createElement("TEXTAREA"),this.obj.className="dhx_textarea",this.obj.onclick=function(a){(a||event).cancelBubble=!0};var a=this.grid.getPosition(this.cell);if(this.cell._clearCell||(this.obj.value=this.val),this.obj.style.display="",this.obj.style.textAlign=this.cell.style.textAlign,_isFF){var b=document.createElement("DIV");b.appendChild(this.obj),b.style.overflow="auto",b.className="dhx_textarea",b.select=function(){this.firstChild.select()},this.obj.style.margin="0px 0px 0px 0px",this.obj.style.border="0px",this.obj=b}if(document.body.appendChild(this.obj),_isOpera&&(this.obj.onkeypress=function(a){return 9==a.keyCode?!1:void 0}),this.obj.onkeydown=function(a){var b=a||event;return 9==b.keyCode?(globalActiveDHTMLGridObject.entBox.focus(),globalActiveDHTMLGridObject.doKey({keyCode:b.keyCode,shiftKey:b.shiftKey,srcElement:"0"}),!1):void 0},this.obj.style.left=a[0]+"px",this.obj.style.top=a[1]+this.cell.offsetHeight+"px",this.cell.offsetWidth<200)var c=200;else var c=this.cell.offsetWidth;this.obj.style.width=c+(_isFF?18:16)+"px",_isFF&&(this.obj.firstChild.style.width=parseInt(this.obj.style.width)+"px",this.obj.firstChild.style.height=this.obj.offsetHeight-3+"px"),_isIE&&(this.obj.select(),this.obj.value=this.obj.value),_isFF?this.obj.firstChild.focus():this.obj.focus()},this.detach=function(){var a="";return a=_isFF?this.obj.firstChild.value:this.obj.value,this.cell._clearCell=""==a?!0:!1,this.setValue(a),document.body.removeChild(this.obj),this.obj=null,this.val!=this.getValue()},this.getValue=function(){return this.obj?_isFF?this.obj.firstChild.value:this.obj.value:this.cell._clearCell?"":this.grid.multiLine?this.cell.innerHTML.replace(/<br[^>]*>/gi,"\n")._dhx_trim():this.cell._brval||this.cell.innerHTML}}function eXcell_txttxt(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell._clearCell?"":!this.grid.multiLine&&this.cell._brval?this.cell._brval:_isIE?this.cell.innerText:this.cell.textContent},this.setValue=function(a){this.cell._brval=a,a&&""!=a.toString()._dhx_trim()?this.cell._clearCell=!1:(a=" ",this.cell._clearCell=!0),this.setCTxtValue(a)}}function eXcell_co(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid,this.combo=this.cell._combo||this.grid.getCombo(this.cell._cellIndex),this.editable=!0),this.shiftNext=function(){var a=this.list.options[this.list.selectedIndex+1];return a&&(a.selected=!0),this.obj.value=this.list.options[this.list.selectedIndex].text,!0},this.shiftPrev=function(){if(0!=this.list.selectedIndex){var a=this.list.options[this.list.selectedIndex-1];a&&(a.selected=!0),this.obj.value=this.list.options[this.list.selectedIndex].text}return!0},this.edit=function(){this.val=this.getValue(),this.text=this.getText()._dhx_trim();var a=this.grid.getPosition(this.cell);this.obj=document.createElement("TEXTAREA"),this.obj.className="dhx_combo_edit",this.obj.style.height=this.cell.offsetHeight-4+"px",this.obj.wrap="soft",this.obj.style.textAlign=this.cell.style.textAlign,this.obj.onclick=function(a){(a||event).cancelBubble=!0},this.obj.value=this.text,this.obj.onselectstart=function(a){return a||(a=event),a.cancelBubble=!0,!0};var b=this;this.obj.onkeyup=function(a){var c=(a||event).keyCode;if(38!=c&&40!=c&&9!=c)for(var d=this.readonly?String.fromCharCode(c):this.value,e=b.list.options,f=0;f<e.length;f++)if(0==e[f].text.indexOf(d))return e[f].selected=!0},this.list=document.createElement("SELECT"),this.list.className="dhx_combo_select",this.list.style.width=this.cell.offsetWidth+"px",this.list.style.left=a[0]+"px",this.list.style.top=a[1]+this.cell.offsetHeight+"px",this.list.onclick=function(a){var c=a||window.event,d=c.target||c.srcElement;"OPTION"==d.tagName&&(d=d.parentNode),b.setValue(d.value),b.editable=!1,b.grid.editStop()};for(var c=this.combo.getKeys(),d=!1,e=0,f=0;f<c.length;f++){var g=this.combo.get(c[f]);this.list.options[this.list.options.length]=new Option(g,c[f]),c[f]==this.val&&(e=this.list.options.length-1,d=!0)}0==d&&(this.list.options[this.list.options.length]=new Option(this.text,null===this.val?"":this.val),e=this.list.options.length-1),document.body.appendChild(this.list),this.list.size="6",this.cstate=1,this.editable?this.cell.innerHTML="":(this.obj.style.width="1px",this.obj.style.height="1px"),this.cell.appendChild(this.obj),this.list.options[e].selected=!0,(!_isFF||this.editable)&&(this.obj.focus(),this.obj.focus()),this.editable||(this.obj.style.visibility="hidden",this.list.focus(),this.list.onkeydown=function(a){return a=a||window.event,b.grid.setActive(!0),a.keyCode<30?b.grid.doKey({target:b.cell,keyCode:a.keyCode,shiftKey:a.shiftKey,ctrlKey:a.ctrlKey}):void 0})},this.getValue=function(){return this.cell.combo_value==window.undefined?"":this.cell.combo_value},this.detach=function(){if(this.val!=this.getValue()&&(this.cell.wasChanged=!0),null!=this.list.parentNode)if(this.editable){var a=this.list.options[this.list.selectedIndex];this.setValue(a&&a.text==this.obj.value?this.list.value:this.obj.value)}else this.setValue(this.list.value);return this.list.parentNode&&this.list.parentNode.removeChild(this.list),this.obj.parentNode&&this.obj.parentNode.removeChild(this.obj),this.val!=this.getValue()}}function eXcell_coro(a){this.base=eXcell_co,this.base(a),this.editable=!1}function eXcell_cotxt(a){this.base=eXcell_co,this.base(a)}function eXcell_corotxt(a){this.base=eXcell_co,this.base(a),this.editable=!1}function eXcell_cp(a){try{this.cell=a,this.grid=this.cell.parentNode.grid}catch(b){}this.edit=function(){this.val=this.getValue(),this.obj=document.createElement("SPAN"),this.obj.style.border="1px solid black",this.obj.style.position="absolute";var a=this.grid.getPosition(this.cell);this.colorPanel(4,this.obj),document.body.appendChild(this.obj),this.obj.style.left=a[0]+"px",this.obj.style.top=a[1]+this.cell.offsetHeight+"px"},this.toolDNum=function(a){return 1==a.length&&(a="0"+a),a},this.colorPanel=function(a,b){var c=document.createElement("TABLE");b.appendChild(c),c.cellSpacing=0,c.editor_obj=this,c.style.cursor="default",c.onclick=function(a){var b=a||window.event,c=b.target||b.srcElement,d=c.parentNode.parentNode.parentNode.editor_obj;d.setValue(c._bg),d.grid.editStop()};for(var d=256/a,e=0;256/d>=e;e++)for(var f=c.insertRow(e),g=0;256/d>=g;g++)for(var h=0;256/d>=h;h++){R=new Number(d*e)-(0==e?0:1),G=new Number(d*g)-(0==g?0:1),B=new Number(d*h)-(0==h?0:1);var i=this.toolDNum(R.toString(16))+""+this.toolDNum(G.toString(16))+this.toolDNum(B.toString(16)),j=f.insertCell(g);j.width="10px",j.innerHTML="&nbsp;",j.title=i.toUpperCase(),j.style.backgroundColor="#"+i,j._bg="#"+i,null!=this.val&&"#"+i.toUpperCase()==this.val.toUpperCase()&&(j.style.border="2px solid white")}},this.getValue=function(){return this.cell.firstChild._bg||""},this.getRed=function(){return Number(parseInt(this.getValue().substr(1,2),16))},this.getGreen=function(){return Number(parseInt(this.getValue().substr(3,2),16))},this.getBlue=function(){return Number(parseInt(this.getValue().substr(5,2),16))},this.detach=function(){return null!=this.obj.offsetParent&&document.body.removeChild(this.obj),this.val!=this.getValue()}}function eXcell_img(a){try{this.cell=a,this.grid=this.cell.parentNode.grid}catch(b){}this.getValue=function(){if("IMG"==this.cell.firstChild.tagName)return this.cell.firstChild.src+(null!=this.cell.titFl?"^"+this.cell.tit:"");if("A"==this.cell.firstChild.tagName){var a=this.cell.firstChild.firstChild.src+(null!=this.cell.titFl?"^"+this.cell.tit:"");return a+="^"+this.cell.lnk,this.cell.trg&&(a+="^"+this.cell.trg),a}},this.isDisabled=function(){return!0}}function eXcell_price(a){this.base=eXcell_ed,this.base(a),this.getValue=function(){return this.cell.childNodes.length>1?this.cell.childNodes[1].innerHTML.toString()._dhx_trim():"0"}}function eXcell_dyn(a){this.base=eXcell_ed,this.base(a),this.getValue=function(){return this.cell.firstChild.childNodes[1].innerHTML.toString()._dhx_trim()}}function eXcell_ro(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.edit=function(){},this.isDisabled=function(){return!0},this.getValue=function(){return this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()}}function eXcell_ron(a){this.cell=a,this.grid=this.cell.parentNode.grid,this.edit=function(){},this.isDisabled=function(){return!0},this.getValue=function(){return this.cell._clearCell?"":this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex)}}function eXcell_rotxt(a){this.cell=a,this.grid=this.cell.parentNode.grid,this.edit=function(){},this.isDisabled=function(){return!0},this.setValue=function(a){a&&""!=a.toString()._dhx_trim()||(a=" "),this.setCTxtValue(a)},this.getValue=function(){return this.cell._clearCell?"":_isIE?this.cell.innerText:this.cell.textContent}}function dhtmlXGridComboObject(){return this.keys=new dhtmlxArray,this.values=new dhtmlxArray,this.put=function(a,b){for(var c=0;c<this.keys.length;c++)if(this.keys[c]==a)return this.values[c]=b,!0;this.values[this.values.length]=b,this.keys[this.keys.length]=a},this.get=function(a){for(var b=0;b<this.keys.length;b++)if(this.keys[b]==a)return this.values[b];return null},this.clear=function(){this.keys=new dhtmlxArray,this.values=new dhtmlxArray},this.remove=function(a){for(var b=0;b<this.keys.length;b++)if(this.keys[b]==a)return this.keys._dhx_removeAt(b),this.values._dhx_removeAt(b),!0},this.size=function(){for(var a=0,b=0;b<this.keys.length;b++)null!=this.keys[b]&&a++;return a},this.getKeys=function(){for(var a=new Array(0),b=0;b<this.keys.length;b++)null!=this.keys[b]&&(a[a.length]=this.keys[b]);return a},this.save=function(){this._save=new Array;for(var a=0;a<this.keys.length;a++)this._save[a]=[this.keys[a],this.values[a]]},this.restore=function(){if(this._save){this.keys[a]=new Array,this.values[a]=new Array;for(var a=0;a<this._save.length;a++)this.keys[a]=this._save[a][0],this.values[a]=this._save[a][1]}},this}function Hashtable(){return this.keys=new dhtmlxArray,this.values=new dhtmlxArray,this}function dragContext(a,b,c,d,e,f,g,h,i,j){return this.source=a||"grid",this.target=b||"grid",this.mode=c||"move",this.dropmode=d||"child",this.sid=e||0,this.tid=f,this.sobj=g||null,this.tobj=h||null,this.sExtra=i||null,this.tExtra=j||null,this}function eXcell_math(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.edit=function(){this.grid.editor=new eXcell_ed(this.cell),this.grid.editor.getValue=function(){return this.cell.original},this.grid.editor.setValue=this.setValue,this.grid.editor.edit()},this.isDisabled=function(){return!this.grid._mathEdit},this.setValue=function(a){a=this.grid._compileSCL(a,this.cell),this.grid._strangeParams[this.cell._cellIndex]?this.grid.cells5(this.cell,this.grid._strangeParams[this.cell._cellIndex]).setValue(a):(this.setCValue(a),this.cell._clearCell=!1)},this.getValue=function(){return this.grid._strangeParams[this.cell._cellIndex]?this.grid.cells5(this.cell,this.grid._strangeParams[this.cell._cellIndex]).getValue():this.cell.innerHTML}}function dhtmlXGridFromTable(obj,init){"object"!=typeof obj&&(obj=document.getElementById(obj)),obj.className="";var w=document.createElement("DIV");w.setAttribute("width",obj.getAttribute("gridWidth")||(obj.offsetWidth?obj.offsetWidth+"px":0)||(window.getComputedStyle?window.getComputedStyle(obj,null).width:obj.currentStyle?obj.currentStyle.width:0)),w.setAttribute("height",obj.getAttribute("gridHeight")||(obj.offsetHeight?obj.offsetHeight+"px":0)||(window.getComputedStyle?window.getComputedStyle(obj,null).height:obj.currentStyle?obj.currentStyle.height:0));var mr=obj,drag=obj.getAttribute("dragAndDrop");mr.parentNode.insertBefore(w,mr);var f=mr.getAttribute("name")||"name_"+(new Date).valueOf(),windowf=new dhtmlXGridObject(w);window[f]=windowf;var acs=mr.getAttribute("onbeforeinit"),acs2=mr.getAttribute("oninit");acs&&eval(acs),windowf.setImagePath(mr.getAttribute("imgpath")||""),init&&init(windowf);for(var hrow=mr.rows[0],za="",zb="",zc="",zd="",ze="",i=0;i<hrow.cells.length;i++){za+=(za?",":"")+hrow.cells[i].innerHTML;
var width=hrow.cells[i].getAttribute("width")||hrow.cells[i].offsetWidth||(window.getComputedStyle?window.getComputedStyle(hrow.cells[i],null).width:hrow.cells[i].currentStyle?hrow.cells[i].currentStyle.width:0);zb+=(zb?",":"")+("*"==width?width:parseInt(width)),zc+=(zc?",":"")+(hrow.cells[i].getAttribute("align")||"left"),zd+=(zd?",":"")+(hrow.cells[i].getAttribute("type")||"ed"),ze+=(ze?",":"")+(hrow.cells[i].getAttribute("sort")||"str");var f_a=hrow.cells[i].getAttribute("format");f_a&&(-1!=hrow.cells[i].getAttribute("type").toLowerCase().indexOf("calendar")?windowf._dtmask=f_a:windowf.setNumberFormat(f_a,i))}windowf.setHeader(za),windowf.setInitWidths(zb),windowf.setColAlign(zc),windowf.setColTypes(zd),windowf.setColSorting(ze),"auto"==obj.getAttribute("gridHeight")&&windowf.enableAutoHeigth(!0),obj.getAttribute("multiline")&&windowf.enableMultiline(!0);var lmn=mr.getAttribute("lightnavigation");lmn&&windowf.enableLightMouseNavigation(lmn);var evr=mr.getAttribute("evenrow"),uevr=mr.getAttribute("unevenrow");return(evr||uevr)&&windowf.enableAlterCss(evr,uevr),drag&&windowf.enableDragAndDrop(!0),windowf.init(),obj.getAttribute("split")&&windowf.splitAt(obj.getAttribute("split")),windowf._process_inner_html(mr,1),acs2&&eval(acs2),obj.parentNode.removeChild(obj,!0),windowf}function eXcell_sub_row(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.grid.getUserData(this.cell.parentNode.idd,"__sub_row")},this._setState=function(a,b){(b||this.cell).innerHTML="<img src='"+this.grid.imgURL+a+"' width='18' height='18' />",(b||this.cell).firstChild.onclick=this.grid._expandMonolite},this.open=function(){this.cell.firstChild.onclick(null,!0)},this.close=function(){this.cell.firstChild.onclick(null,!1,!0)},this.setValue=function(a){a&&this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",a),this._setState(a?"plus.gif":"blanc.gif")},this.setContent=function(a){this.cell.parentNode._expanded?(this.cell.parentNode._expanded.innerHTML=a,this.grid._detectHeight(this.cell.parentNode._expanded,this.cell,this.cell.parentNode._expanded.scrollHeight)):(this.cell._previous_content=null,this.setValue(a),this.cell._sub_row_type=null)},this.isDisabled=function(){return!0},this.getTitle=function(){return this.grid.getUserData(this.cell.parentNode.idd,"__sub_row")?"click to expand|collapse":""}}function eXcell_sub_row_ajax(a){this.base=eXcell_sub_row,this.base(a),this.setValue=function(a){a&&this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",a),this.cell._sub_row_type="ajax",this._setState(a?"plus.gif":"blanc.gif")}}function eXcell_sub_row_grid(a){this.base=eXcell_sub_row,this.base(a),this.setValue=function(a){a&&this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",a),this.cell._sub_row_type="grid",this._setState(a?"plus.gif":"blanc.gif")},this.getSubGrid=function(){return a._sub_grid?a._sub_grid:null}}function eXcell_combo(a){a&&(this.cell=a,this.grid=a.parentNode.grid,this.edit=function(){window.dhx_globalImgPath||(window.dhx_globalImgPath=this.grid.imgURL),this.val=this.getValue();var a=this.getText();this.cell._clearCell&&(a=""),this.cell.innerHTML="",this.combo=this.cell._brval?this.cell._brval:(this.grid._realfake?this.grid._fake:this.grid)._col_combos[this.cell._cellIndex],this.cell.appendChild(this.combo.DOMParent),this.combo.DOMParent.style.margin="0",this.grid.customListColor&&(this.combo.DOMlist.style.backgroundColor=this.grid.customListColor),this.combo.DOMelem_input.focus(),this.combo.setSize(this.cell.offsetWidth-2),this.combo.ncm=!0,this.combo._xml?this.combo.setComboText(a):-1!=this.combo.getIndexByValue(this.cell.combo_value)?this.combo.selectOption(this.combo.getIndexByValue(this.cell.combo_value)):this.combo.getOptionByLabel(a)?this.combo.selectOption(this.combo.getIndexByValue(this.combo.getOptionByLabel(a).value)):this.combo.setComboText(a),this.combo.ncm=!1,this.combo.openSelect()},this.selectComboOption=function(a,b){b.selectOption(b.getIndexByValue(b.getOptionByLabel(a).value))},this.getValue=function(){return this.cell.combo_value},this.getText=function(){return this.getTitle()},this.setValue=function(a){for(var b=0;b<this.cell.parentNode.childNodes.length;b++)this.cell.parentNode.childNodes[b].tabIndex=0;if("object"==typeof a){this.cell._brval=this.initCombo();var c=this.cell._cellIndex,d=this.cell.parentNode.idd;a.firstChild?this.cell.combo_value=a.firstChild.data:(this.cell.combo_value="&nbsp;",this.cell._clearCell=!0),this.setComboOptions(this.cell._brval,a,this.grid,c,d)}else{this.cell.combo_value=a;var e=null;(e=this.grid._col_combos[this.cell._cellIndex])&&(a=(e.getOption(a)||{}).text||a),(e=this.cell._brval)&&"object"==typeof this.cell._brval&&(a=(e.getOption(a)||{}).text||a),""==(a||"").toString()._dhx_trim()&&(a=null),null!==a?this.setCValue(a):(this.setCValue("&nbsp;",a),this.cell._clearCell=!0)}},this.detach=function(){this.cell.removeChild(this.combo.DOMParent);var a=this.cell.combo_value;return this.combo.getComboText()&&""!=this.combo.getComboText().toString()._dhx_trim()?(this.setCTxtValue(this.combo.getComboText(),this.combo.getActualValue()),this.cell._clearCell=!1):(this.setCValue("&nbsp;"),this.cell._clearCell=!0),this.combo._confirmSelection(),this.cell.combo_value=this.combo.getActualValue(),this.combo.closeAll(),this.grid._still_active=!0,this.grid.setActive(1),a!=this.cell.combo_value})}function eXcell_clist(a){try{this.cell=a,this.grid=this.cell.parentNode.grid}catch(b){}this.edit=function(){this.val=this.getValue();var a=this.cell._combo||this.grid.clists[this.cell._cellIndex];if(a){this.obj=document.createElement("DIV");for(var b=this.val.split(","),c="",d=0;d<a.length;d++){for(var e=!1,f=0;f<b.length;f++)a[d]==b[f]&&(e=!0);c+=e?"<div><input type='checkbox' checked='true' /><label>"+a[d]+"</label></div>":"<div><input type='checkbox' id='ch_lst_"+d+"'/><label>"+a[d]+"</label></div>"}c+="<div><input type='button' value='Apply' style='width:100px;font-size:8pt;' onclick='this.parentNode.parentNode.editor.grid.editStop();'/></div>",this.obj.editor=this,this.obj.innerHTML=c,document.body.appendChild(this.obj),this.obj.style.position="absolute",this.obj.className="dhx_clist",this.obj.onclick=function(a){return(a||event).cancelBubble=!0,!0};var g=this.grid.getPosition(this.cell);this.obj.style.left=g[0]+"px",this.obj.style.top=g[1]+this.cell.offsetHeight+"px",this.obj.getValue=function(){for(var a="",b=0;b<this.childNodes.length-1;b++)this.childNodes[b].childNodes[0].checked&&(a&&(a+=","),a+=this.childNodes[b].childNodes[1].innerHTML);return a}}},this.getValue=function(){return this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()},this.detach=function(){return this.obj&&(this.setValue(this.obj.getValue()),this.obj.editor=null,this.obj.parentNode.removeChild(this.obj),this.obj=null),this.val!=this.getValue()}}function eXcell_cntr(a){this.cell=a,this.grid=this.cell.parentNode.grid,this.grid._ex_cntr_ready||this._realfake||(this.grid._ex_cntr_ready=!0,this.grid._h2&&this.grid.attachEvent("onOpenEn",function(){this.resetCounter(a._cellIndex)}),this.grid.attachEvent("onBeforeSorting",function(){var b=this;return window.setTimeout(function(){b._fake&&!b._realfake&&a._cellIndex<b._fake._cCount?b._fake.resetCounter(a._cellIndex):b.resetCounter(a._cellIndex)},1),!0})),this.edit=function(){},this.getValue=function(){return this.cell.innerHTML},this.setValue=function(){this.cell.style.paddingRight="2px";var a=this.cell;window.setTimeout(function(){if(a.parentNode){var b=a.parentNode.rowIndex;(a.parentNode.grid.currentPage||0>b||a.parentNode.grid._srnd)&&(b=a.parentNode.grid.rowsBuffer._dhx_find(a.parentNode)+1),a.innerHTML=b,a.parentNode.grid._fake&&a._cellIndex<a.parentNode.grid._fake._cCount&&a.parentNode.grid._fake.rowsAr[a.parentNode.idd]&&a.parentNode.grid._fake.cells(a.parentNode.idd,a._cellIndex).setCValue(b),a=null}},100)}}function eXcell_link(a){this.cell=a,this.grid=this.cell.parentNode.grid,this.isDisabled=function(){return!0},this.edit=function(){},this.getValue=function(){return this.cell.firstChild.getAttribute?this.cell.firstChild.innerHTML+"^"+this.cell.firstChild.getAttribute("href"):""},this.setValue=function(a){if("number"!=typeof a&&(!a||""==a.toString()._dhx_trim()))return this.setCValue("&nbsp;",b),this.cell._clearCell=!0;var b=a.split("^");1==b.length?b[1]="":b.length>1&&(b[1]="href='"+b[1]+"'",b[1]+=3==b.length?" target='"+b[2]+"'":" target='_blank'"),this.setCValue("<a "+b[1]+" onclick='(_isIE?event:arguments[0]).cancelBubble = true;'>"+b[0]+"</a>",b)}}function eXcell_stree(a){if(a){if(this.cell=a,this.grid=this.cell.parentNode.grid,!this.grid._sub_trees)return;if(this._sub=this.grid._sub_trees[a._cellIndex],!this._sub)return;this._sindex=this._sub[1],this._sub=this._sub[0]}this.getValue=function(){return this.cell._val},this.setValue=function(a){this.cell._val=a,a=this._sub.getItemText(this.cell._val),this.setCValue(a||"&nbsp;",a)},this.edit=function(){this._sub.parentObject.style.display="block";var a=this.grid.getPosition(this.cell);this._sub.parentObject.style.top=a[1]+"px",this._sub.parentObject.style.left=a[0]+"px",this._sub.parentObject.style.position="absolute";var b=this.grid.editStop;this.grid.editStop=function(){},this.grid.editStop=b},this.detach=function(){if(this._sub.parentObject.style.display="none",null!=this.grid._sub_id){var a=this.cell._val;return this.setValue(this._sub.getSelectedItemId()),this.grid._sub_id=null,this.cell._val!=a}}}function xmlPointer(a){this.d=a}function dhtmlXTreeObject(a,b,c,d){if(_isIE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}this.parentObject="object"!=typeof a?document.getElementById(a):a,this.parentObject.style.overflow="hidden",this._itim_dg=!0,this.dlmtr=",",this.dropLower=!1,this.enableIEImageFix(),this.xmlstate=0,this.mytype="tree",this.smcheck=!0,this.width=b,this.height=c,this.rootId=d,this.childCalc=null,this.def_img_x="18px",this.def_img_y="18px",this.def_line_img_x="18px",this.def_line_img_y="18px",this._dragged=new Array,this._selected=new Array,this.style_pointer="pointer",_isIE&&(this.style_pointer="hand"),this._aimgs=!0,this.htmlcA=" [",this.htmlcB="]",this.lWin=window,this.cMenu=0,this.mlitems=0,this.iconURL="",this.dadmode=0,this.slowParse=!1,this.autoScroll=!0,this.hfMode=0,this.nodeCut=new Array,this.XMLsource=0,this.XMLloadingWarning=0,this._idpull={},this._pullSize=0,this.treeLinesOn=!0,this.tscheck=!1,this.timgen=!0,this.dpcpy=!1,this._ld_id=null,this._oie_onXLE=[],this.imPath=window.dhx_globalImgPath||"",this.checkArray=new Array("iconUncheckAll.gif","iconCheckAll.gif","iconCheckGray.gif","iconUncheckDis.gif","iconCheckDis.gif","iconCheckDis.gif"),this.radioArray=new Array("radio_off.gif","radio_on.gif","radio_on.gif","radio_off.gif","radio_on.gif","radio_on.gif"),this.lineArray=new Array("line2.gif","line3.gif","line4.gif","blank.gif","blank.gif","line1.gif"),this.minusArray=new Array("minus2.gif","minus3.gif","minus4.gif","minus.gif","minus5.gif"),this.plusArray=new Array("plus2.gif","plus3.gif","plus4.gif","plus.gif","plus5.gif"),this.imageArray=new Array("leaf.gif","folderOpen.gif","folderClosed.gif"),this.cutImg=new Array(0,0,0),this.cutImage="but_cut.gif",dhtmlxEventable(this),this.dragger=new dhtmlDragAndDropObject,this.htmlNode=new dhtmlXTreeItemObject(this.rootId,"",0,this),this.htmlNode.htmlNode.childNodes[0].childNodes[0].style.display="none",this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[0].className="hiddenRow",this.allTree=this._createSelf(),this.allTree.appendChild(this.htmlNode.htmlNode),_isFF&&(this.allTree.childNodes[0].width="100%",this.allTree.childNodes[0].style.overflow="hidden");var f=this;return this.allTree.onselectstart=new Function("return false;"),_isMacOS&&(this.allTree.oncontextmenu=function(a){return f._doContClick(a||window.event)}),this.allTree.onmousedown=function(a){return f._doContClick(a||window.event)},this.XMLLoader=new dtmlXMLLoaderObject(this._parseXMLTree,this,!0,this.no_cashe),_isIE&&this.preventIECashing(!0),this.selectionBar=document.createElement("DIV"),this.selectionBar.className="selectionBar",this.selectionBar.innerHTML="&nbsp;",this.selectionBar.style.display="none",this.allTree.appendChild(this.selectionBar),window.addEventListener&&window.addEventListener("unload",function(){try{f.destructor()}catch(a){}},!1),window.attachEvent&&window.attachEvent("onunload",function(){try{f.destructor()}catch(a){}}),this.setImagesPath=this.setImagePath,this.setIconsPath=this.setIconPath,this}function cObject(){return this}function dhtmlXTreeItemObject(a,b,c,d,e,f){return this.htmlNode="",this.acolor="",this.scolor="",this.tr=0,this.childsCount=0,this.tempDOMM=0,this.tempDOMU=0,this.dragSpan=0,this.dragMove=0,this.span=0,this.closeble=1,this.childNodes=new Array,this.userData=new cObject,this.checkstate=0,this.treeNod=d,this.label=b,this.parentObject=c,this.actionHandler=e,this.images=new Array(d.imageArray[0],d.imageArray[1],d.imageArray[2]),this.id=d._globalIdStorageAdd(a,this),this.htmlNode=this.treeNod.checkBoxOff?this.treeNod._createItem(1,this,f):this.treeNod._createItem(0,this,f),this.htmlNode.objBelong=this,this}function dhx_dragSomethingInTree(){this.lWin=window,this._createDragNode=function(a){var b=document.createElement("div");return b.style.position="absolute",b.innerHTML=a.innerHTML,b.style.zIndex=12,b},this._preventNsDrag=function(a){return(a||window.event).cancelBubble=!0,a&&a.preventDefault?(a.preventDefault(),!1):!1},this._nonTrivialNode=function(a,b,c,d){if(this._customDrop)return this._customDrop(a,d.img.id,b.id,c?c.id:null);var e=d.img.getAttribute("image")||"",f=d.img.id||"new",g=d.img.getAttribute("text")||(_isIE?d.img.innerText:d.img.textContent);a[c?"insertNewNext":"insertNewItem"](c?c.id:b.id,f,g,"",e,e,e)}}function jsonPointer(a,b){this.d=a,this.dp=b}function dhtmlXTreeFromHTML(a){"object"!=typeof a&&(a=document.getElementById(a));for(var c=a,d=c.id,e="",f=0;f<a.childNodes.length;f++)if("1"==a.childNodes[f].nodeType){if("XMP"==a.childNodes[f].tagName)for(var g=a.childNodes[f],h=0;h<g.childNodes.length;h++)e+=g.childNodes[h].data;else"ul"==a.childNodes[f].tagName.toLowerCase()&&(e=dhx_li2trees(a.childNodes[f],new Array,0));break}a.innerHTML="";var i=new dhtmlXTreeObject(a,"100%","100%",0),j=new Array;for(b in i)j[b.toLowerCase()]=b;for(var k=a.attributes,l=0;l<k.length;l++)if(0==k[l].name.indexOf("set")||0==k[l].name.indexOf("enable")){var m=k[l].name;i[m]||(m=j[k[l].name]),i[m].apply(i,k[l].value.split(","))}if("object"==typeof e){i.XMLloadingWarning=1;for(var n=0;n<e.length;n++){var c=i.insertNewItem(e[n][0],e[n][3],e[n][1]);e[n][2]&&i._setCheck(c,e[n][2])}i.XMLloadingWarning=0,i.lastLoadedXMLId=0,i._redrawFrom(i)}else i.loadXMLString("<tree id='0'>"+e+"</tree>");return window[d]=i,i}function dhx_init_trees(){for(var a=document.getElementsByTagName("div"),b=0;b<a.length;b++)"dhtmlxTree"==a[b].className&&dhtmlXTreeFromHTML(a[b])}function dhx_li2trees(a,b,c){for(var d=0;d<a.childNodes.length;d++){var e=a.childNodes[d];if(1==e.nodeType&&"li"==e.tagName.toLowerCase()){for(var f="",g=null,h=e.getAttribute("checked"),i=0;i<e.childNodes.length;i++){var j=e.childNodes[i];3==j.nodeType?f+=j.data:"ul"!=j.tagName.toLowerCase()?f+=dhx_outer_html(j):g=j}b[b.length]=[c,f,h,e.id||b.length+1],g&&(b=dhx_li2trees(g,b,e.id||b.length))}}return b}function dhx_outer_html(a){if(a.outerHTML)return a.outerHTML;var b=document.createElement("DIV");return b.appendChild(a.cloneNode(!0)),b=b.innerHTML}function setCookie(a,b){document.cookie=a+"="+b}function getCookie(a){var b=a+"=";if(document.cookie.length>0){var c=document.cookie.indexOf(b);if(-1!=c){c+=b.length;var d=document.cookie.indexOf(";",c);return-1==d&&(d=document.cookie.length),document.cookie.substring(c,d)}}}function dhtmlxHierarchy(){var a={id:0,childs:[],level:-1,parent:null,index:0,state:dhtmlXGridObject._emptyLineImg};return this.order=[a],this.get={0:a},this.swap=function(a,b){var c=a.parent,d=a.index;c.childs[d]=b,c.childs[b.index]=a,a.index=b.index,b.index=d},this.forEachChildF=function(a,b,c,d){for(var e=this.get[a],f=0;f<e.childs.length;f++)b.apply(c||this,[e.childs[f]])&&(e.childs[f].childs.length&&this.forEachChildF(e.childs[f].id,b,c,d),d&&d.call(c||this,e.childs[f]))},this.forEachChild=function(a,b,c){for(var d=this.get[a],e=0;e<d.childs.length;e++)b.apply(c||this,[d.childs[e]]),d.childs[e].childs.length&&this.forEachChild(d.childs[e].id,b,c)},this.change=function(a,b,c){var d=this.get[a];d[b]!=c&&(d[b]=c,d.update=!0)},this.add=function(a,b){return this.addAfter(a,b)},this.addAfter=function(a,b,c,d){var e=this.get[b||0];if(c)var f=this.get[c].index+(d?0:1);else var f=e.childs.length;var g={id:a,childs:[],level:e.level+1,parent:e,index:f,state:dhtmlXGridObject._emptyLineImg};if(e.state==dhtmlXGridObject._emptyLineImg&&this.change(b,"state",0==b?"minus":"plus"),c){for(var h=f;h<e.childs.length;h++)e.childs[h].index++;e.childs=e.childs.slice(0,f).concat([g]).concat(e.childs.slice(f,e.childs.length))}else e.childs.push(g);return this.get[a]=g,g},this.addBefore=function(a,b,c){return this.addAfter(a,b,c,!0)},this.remove=function(a){for(var b=this.get[a||0],c=0;c<b.childs.length;c++)this.deleteAll(b.childs[c].id);b.childs=[],b.parent.childs=b.parent.childs.slice(0,b.index).concat(b.parent.childs.slice(b.index+1));for(var c=b.index;c<b.parent.childs.length;c++)b.parent.childs[c].index--;delete this.get[a]},this.deleteAll=function(a){for(var b=this.get[a||0],c=0;c<b.childs.length;c++)this.deleteAll(b.childs[c].id);b.childs=[],delete this.get[a]},this}function eXcell_tree(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.isDisabled=function(){return this.grid._edtc},this.edit=function(){this.er||this.grid._edtc||(this.er=this.cell.parentNode.valTag,this.val=this.er.innerHTML,this.cell.atag=!this.grid.multiLine&&(_isKHTML||_isMacOS||_isFF)?"INPUT":"TEXTAREA",this.er.innerHTML="<"+this.cell.atag+" class='dhx_combo_edit' type='text' style='height:"+(this.cell.offsetHeight-6)+"px;width:100%;border:0px;margin:0px;padding:0px;padding-top:"+(_isFF?1:2)+"px;overflow:hidden;'></"+this.cell.atag+">",this.er.childNodes[0].onmousedown=function(a){(a||event).cancelBubble=!0},this.er.childNodes[0].onselectstart=function(a){return a||(a=event),a.cancelBubble=!0,!0},_isFF&&(this.er.style.top="1px"),this.er.className+=" editable",this.er.firstChild.onclick=function(a){(a||event).cancelBubble=!0},this.er.firstChild.value=this.val,this.obj=this.er.firstChild,this.er.firstChild.style.width=Math.max(0,this.cell.offsetWidth-this.er.offsetLeft)+"px",this.er.firstChild.focus())},this.detach=function(){if(this.er){this.setLabel(this.er.firstChild.value),this.er.className=this.er.className.replace("editable","");var a=this.val!=this.er.innerHTML;return _isFF&&(this.er.style.top="2px"),this.obj=this.er=null,a}},this.getValue=function(){return this.getLabel()},this.setImage=function(a){this.cell.parentNode.imgTag.nextSibling.src=this.grid.iconURL+a,this.grid._h2.get[this.cell.parentNode.idd].image=a},this.getImage=function(){this.grid._h2.get[this.cell.parentNode.idd].image},this.setLabel=function(a){this.setValueA(a)},this.getLabel=function(){return this.cell.parentNode.valTag.innerHTML}}function dataProcessor(a){return this.serverProcessor=a,this.action_param="!nativeeditor_status",this.obj=null,this.updatedRows=[],this.autoUpdate=!0,this.updateMode="cell",this._tMode="GET",this._waitMode=0,this._in_progress={},this._invalid={},this.mandatoryFields=[],this.messages=[],this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",error:"color:red;",clear:"font-weight:normal;text-decoration:none;"},this.enableUTFencoding(!0),dhtmlxEventable(this),this}function dhtmlXComboFromSelect(a,b){"string"==typeof a&&(a=document.getElementById(a)),b=b||a.getAttribute("width")||(window.getComputedStyle?window.getComputedStyle(a,null).width:a.currentStyle?a.currentStyle.width:0),b&&"auto"!=b||(b=a.offsetWidth||100);var c=document.createElement("SPAN");"rtl"==a.style.direction&&(c.style.direction="rtl"),a.parentNode.insertBefore(c,a),a.style.display="none";for(var d=a.getAttribute("opt_type"),e=new dhtmlXCombo(c,a.name,b,d,a.tabIndex),f=new Array,g=0,h=0;h<a.options.length;h++){a.options[h].selected&&(g=h);var i=a.options[h].innerHTML,j=a.options[h].getAttribute("value");("undefined"==typeof j||null===j)&&(j=i),f[h]={value:j,text:i,img_src:a.options[h].getAttribute("img_src")}}return e.addOption(f),a.parentNode.removeChild(a),e.selectOption(g,null,!0),a.onchange&&e.attachEvent("onChange",a.onchange),e}function dhtmlXCombo(a,b,c,d,e){return"string"==typeof a&&(a=document.getElementById(a)),dhtmlxEventable(this),this.optionType=d!=window.undefined&&dhtmlXCombo_optionTypes[d]?d:"default",this._optionObject=dhtmlXCombo_optionTypes[this.optionType],this._disabled=!1,this.rtl="rtl"==a.style.direction?!0:!1,window.dhx_glbSelectAr||(window.dhx_glbSelectAr=new Array,window.dhx_openedSelect=null,window.dhx_SelectId=1,dhtmlxEvent(document.body,"click",this.closeAll),dhtmlxEvent(document.body,"keydown",function(a){try{9==(a||event).keyCode&&window.dhx_glbSelectAr[0].closeAll()}catch(a){}return!0})),"SELECT"==a.tagName?dhtmlXComboFromSelect(a):(this._createSelf(a,b,c,e),void dhx_glbSelectAr.push(this))}function dhtmlXRange(a,b,c){var d="object"==typeof a?a:document.getElementById(a);try{d.focus()}catch(e){}var f=d.value.length;if(b--,(0>b||b>c||b>f)&&(b=0),c>f&&(c=f),b!=c)if(d.setSelectionRange)d.setSelectionRange(b,c);else if(d.createTextRange){var g=d.createTextRange();g.moveStart("character",b),g.moveEnd("character",c-f),g.select()}}dhtmlxAjax={get:function(a,b){var c=new dtmlXMLLoaderObject(!0);return c.async=arguments.length<3,c.waitCall=b,c.loadXML(a),c},post:function(a,b,c){var d=new dtmlXMLLoaderObject(!0);return d.async=arguments.length<4,d.waitCall=c,d.loadXML(a,!0,b),d},getSync:function(a){return this.get(a,null,!0)},postSync:function(a,b){return this.post(a,b,null,!0)}},dtmlXMLLoaderObject.prototype.waitLoadFunction=function(a){var b=!0;return this.check=function(){if(a&&null!=a.onloadAction&&(!a.xmlDoc.readyState||4==a.xmlDoc.readyState)){if(!b)return;b=!1,"function"==typeof a.onloadAction&&a.onloadAction(a.mainObject,null,null,null,a),a.waitCall&&(a.waitCall.call(this,a),a.waitCall=null)}},this.check},dtmlXMLLoaderObject.prototype.getXMLTopNode=function(a,b){if(this.xmlDoc.responseXML){var c=this.xmlDoc.responseXML.getElementsByTagName(a);if(0==c.length&&-1!=a.indexOf(":"))var c=this.xmlDoc.responseXML.getElementsByTagName(a.split(":")[1]);var d=c[0]}else var d=this.xmlDoc.documentElement;if(d)return this._retry=!1,d;if(_isIE&&!this._retry){var e=this.xmlDoc.responseText,b=this.xmlDoc;return this._retry=!0,this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async=!1,this.xmlDoc.loadXML(e),this.getXMLTopNode(a,b)}return dhtmlxError.throwError("LoadXML","Incorrect XML",[b||this.xmlDoc,this.mainObject]),document.createElement("DIV")},dtmlXMLLoaderObject.prototype.loadXMLString=function(a){try{var b=new DOMParser;this.xmlDoc=b.parseFromString(a,"text/xml")}catch(c){this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async=this.async,this.xmlDoc.loadXML(a)}this.onloadAction(this.mainObject,null,null,null,this),this.waitCall&&(this.waitCall(),this.waitCall=null)},dtmlXMLLoaderObject.prototype.loadXML=function(a,b,c,d){if(this.rSeed&&(a+=(-1!=a.indexOf("?")?"&":"?")+"a_dhx_rSeed="+(new Date).valueOf()),this.filePath=a,!_isIE&&window.XMLHttpRequest)this.xmlDoc=new XMLHttpRequest;else{if(document.implementation&&document.implementation.createDocument)return this.xmlDoc=document.implementation.createDocument("","",null),this.xmlDoc.onload=new this.waitLoadFunction(this),void this.xmlDoc.load(a);this.xmlDoc=new ActiveXObject("Microsoft.XMLHTTP")}this.async&&(this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this)),this.xmlDoc.open(b?"POST":"GET",a,this.async),d?(this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")"),this.xmlDoc.setRequestHeader("Content-type","text/xml")):b&&this.xmlDoc.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.xmlDoc.send(null||c),this.async||new this.waitLoadFunction(this)()},dtmlXMLLoaderObject.prototype.destructor=function(){return this.onloadAction=null,this.mainObject=null,this.xmlDoc=null,null},dtmlXMLLoaderObject.prototype.xmlNodeToJSON=function(a){for(var b={},c=0;c<a.attributes.length;c++)b[a.attributes[c].name]=a.attributes[c].value;b._tagvalue=a.firstChild?a.firstChild.nodeValue:"";for(var c=0;c<a.childNodes.length;c++){var d=a.childNodes[c].tagName;d&&(b[d]||(b[d]=[]),b[d].push(this.xmlNodeToJSON(a.childNodes[c])))}return b},dhtmlDragAndDropObject.prototype.removeDraggableItem=function(a){a.onmousedown=null,a.dragStarter=null,a.dragLanding=null},dhtmlDragAndDropObject.prototype.addDraggableItem=function(a,b){a.onmousedown=this.preCreateDragCopy,a.dragStarter=b,this.addDragLanding(a,b)},dhtmlDragAndDropObject.prototype.addDragLanding=function(a,b){a.dragLanding=b},dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(a){return a&&2==(a||event).button?void 0:window.dhtmlDragAndDrop.waitDrag?(window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1):(window.dhtmlDragAndDrop.waitDrag=1,window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup,window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove,window.dhtmlDragAndDrop.dragStartNode=this,window.dhtmlDragAndDrop.dragStartObject=this.dragStarter,document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy,document.body.onmousemove=window.dhtmlDragAndDrop.callDrag,a&&a.preventDefault?(a.preventDefault(),!1):!1)},dhtmlDragAndDropObject.prototype.callDrag=function(a){if(a||(a=window.event),dragger=window.dhtmlDragAndDrop,0==a.button&&_isIE)return dragger.stopDrag();if(!dragger.dragNode&&dragger.waitDrag){if(dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,a),!dragger.dragNode)return dragger.stopDrag();dragger.dragNode.onselectstart=function(){return!1},dragger.gldragNode=dragger.dragNode,document.body.appendChild(dragger.dragNode),document.body.onmouseup=dragger.stopDrag,dragger.waitDrag=0,dragger.dragNode.pWindow=window,dragger.initFrameRoute()}if(dragger.dragNode.parentNode!=window.document.body){var b=dragger.gldragNode;dragger.gldragNode.old&&(b=dragger.gldragNode.old),b.parentNode.removeChild(b);var c=dragger.dragNode.pWindow;if(_isIE){var d=document.createElement("Div");d.innerHTML=dragger.dragNode.outerHTML,dragger.dragNode=d.childNodes[0]}else dragger.dragNode=dragger.dragNode.cloneNode(!0);dragger.dragNode.pWindow=window,dragger.gldragNode.old=dragger.dragNode,document.body.appendChild(dragger.dragNode),c.dhtmlDragAndDrop.dragNode=dragger.dragNode}if(dragger.dragNode.style.left=a.clientX+15+(dragger.fx?-1*dragger.fx:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px",dragger.dragNode.style.top=a.clientY+3+(dragger.fy?-1*dragger.fy:0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px",a.srcElement)e=a.srcElement;else var e=a.target;dragger.checkLanding(e,a)},dhtmlDragAndDropObject.prototype.calculateFramePosition=function(a){if(window.name){for(var b=parent.frames[window.name].frameElement.offsetParent,c=0,d=0;b;)c+=b.offsetLeft,d+=b.offsetTop,b=b.offsetParent;if(parent.dhtmlDragAndDrop){var e=parent.dhtmlDragAndDrop.calculateFramePosition(1);c+=1*e.split("_")[0],d+=1*e.split("_")[1]}if(a)return c+"_"+d;this.fx=c,this.fy=d}return"0_0"},dhtmlDragAndDropObject.prototype.checkLanding=function(a,b){a&&a.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=a,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,b.clientX,b.clientY,b),this.lastLanding_scr=_isIE?b.srcElement:b.target):a&&"BODY"!=a.tagName?this.checkLanding(a.parentNode,b):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,b.clientX,b.clientY,b),this.lastLanding=0,this._onNotFound&&this._onNotFound())},dhtmlDragAndDropObject.prototype.stopDrag=function(a,b){if(dragger=window.dhtmlDragAndDrop,!b){dragger.stopFrameRoute();var c=dragger.lastLanding;dragger.lastLanding=null,c&&c.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,c,_isIE?event.srcElement:a.target)}dragger.lastLanding=null,dragger.dragNode&&dragger.dragNode.parentNode==document.body&&dragger.dragNode.parentNode.removeChild(dragger.dragNode),dragger.dragNode=0,dragger.gldragNode=0,dragger.fx=0,dragger.fy=0,dragger.dragStartNode=0,dragger.dragStartObject=0,document.body.onmouseup=dragger.tempDOMU,document.body.onmousemove=dragger.tempDOMM,dragger.tempDOMU=null,dragger.tempDOMM=null,dragger.waitDrag=0},dhtmlDragAndDropObject.prototype.stopFrameRoute=function(a){a&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var b=0;b<window.frames.length;b++)window.frames[b]!=a&&window.frames[b].dhtmlDragAndDrop&&window.frames[b].dhtmlDragAndDrop.stopFrameRoute(window);parent.dhtmlDragAndDrop&&parent!=window&&parent!=a&&parent.dhtmlDragAndDrop.stopFrameRoute(window)},dhtmlDragAndDropObject.prototype.initFrameRoute=function(a,b){a&&(window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=a.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=a.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=a.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=a.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&b&&(!_isFF||1.8>_FFrv)&&window.dhtmlDragAndDrop.calculateFramePosition()),parent.dhtmlDragAndDrop&&parent!=window&&parent!=a&&parent.dhtmlDragAndDrop.initFrameRoute(window);for(var c=0;c<window.frames.length;c++)window.frames[c]!=a&&window.frames[c].dhtmlDragAndDrop&&window.frames[c].dhtmlDragAndDrop.initFrameRoute(window,!a||b?1:0)};var _isFF=!1,_isIE=!1,_isOpera=!1,_isKHTML=!1,_isMacOS=!1;if(-1!=navigator.userAgent.indexOf("Macintosh")&&(_isMacOS=!0),-1!=navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Konqueror")){var _KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5));if(_KHTMLrv>525){_isFF=!0;var _FFrv=1.9}else _isKHTML=!0}else if(-1!=navigator.userAgent.indexOf("Opera"))_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3));else if(-1!=navigator.appName.indexOf("Microsoft"))_isIE=!0,-1!=navigator.appVersion.indexOf("MSIE 8.0")&&"BackCompat"!=document.compatMode&&(_isIE=8);else{_isFF=!0;var _FFrv=parseFloat(navigator.userAgent.split("rv:")[1])}dtmlXMLLoaderObject.prototype.doXPath=function(a,b,c,d){if(_isKHTML)return this.doXPathOpera(a,b);if(_isIE)return b||(b=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),b||dhtmlxError.throwError("LoadXML","Incorrect XML",[b||this.xmlDoc,this.mainObject]),null!=c&&b.setProperty("SelectionNamespaces","xmlns:xsl='"+c+"'"),"single"==d?b.selectSingleNode(a):b.selectNodes(a)||new Array(0);var e=b;b||(b=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),b||dhtmlxError.throwError("LoadXML","Incorrect XML",[b||this.xmlDoc,this.mainObject]),-1!=b.nodeName.indexOf("document")?e=b:(e=b,b=b.ownerDocument);var f=XPathResult.ANY_TYPE;"single"==d&&(f=XPathResult.FIRST_ORDERED_NODE_TYPE);var g=new Array,h=b.evaluate(a,e,function(){return c},f,null);if(f==XPathResult.FIRST_ORDERED_NODE_TYPE)return h.singleNodeValue;for(var i=h.iterateNext();i;)g[g.length]=i,i=h.iterateNext();return g},_dhtmlxError.prototype.catchError=function(a,b){this.catches[a]=b},_dhtmlxError.prototype.throwError=function(a,b,c){return this.catches[a]?this.catches[a](a,b,c):this.catches.ALL?this.catches.ALL(a,b,c):(alert("Error type: "+arguments[0]+"\nDescription: "+arguments[1]),null)},window.dhtmlxError=new _dhtmlxError,dtmlXMLLoaderObject.prototype.doXPathOpera=function(a,b){var c=a.replace(/[\/]+/gi,"/").split("/"),d=null,e=1;
if(!c.length)return[];if("."==c[0])d=[b];else{if(""!=c[0])return[];d=(this.xmlDoc.responseXML||this.xmlDoc).getElementsByTagName(c[e].replace(/\[[^\]]*\]/g,"")),e++}for(e;e<c.length;e++)d=this._getAllNamedChilds(d,c[e]);return-1!=c[e-1].indexOf("[")&&(d=this._filterXPath(d,c[e-1])),d},dtmlXMLLoaderObject.prototype._filterXPath=function(a,b){for(var c=new Array,b=b.replace(/[^\[]*\[\@/g,"").replace(/[\[\]\@]*/g,""),d=0;d<a.length;d++)a[d].getAttribute(b)&&(c[c.length]=a[d]);return c},dtmlXMLLoaderObject.prototype._getAllNamedChilds=function(a,b){var c=new Array;_isKHTML&&(b=b.toUpperCase());for(var d=0;d<a.length;d++)for(var e=0;e<a[d].childNodes.length;e++)_isKHTML?a[d].childNodes[e].tagName&&a[d].childNodes[e].tagName.toUpperCase()==b&&(c[c.length]=a[d].childNodes[e]):a[d].childNodes[e].tagName==b&&(c[c.length]=a[d].childNodes[e]);return c},dtmlXMLLoaderObject.prototype.xslDoc=null,dtmlXMLLoaderObject.prototype.setXSLParamValue=function(a,b,c){c||(c=this.xslDoc),c.responseXML&&(c=c.responseXML);var d=this.doXPath("/xsl:stylesheet/xsl:variable[@name='"+a+"']",c,"http://www.w3.org/1999/XSL/Transform","single");null!=d&&(d.firstChild.nodeValue=b)},dtmlXMLLoaderObject.prototype.doXSLTransToObject=function(a,b){if(a||(a=this.xslDoc),a.responseXML&&(a=a.responseXML),b||(b=this.xmlDoc),b.responseXML&&(b=b.responseXML),_isIE){var c=new ActiveXObject("Msxml2.DOMDocument.3.0");b.transformNodeToObject(a,c)}else{this.XSLProcessor||(this.XSLProcessor=new XSLTProcessor,this.XSLProcessor.importStylesheet(a));var c=this.XSLProcessor.transformToDocument(b)}return c},dtmlXMLLoaderObject.prototype.doXSLTransToString=function(a,b){return this.doSerialization(this.doXSLTransToObject(a,b))},dtmlXMLLoaderObject.prototype.doSerialization=function(a){if(a||(a=this.xmlDoc),a.responseXML&&(a=a.responseXML),_isIE)return a.xml;var b=new XMLSerializer;return b.serializeToString(a)},dhtmlxEventable=function(obj){obj.dhx_SeverCatcherPath="",obj.attachEvent=function(a,b,c){return a="ev_"+a.toLowerCase(),this[a]||(this[a]=new this.eventCatcher(c||this)),a+":"+this[a].addEvent(b)},obj.callEvent=function(a,b){return a="ev_"+a.toLowerCase(),this[a]?this[a].apply(this,b):!0},obj.checkEvent=function(a){return!!this["ev_"+a.toLowerCase()]},obj.eventCatcher=function(obj){var dhx_catch=[],z=function(){for(var a=!0,b=0;b<dhx_catch.length;b++)if(null!=dhx_catch[b]){var c=dhx_catch[b].apply(obj,arguments);a=a&&c}return a};return z.addEvent=function(ev){return"function"!=typeof ev&&(ev=eval(ev)),ev?dhx_catch.push(ev)-1:!1},z.removeEvent=function(a){dhx_catch[a]=null},z},obj.detachEvent=function(a){if(0!=a){var b=a.split(":");this[b[0]].removeEvent(b[1])}}};var globalActiveDHTMLGridObject;String.prototype._dhx_trim=function(){return this.replace(/&nbsp;/g," ").replace(/(^[ \t]*)|([ \t]*$)/g,"")},dhtmlxArray._master={_dhx_find:function(a){for(var b=0;b<this.length;b++)if(a==this[b])return b;return-1},_dhx_insertAt:function(a,b){this[this.length]=null;for(var c=this.length-1;c>=a;c--)this[c]=this[c-1];this[a]=b},_dhx_removeAt:function(a){this.splice(a,1)},_dhx_swapItems:function(a,b){var c=this[a];this[a]=this[b],this[b]=c}},dhtmlXGridObject.prototype={getRowAttribute:function(a,b){return this.getRowById(a)._attrs[b]},setRowAttribute:function(a,b,c){this.getRowById(a)._attrs[b]=c},isTreeGrid:function(){return-1!=this.cellType._dhx_find("tree")},setRowHidden:function(a,b){var c=(convertStringToBoolean(b),this.getRowById(a));if(c){if(""===c.expand&&this.collapseKids(c),b&&"none"!=c.style.display){c.style.display="none";var d=this.selectedRows._dhx_find(c);if(-1!=d){c.className=c.className.replace("rowselected","");for(var e=0;e<c.childNodes.length;e++)c.childNodes[e].className=c.childNodes[e].className.replace(/cellselected/g,"");this.selectedRows._dhx_removeAt(d)}this.callEvent("onGridReconstructed",[])}b||"none"!=c.style.display||(c.style.display="",this.callEvent("onGridReconstructed",[])),this.setSizes()}},setColumnHidden:function(a,b){if(!this.hdr.rows.length)return this._ivizcol||(this._ivizcol=[]),this._ivizcol[a]=b;this.fldSorted&&this.fldSorted.cellIndex==a&&b&&(this.sortImg.style.display="none");var c=convertStringToBoolean(b);if(c){if(this._hrrar){if(this._hrrar[a])return}else this._hrrar=new Array;this._hrrar[a]="display:none;",this._hideShowColumn(a,"none")}else{if(!this._hrrar||!this._hrrar[a])return;this._hrrar[a]="",this._hideShowColumn(a,"")}this.fldSorted&&this.fldSorted.cellIndex==a&&!b&&(this.sortImg.style.display="inline"),this.setSortImgPos(),this.callEvent("onColumnHidden",[a,b])},isColumnHidden:function(a){return this._hrrar&&this._hrrar[a]?!0:!1},setColumnsVisibility:function(a){if(a&&(this._ivizcol=a.split(this.delim)),this.hdr.rows.length&&this._ivizcol)for(var b=0;b<this._ivizcol.length;b++)this.setColumnHidden(b,this._ivizcol[b])},_fixHiddenRowsAll:function(a,b,c,d,e){e=e||"_cellIndex";for(var f=a.rows.length,g=0;f>g;g++){var h=a.rows[g].childNodes;if(h.length!=this._cCount){for(var i=0;i<h.length;i++)if(h[i][e]==b){h[i].style[c]=d;break}}else h[b].style[c]=d}},_hideShowColumn:function(a,b){var c=a;if(this.hdr.rows[1]._childIndexes&&this.hdr.rows[1]._childIndexes[a]!=a&&(c=this.hdr.rows[1]._childIndexes[a]),"none"==b){this.hdr.rows[0].cells[a]._oldWidth=this.hdr.rows[0].cells[a].style.width||this.initCellWidth[a]+"px",this.hdr.rows[0].cells[a]._oldWidthP=this.cellWidthPC[a],this.obj.rows[0].cells[a].style.width="0px";var d={rows:[this.obj.rows[0]]};this.forEachRow(function(a){"TR"==this.rowsAr[a].tagName&&d.rows.push(this.rowsAr[a])}),this._fixHiddenRowsAll(d,a,"display","none"),this.isTreeGrid()&&this._fixHiddenRowsAllTG(a,"none"),(_isOpera&&_OperaRv<9||_isKHTML||_isFF)&&(this._fixHiddenRowsAll(this.hdr,a,"display","none","_cellIndexS"),this.ftr&&this._fixHiddenRowsAll(this.ftr.childNodes[0],a,"display","none")),this._fixHiddenRowsAll(this.hdr,a,"whiteSpace","nowrap","_cellIndexS"),this.cellWidthPX.length||this.cellWidthPC.length||(this.cellWidthPX=[].concat(this.initCellWidth)),this.cellWidthPX[a]&&(this.cellWidthPX[a]=0),this.cellWidthPC[a]&&(this.cellWidthPC[a]=0)}else if(this.hdr.rows[0].cells[a]._oldWidth){var e=this.hdr.rows[0].cells[a];(_isOpera||_isKHTML||_isFF)&&this._fixHiddenRowsAll(this.hdr,a,"display","","_cellIndexS"),this.ftr&&this._fixHiddenRowsAll(this.ftr.childNodes[0],a,"display","");var d={rows:[this.obj.rows[0]]};this.forEachRow(function(a){"TR"==this.rowsAr[a].tagName&&d.rows.push(this.rowsAr[a])}),this._fixHiddenRowsAll(d,a,"display",""),this.isTreeGrid()&&this._fixHiddenRowsAllTG(a,""),this._fixHiddenRowsAll(this.hdr,a,"whiteSpace","normal","_cellIndexS"),e._oldWidthP&&(this.cellWidthPC[a]=e._oldWidthP),e._oldWidth&&(this.cellWidthPX[a]=parseInt(e._oldWidth))}this.setSizes(),_isIE||_isFF||(this.obj.border=1,this.obj.border=0)},enableColSpan:function(a){this._ecspn=convertStringToBoolean(a)},enableRowsHover:function(a,b){this._hvrCss=b,convertStringToBoolean(a)?this._elmnh||(this.obj._honmousemove=this.obj.onmousemove,this.obj.onmousemove=this._setRowHover,_isIE?this.obj.onmouseleave=this._unsetRowHover:this.obj.onmouseout=this._unsetRowHover,this._elmnh=!0):this._elmnh&&(this.obj.onmousemove=this.obj._honmousemove,_isIE?this.obj.onmouseleave=null:this.obj.onmouseout=null,this._elmnh=!1)},enableEditEvents:function(a,b,c){this._sclE=convertStringToBoolean(a),this._dclE=convertStringToBoolean(b),this._f2kE=convertStringToBoolean(c)},enableLightMouseNavigation:function(a){convertStringToBoolean(a)?this._elmn||(this.entBox._onclick=this.entBox.onclick,this.entBox.onclick=function(){return!0},this.obj._onclick=this.obj.onclick,this.obj.onclick=function(a){var b=this.grid.getFirstParentOfType(a?a.target:event.srcElement,"TD");b&&(this.grid.editStop(),this.grid.doClick(b),this.grid.editCell(),(a||event).cancelBubble=!0)},this.obj._onmousemove=this.obj.onmousemove,this.obj.onmousemove=this._autoMoveSelect,this._elmn=!0):this._elmn&&(this.entBox.onclick=this.entBox._onclick,this.obj.onclick=this.obj._onclick,this.obj.onmousemove=this.obj._onmousemove,this._elmn=!1)},_unsetRowHover:function(a,b){if(that=b?this:this.grid,that._lahRw&&that._lahRw!=b){for(var c=0;c<that._lahRw.childNodes.length;c++)that._lahRw.childNodes[c].className=that._lahRw.childNodes[c].className.replace(that._hvrCss,"");that._lahRw=null}},_setRowHover:function(a){var b=this.grid.getFirstParentOfType(a?a.target:event.srcElement,"TD");if(b&&b.parentNode!=this.grid._lahRw){if(this.grid._unsetRowHover(0,b),b=b.parentNode,!b.idd||"__filler__"==b.idd)return;for(var c=0;c<b.childNodes.length;c++)b.childNodes[c].className+=" "+this.grid._hvrCss;this.grid._lahRw=b}this._honmousemove(a)},_autoMoveSelect:function(a){if(!this.grid.editor){var b=this.grid.getFirstParentOfType(a?a.target:event.srcElement,"TD");b.parentNode.idd&&this.grid.doClick(b,!0,0)}this._onmousemove(a)},enableDistributedParsing:function(a,b,c){convertStringToBoolean(a)?(this._ads_count=b||10,this._ads_time=c||250):this._ads_count=0},destructor:function(){if(this._sizeTime&&(this._sizeTime=window.clearTimeout(this._sizeTime)),this.formInputs)for(var a=0;a<this.formInputs.length;a++)this.parentForm.removeChild(this.formInputs[a]);var b;this.xmlLoader=this.xmlLoader.destructor();for(var a=0;a<this.rowsCol.length;a++)this.rowsCol[a]&&(this.rowsCol[a].grid=null);for(a in this.rowsAr)this.rowsAr[a]&&(this.rowsAr[a]=null);this.rowsCol=new dhtmlxArray,this.rowsAr=new Array,this.entBox.innerHTML="",this.entBox.onclick=function(){},this.entBox.onmousedown=function(){},this.entBox.onbeforeactivate=function(){},this.entBox.onbeforedeactivate=function(){},this.entBox.onbeforedeactivate=function(){},this.entBox.onselectstart=function(){},this.entBox.grid=null;for(b in this)this[b]&&this[b].m_obj&&(this[b].m_obj=null),this[b]=null;return this==globalActiveDHTMLGridObject&&(globalActiveDHTMLGridObject=null),null},getSortingState:function(){var a=new Array;return this.fldSorted&&(a[0]=this.fldSorted._cellIndex,a[1]=-1!=this.sortImg.src.indexOf("sort_desc.gif")?"des":"asc"),a},enableAutoHeight:function(a,b,c){this._ahgr=convertStringToBoolean(a),this._ahgrF=convertStringToBoolean(c),this._ahgrM=b||null,"auto"==b&&(this._ahgrM=null,this._ahgrMA=!0,this._setAutoResize())},enableStableSorting:function(a){this._sst=convertStringToBoolean(a),this.rowsCol.stablesort=function(a){for(var b=this.length-1,c=0;c<this.length-1;c++){for(var d=0;b>d;d++)if(a(this[d],this[d+1])>0){var e=this[d];this[d]=this[d+1],this[d+1]=e}b--}}},enableKeyboardSupport:function(a){this._htkebl=!convertStringToBoolean(a)},enableContextMenu:function(a){this._ctmndx=a},setScrollbarWidthCorrection:function(a){this._scrFix=parseInt(a)},enableTooltips:function(a){this._enbTts=a.split(",");for(var b=0;b<this._enbTts.length;b++)this._enbTts[b]=convertStringToBoolean(this._enbTts[b])},enableResizing:function(a){this._drsclmn=a.split(",");for(var b=0;b<this._drsclmn.length;b++)this._drsclmn[b]=convertStringToBoolean(this._drsclmn[b])},setColumnMinWidth:function(a,b){2==arguments.length?(this._drsclmW||(this._drsclmW=new Array),this._drsclmW[b]=a):this._drsclmW=a.split(",")},enableCellIds:function(a){this._enbCid=convertStringToBoolean(a)},lockRow:function(a,b){var c=this.getRowById(a);c&&(c._locked=convertStringToBoolean(b),this.cell&&this.cell.parentNode.idd==a&&this.editStop())},_getRowArray:function(a){for(var b=new Array,c=0;c<a.childNodes.length;c++){var d=this.cells3(a,c);b[c]=d.getValue()}return b},setDateFormat:function(a){this._dtmask=a},setNumberFormat:function(a,b,c,d){var e=a.replace(/[^0\,\.]*/g,""),f=e.indexOf(".");f>-1&&(f=e.length-f-1);var g=e.indexOf(",");g>-1&&(g=e.length-f-2-g),"string"!=typeof c&&(c=this.i18n.decimal_separator),"string"!=typeof d&&(d=this.i18n.group_separator);var h=a.split(e)[0],i=a.split(e)[1];this._maskArr[b]=[f,g,h,i,c,d]},_aplNFb:function(a,b){var c=this._maskArr[b];if(!c)return a;var d=parseFloat(a.toString().replace(/[^0-9]*/g,""));return"-"==a.toString().substr(0,1)&&(d=-1*d),c[0]>0&&(d/=Math.pow(10,c[0])),d},_aplNF:function(a,b){var c=this._maskArr[b];if(!c)return a;var d=(parseFloat(a)<0?"-":"")+c[2];if(a=Math.abs(Math.round(parseFloat(a)*Math.pow(10,c[0]>0?c[0]:0))).toString(),a=(a.length<c[0]?Math.pow(10,c[0]+1-a.length).toString().substr(1,c[0]+1)+a.toString():a).split("").reverse(),a[c[0]]=(a[c[0]]||"0")+c[4],c[1]>0)for(var e=(c[0]>0?0:1)+c[0]+c[1];e<a.length;e+=c[1])a[e]+=c[5];return d+a.reverse().join("")+c[3]},_launchCommands:function(a){for(var b=0;b<a.length;b++){for(var c=new Array,d=0;d<a[b].childNodes.length;d++)1==a[b].childNodes[d].nodeType&&(c[c.length]=a[b].childNodes[d].firstChild.data);this[a[b].getAttribute("command")].apply(this,c)}},_parseHead:function(a){var b=this.xmlLoader.doXPath("./head",a);if(b.length){var c=this.xmlLoader.doXPath("./column",b[0]),d=this.xmlLoader.doXPath("./settings",b[0]),e="setInitWidths",f=!1;if(d[0])for(var g=0;g<d[0].childNodes.length;g++)switch(d[0].childNodes[g].tagName){case"colwidth":d[0].childNodes[g].firstChild&&"%"==d[0].childNodes[g].firstChild.data&&(e="setInitWidthsP");break;case"splitat":f=d[0].childNodes[g].firstChild?d[0].childNodes[g].firstChild.data:!1}if(this._launchCommands(this.xmlLoader.doXPath("./beforeInit/call",b[0])),c.length>0){this.hdr.rows.length>0&&this.clearAll(!0);for(var h=[[],[],[],[],[],[],[],[],[]],i=["","width","type","align","sort","color","format","hidden","id"],j=["setHeader",e,"setColTypes","setColAlign","setColSorting","setColumnColor","","","setColumnIds"],k=0;k<c.length;k++){for(var l=1;l<i.length;l++)h[l].push(c[k].getAttribute(i[l]));h[0].push((c[k].firstChild?c[k].firstChild.data:"").replace(/^\s*((.|\n)*.+)\s*$/gi,"$1"))}for(var k=0;k<j.length;k++)j[k]&&this[j[k]](h[k].join(this.delim));for(var k=0;k<c.length;k++)if(0==this.cellType[k].indexOf("co")||"clist"==this.cellType[k]){var m=this.xmlLoader.doXPath("./option",c[k]);if(m.length){var n=new Array;if("clist"==this.cellType[k]){for(var l=0;l<m.length;l++)n[n.length]=m[l].firstChild?m[l].firstChild.data:"";this.registerCList(k,n)}else for(var o=this.getCombo(k),l=0;l<m.length;l++)o.put(m[l].getAttribute("value"),m[l].firstChild?m[l].firstChild.data:"")}}else h[6][k]&&("calendar"==this.cellType[k]||"date"==this.fldSort[k]?this.setDateFormat(h[6][k],k):this.setNumberFormat(h[6][k],k));this.init();var p=h[7].join(this.delim);this.setColHidden&&""!=p.replace(/,/g,"")&&this.setColHidden(p),f&&this.splitAt&&this.splitAt(f)}this._launchCommands(this.xmlLoader.doXPath("./afterInit/call",b[0]))}var q=this.xmlLoader.doXPath("//rows/userdata",a);if(q.length>0){this.UserData.gridglobaluserdata||(this.UserData.gridglobaluserdata=new Hashtable);for(var l=0;l<q.length;l++)this.UserData.gridglobaluserdata.put(q[l].getAttribute("name"),q[l].firstChild?q[l].firstChild.data:"")}},getCheckedRows:function(a){var b=new Array;return this.forEachRowA(function(c){0!=this.cells(c,a).getValue()&&b.push(c)},!0),b.join(",")},checkAll:function(){for(var a=arguments.length?arguments[0]:1,b=0;b<this.getColumnsNum();b++)"ch"==this.getColType(b)&&this.setCheckedRows(b,a)},uncheckAll:function(){this.checkAll(0)},setCheckedRows:function(a,b){this.forEachRow(function(c){this.cells(c,a).isCheckbox()&&this.cells(c,a).setValue(b)})},_drawTooltip:function(a){var b=this.grid.getFirstParentOfType(a?a.target:event.srcElement,"TD");if(!b||this.grid.editor&&this.grid.editor.cell==b)return!0;var c=b.parentNode;if(c.idd&&"__filler__"!=c.idd){var d=a?a.target:event.srcElement;if(c.idd==window.unknown)return!0;if(!this.grid.callEvent("onMouseOver",[c.idd,b._cellIndex]))return!0;if(this.grid._enbTts&&!this.grid._enbTts[b._cellIndex])return d.title&&(d.title=""),!0;if(!(b._cellIndex>=this.grid._cCount)){var e=this.grid.cells3(c,b._cellIndex);if(e&&e.cell&&e.cell._attrs)return d._title&&(e.cell.title=""),e.cell._attrs.title||(d._title=!0),e&&(d.title=e.cell._attrs.title||(e.getTitle?e.getTitle():(e.getValue()||"").toString().replace(/<[^>]*>/gi,""))),!0}}},enableCellWidthCorrection:function(a){_isFF&&(this._wcorr=parseInt(a))},getAllRowIds:function(a){for(var b=[],c=0;c<this.rowsBuffer.length;c++)this.rowsBuffer[c]&&b.push(this.rowsBuffer[c].idd);return b.join(a||this.delim)},getAllItemIds:function(){return this.getAllRowIds()},setColspan:function(a,b,c){if(this._ecspn){var d=this.getRowById(a);if(d._childIndexes&&d.childNodes[d._childIndexes[b]]){var e=d._childIndexes[b],f=d.childNodes[e],g=f.colSpan;if(f.colSpan=1,g&&1!=g)for(var h=1;g>h;h++){var i=document.createElement("TD");f.nextSibling?d.insertBefore(i,f.nextSibling):d.appendChild(i),d._childIndexes[b+h]=e+h,i._cellIndex=b+h,i.style.textAlign=this.cellAlign[h],i.style.verticalAlign=this.cellVAlign[h],f=i,this.cells3(d,b+h).setValue("")}for(var j=1*b+1*g;j<d._childIndexes.length;j++)d._childIndexes[j]+=1*(g-1)}if(c&&c>1){if(d._childIndexes)var e=d._childIndexes[b];else{var e=b;d._childIndexes=new Array;for(var j=0;j<d.childNodes.length;j++)d._childIndexes[j]=j}d.childNodes[e].colSpan=c;for(var j=1;c>j;j++)d._childIndexes[d.childNodes[e+1]._cellIndex]=e,d.removeChild(d.childNodes[e+1]);for(var k=d.childNodes[d._childIndexes[b]]._cellIndex,j=1*k+1*c;j<d._childIndexes.length;j++)d._childIndexes[j]-=c-1}}},preventIECaching:function(a){this.no_cashe=convertStringToBoolean(a),this.xmlLoader.rSeed=this.no_cashe},enableColumnAutoSize:function(a){this._eCAS=convertStringToBoolean(a)},_onHeaderDblClick:function(a){var b=this.grid,c=b.getFirstParentOfType(_isIE?event.srcElement:a.target,"TD");return b._eCAS?void b.adjustColumnSize(c._cellIndexS):!1},adjustColumnSize:function(a,b){if(!this._hrrar||!this._hrrar[a]){this._notresize=!0;var c=0;this._setColumnSizeR(a,20);for(var d=1;d<this.hdr.rows.length;d++){var e=this.hdr.rows[d];e=e.childNodes[e._childIndexes?e._childIndexes[a]:a],e&&(!e.colSpan||e.colSpan<2)&&e._cellIndex==a&&(e.childNodes[0]&&"hdrcell"==e.childNodes[0].className&&(e=e.childNodes[0]),c=Math.max(c,_isFF||_isOpera?7*e.textContent.length:e.scrollWidth))}for(var f=this.obj.rows.length,g=1;f>g;g++){var h=this.obj.rows[g];h._childIndexes&&h._childIndexes[a]!=a||!h.childNodes[a]||(h=_isFF||_isOpera||b?7*h.childNodes[a].textContent.length:h.childNodes[a].scrollWidth,h>c&&(c=h))}c+=20+(b||0),this._setColumnSizeR(a,c),this._notresize=!1,this.setSizes()}},detachHeader:function(a,b){b=b||this.hdr;var c=b.rows[a+1];c&&c.parentNode.removeChild(c),this.setSizes()},detachFooter:function(a){this.detachHeader(a,this.ftr)},attachHeader:function(a,b,c){if("string"==typeof a&&(a=this._eSplit(a)),"string"==typeof b&&(b=b.split(this.delim)),c=c||"_aHead",this.hdr.rows.length){if(a)this._createHRow([a,b],this["_aHead"==c?"hdr":"ftr"]);else if(this[c])for(var d=0;d<this[c].length;d++)this.attachHeader.apply(this,this[c][d])}else this[c]||(this[c]=new Array),this[c][this[c].length]=[a,b,c]},_createHRow:function(a,b){if(!b){"absolute"!=this.entBox.style.position&&(this.entBox.style.position="relative");var c=document.createElement("DIV");c.className="c_ftr".substr(2),this.entBox.appendChild(c);var d=document.createElement("TABLE");d.cellPadding=d.cellSpacing=0,_isIE||(d.width="100%",d.style.paddingRight="20px"),d.style.marginRight="20px",d.style.tableLayout="fixed",c.appendChild(d),d.appendChild(document.createElement("TBODY")),this.ftr=b=d;for(var e=d.insertRow(0),f=this.hdrLabels.length<=1?a[0].length:this.hdrLabels.length,g=0;f>g;g++)e.appendChild(document.createElement("TH")),e.childNodes[g]._cellIndex=g;_isIE&&8>_isIE?e.style.position="absolute":e.style.height="auto"}var h=a[1],c=document.createElement("TR");b.rows[0].parentNode.appendChild(c);for(var g=0;g<a[0].length;g++)if("#cspan"!=a[0][g])if("#rspan"==a[0][g]&&b.rows.length>1){for(var i=b.rows.length-2,j=!1,k=null;!j;){for(var k=b.rows[i],l=0;l<k.cells.length;l++)if(k.cells[l]._cellIndex==g){j=l+1;break}i--}k=k.cells[j-1],k.rowSpan=(k.rowSpan||1)+1}else{var m=document.createElement("TD");if(m._cellIndex=m._cellIndexS=g,this._hrrar&&this._hrrar[g]&&!_isIE&&(m.style.display="none"),"object"==typeof a[0][g])m.appendChild(a[0][g]);else if(m.innerHTML=this.forceDivInHeader?"<div class='hdrcell'>"+a[0][g]+"</div>":a[0][g],-1!=(a[0][g]||"").indexOf("#")){var d=a[0][g].match(/(^|{)#([^}]+)(}|$)/);if(d){var n="_in_header_"+d[2];this[n]&&this[n](this.forceDivInHeader?m.firstChild:m,g,a[0][g].split(d[0]))}}h&&(m.style.cssText=h[g]),c.appendChild(m)}else{var k=c.cells[c.cells.length-1];k.colSpan=(k.colSpan||1)+1}_isKHTML&&(b._kTimer&&window.clearTimeout(b._kTimer),b._kTimer=window.setTimeout(function(){b.rows[1].style.display="none",window.setTimeout(function(){b.rows[1].style.display=""},1)},500))},attachFooter:function(a,b){this.attachHeader(a,b,"_aFoot")},setCellExcellType:function(a,b,c){this.changeCellType(this.rowsAr[a],b,c)},changeCellType:function(a,b,c){c=c||this.cellType[b];var d=this.cells3(a,b),e=d.getValue();d.cell._cellType=c;var d=this.cells3(a,b);d.setValue(e)},setRowExcellType:function(a,b){for(var c=this.rowsAr[a],d=0;d<c.childNodes.length;d++)this.changeCellType(c,d,b)},setColumnExcellType:function(a,b){for(var c=0;c<this.rowsBuffer.length;c++)this.rowsBuffer[c]&&"TR"==this.rowsBuffer[c].tagName&&this.changeCellType(this.rowsBuffer[c],a,b);"math"==this.cellType[a]?this._strangeParams[c]=b:this.cellType[a]=b},forEachRow:function(a){for(var b in this.rowsAr)this.rowsAr[b]&&this.rowsAr[b].idd&&a.apply(this,[this.rowsAr[b].idd])},forEachRowA:function(a){for(var b=0;b<this.rowsBuffer.length;b++)this.rowsBuffer[b]&&a.call(this,this.render_row(b).idd)},forEachCell:function(a,b){var c=this.getRowById(a);if(c)for(var d=0;d<this._cCount;d++)b(this.cells3(c,d),d)},enableAutoWidth:function(a,b,c){this._awdth=[convertStringToBoolean(a),parseInt(b||99999),parseInt(c||0)]},updateFromXML:function(a,b,c,d){"undefined"==typeof b&&(b=!0),this._refresh_mode=[!0,b,c],this.load(a,d)},_refreshFromXML:function(a){reset=!1,window.eXcell_tree&&(eXcell_tree.prototype.setValueX=eXcell_tree.prototype.setValue,eXcell_tree.prototype.setValue=function(a){var b=this.grid._h2.get[this.cell.parentNode.idd];b&&this.cell.parentNode.valTag?this.setLabel(a):this.setValueX(a)});var b=this.cellType._dhx_find("tree");a.getXMLTopNode("rows");var c=a.doXPath("//rows")[0].getAttribute("parent")||0,d={};this._refresh_mode[2]&&(-1!=b?this._h2.forEachChild(c,function(a){d[a.id]=!0},this):this.forEachRow(function(a){d[a]=!0}));for(var e=a.doXPath("//row"),f=0;f<e.length;f++){var g=e[f],h=g.getAttribute("id");d[h]=!1;var c=g.parentNode.getAttribute("id")||c;if(this.rowsAr[h]&&"TR"!=this.rowsAr[h].tagName)this._h2?this._h2.get[h].buff.data=g:this.rowsBuffer[this.getRowIndex(h)].data=g,this.rowsAr[h]=g;else if(this.rowsAr[h])this._process_xml_row(this.rowsAr[h],g,-1),this._postRowProcessing(this.rowsAr[h],!0);else if(this._refresh_mode[1]){var i={idd:h,data:g,_parser:this._process_xml_row,_locator:this._get_xml_data};"top"==this._refresh_mode[1]?this.rowsBuffer.unshift(i):this.rowsBuffer.push(i),this._h2&&(reset=!0,this._h2.add(h,g.parentNode.getAttribute("id")||g.parentNode.getAttribute("parent")).buff=this.rowsBuffer[this.rowsBuffer.length-1]),this.rowsAr[h]=g,g=this.render_row(this.rowsBuffer.length-1),this._insertRowAt(g,-1)}}if(this._refresh_mode[2])for(h in d)d[h]&&this.rowsAr[h]&&this.deleteRow(h);this._refresh_mode=null,window.eXcell_tree&&(eXcell_tree.prototype.setValue=eXcell_tree.prototype.setValueX),reset&&this._renderSort(),this.callEvent("onXLE",[this,e.length])},getCustomCombo:function(a,b){var c=this.cells(a,b).cell;return c._combo||(c._combo=new dhtmlXGridComboObject),c._combo},setTabOrder:function(a){var b=a.split(this.delim);this._tabOrder=[];for(var c=this._cCount||a.length,d=0;c>d;d++)b[d]={c:parseInt(b[d]),ind:d};b.sort(function(a,b){return a.c>b.c?1:-1});for(var d=0;c>d;d++)this._tabOrder[b[d].ind]=b[d+1]&&"undefined"!=typeof b[d].c?b[d+1].ind:-1*(b[0].ind+1)},i18n:{loading:"Loading",decimal_separator:".",group_separator:","},_key_events:{k13_1_0:function(){var a=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[a+1],this.cell._cellIndex,!0)},k13_0_1:function(){var a=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[a-1],this.cell._cellIndex,!0)},k13_0_0:function(){this.editStop(),this.callEvent("onEnter",[this.row?this.row.idd:null,this.cell?this.cell._cellIndex:null]),this._still_active=!0},k9_0_0:function(){if(this.editStop(),!this.callEvent("onTab",[!0]))return!0;var a=this._getNextCell(null,1);a&&(this.selectCell(a.parentNode,a._cellIndex,this.row!=a.parentNode,!1,!0),this._still_active=!0)},k9_0_1:function(){if(this.editStop(),!this.callEvent("onTab",[!1]))return!1;var a=this._getNextCell(null,-1);a&&(this.selectCell(a.parentNode,a._cellIndex,this.row!=a.parentNode,!1,!0),this._still_active=!0)},k113_0_0:function(){this._f2kE&&this.editCell()},k32_0_0:function(){var a=this.cells4(this.cell);return a.changeState&&a.changeState()!==!1?void 0:!1},k27_0_0:function(){this.editStop(!0)},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k37_0_0:function(){return this.editor||!this.isTreeGrid()?!1:void this.collapseKids(this.row)},k39_0_0:function(){return this.editor||!this.isTreeGrid()?!1:void this.expandKids(this.row)},k40_0_0:function(){var a=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftNext();else{if(!this.row.idd)return;var b=Math.max(a._r_select||0,this.getRowIndex(this.row.idd))+1;this.rowsBuffer[b]?(a._r_select=null,this.selectCell(b,this.cell._cellIndex,!0),a.pagingOn&&a.showRow(a.getRowId(b))):(this._key_events.k34_0_0.apply(this,[]),this.pagingOn&&this.rowsCol[b]&&this.selectCell(b,0,!0))}this._still_active=!0},k38_0_0:function(){var a=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{if(!this.row.idd)return;var b=this.getRowIndex(this.row.idd)+1;if(-1==b||this.pagingOn&&1==b)this._key_events.k33_0_0.apply(this,[]);else{var c=this._nextRow(b-1,-1);this.selectCell(c,this.cell._cellIndex,!0),a.pagingOn&&c&&a.showRow(c.idd)}}this._still_active=!0}},_build_master_row:function(){for(var a=document.createElement("DIV"),b=["<table><tr>"],c=0;c<this._cCount;c++)b.push("<td></td>");b.push("</tr></table>"),a.innerHTML=b.join(""),this._master_row=a.firstChild.rows[0]},_prepareRow:function(a){this._master_row||this._build_master_row();for(var b=this._master_row.cloneNode(!0),c=0;c<b.childNodes.length;c++)b.childNodes[c]._cellIndex=c,this._enbCid&&(b.childNodes[c].id="c_"+a+"_"+c),this.dragAndDropOff&&this.dragger.addDraggableItem(b.childNodes[c],this);return b.idd=a,b.grid=this,b},_process_jsarray_row:function(a,b){a._attrs={};for(var c=0;c<a.childNodes.length;c++)a.childNodes[c]._attrs={};return this._fillRow(a,this._c_order?this._swapColumns(b):b),a},_get_jsarray_data:function(a,b){return a[b]},_process_json_row:function(a,b){a._attrs={};for(var c=0;c<a.childNodes.length;c++)a.childNodes[c]._attrs={};return this._fillRow(a,this._c_order?this._swapColumns(b.data):b.data),a},_get_json_data:function(a,b){return a.data[b]},_process_csv_row:function(a,b){a._attrs={};for(var c=0;c<a.childNodes.length;c++)a.childNodes[c]._attrs={};return this._fillRow(a,this._c_order?this._swapColumns(b.split(this.csv.cell)):b.split(this.csv.cell)),a},_get_csv_data:function(a,b){return a.split(this.csv.cell)[b]},_process_xml_row:function(a,b){var c=this.xmlLoader.doXPath(this.xml.cell,b),d=[];if(a._attrs=this._xml_attrs(b),this._ud_enabled)for(var e=this.xmlLoader.doXPath("./userdata",b),f=e.length-1;f>=0;f--)this.setUserData(a.idd,e[f].getAttribute("name"),e[f].firstChild?e[f].firstChild.data:"");for(var g=0;g<c.length;g++){var h=c[g],i=a._childIndexes?a._childIndexes[g]:g,j=h.getAttribute("type");a.childNodes[i]&&(j&&(a.childNodes[i]._cellType=j),a.childNodes[i]._attrs=this._xml_attrs(h)),h.getAttribute("xmlcontent")||(h=h.firstChild?h.firstChild.data:""),d.push(h)}for(g<c.length;g<a.childNodes.length;g++)a.childNodes[g]._attrs={};return a.parentNode&&"row"==a.parentNode.tagName&&(a._attrs.parent=a.parentNode.getAttribute("idd")),this._fillRow(a,this._c_order?this._swapColumns(d):d),a},_get_xml_data:function(a,b){for(a=a.firstChild;;){if(!a)return"";if("cell"==a.tagName&&b--,0>b)break;a=a.nextSibling}return a.firstChild?a.firstChild.data:""},_fillRow:function(a,b){this.editor&&this.editStop();for(var c=0;c<a.childNodes.length;c++)if(c<b.length||this.defVal[c]){var d=a.childNodes[c]._cellIndex,e=b[d],f=this.cells4(a.childNodes[c]);!this.defVal[d]||""!=e&&"undefined"!=typeof e||(e=this.defVal[d]),f.setValue(e)}else{var e="&nbsp;";a.childNodes[c].innerHTML=e,a.childNodes[c]._clearCell=!0}return a},_postRowProcessing:function(a,b){a._attrs["class"]&&(a._css=a.className=a._attrs["class"]),a._attrs.locked&&(a._locked=!0),a._attrs.bgColor&&(a.bgColor=a._attrs.bgColor);for(var c=0,d=0;d<a.childNodes.length;d++){var e=a.childNodes[d],f=e._cellIndex,g=e._attrs.style||a._attrs.style;g&&(e.style.cssText+=";"+g),e._attrs["class"]&&(e.className=e._attrs["class"]),g=e._attrs.align||this.cellAlign[f],g&&(e.align=g),e.vAlign=e._attrs.valign||this.cellVAlign[f];var h=e._attrs.bgColor||this.columnColor[f];h&&(e.bgColor=h),e._attrs.colspan&&!b&&(this.setColspan(a.idd,d+c,e._attrs.colspan),c+=e._attrs.colspan-1),this._hrrar&&this._hrrar[f]&&!b&&(e.style.display="none")}this.callEvent("onRowCreated",[a.idd,a,null])},load:function(a,b,c){this.callEvent("onXLS",[this]),2==arguments.length&&"function"!=typeof b&&(c=b,b=null),c=c||"xml",this.xmlFileUrl||(this.xmlFileUrl=a),this._data_type=c,this.xmlLoader.onloadAction=function(a,d,e,f,g){g=a["_process_"+c](g),a._contextCallTimer||a.callEvent("onXLE",[a,0,0,g]),b&&(b(),b=null)},this.xmlLoader.loadXML(a)},loadXMLString:function(a,b){var c=new dtmlXMLLoaderObject(function(){});c.loadXMLString(a),this.parse(c,b,"xml")},loadXML:function(a,b){this.load(a,b,"xml")},parse:function(a,b,c){2==arguments.length&&"function"!=typeof b&&(c=b,b=null),c=c||"xml",this._data_type=c,a=this["_process_"+c](a),this._contextCallTimer||this.callEvent("onXLE",[this,0,0,a]),b&&b()},xml:{top:"rows",row:"./row",cell:"./cell",s_row:"row",s_cell:"cell",row_attrs:[],cell_attrs:[]},csv:{row:"\n",cell:","},_xml_attrs:function(a){var b={};if(a.attributes.length)for(var c=0;c<a.attributes.length;c++)b[a.attributes[c].name]=a.attributes[c].value;return b},_process_xml:function(a){if(!a.doXPath){var b=new dtmlXMLLoaderObject(function(){});"string"==typeof a?b.loadXMLString(a):(b.xmlDoc=a.responseXML?a:{},b.xmlDoc.responseXML=a),a=b}if(this._refresh_mode)return this._refreshFromXML(a);this._parsing=!0;var c=a.getXMLTopNode(this.xml.top);if(c.tagName.toLowerCase()==this.xml.top){this._parseHead(c);var d=a.doXPath(this.xml.row,c),e=parseInt(a.doXPath("//"+this.xml.top)[0].getAttribute("pos")||0),f=parseInt(a.doXPath("//"+this.xml.top)[0].getAttribute("total_count")||0);if(f&&!this.rowsBuffer[f-1]&&(this.rowsBuffer[f-1]=null),this.isTreeGrid())return this._process_tree_xml(a);for(var g=0;g<d.length;g++)if(!this.rowsBuffer[g+e]){var h=d[g].getAttribute("id")||g+e+1;this.rowsBuffer[g+e]={idd:h,data:d[g],_parser:this._process_xml_row,_locator:this._get_xml_data},this.rowsAr[h]=d[g]}return this.render_dataset(),this._parsing=!1,a.xmlDoc.responseXML?a.xmlDoc.responseXML:a.xmlDoc}},_process_jsarray:function(data){this._parsing=!0,data&&data.xmlDoc&&eval("data="+data.xmlDoc.responseText+";");for(var i=0;i<data.length;i++){var id=i+1;this.rowsBuffer.push({idd:id,data:data[i],_parser:this._process_jsarray_row,_locator:this._get_jsarray_data}),this.rowsAr[id]=data[i]}this.render_dataset(),this._parsing=!1},_process_csv:function(a){if(this._parsing=!0,a.xmlDoc&&(a=a.xmlDoc.responseText),a=a.replace(/\r/g,""),a=a.split(this.csv.row),this._csvHdr){this.clearAll();var b=a.splice(0,1)[0].split(this.csv.cell);this._csvAID||b.splice(0,1),this.setHeader(b.join(this.delim)),this.init()}for(var c=0;c<a.length;c++)if(a[c]||c!=a.length-1){if(this._csvAID){var d=c+1;this.rowsBuffer.push({idd:d,data:a[c],_parser:this._process_csv_row,_locator:this._get_csv_data})}else{var e=a[c].split(this.csv.cell),d=e.splice(0,1)[0];this.rowsBuffer.push({idd:d,data:e,_parser:this._process_jsarray_row,_locator:this._get_jsarray_data})
}this.rowsAr[d]=a[c]}this.render_dataset(),this._parsing=!1},_process_json:function(data){this._parsing=!0,data&&data.xmlDoc&&eval("data="+data.xmlDoc.responseText+";");for(var i=0;i<data.rows.length;i++){var id=data.rows[i].id;this.rowsBuffer.push({idd:id,data:data.rows[i],_parser:this._process_json_row,_locator:this._get_json_data}),this.rowsAr[id]=data[i]}this.render_dataset(),this._parsing=!1},render_dataset:function(a,b){if(this._srnd){if(this._fillers)return this._update_srnd_view();b=Math.min(this._get_view_size()+(this._srnd_pr||0),this.rowsBuffer.length)}this.pagingOn?(a=(this.currentPage-1)*this.rowsBufferOutSize,b=Math.min(a+this.rowsBufferOutSize,this.rowsBuffer.length)):(a=a||0,b=b||this.rowsBuffer.length);for(var c=a;b>c;c++){var d=this.render_row(c);if(-1==d){this.xmlFileUrl&&this.callEvent("onDynXLS",[c,this._dpref?this._dpref:b-c])&&this.load(this.xmlFileUrl+getUrlSymbol(this.xmlFileUrl)+"posStart="+c+"&count="+(this._dpref?this._dpref:b-c),this._data_type),b=c;break}if(d.parentNode&&d.parentNode.tagName||(this._insertRowAt(d,c),(d._attrs.selected||d._attrs.select)&&(this.selectRow(d,d._attrs.call?!0:!1,!0),d._attrs.selected=d._attrs.select=null)),this._ads_count&&c-a==this._ads_count){var e=this;return this._context_parsing=this._context_parsing||this._parsing,this._contextCallTimer=window.setTimeout(function(){e._contextCallTimer=null,e.render_dataset(c,b),e._contextCallTimer||(e._context_parsing?e.callEvent("onXLE",[]):e._fixAlterCss(),e.callEvent("onDistributedEnd",[]),e._context_parsing=!1)},this._ads_time)}}this._srnd&&!this._fillers&&(this._fillers=[this._add_filler(b,this.rowsBuffer.length-b)]),this.setSizes()},render_row:function(a){if(!this.rowsBuffer[a])return-1;if(this.rowsBuffer[a]._parser){var b=this.rowsBuffer[a];if(this.rowsAr[b.idd]&&"TR"==this.rowsAr[b.idd].tagName)return this.rowsBuffer[a]=this.rowsAr[b.idd];var c=this._prepareRow(b.idd);return this.rowsBuffer[a]=c,this.rowsAr[b.idd]=c,b._parser.call(this,c,b.data),this._postRowProcessing(c),c}return this.rowsBuffer[a]},_get_cell_value:function(a,b,c){return a._locator?(this._c_order&&(b=this._c_order[b]),a._locator.call(this,a.data,b)):this.cells3(a,b)[c?c:"getValue"]()},sortRows:function(a,b,c){if(c=(c||"asc").toLowerCase(),b=b||this.fldSort[a],a=a||0,this.isTreeGrid())this.sortTreeRows(a,b,c);else{var d={},e=this.cellType[a],f="getValue";"link"==e&&(f="getContent"),("dhxCalendar"==e||"dhxCalendarA"==e)&&(f="getDate");for(var g=0;g<this.rowsBuffer.length;g++)d[this.rowsBuffer[g].idd]=this._get_cell_value(this.rowsBuffer[g],a,f);this._sortRows(a,b,c,d)}this.callEvent("onAfterSorting",[a,b,c])},_sortCore:function(a,b,c,d,e){var f="sort";if(this._sst&&(e.stablesort=this.rowsCol.stablesort,f="stablesort"),b.length>4&&(b=window[b]),"cus"==b){var g=this._customSorts[a];e[f](function(a,b){return g(d[a.idd],d[b.idd],c,a.idd,b.idd)})}else"function"==typeof b?e[f](function(a,e){return b(d[a.idd],d[e.idd],c,a.idd,e.idd)}):"str"==b?e[f](function(a,b){return"asc"==c?d[a.idd]>d[b.idd]?1:-1:d[a.idd]<d[b.idd]?1:-1}):"int"==b?e[f](function(a,b){var e=parseFloat(d[a.idd]);e=isNaN(e)?-99999999999999:e;var f=parseFloat(d[b.idd]);return f=isNaN(f)?-99999999999999:f,"asc"==c?e-f:f-e}):"date"==b&&e[f](function(a,b){var e=Date.parse(d[a.idd])||Date.parse("01/01/1900"),f=Date.parse(d[b.idd])||Date.parse("01/01/1900");return"asc"==c?e-f:f-e})},_sortRows:function(a,b,c,d){this._sortCore(a,b,c,d,this.rowsBuffer),this._reset_view(),this.callEvent("onGridReconstructed",[])},_reset_view:function(a){if(this.obj.rows[0]){var b=this.obj.rows[0].parentNode,c=b.removeChild(b.childNodes[0],!0);if(_isKHTML)for(var d=b.parentNode.childNodes.length-1;d>=0;d--)"TR"==b.parentNode.childNodes[d].tagName&&b.parentNode.removeChild(b.parentNode.childNodes[d],!0);else if(_isIE)for(var d=b.childNodes.length-1;d>=0;d--)b.childNodes[d].removeNode(!0);else b.innerHTML="";b.appendChild(c),this.rowsCol=dhtmlxArray(),this._sst&&this.enableStableSorting(!0),this._fillers=this.undefined,a||(_isIE&&this._srnd,this.render_dataset())}},deleteRow:function(a,b){if(b||(b=this.getRowById(a)),b){if(this.editStop(),0==this.callEvent("onBeforeRowDeleted",[a]))return!1;var c=0;if(-1==this.cellType._dhx_find("tree")||this._realfake){b.parentNode&&b.parentNode.removeChild(b);var d=this.rowsCol._dhx_find(b);-1!=d&&this.rowsCol._dhx_removeAt(d);for(var e=0;e<this.rowsBuffer.length;e++)if(this.rowsBuffer[e]&&this.rowsBuffer[e].idd==a){this.rowsBuffer._dhx_removeAt(e),d=e;break}}else c=this._h2.get[a].parent.id,this._removeTrGrRow(b);this.rowsAr[a]=null;for(var e=0;e<this.selectedRows.length;e++)this.selectedRows[e].idd==a&&this.selectedRows._dhx_removeAt(e);if(this._srnd){for(var e=0;e<this._fillers.length;e++){var f=this._fillers[e];f&&(f[0]>=d?f[0]=f[0]-1:f[1]>=d&&(f[1]=f[1]-1))}this._update_srnd_view()}return this.pagingOn&&this.changePage(),this._realfake||this.callEvent("onAfterRowDeleted",[a,c]),this.callEvent("onGridReconstructed",[]),!0}},_addRow:function(a,b,c){(-1==c||"undefined"==typeof c)&&(c=this.rowsBuffer.length),"string"==typeof b&&(b=b.split(this.delim));var d=this._prepareRow(a);d._attrs={};for(var e=0;e<d.childNodes.length;e++)d.childNodes[e]._attrs={};if(this.rowsAr[d.idd]=d,this._h2&&(this._h2.get[d.idd].buff=d),this._fillRow(d,b),this._postRowProcessing(d),this._skipInsert)return this._skipInsert=!1,this.rowsAr[d.idd]=d;if(this.pagingOn)return this.rowsBuffer._dhx_insertAt(c,d),this.rowsAr[d.idd]=d,d;if(this._fillers){this.rowsCol._dhx_insertAt(c,null),this.rowsBuffer._dhx_insertAt(c,d),this._fake&&this._fake.rowsCol._dhx_insertAt(c,null),this.rowsAr[d.idd]=d;for(var f=!1,g=0;g<this._fillers.length;g++){var h=this._fillers[g];h&&h[0]<=c&&h[0]+h[1]>=c&&(h[1]=h[1]+1,h[2].firstChild.style.height=parseInt(h[2].firstChild.style.height)+this._srdh+"px",f=!0,this._fake&&this._fake._fillers[g][1]++),h&&h[0]>c&&(h[0]=h[0]+1,this._fake&&this._fake._fillers[g][0]++)}return f||this._fillers.push(this._add_filler(c,1,0==c?{parentNode:this.obj.rows[0].parentNode,nextSibling:this.rowsCol[1]}:this.rowsCol[c-1])),d}return this.rowsBuffer._dhx_insertAt(c,d),this._insertRowAt(d,c)},addRow:function(a,b,c){var d=this._addRow(a,b,c);return this.dragContext||this.callEvent("onRowAdded",[a]),this.pagingOn&&this.changePage(this.currentPage),this._srnd&&this._update_srnd_view(),d._added=!0,this._ahgr&&this.setSizes(),this.callEvent("onGridReconstructed",[]),d},_insertRowAt:function(a,b,c){return this.rowsAr[a.idd]=a,this._skipInsert?(this._skipInsert=!1,a):(0>b||!b&&0!==parseInt(b)?b=this.rowsCol.length:b>this.rowsCol.length&&(b=this.rowsCol.length),this._cssEven&&(a.className+=(this._cssSP?this.getLevel(a.idd):b)%2==1?" "+this._cssUnEven+(this._cssSU?this._cssUnEven+"_"+this.getLevel(a.idd):""):" "+this._cssEven+(this._cssSU?" "+this._cssEven+"_"+this.getLevel(a.idd):"")),c||(b!=this.obj.rows.length-1&&this.rowsCol[b]?this.rowsCol[b].parentNode.insertBefore(a,this.rowsCol[b]):_isKHTML?this.obj.appendChild(a):this.obj.firstChild.appendChild(a)),this.rowsCol._dhx_insertAt(b,a),a)},getRowById:function(a){var b=this.rowsAr[a];if(b){if("TR"!=b.tagName){for(var c=0;c<this.rowsBuffer.length;c++)if(this.rowsBuffer[c]&&this.rowsBuffer[c].idd==a)return this.render_row(c);if(this._h2)return this.render_row(null,b.idd)}return b}return null},cellById:function(a,b){return this.cells(a,b)},cells:function(a,b){if(0==arguments.length)return this.cells4(this.cell);var c=this.getRowById(a),d=c._childIndexes?c.childNodes[c._childIndexes[b]]:c.childNodes[b];return this.cells4(d)},cellByIndex:function(a,b){return this.cells2(a,b)},cells2:function(a,b){var c=this.render_row(a),d=c._childIndexes?c.childNodes[c._childIndexes[b]]:c.childNodes[b];return this.cells4(d)},cells3:function(a,b){var c=a._childIndexes?a.childNodes[a._childIndexes[b]]:a.childNodes[b];return this.cells4(c)},cells4:function(a){var b=window["eXcell_"+(a._cellType||this.cellType[a._cellIndex])];return b?new b(a):void 0},cells5:function(a,b){var b=b||a._cellType||this.cellType[a._cellIndex];if(!this._ecache[b]){if(window["eXcell_"+b])var c=window["eXcell_"+b];else var c=eXcell_ro;this._ecache[b]=new c(a)}return this._ecache[b].cell=a,this._ecache[b]},dma:function(a){this._ecache||(this._ecache={}),a&&!this._dma?(this._dma=this.cells4,this.cells4=this.cells5):!a&&this._dma&&(this.cells4=this._dma,this._dma=null)},getRowsNum:function(){return this.rowsBuffer.length},enableEditTabOnly:function(a){this.smartTabOrder=arguments.length>0?convertStringToBoolean(a):!0},setExternalTabOrder:function(a,b){var c=this;this.tabStart="object"==typeof a?a:document.getElementById(a),this.tabStart.onkeydown=function(a){var b=a||window.event;return 9==b.keyCode?(b.cancelBubble=!0,c.selectCell(0,0,0,0,1),c.cells2(0,0).isDisabled()&&c._key_events.k9_0_0.call(c),!1):void 0},_isOpera&&(this.tabStart.onkeypress=this.tabStart.onkeydown),this.tabEnd="object"==typeof b?b:document.getElementById(b),this.tabEnd.onkeydown=this.tabEnd.onkeypress=function(a){var b=a||window.event;return 9==b.keyCode&&b.shiftKey?(b.cancelBubble=!0,c.selectCell(c.getRowsNum()-1,c.getColumnCount()-1,0,0,1),c.cells2(c.getRowsNum()-1,c.getColumnCount()-1).isDisabled()&&c._key_events.k9_0_1.call(c),!1):void 0},_isOpera&&(this.tabEnd.onkeypress=this.tabEnd.onkeydown)},uid:function(){return this._ui_seed||(this._ui_seed=(new Date).valueOf()),this._ui_seed++},clearAndLoad:function(){var a=this._pgn_skin;this._pgn_skin=null,this.clearAll(),this._pgn_skin=a,this.load.apply(this,arguments)},getStateOfView:function(){return this.pagingOn?[this.currentPage,(this.currentPage-1)*this.rowsBufferOutSize,(this.currentPage-1)*this.rowsBufferOutSize+this.rowsCol.length,this.rowsBuffer.length]:[Math.floor(this.objBox.scrollTop/this._srdh),Math.ceil(parseInt(this.objBox.offsetHeight)/this._srdh),this.rowsBuffer.length]}},dhtmlXGridCellObject.prototype={getAttribute:function(a){return this.cell._attrs[a]},setAttribute:function(a,b){this.cell._attrs[a]=b}},dhtmlXGridCellObject.prototype.setValue=function(a){"number"==typeof a||a&&""!=a.toString()._dhx_trim()?this.cell._clearCell=!1:(a="&nbsp;",this.cell._clearCell=!0),this.setCValue(a)},dhtmlXGridCellObject.prototype.getTitle=function(){return _isIE?this.cell.innerText:this.cell.textContent},dhtmlXGridCellObject.prototype.setCValue=function(a,b){this.cell.innerHTML=a,this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,arguments.length>1?b:a])},dhtmlXGridCellObject.prototype.setCTxtValue=function(a){this.cell.innerHTML="",this.cell.appendChild(document.createTextNode(a)),this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,a])},dhtmlXGridCellObject.prototype.setLabel=function(a){this.cell.innerHTML=a},dhtmlXGridCellObject.prototype.getMath=function(){return this._val?this.val:this.getValue()},eXcell.prototype=new dhtmlXGridCellObject,eXcell_ed.prototype=new eXcell,eXcell_edtxt.prototype=new eXcell_ed,eXcell_edn.prototype=new eXcell_ed,eXcell_edn.prototype.setValue=function(a){return a&&""!=a.toString()._dhx_trim()?(this.cell._clearCell=!1,void this.setCValue(this.grid._aplNF(a,this.cell._cellIndex))):(this.cell._clearCell=!0,this.setCValue("&nbsp;",0))},eXcell_ch.prototype=new eXcell,eXcell_ch.prototype.setValue=function(a){this.cell.style.verticalAlign="middle",a&&(a=a.toString()._dhx_trim(),("false"==a||"0"==a)&&(a="")),a?(a="1",this.cell.chstate="1"):(a="0",this.cell.chstate="0");this.setCValue("<img src='"+this.grid.imgURL+"item_chk"+a+".gif' onclick='new eXcell_ch(this.parentNode).changeState();(arguments[0]||event).cancelBubble=true;'>",this.cell.chstate)},eXcell_ra.prototype=new eXcell_ch,eXcell_ra.prototype.setValue=function(a){if(this.cell.style.verticalAlign="middle",a&&(a=a.toString()._dhx_trim(),("false"==a||"0"==a)&&(a="")),a){if(this.grid._RaSeCol||(this.grid._RaSeCol=[]),this.grid._RaSeCol[this.cell._cellIndex]){var b=this.grid.cells4(this.grid._RaSeCol[this.cell._cellIndex]);b.setValue("0"),arguments[1]&&(b.cell.wasChanged=!0),this.grid.rowsAr[b.cell.parentNode.idd]&&this.grid.callEvent("onEditCell",[1,b.cell.parentNode.idd,b.cell._cellIndex])}this.grid._RaSeCol[this.cell._cellIndex]=this.cell,a="1",this.cell.chstate="1"}else a="0",this.cell.chstate="0";this.setCValue("<img src='"+this.grid.imgURL+"radio_chk"+a+".gif' onclick='new eXcell_ra(this.parentNode).changeState(false);'>",this.cell.chstate)},eXcell_txt.prototype=new eXcell,eXcell_txttxt.prototype=new eXcell_txt,eXcell_txt.prototype.setValue=function(a){a&&""!=a.toString()._dhx_trim()?this.cell._clearCell=!1:(a="&nbsp;",this.cell._clearCell=!0),this.cell._brval=a,this.grid.multiLine?this.setCValue(a.replace(/\n/g,"<br/>"),a):this.setCValue(a,a)},eXcell_co.prototype=new eXcell,eXcell_co.prototype.getText=function(){return this.cell.innerHTML},eXcell_co.prototype.setValue=function(a){if("object"==typeof a){var b=this.grid.xmlLoader.doXPath("./option",a);b.length&&(this.cell._combo=new dhtmlXGridComboObject);for(var c=0;c<b.length;c++)this.cell._combo.put(b[c].getAttribute("value"),b[c].firstChild?b[c].firstChild.data:"");a=a.firstChild.data}""==(a||"").toString()._dhx_trim()&&(a=null),this.cell.combo_value=a,null!==a?this.setCValue((this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(a)||a,a):this.setCValue("&nbsp;",a)},eXcell_coro.prototype=new eXcell_co,eXcell_cotxt.prototype=new eXcell_co,eXcell_cotxt.prototype.getText=function(){return _isIE?this.cell.innerText:this.cell.textContent},eXcell_cotxt.prototype.setValue=function(a){if("object"==typeof a){var b=this.grid.xmlLoader.doXPath("./option",a);b.length&&(this.cell._combo=new dhtmlXGridComboObject);for(var c=0;c<b.length;c++)this.cell._combo.put(b[c].getAttribute("value"),b[c].firstChild?b[c].firstChild.data:"");a=a.firstChild.data}""==(a||"").toString()._dhx_trim()&&(a=null),null!==a?this.setCTxtValue((this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(a)||a,a):this.setCTxtValue(" ",a),this.cell.combo_value=a},eXcell_corotxt.prototype=new eXcell_cotxt,eXcell_cp.prototype=new eXcell,eXcell_cp.prototype.setValue=function(a){this.setCValue("<div style='width:100%;height:"+(this.cell.offsetHeight-2)+";background-color:"+(a||"")+";border:0px;'>&nbsp;</div>",a),this.cell.firstChild._bg=a},eXcell_img.prototype=new eXcell,eXcell_img.prototype.getTitle=function(){return this.cell.tit},eXcell_img.prototype.setValue=function(a){var b=a;if(-1!=a.indexOf("^")){var c=a.split("^");a=c[0],b=this.cell._attrs.title||c[1],c.length>2&&(this.cell.lnk=c[2],c[3]&&(this.cell.trg=c[3])),this.cell.titFl="1"}this.setCValue("<img src='"+this.grid.iconURL+(a||"")._dhx_trim()+"' border='0'>",a),this.cell.lnk&&(this.cell.innerHTML="<a href='"+this.cell.lnk+"' target='"+this.cell.trg+"'>"+this.cell.innerHTML+"</a>"),this.cell.tit=b},eXcell_price.prototype=new eXcell_ed,eXcell_price.prototype.setValue=function(a){isNaN(parseFloat(a))&&(a=this.val||0);var b="green";0>a&&(b="red"),this.setCValue("<span>$</span><span style='padding-right:2px;color:"+b+";'>"+a+"</span>",a)},eXcell_dyn.prototype=new eXcell_ed,eXcell_dyn.prototype.setValue=function(a){if((!a||isNaN(Number(a)))&&""!==a&&(a=0),a>0)var b="green",c="dyn_up.gif";else if(0==a)var b="black",c="dyn_.gif";else var b="red",c="dyn_down.gif";this.setCValue("<div style='position:relative;padding-right:2px;width:100%;overflow:hidden;'><img src='"+this.grid.imgURL+c+"' height='15' style='position:absolute;top:0px;left:0px;'><span style=' padding-left:20px;width:100%;color:"+b+";'>"+a+"</span></div>",a)},eXcell_ro.prototype=new eXcell,eXcell_ron.prototype=new eXcell,eXcell_ron.prototype.setValue=function(a){if(0===a);else if(!a||""==a.toString()._dhx_trim())return this.setCValue("&nbsp;"),this.cell._clearCell=!0;this.setCValue(a?this.grid._aplNF(a,this.cell._cellIndex):"0"),this.cell._clearCell=!1},eXcell_rotxt.prototype=new eXcell,Hashtable.prototype=new dhtmlXGridComboObject,dhtmlXGridObject.prototype.filterBy=function(a,b,c){if(this._filters_ready(),this.isTreeGrid())return this.filterTreeBy(a,b,c);if(this._f_rowsBuffer?c||(this.rowsBuffer=dhtmlxArray([].concat(this._f_rowsBuffer)),this._fake&&(this._fake.rowsBuffer=this.rowsBuffer)):this._f_rowsBuffer=[].concat(this.rowsBuffer),this.rowsBuffer.length){if(this.dma(!0),"object"==typeof a)for(var d=0;d<b.length;d++)this._filterA(a[d],b[d]);else this._filterA(a,b);this.dma(!1),this.pagingOn&&this.rowsBuffer.length/this.rowsBufferOutSize<this.currentPage-1&&this.changePage(0),this._reset_view(),this.callEvent("onGridReconstructed",[])}},dhtmlXGridObject.prototype._filterA=function(a,b){if(""!=b){var c=!0;if("function"==typeof b?c=!1:b=(b||"").toString().toLowerCase(),this.rowsBuffer.length)for(var d=this.rowsBuffer.length-1;d>=0;d--)(c?-1!=this._get_cell_value(this.rowsBuffer[d],a).toString().toLowerCase().indexOf(b):b(this._get_cell_value(this.rowsBuffer[d],a),this.rowsBuffer[d].idd))||this.rowsBuffer.splice(d,1)}},dhtmlXGridObject.prototype.getFilterElement=function(a){if(this.filters){for(var b=0;b<this.filters.length;b++)if(this.filters[b][1]==a)return this.filters[b][0].combo||this.filters[b][0];return null}},dhtmlXGridObject.prototype.collectValues=function(a){var b=this.callEvent("onCollectValues",[a]);if(b!==!0)return b;if(this.isTreeGrid())return this.collectTreeValues(a);this.dma(!0),this._build_m_order(),a=this._m_order?this._m_order[a]:a;for(var c={},e=[],f=this._f_rowsBuffer||this.rowsBuffer,g=0;g<f.length;g++){var h=this._get_cell_value(f[g],a);!h||f[g]._childIndexes&&f[g]._childIndexes[a]==f[g]._childIndexes[a-1]||(c[h]=!0)}this.dma(!1);var i=this.combos[a];for(d in c)c[d]===!0&&e.push(i?i.get(d)||d:d);return e.sort()},dhtmlXGridObject.prototype._build_m_order=function(){if(this._c_order){this._m_order=[];for(var a=0;a<this._c_order.length;a++)this._m_order[this._c_order[a]]=a}},dhtmlXGridObject.prototype.filterByAll=function(){var a=[],b=[];this._build_m_order();for(var c=0;c<this.filters.length;c++){var d=this._m_order?this._m_order[this.filters[c][1]]:this.filters[c][1];b.push(d);var e,f=this.filters[c][0]._filter?this.filters[c][0]._filter():this.filters[c][0].value;"function"!=typeof f&&(e=this.combos[d])&&(d=e.values._dhx_find(f),f=-1==d?f:e.keys[d]),a.push(f)}this.callEvent("onFilterStart",[b,a])&&(this.filterBy(b,a),this._cssEven&&this._fixAlterCss(),this.callEvent("onFilterEnd",[this.filters]))},dhtmlXGridObject.prototype.makeFilter=function(a,b){if(this.filters||(this.filters=[]),"object"!=typeof a&&(a=document.getElementById(a)),a){var c=this;if(a.style.width||(a.style.width="90%"),"SELECT"==a.tagName)this.filters.push([a,b]),this._loadSelectOptins(a,b),a.onchange=function(){c.filterByAll()},_isIE&&(a.style.marginTop="1px"),this.attachEvent("onEditCell",function(c,d,e){return this._build_m_order(),2==c&&this.filters&&(this._m_order?e==this._m_order[b]:e==b)&&this._loadSelectOptins(a,b),!0});else if("INPUT"==a.tagName)this.filters.push([a,b]),a.value="",a.onkeydown=function(){this._timer&&window.clearTimeout(this._timer),this._timer=window.setTimeout(function(){c.filterByAll()},500)};else if("DIV"==a.tagName&&"combo"==a.className){this.filters.push([a,b]),a.style.padding="0px",a.style.margin="0px",window.dhx_globalImgPath||(window.dhx_globalImgPath=this.imgURL);var d=new dhtmlXCombo(a,"_filter","90%");d.filterSelfA=d.filterSelf,d.filterSelf=function(){0==this.getSelectedIndex()&&this.setComboText(""),this.filterSelfA.apply(this,arguments),this.optionsArr[0].hide(!1)},d.enableFilteringMode(!0),a.combo=d,a.value="",this._loadComboOptins(a,b),d.attachEvent("onChange",function(){a.value=d.getSelectedValue(),c.filterByAll()})}a.parentNode&&(a.parentNode.className+=" filter"),this._filters_ready()}},dhtmlXGridObject.prototype.findCell=function(a,b,c){var d=new Array;if(a=a.toString().toLowerCase(),!this.rowsBuffer.length)return d;for(var e=b||0;e<this._cCount;e++){if(this._h2)this._h2.forEachChild(0,function(b){return-1!=this._get_cell_value(b.buff,e).toString().toLowerCase().indexOf(a)&&(d.push([b.id,e]),c)?d:void 0},this);else for(var f=0;f<this.rowsBuffer.length;f++)if(-1!=this._get_cell_value(this.rowsBuffer[f],e).toString().toLowerCase().indexOf(a)&&(d.push([this.rowsBuffer[f].idd,e]),c))return d;if("undefined"!=typeof b)return d}return d},dhtmlXGridObject.prototype.makeSearch=function(a,b){if("object"!=typeof a&&(a=document.getElementById(a)),a){var c=this;"INPUT"==a.tagName&&(a.onkeypress=function(){this._timer&&window.clearTimeout(this._timer),this._timer=window.setTimeout(function(){if(""!=a.value){var d=c.findCell(a.value,b,!0);d.length&&(c._h2&&c.openItem(d[0][0]),c.selectCell(c.getRowIndex(d[0][0]),b||0))}},500)}),a.parentNode&&(a.parentNode.className+=" filter")}},dhtmlXGridObject.prototype._loadSelectOptins=function(a,b){var c=this.collectValues(b),d=a.value;a.innerHTML="",a.options[0]=new Option("","");for(var e=this._filter_tr?this._filter_tr[b]:null,f=0;f<c.length;f++)a.options[a.options.length]=new Option(e?e(c[f]):c[f],c[f]);a.value=d,a.value!=d&&this.filterByAll()},dhtmlXGridObject.prototype.setSelectFilterLabel=function(a,b){this._filter_tr||(this._filter_tr=[]),this._filter_tr[a]=b},dhtmlXGridObject.prototype._loadComboOptins=function(a,b){var c=this.collectValues(b);a.combo.clearAll(),a.combo.render(!1),a.combo.addOption("","&nbsp;");for(var d=[],e=0;e<c.length;e++)d.push([c[e],c[e]]);a.combo.addOption(d),a.combo.render(!0)},dhtmlXGridObject.prototype.refreshFilters=function(){if(this.filters)for(var a=0;a<this.filters.length;a++)switch(this.filters[a][0].tagName.toLowerCase()){case"input":break;case"select":this._loadSelectOptins.apply(this,this.filters[a]);break;case"div":this._loadComboOptins.apply(this,this.filters[a])}},dhtmlXGridObject.prototype._filters_ready=function(){this.attachEvent("onXLE",this.refreshFilters),this.attachEvent("onRowCreated",function(a,b){if(this._f_rowsBuffer&&!this._h2)for(var c=this._f_rowsBuffer,d=0;d<c.length;d++)if(c[d].idd==a){c[d]=b;break}}),this.attachEvent("onClearAll",function(){this._f_rowsBuffer=null,this.obj.rows.length||(this.filters=[])}),window.dhtmlXCombo&&this.attachEvent("onScroll",dhtmlXCombo.prototype.closeAll),this._filters_ready=function(){}},dhtmlXGridObject.prototype._in_header_text_filter=function(a,b){a.innerHTML="<input type='text' style='width:90%;font-size:8pt;font-family:Tahoma;-moz-user-select:text;'>",a.onclick=a.onmousedown=function(a){return(a||event).cancelBubble=!0,!0},a.onselectstart=function(){return event.cancelBubble=!0},this.makeFilter(a.firstChild,b)},dhtmlXGridObject.prototype._in_header_text_filter_inc=function(a,b){a.innerHTML="<input type='text' style='width:90%;font-size:8pt;font-family:Tahoma;-moz-user-select:text;'>",a.onclick=a.onmousedown=function(a){return(a||event).cancelBubble=!0,!0},a.onselectstart=function(){return event.cancelBubble=!0},this.makeFilter(a.firstChild,b),a.firstChild._filter=function(){return function(b){return 0==b.toString().toLowerCase().indexOf(a.firstChild.value.toLowerCase())}},this._filters_ready()},dhtmlXGridObject.prototype._in_header_select_filter=function(a,b){a.innerHTML="<select style='width:90%;font-size:8pt;font-family:Tahoma;'></select>",a.onclick=function(a){return(a||event).cancelBubble=!0,!1},this.makeFilter(a.firstChild,b)},dhtmlXGridObject.prototype._in_header_select_filter_strict=function(a,b){a.innerHTML="<select style='width:90%;font-size:8pt;font-family:Tahoma;'></select>",a.onclick=function(a){return(a||event).cancelBubble=!0,!1},this.makeFilter(a.firstChild,b);var c=this.combos;a.firstChild._filter=function(){var d;return d=c[b]?c[b].keys[c[b].values._dhx_find(a.firstChild.value)]:a.firstChild.value.toLowerCase(),function(b){return""==a.firstChild.value.toLowerCase()?!0:b.toString().toLowerCase()==d}},this._filters_ready()},dhtmlXGridObject.prototype._in_header_combo_filter=function(a,b){a.innerHTML="<div style='width:100%;padding-left:2px;overflow:hidden;font-size:8pt;font-family:Tahoma;-moz-user-select:text;' class='combo'></div>",a.onselectstart=function(){return event.cancelBubble=!0},a.onclick=a.onmousedown=function(a){return(a||event).cancelBubble=!0,!0},this.makeFilter(a.firstChild,b)},dhtmlXGridObject.prototype._in_header_text_search=function(a,b){a.innerHTML="<input type='text' style='width:90%;font-size:8pt;font-family:Tahoma;-moz-user-select:text;'>",a.onclick=a.onmousedown=function(a){return(a||event).cancelBubble=!0,!0},a.onselectstart=function(){return event.cancelBubble=!0},this.makeSearch(a.firstChild,b)},dhtmlXGridObject.prototype._in_header_numeric_filter=function(a,b){this._in_header_text_filter.call(this,a,b),a.firstChild._filter=function(){var a,b=this.value,c="==",d=parseFloat(b.replace("=","")),e=null;return b?-1!=b.indexOf("..")?(b=b.split(".."),d=parseFloat(b[0]),e=parseFloat(b[1]),function(a){return a>=d&&e>=a?!0:!1}):(a=b.match(/>=|>|<=|</),a&&(c=a[0],d=parseFloat(b.replace(c,""))),Function("v"," if (v "+c+" "+d+" )return true;return false;")):void 0}},dhtmlXGridObject.prototype._in_header_master_checkbox=function(a,b,c){a.innerHTML=c[0]+"<input type='checkbox' />"+c[1];var d=this;a.firstChild.onclick=function(a){d._build_m_order();var c=d._m_order?d._m_order[b]:b,e=this.checked?1:0;d.forEachRow(function(a){var b=this.cells(a,c);b.isCheckbox()&&b.setValue(e)}),(a||event).cancelBubble=!0}},dhtmlXGridObject.prototype._in_header_stat_total=function(a,b,c){var d=function(){for(var a=0,c=0;c<this.rowsBuffer.length;c++){var d=parseFloat(this._get_cell_value(this.rowsBuffer[c],b));a+=isNaN(d)?0:d}return this._maskArr[b]?this._aplNF(a,b):Math.round(100*a)/100};this._stat_in_header(a,d,b,c,c)},dhtmlXGridObject.prototype._in_header_stat_multi_total=function(a,b,c){var d=c[1].split(":");c[1]="";for(var e=0;e<d.length;e++)d[e]=parseInt(d[e]);for(var f=function(){for(var a=0,c=0;c<this.rowsBuffer.length;c++){for(var e=1,f=0;f<d.length;f++)e*=parseFloat(this._get_cell_value(this.rowsBuffer[c],d[f]));a+=isNaN(e)?0:e}return this._maskArr[b]?this._aplNF(a,b):Math.round(100*a)/100},g=[],b=0;b<d.length;b++)g[d[b]]=!0;this._stat_in_header(a,f,g,c,c)},dhtmlXGridObject.prototype._in_header_stat_max=function(a,b,c){var d=function(){var a=-999999999;if(0==this.getRowsNum())return"&nbsp;";for(var c=0;c<this.rowsBuffer.length;c++)a=Math.max(a,parseFloat(this._get_cell_value(this.rowsBuffer[c],b)));return this._maskArr[b]?this._aplNF(a,b):a};this._stat_in_header(a,d,b,c)},dhtmlXGridObject.prototype._in_header_stat_min=function(a,b,c){var d=function(){var a=999999999;if(0==this.getRowsNum())return"&nbsp;";for(var c=0;c<this.rowsBuffer.length;c++)a=Math.min(a,parseFloat(this._get_cell_value(this.rowsBuffer[c],b)));return this._maskArr[b]?this._aplNF(a,b):a};this._stat_in_header(a,d,b,c)},dhtmlXGridObject.prototype._in_header_stat_average=function(a,b,c){var d=function(){var a=0,c=0;if(0==this.getRowsNum())return"&nbsp;";for(var d=0;d<this.rowsBuffer.length;d++){var e=parseFloat(this._get_cell_value(this.rowsBuffer[d],b));a+=isNaN(e)?0:e,c++}return this._maskArr[b]?this._aplNF(a/c,b):Math.round(a/c*100)/100};this._stat_in_header(a,d,b,c)},dhtmlXGridObject.prototype._in_header_stat_count=function(a,b,c){var d=function(){return this.getRowsNum()};this._stat_in_header(a,d,b,c)},dhtmlXGridObject.prototype._stat_in_header=function(a,b,c,d){var e=function(){this.dma(!0),a.innerHTML=(d[0]?d[0]:"")+b.call(this)+(d[1]?d[1]:""),this.dma(!1),this.callEvent("onStatReady",[])};this._stat_events||(this._stat_events=[],this.attachEvent("onClearAll",function(){if(!this.hdr.rows[1]){for(var a=0;a<this._stat_events.length;a++)for(var b=0;4>b;b++)this.detachEvent(this._stat_events[a][b]);this._stat_events=[]}})),this._stat_events.push([this.attachEvent("onGridReconstructed",e),this.attachEvent("onXLE",e),this.attachEvent("onFilterEnd",e),this.attachEvent("onEditCell",function(a,b,d){return 2==a&&(d==c||c&&c[d])&&e.call(this),!0})]),a.innerHTML=""},dhtmlXGridObject.prototype.unGroup=function(){this._groups&&(this._dndProblematic=!1,delete this._groups,delete this._gIndex,this._fake&&this._mirror_rowsCol(),this.forEachRow(function(a){this.rowsAr[a].style.display=""}),this._reset_view(),this.callEvent("onGridReconstructed",[]),this.callEvent("onUnGroup",[]))},dhtmlXGridObject.prototype._mirror_rowsCol=function(){this._fake._groups=this._groups,this._fake._gIndex=this._gIndex,this.rowsBuffer=dhtmlxArray();for(var a=0;a<this.rowsCol.length;a++)this.rowsCol[a]._cntr||this.rowsBuffer.push(this.rowsCol[a]);this._fake.rowsBuffer=dhtmlxArray();for(var a=0;a<this._fake.rowsCol.length;a++)this._fake.rowsCol[a]._cntr||this._fake.rowsBuffer.push(this._fake.rowsCol[a])},dhtmlXGridObject.prototype.groupBy=function(a,b){if(this._groups&&this.unGroup(),this._dndProblematic=!0,this._groups={},!b){b=["#title"];for(var c=1;c<this._cCount;c++)b.push("#cspan")}this._gmask=document.createElement("TR");for(var d,e=0,c=0;c<b.length;c++)"#cspan"==b[c]?d.colSpan=(parseInt(d.colSpan)||1)+1:(d=document.createElement("TD"),d._cellIndex=c,this._hrrar[c]&&(d.style.display="none"),d.className="group_row",d.innerHTML="&nbsp;","#title"==b[c]?this._gmask._title=e:d.align=this.cellAlign[c]||"left",this._gmask.appendChild(d),0==b[c].indexOf("#stat")&&(this._gmask._math=!0,d._counter=[this["_g_"+b[c].replace("#","")],c,e]),e++);for(var f in this._groups)this._groups[f]=this.undefined;if(this._gIndex=a,this._fake&&!this._realfake&&(this._fake._groups=[],this._fake._gIndex=this._gIndex),this._nextRow=function(a,b){var c=this.rowsCol[a+b];return c&&("none"==c.style.display||c._cntr)?this._nextRow(a+b,b):c},this._key_events.k38_0_0=function(){if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{var a=this.row.rowIndex;if(!a)return;var b=this._nextRow(a-1,-1);b&&this.selectCell(b,this.cell._cellIndex,!0)}},this._key_events.k40_0_0=function(){if(this.editor&&this.editor.combo)this.editor.shiftNext();else{var a=this.row.rowIndex;if(!a)return;var b=this._nextRow(a-1,1);b&&this.selectCell(b,this.cell._cellIndex,!0)}},this.__sortRowsBG||(this.attachEvent("onFilterStart",function(){return this._groups&&(this._groups=this.undefined),!0}),this.attachEvent("onFilterEnd",function(){"undefined"!=typeof this._gIndex&&this.groupBy(this._gIndex)}),this.attachEvent("onBeforeSorting",function(a,b,c){return"undefined"==typeof this._groups?!0:(a==this._gIndex?this._sortByGroup(a,b,c):this._sortInGroup(a,b,c),this._fake&&(this._mirror_rowsCol(),this._fake._groups=[],this._fake._reset_view()),this.setSortImgState(!0,a,c),this.callEvent("onAfterSorting",[a,b,c]),!1)}),this.attachEvent("onClearAll",function(){this.unGroup()}),this.attachEvent("onBeforeRowDeleted",function(a){if(!this._groups)return!0;if(!this.rowsAr[a])return!0;var b=this.cells(a,this._gIndex).getValue();""===b&&(b=" ");var c=this._groups[b];return this._dec_group(c),!0}),this.attachEvent("onCheckbox",function(a,b,c){this.callEvent("onEditCell",[2,a,b,c?1:0,c?0:1])}),this.attachEvent("onXLE",this.updateGroups),this.attachEvent("onColumnHidden",this.hideGroupColumn),this.attachEvent("onEditCell",function(a,b,c,d,e){if(!this._groups)return!0;if(2==a&&d!=e&&c==this._gIndex){""===e&&(e=" "),this._dec_group(this._groups[e]);var f=this.rowsAr[b],g=this.rowsCol._dhx_find(f),h=this._inc_group(d),i=this.rowsCol[h];f==i&&(i=i.nextSibling);{var j=f.parentNode;f.rowIndex}j.removeChild(f),i?j.insertBefore(f,i):j.appendChild(f),this.rowsCol._dhx_insertAt(h,f),g>h&&g++,this.rowsCol._dhx_removeAt(g,f),this._fixAlterCss()}else 2==a&&d!=e&&(this.updateGroups(),this._updateGroupView(this._groups[this.cells(b,this._gIndex).getValue()]));return!0}),this.__sortRowsBG=!0),this._key_events.k13_1_0=this._key_events.k13_0_1=function(){},this._groupExisting(),this._hrrar)for(var c=0;c<this._hrrar.length;c++)this._hrrar[c]&&this.hideGroupColumn(c,!0);this.callEvent("onGroup",[]),(this._ahgr||this._awdth)&&this.setSizes()},dhtmlXGridObject.prototype._sortInGroup=function(a,b,c){var d=this._groups_get();d.reverse();for(var e=0;e<d.length;e++){for(var f=d[e]._cntr._childs,g={},h=0;h<f.length;h++)g[f[h].idd]=this.cells3(f[h],a).getValue();this._sortCore(a,b,c,g,f)}this._groups_put(d),this.setSizes(),this.callEvent("onGridReconstructed",[])},dhtmlXGridObject.prototype._sortByGroup=function(a,b,c){for(var d=this._groups_get(),e=[],f=0;f<d.length;f++)d[f].idd="_sort_"+f,e["_sort_"+f]=d[f]._cntr.text;
this._sortCore(a,b,c,e,d),this._groups_put(d),this.callEvent("onGridReconstructed",[]),this.setSizes()},dhtmlXGridObject.prototype._inc_group=function(a,b,c){""===a&&(a=" "),this._groups[a]||(this._groups[a]={text:a,row:this._addPseudoRow(),count:0,state:b?"plus":"minus"});var d=this._groups[a];d.row._cntr=d;var e=this.rowsCol._dhx_find(d.row)+d.count+1;return d.count++,c||(this._updateGroupView(d),this.updateGroups()),e},dhtmlXGridObject.prototype._dec_group=function(a){return a?(a.count--,0==a.count?(a.row.parentNode.removeChild(a.row),this.rowsCol._dhx_removeAt(this.rowsCol._dhx_find(a.row)),delete this._groups[a.text]):this._updateGroupView(a),this._fake&&!this._realfake&&this._fake._dec_group(this._fake._groups[a.text]),this.updateGroups(),!0):void 0},dhtmlXGridObject.prototype._insertRowAt_gA=dhtmlXGridObject.prototype._insertRowAt,dhtmlXGridObject.prototype._insertRowAt=function(a,b,c){if("undefined"!=typeof this._groups){if(this._realfake)var d=this._fake._bfs_cells(a.idd,this._gIndex).getValue();else if(this._bfs_cells3)var d=this._bfs_cells3(a,this._gIndex).getValue();else var d=this.cells3(a,this._gIndex).getValue();d||(d=" "),b=this._inc_group(d,"none"==a.style.display)}var e=this._insertRowAt_gA(a,b,c);return"undefined"!=typeof this._groups&&(this.expandGroup(d),this._updateGroupView(this._groups[d]),this.updateGroups()),e},dhtmlXGridObject.prototype._updateGroupView=function(a){if(this._fake&&!this._realfake)return a.row.firstChild.innerHTML="&nbsp;";var b="<img style='margin-bottom:-4px' src='"+this.imgURL+a.state+".gif'> ";b+=this.customGroupFormat?this.customGroupFormat(a.text,a.count):a.text+" ( "+a.count+" ) ",a.row.childNodes[this._gmask._title].innerHTML=b},dhtmlXGridObject.prototype._addPseudoRow=function(a){for(var b=this._gmask.cloneNode(!0),c=0;c<b.childNodes.length;c++)b.childNodes[c]._cellIndex=this._gmask.childNodes[c]._cellIndex;var d=this;return b.onclick=function(a){d._fake&&d._realfake?d._fake._switchGroupState(d._fake._groups[this._cntr.text].row):d._switchGroupState(this),(a||event).cancelBubble="true"},b.ondblclick=function(a){(a||event).cancelBubble="true"},a||(_isKHTML?this.obj.appendChild(b):this.obj.firstChild.appendChild(b),this.rowsCol.push(b)),b},dhtmlXGridObject.prototype._groups_get=function(){var a=[];this._temp_par=this.obj.parentNode,this._temp_par.removeChild(this.obj);for(var b=[],c=this.rowsCol.length-1;c>=0;c--)this.rowsCol[c]._cntr?(this.rowsCol[c]._cntr._childs=b,b=[],a.push(this.rowsCol[c])):b.push(this.rowsCol[c]),this.rowsCol[c].parentNode.removeChild(this.rowsCol[c]);return a},dhtmlXGridObject.prototype._groups_put=function(a){this.rowsCol=new dhtmlxArray(0);for(var b=0;b<a.length;b++){var c=a[b]._cntr;this.obj.firstChild.appendChild(c.row),this.rowsCol.push(c.row),c.row.idd=null;for(var d=0;d<c._childs.length;d++)this.obj.firstChild.appendChild(c._childs[d]),this.rowsCol.push(c._childs[d]);delete c._childs}this._temp_par.appendChild(this.obj)},dhtmlXGridObject.prototype._groupExisting=function(a){if(this.getRowsNum()){var a=[];this._temp_par=this.obj.parentNode,this._temp_par.removeChild(this.obj);for(var b=this.rowsCol.length,c=0;b>c;c++){var d=this.cells4(this.rowsCol[c].childNodes[this._gIndex]).getValue();if(d||(d=" "),!this._groups[d]){this._groups[d]={text:d,row:this._addPseudoRow(!0),count:0,state:"minus"};var e=this._groups[d];e.row._cntr=e,this._groups[d]._childs=[],a.push(e.row)}this._groups[d].count++,this._groups[d]._childs.push(this.rowsCol[c]),this.rowsCol[c].parentNode.removeChild(this.rowsCol[c])}for(var c=0;c<a.length;c++)this._updateGroupView(a[c]._cntr);this._groups_put(a),this._fake&&!this._realfake&&(this._mirror_rowsCol(),this._fake._groups=[],this._fake._reset_view()),this.callEvent("onGridReconstructed",[]),this.updateGroups()}},dhtmlXGridObject.prototype._switchGroupState=function(a){this._fake&&!this._realfake&&this._fake._switchGroupState(this._fake._groups[a._cntr.text].row);var b=a._cntr,c=this.rowsCol._dhx_find(b.row)+1;b.state="minus"==b.state?"plus":"minus";for(var d="plus"==b.state?"none":"";this.rowsCol[c]&&!this.rowsCol[c]._cntr;)this.rowsCol[c].style.display=d,c++;this._updateGroupView(b),this.callEvent("onGroupStateChanged",[b.text,"minus"==b.state]),this.setSizes()},dhtmlXGridObject.prototype.expandGroup=function(a){"plus"==this._groups[a].state&&this._switchGroupState(this._groups[a].row)},dhtmlXGridObject.prototype.collapseGroup=function(a){"minus"==this._groups[a].state&&this._switchGroupState(this._groups[a].row)},dhtmlXGridObject.prototype.expandAllGroups=function(){for(var a in this._groups)this._groups[a]&&"plus"==this._groups[a].state&&this._switchGroupState(this._groups[a].row)},dhtmlXGridObject.prototype.collapseAllGroups=function(){for(var a in this._groups)this._groups[a]&&"minus"==this._groups[a].state&&this._switchGroupState(this._groups[a].row)},dhtmlXGridObject.prototype.hideGroupColumn=function(a,b){for(var c=-1,d=this._gmask.childNodes,e=0;e<d.length;e++)if(d[e]._cellIndex==a){c=e;break}if(-1!=c)for(var f in this._groups)this._groups[f].row.childNodes[c].style.display=b?"none":""},dhtmlXGridObject.prototype.groupStat=function(a,b,c){c=this["_g_"+(c||"stat_total")];var d=0,e=0;return this.forEachRowInGroup(a,function(a){d=c(d,1*this.cells(a,b).getValue(),e),e++}),d},dhtmlXGridObject.prototype.forEachRowInGroup=function(a,b){var c=this._groups[a].row.nextSibling;if(c)for(;c&&!c._cntr;)b.call(this,c.idd),c=c.nextSibling;else{var d=this._groups[a]._childs;if(d)for(var e=0;e<d.length;e++)b.call(this,d[e].idd)}},dhtmlXGridObject.prototype.updateGroups=function(){if(this._gmask&&this._gmask._math&&!this._parsing)for(var a=this._gmask.childNodes,b=0;b<a.length;b++)a[b]._counter&&this._b_processing.apply(this,a[b]._counter)},dhtmlXGridObject.prototype._b_processing=function(a,b,c){var d=0,e=0;this._ecache[this.cellType[b]]||this.cells5({parentNode:{grid:this}},this.cellType[b]);for(var f=this.rowsCol.length-1;f>=0;f--)this.rowsCol[f]._cntr?(this.cells5(this.rowsCol[f].childNodes[c],this.cellType[b]).setValue(d),e=d=0):(d=a(d,1*this.cells3(this.rowsCol[f],b).getValue(),e),e++)},dhtmlXGridObject.prototype._g_stat_total=function(a,b){return a+b},dhtmlXGridObject.prototype._g_stat_min=function(a,b,c){return c||(a=1/0),Math.min(a,b)},dhtmlXGridObject.prototype._g_stat_max=function(a,b,c){return c||(a=-1/0),Math.max(a,b)},dhtmlXGridObject.prototype._g_stat_average=function(a,b,c){return(a*c+b)/(c+1)},dhtmlXGridObject.prototype._g_stat_count=function(a){return a++},dhtmlXGridObject.prototype.enableDragAndDrop=function(a){"temporary_disabled"==a?(this.dADTempOff=!1,a=!0):this.dADTempOff=!0,this.dragAndDropOff=convertStringToBoolean(a),this._drag_validate=!0},dhtmlXGridObject.prototype.setDragBehavior=function(a){switch(this.dadmodec=this.dadmodefix=0,a){case"child":this.dadmode=0,this._sbmod=!1;break;case"sibling":this.dadmode=1,this._sbmod=!1;break;case"sibling-next":this.dadmode=1,this._sbmod=!0;break;case"complex":this.dadmode=2,this._sbmod=!1;break;case"complex-next":this.dadmode=2,this._sbmod=!0}},dhtmlXGridObject.prototype.enableDragOrder=function(a){this._dndorder=convertStringToBoolean(a)},dhtmlXGridObject.prototype._checkParent=function(a,b){var c=this._h2.get[a.idd].parent;if(c.parent){for(var d=0;d<b.length;d++)if(b[d]==c.id)return!0;return this._checkParent(this.rowsAr[c.id],b)}},dhtmlXGridObject.prototype._createDragNode=function(a,b){if(this.editStop(),window.dhtmlDragAndDrop.dragNode)return null;if(!this.dADTempOff)return null;a.parentObject=new Object,a.parentObject.treeNod=this;var c=this.callEvent("onBeforeDrag",[a.parentNode.idd,a._cellIndex]);if(!c)return null;var d=new Array;d=this.getSelectedId(),d=d&&""!=d?d.split(this.delim):[];for(var e=!1,f=0;f<d.length;f++)d[f]==a.parentNode.idd&&(e=!0);if(e||(this.selectRow(this.rowsAr[a.parentNode.idd],!1,b.ctrlKey,!1),b.ctrlKey||(d=[]),d[this.selMultiRows?d.length:0]=a.parentNode.idd),this.isTreeGrid())for(var f=d.length-1;f>=0;f--)this._checkParent(this.rowsAr[d[f]],d)&&d.splice(f,1);var g=this;d.length&&this._dndorder&&d.sort(function(a,b){return g.rowsAr[a].rowIndex>g.rowsAr[b].rowIndex?1:-1});var h=this.getFirstParentOfType(_isIE?b.srcElement:b.target,"TD");h&&(this._dndExtra=h._cellIndex),this._dragged=new Array;for(var f=0;f<d.length;f++)this.rowsAr[d[f]]&&(this._dragged[this._dragged.length]=this.rowsAr[d[f]],this.rowsAr[d[f]].treeNod=this);a.parentObject.parentNode=a.parentNode;var i=document.createElement("div");return i.innerHTML=c!==!0?c:this.rowToDragElement(a.parentNode.idd),i.style.position="absolute",i.className="dragSpanDiv",i},dhtmlXGridObject.prototype._createSdrgc=function(){this._sdrgc=document.createElement("DIV"),this._sdrgc.innerHTML="&nbsp;",this._sdrgc.className="gridDragLine",this.objBox.appendChild(this._sdrgc)},dragContext.prototype.valid=function(){if(this.sobj!=this.tobj)return!0;if(this.sid==this.tid)return!1;if("treeGrid"==this.target)for(var a=this.tid;a=this.tobj.getParentId(a);)if(this.sid==a)return!1;return!0},dragContext.prototype.close=function(){this.sobj=null,this.tobj=null},dragContext.prototype.copy=function(){return new dragContext(this.source,this.target,this.mode,this.dropmode,this.sid,this.tid,this.sobj,this.tobj,this.sExtra,this.tExtra)},dragContext.prototype.set=function(a,b){return this[a]=b,this},dragContext.prototype.uid=function(){for(this.nid=this.sid;this.tobj.rowsAr[this.nid];)this.nid=this.nid+(new Date).valueOf();return this},dragContext.prototype.data=function(){return this.sobj==this.tobj?this.sobj._getRowArray(this.sobj.rowsAr[this.sid]):"tree"==this.source?this.tobj.treeToGridElement(this.sobj,this.sid,this.tid):this.tobj.gridToGrid(this.sid,this.sobj,this.tobj)},dragContext.prototype.childs=function(){return"treeGrid"==this.source&&this.sobj._h2.get[this.sid]._xml_await?this.sobj._h2.get[this.sid].has_kids:null},dragContext.prototype.pid=function(){if(!this.tid)return 0;if(!this.tobj._h2)return 0;if("treeGrid"==this.target){if("child"==this.dropmode)return this.tid;var a=this.tobj.rowsAr[this.tid],b=this.tobj._h2.get[a.idd].parent.id;if(this.alfa&&this.tobj._sbmod&&a.nextSibling){var c=this.tobj._h2.get[a.nextSibling.idd].parent.id;if(c==this.tid)return this.tid;if(c!=b)return c}return b}},dragContext.prototype.ind=function(){if(this.tid==window.unknown)return 0;"treeGrid"==this.target&&this.tobj.openItem("child"==this.dropmode?this.tid:this.tobj.getParentId(this.tid));var a=this.tobj.rowsCol._dhx_find(this.tobj.rowsAr[this.tid]);if(this.alfa&&this.tobj._sbmod&&"sibling"==this.dropmode){var b=this.tobj.rowsAr[this.tid];if(b.nextSibling&&this._h2.get[b.nextSibling.idd].parent.id==this.tid)return a+1}return a+1+("treeGrid"==this.target&&a>=0&&"minus"==this.tobj._h2.get[this.tobj.rowsCol[a].idd].state?this.tobj._getOpenLenght(this.tobj.rowsCol[a].idd,0):0)},dragContext.prototype.img=function(){return"grid"!=this.target&&this.sobj._h2?this.sobj.getItemImage(this.sid):null},dragContext.prototype.slist=function(){for(var a=new Array,b=0;b<this.sid.length;b++)a[a.length]=this.sid[b]["tree"==this.source?"id":"idd"];return a.join(",")},dhtmlXGridObject.prototype._drag=function(a,b,c,d){if(this._realfake)return this._fake._drag();this.lastLanding;this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer);var e=c.parentNode,f=a.parentObject;e.idd||(e.grid=this,this.dadmodefix=0);var g=new dragContext(0,0,0,e.grid.dadmodec?"sibling":"child");f&&f.childNodes?g.set("source","tree").set("sobj",f.treeNod).set("sid",g.sobj._dragged):(f.treeNod.isTreeGrid()&&g.set("source","treeGrid"),g.set("sobj",f.treeNod).set("sid",g.sobj._dragged)),e.grid.isTreeGrid()?g.set("target","treeGrid"):g.set("dropmode","sibling"),g.set("tobj",e.grid).set("tid",e.idd),2==g.tobj.dadmode&&1==g.tobj.dadmodec&&g.tobj.dadmodefix<0&&(g.tid=g.tobj.obj.rows[1].idd!=g.tid?e.previousSibling.idd:0);var h=this.getFirstParentOfType(d,"TD");if(h&&g.set("tExtra",h._cellIndex),h&&g.set("sExtra",g.sobj._dndExtra),g.sobj.dpcpy&&g.set("mode","copy"),g.tobj._realfake&&(g.tobj=g.tobj._fake),g.sobj._realfake&&(g.sobj=g.sobj._fake),g.tobj._clearMove(),g.tobj.dragContext=g,!g.tobj.callEvent("onDrag",[g.slist(),g.tid,g.sobj,g.tobj,g.sExtra,g.tExtra]))return g.tobj.dragContext=null;var i=new Array;if("object"==typeof g.sid){for(var j=g.copy(),k=0;k<g.sid.length;k++)j.set("alfa",!k).set("sid",g.sid[k]["tree"==g.source?"id":"idd"]).valid()&&(j.tobj._dragRoutine(j),"treeGrid"==j.target&&"child"==j.dropmode&&j.tobj.openItem(j.tid),i[i.length]=j.nid,j.set("dropmode","sibling").set("tid",j.nid));j.close()}else g.tobj._dragRoutine(g);g.tobj.laterLink&&g.tobj.laterLink(),g.tobj.callEvent("onDrop",[g.slist(),g.tid,i.join(","),g.sobj,g.tobj,g.sExtra,g.tExtra]),g.tobj.dragContext=null,g.close()},dhtmlXGridObject.prototype._dragRoutine=function(a){if(a.sobj==a.tobj&&"grid"==a.source&&"move"==a.mode&&!this._fake){if(a.sobj._dndProblematic)return;var b=a.sobj.rowsAr[a.sid],c=a.sobj.rowsCol._dhx_find(b);if(a.sobj.rowsCol._dhx_removeAt(a.sobj.rowsCol._dhx_find(b)),a.sobj.rowsBuffer._dhx_removeAt(a.sobj.rowsBuffer._dhx_find(b)),a.sobj.rowsBuffer._dhx_insertAt(a.ind(),b),a.tobj._fake){a.tobj._fake.rowsCol._dhx_removeAt(c);var d=a.tobj._fake.rowsAr[a.sid];d.parentNode.removeChild(d)}return a.sobj._insertRowAt(b,a.ind()),a.nid=a.sid,void a.sobj.callEvent("onGridReconstructed",[])}var e;if(this._h2&&"undefined"!=typeof a.tid&&"sibling"==a.dropmode&&(this._sbmod||a.tid)?a.alfa&&this._sbmod&&this._h2.get[a.tid].childs.length?(this.openItem(a.tid),e=a.uid().tobj.addRowBefore(a.nid,a.data(),this._h2.get[a.tid].childs[0].id,a.img(),a.childs())):e=a.uid().tobj.addRowAfter(a.nid,a.data(),a.tid,a.img(),a.childs()):e=a.uid().tobj.addRow(a.nid,a.data(),a.ind(),a.pid(),a.img(),a.childs()),"tree"==a.source){this.callEvent("onRowAdded",[a.nid]);var f=a.sobj._globalIdStorageFind(a.sid);if(f.childsCount){for(var g=a.copy().set("tid",a.nid).set("dropmode","grid"==a.target?"sibling":"child"),h=0;h<f.childsCount;h++)a.tobj._dragRoutine(g.set("sid",f.childNodes[h].id)),"move"==a.mode&&h--;g.close()}}else if(a.tobj._copyUserData(a),this.callEvent("onRowAdded",[a.nid]),"treeGrid"==a.source){a.sobj==a.tobj&&(e._xml=a.sobj.rowsAr[a.sid]._xml);var i=a.sobj._h2.get[a.sid];if(i&&i.childs.length){var g=a.copy().set("tid",a.nid);"grid"==a.target?g.set("dropmode","sibling"):(g.tobj.openItem(a.tid),g.set("dropmode","child"));for(var j=i.childs.length,h=0;j>h;h++)a.sobj.render_row_tree(null,i.childs[h].id),a.tobj._dragRoutine(g.set("sid",i.childs[h].id)),j!=i.childs.length&&(h--,j=i.childs.length);g.close()}}"move"==a.mode&&(a.sobj["tree"==a.source?"deleteItem":"deleteRow"](a.sid),a.sobj!=a.tobj||a.tobj.rowsAr[a.sid]||(a.tobj.changeRowId(a.nid,a.sid),a.nid=a.sid))},dhtmlXGridObject.prototype.gridToGrid=function(a,b){for(var c=new Array,d=0;d<b.hdr.rows[0].cells.length;d++)c[d]=b.cells(a,d).getValue();return c},dhtmlXGridObject.prototype.checkParentLine=function(a,b){return this._h2&&b&&a?a.id==b?!0:this.checkParentLine(a.parent,b):!1},dhtmlXGridObject.prototype._dragIn=function(a,b,c,d){if(!this.dADTempOff)return 0;var e=this.isTreeGrid();if(this._drag_validate){if(a.parentNode==b.parentNode)return 0;if(e&&this.checkParentLine(this._h2.get[a.parentNode.idd],b.parentNode.idd))return 0}var f=b.parentNode.idd?b.parentNode:b.parentObject;return this.callEvent("onDragIn",[f.idd||f.id,a.parentNode.idd,f.grid||f.treeNod,a.parentNode.grid])?(this._setMove(a,c,d),e&&""!=a.parentNode.expand?(this._autoOpenTimer=window.setTimeout(new callerFunction(this._autoOpenItem,this),1e3),this._autoOpenId=a.parentNode.idd):this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer),a):this._setMove(a,c,d,!0)},dhtmlXGridObject.prototype._autoOpenItem=function(a,b){b.openItem(b._autoOpenId)},dhtmlXGridObject.prototype._dragOut=function(a){this._clearMove();var b=a.parentNode.parentObject?a.parentObject.id:a.parentNode.idd;this.callEvent("onDragOut",[b]),this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer)},dhtmlXGridObject.prototype._setMove=function(a,b,c,d){var e=getAbsoluteTop(a),f=getAbsoluteTop(this.objBox);if(e-f-parseInt(this.objBox.scrollTop)>parseInt(this.objBox.offsetHeight)-50&&(this.objBox.scrollTop=parseInt(this.objBox.scrollTop)+20),e-f<parseInt(this.objBox.scrollTop)+30&&(this.objBox.scrollTop=parseInt(this.objBox.scrollTop)-20),d)return 0;if(2==this.dadmode){var g=c-e+this.objBox.scrollTop+(document.body.scrollTop||document.documentElement.scrollTop)-2-a.offsetHeight/2;Math.abs(g)-a.offsetHeight/6>0?(this.dadmodec=1,this.dadmodefix=0>g?-1:1):this.dadmodec=0}else this.dadmodec=this.dadmode;if(this.dadmodec)this._sdrgc||this._createSdrgc(),this._sdrgc.style.display="block",this._sdrgc.style.top=e-f+(this.dadmodefix>=0?a.offsetHeight:0)+"px";else if(this._llSelD=a,"TR"==a.parentNode.tagName)for(var h=0;h<a.parentNode.childNodes.length;h++){var g=a.parentNode.childNodes[h];g._bgCol=g.style.backgroundColor,g.style.backgroundColor="#FFCCCC"}},dhtmlXGridObject.prototype._clearMove=function(){if(this._sdrgc&&(this._sdrgc.style.display="none"),this._llSelD&&"TR"==this._llSelD.parentNode.tagName)for(var a=0;a<this._llSelD.parentNode.childNodes.length;a++)this._llSelD.parentNode.childNodes[a].style.backgroundColor=this._llSelD._bgCol;this._llSelD=null},dhtmlXGridObject.prototype.rowToDragElement=function(a){var b=this.cells(a,0).getValue();return b},dhtmlXGridObject.prototype._copyUserData=function(a){a.tobj.UserData[a.nid]&&a.tobj==a.sobj||(a.tobj.UserData[a.nid]=new Hashtable);var b=a.sobj.UserData[a.sid],c=a.tobj.UserData[a.nid];b&&(c.keys=c.keys.concat(b.keys),c.values=c.values.concat(b.values))},dhtmlXGridObject.prototype.moveRow=function(a,b,c,d){switch(b){case"row_sibling":this.moveRowTo(a,c,"move","sibling",this,d);break;case"up":this.moveRowUp(a);break;case"down":this.moveRowDown(a)}},dhtmlXGridObject.prototype._nonTrivialNode=function(a,b,c,d,e){if(a.callEvent&&!e&&!a.callEvent("onDrag",[d.idd,b.id,c?c.id:null,this,a]))return!1;for(var f=d.idd,g=f;a._idpull[g];)g+=(new Date).getMilliseconds().toString();var h=this.isTreeGrid()?this.getItemImage(f):"";if(c){for(k=0;k<b.childsCount&&b.childNodes[k]!=c;k++);0!=k?c=b.childNodes[k-1]:(st="TOP",c="")}var i=a._attachChildNode(b,g,this.gridToTreeElement(a,g,f),"",h,h,h,"","",c);if(this._h2){var j=this._h2.get[f];if(j.childs.length)for(var k=0;k<j.childs.length;k++)this._nonTrivialNode(a,i,0,this.rowsAr[j.childs[k].id],1),this.dpcpy||k--}this.dpcpy||this.deleteRow(f),a.callEvent&&!e&&a.callEvent("onDrop",[g,b.id,c?c.id:null,this,a])},dhtmlXGridObject.prototype.gridToTreeElement=function(a,b,c){return this.cells(c,0).getValue()},dhtmlXGridObject.prototype.treeToGridElement=function(a,b){var c=new Array,d=this.cellType._dhx_find("tree");-1==d&&(d=0);for(var e=0;e<this.getColumnCount();e++)c[c.length]=e!=d?a.getUserData(b,this.getColumnId(e))||"":a.getItemText(b);return c},dhtmlXGridObject.prototype.moveRowTo=function(a,b,c,d,e,f){var g=new dragContext((e||this).isTreeGrid()?"treeGrid":"grid",(f||this).isTreeGrid()?"treeGrid":"grid",c,d||"sibling",a,b,e||this,f||this);return g.tobj._dragRoutine(g),g.close(),g.nid},dhtmlXGridObject.prototype.enableMercyDrag=function(a){this.dpcpy=convertStringToBoolean(a)},dhtmlXGridObject.prototype._process_xmlA=function(a){if(!a.doXPath){var b=new dtmlXMLLoaderObject(function(){});"string"==typeof a?b.loadXMLString(a):(b.xmlDoc=a.responseXML?a:{},b.xmlDoc.responseXML=a),a=b}this._parsing=!0;var c=a.getXMLTopNode(this.xml.top);this._parseHead(c);var d=a.doXPath(this.xml.row,c),e=parseInt(a.doXPath("//"+this.xml.top)[0].getAttribute("pos")||0),f=parseInt(a.doXPath("//"+this.xml.top)[0].getAttribute("total_count")||0);if(f&&!this.rowsBuffer[f-1]&&(this.rowsBuffer[f-1]=null),this.isTreeGrid())return this._get_xml_data=this._get_xml_dataA,this._process_xml_row=this._process_xml_rowA,this._process_tree_xml(a);for(var g=0;g<d.length;g++)if(!this.rowsBuffer[g+e]){var h=d[g].getAttribute("id")||this.uid();this.rowsBuffer[g+e]={idd:h,data:d[g],_parser:this._process_xml_rowA,_locator:this._get_xml_dataA},this.rowsAr[h]=d[g]}return this.render_dataset(),this._parsing=!1,a.xmlDoc.responseXML?a.xmlDoc.responseXML:a.xmlDoc},dhtmlXGridObject.prototype._process_xmlB=function(a){if(!a.doXPath){var b=new dtmlXMLLoaderObject(function(){});"string"==typeof a?b.loadXMLString(a):(b.xmlDoc=a.responseXML?a:{},b.xmlDoc.responseXML=a),a=b}this._parsing=!0;var c=a.getXMLTopNode(this.xml.top);this._parseHead(c);var d=a.doXPath(this.xml.row,c),e=parseInt(a.doXPath("//"+this.xml.top)[0].getAttribute("pos")||0),f=parseInt(a.doXPath("//"+this.xml.top)[0].getAttribute("total_count")||0);if(f&&!this.rowsBuffer[f-1]&&(this.rowsBuffer[f-1]=null),this.isTreeGrid())return this._get_xml_data=this._get_xml_dataB,this._process_xml_row=this._process_xml_rowB,this._process_tree_xml(a);for(var g=0;g<d.length;g++)if(!this.rowsBuffer[g+e]){var h=d[g].getAttribute("id")||this.uid();this.rowsBuffer[g+e]={idd:h,data:d[g],_parser:this._process_xml_rowB,_locator:this._get_xml_dataB},this.rowsAr[h]=d[g]}return this.render_dataset(),this._parsing=!1,a.xmlDoc.responseXML?a.xmlDoc.responseXML:a.xmlDoc},dhtmlXGridObject.prototype._process_xml_rowA=function(a,b){var c=[];a._attrs=this._xml_attrs(b);for(var d=0;d<this.columnIds.length;d++){var e=this.columnIds[d],f=a._attrs[e]||"";a.childNodes[d]&&(a.childNodes[d]._attrs={}),c.push(f)}return this._fillRow(a,this._c_order?this._swapColumns(c):c),a},dhtmlXGridObject.prototype._get_xml_dataA=function(a,b){return a.getAttribute(this.getColumnId(b))},dhtmlXGridObject.prototype._process_xml_rowB=function(a,b){var c=[];if(a._attrs=this._xml_attrs(b),this._ud_enabled)for(var d=this.xmlLoader.doXPath("./userdata",b),e=d.length-1;e>=0;e--)this.setUserData(d[e].getAttribute("name"),d[e].firstChild?d[e].firstChild.data:"");for(var f=0;f<b.childNodes.length;f++){var g=b.childNodes[f];if(g.tagName){var h=this.getColIndexById(g.tagName);if(!isNaN(h)){var i=g.getAttribute("type");i&&(a.childNodes[h]._cellType=i),a.childNodes[h]._attrs=this._xml_attrs(g),g.getAttribute("xmlcontent")||(g=g.firstChild?g.firstChild.data:""),c[h]=g}}}for(var e=0;e<a.childNodes.length;e++)a.childNodes[e]._attrs||(a.childNodes[e]._attrs={});return this._fillRow(a,this._c_order?this._swapColumns(c):c),a},dhtmlXGridObject.prototype._get_xml_dataB=function(a,b){var c=this.getColumnId(b);for(a=a.firstChild;;){if(!a)return"";if(a.tagName==c)return a.firstChild?a.firstChild.data:"";a=a.nextSibling}return""},dhtmlXGridObject.prototype.attachHeaderA=dhtmlXGridObject.prototype.attachHeader,dhtmlXGridObject.prototype.attachHeader=function(){if(this.attachHeaderA.apply(this,arguments),this._realfake)return!0;this.formAutoSubmit(),"undefined"==typeof this.FormSubmitOnlyChanged&&this.submitOnlyChanged(!0),"undefined"==typeof this._submitAR&&this.submitAddedRows(!0);var a=this;this._added_rows=[],this._deleted_rows=[],this.attachEvent("onRowAdded",function(b){return a._added_rows.push(b),a.forEachCell(b,function(a){a.cell.wasChanged=!0}),!0}),this.attachEvent("onBeforeRowDeleted",function(b){return a._deleted_rows.push(b),!0}),this.attachHeader=this.attachHeaderA},dhtmlXGridObject.prototype.formAutoSubmit=function(){if(this.parentForm=this.detectParentFormPresent(),this.parentForm===!1)return!1;if(!this.formEventAttached){this.formInputs=new Array;var a=this;dhtmlxEvent(this.parentForm,"submit",function(){a.entBox&&a.parentFormOnSubmit()}),this.formEventAttached=!0}},dhtmlXGridObject.prototype.parentFormOnSubmit=function(){return this.formCreateInputCollection(),this.callEvent("onBeforeFormSubmit",[])?void 0:!1},dhtmlXGridObject.prototype.submitOnlyChanged=function(a){this.FormSubmitOnlyChanged=convertStringToBoolean(a)},dhtmlXGridObject.prototype.submitColumns=function(a){"string"==typeof a&&(a=a.split(this.delim)),this._submit_cols=a},dhtmlXGridObject.prototype.setFieldName=function(a){a=a.replace(/\{GRID_ID\}/g,"'+a1+'"),a=a.replace(/\{ROW_ID\}/g,"'+a2+'"),a=a.replace(/\{ROW_INDEX\}/g,"'+this.getRowIndex(a2)+'"),a=a.replace(/\{COLUMN_INDEX\}/g,"'+a3+'"),a=a.replace(/\{COLUMN_ID\}/g,"'+this.getColumnId(a3)+'"),this._input_mask=Function("a1","a2","a3","return '"+a+"';")},dhtmlXGridObject.prototype.submitSerialization=function(a){this.FormSubmitSerialization=convertStringToBoolean(a)},dhtmlXGridObject.prototype.submitAddedRows=function(a){this._submitAR=convertStringToBoolean(a)},dhtmlXGridObject.prototype.submitOnlySelected=function(a){this.FormSubmitOnlySelected=convertStringToBoolean(a)},dhtmlXGridObject.prototype.submitOnlyRowID=function(a){this.FormSubmitOnlyRowID=convertStringToBoolean(a)},dhtmlXGridObject.prototype.createFormInput=function(a,b){var c=document.createElement("input");c.type="hidden",c.name=this._input_mask?this._input_mask.apply(this,a):((this.globalBox||this.entBox).id||"dhtmlXGrid")+"_"+a,c.value=b,this.parentForm.appendChild(c),this.formInputs.push(c)},dhtmlXGridObject.prototype.createFormInputRow=function(a){for(var b=(this.globalBox||this.entBox).id,c=0;c<this._cCount;c++){var d=this.cells3(a,c);this.FormSubmitOnlyChanged&&!d.wasChanged()||this._submit_cols&&!this._submit_cols[c]||this.createFormInput(this._input_mask?[b,a.idd,c]:a.idd+"_"+c,d.getValue())}},dhtmlXGridObject.prototype.formCreateInputCollection=function(){if(0==this.parentForm)return!1;for(var a=0;a<this.formInputs.length;a++)this.parentForm.removeChild(this.formInputs[a]);if(this.formInputs=new Array,this.FormSubmitSerialization)this.createFormInput("serialized",this.serialize());else if(this.FormSubmitOnlySelected)if(this.FormSubmitOnlyRowID)this.createFormInput("selected",this.getSelectedId());else for(var a=0;a<this.selectedRows.length;a++)this.createFormInputRow(this.selectedRows[a]);else this._submitAR&&(this._added_rows.length&&this.createFormInput("rowsadded",this._added_rows.join(",")),this._deleted_rows.length&&this.createFormInput("rowsdeleted",this._deleted_rows.join(","))),this.forEachRow(function(a){this.getRowById(a),this.createFormInputRow(this.rowsAr[a])})},dhtmlXGridObject.prototype.detectParentFormPresent=function(){for(var a=!1,b=this.entBox;b&&b.tagName&&b!=document.body;){if("form"==b.tagName.toLowerCase()){a=b;break}b=b.parentNode}return a},dhtmlXGridObject.prototype.enableHeaderMenu=function(){var a=this;this.attachEvent("onInit",function(){this.hdr.oncontextmenu=function(b){return a._doHContClick(b||window.event)},this.startColResizeA=this.startColResize,this.startColResize=function(a){return 2==a.button||_isMacOS&&a.ctrlKey?this._doHContClick(a):this.startColResizeA(a)},this._chm_ooc=this.obj.onclick,this._chm_hoc=this.hdr.onclick,this.hdr.onclick=function(b){return b&&(2==b.button||_isMacOS&&b.ctrlKey)?!1:(a._showHContext(!1),a._chm_hoc.apply(this,arguments))},this.obj.onclick=function(){return a._showHContext(!1),a._chm_ooc.apply(this,arguments)}}),dhtmlxEvent(document.body,"click",function(){a._hContext&&a._showHContext(!1)}),this.hdr.rows.length&&this.callEvent("onInit",[]),this.enableHeaderMenu=function(){}},dhtmlXGridObject.prototype._doHContClick=function(a){return this._createHContext(),this._showHContext(!0,a.clientX,a.clientY),a[_isIE?"srcElement":"target"].oncontextmenu=function(a){return(a||event).cancelBubble=!0,!1},a.cancelBubble=!0,a.preventDefault&&a.preventDefault(),!1},dhtmlXGridObject.prototype._createHContext=function(){if(this._hContext)return this._hContext;var a=document.createElement("DIV");a.oncontextmenu=function(a){return(a||event).cancelBubble=!0,!1},a.onclick=function(a){return(a||event).cancelBubble=!0,!0},a.className="dhx_header_cmenu",a.style.width=a.style.height="5px",a.style.display="none";var b=[],c=0;this._fake&&(c=this._fake._cCount);for(var c,d=c;c<this.hdr.rows[1].cells.length;c++){var e=this.hdr.rows[1].cells[c];if(e.firstChild&&"DIV"==e.firstChild.tagName)var f=e.firstChild.innerHTML;else var f=e.innerHTML;b.push("<div class='dhx_header_cmenu_item'><input type='checkbox' column='"+d+"' len='"+(e.colSpan||1)+"' checked='true' />"+f+"</div>"),d+=e.colSpan||1}a.innerHTML=b.join("");for(var g=this,h=function(){var a=this.getAttribute("column");if(!this.checked&&!g._checkLast(a))return this.checked=!0;g._realfake&&(g=g._fake);for(var b=0;b<this.getAttribute("len");b++)g.setColumnHidden(1*a+1*b,!this.checked);this.checked&&0==g.getColWidth(a)&&g.adjustColumnSize(a)},c=0;c<a.childNodes.length;c++)a.childNodes[c].firstChild.onclick=h;document.body.insertBefore(a,document.body.firstChild),this._hContext=a,a.style.position="absolute",a.style.zIndex=999,a.style.width="auto",a.style.height="auto",a.style.display="block"},dhtmlXGridObject.prototype._checkLast=function(a){for(var b=0;b<this._cCount;b++)if(!(this._hrrar&&this._hrrar[b]||b==a))return!0;return!1},dhtmlXGridObject.prototype._updateHContext=function(){for(var a=0;a<this._hContext.childNodes.length;a++){var b=this._hContext.childNodes[a].firstChild,c=b.getAttribute("column");(this.isColumnHidden(c)||0==this.getColWidth(c))&&(b.checked=!1)}},dhtmlXGridObject.prototype._showHContext=function(a,b,c){a&&this.enableColumnMove&&(this._hContext.parentNode.removeChild(this._hContext),this._hContext=null),this._createHContext(),this._hContext.style.display=a?"block":"none",a&&(this._updateHContext(!0),this._hContext.style.left=b+"px",this._hContext.style.top=c+"px")},eXcell_math.prototype=new eXcell,dhtmlXGridObject.prototype._init_point_bm=dhtmlXGridObject.prototype._init_point,dhtmlXGridObject.prototype._init_point=function(){this._mat_links={},this._aggregators=[],this.attachEvent("onClearAll",function(){this._mat_links={},this._aggregators=[]}),this.attachEvent("onCellChanged",function(a,b){if(this._mat_links[a]){var c=this._mat_links[a][b];if(c)for(var d=0;d<c.length;d++)this.cells5(c[d]).setValue(this._calcSCL(c[d]))}if(!this._parsing&&this._aggregators[b]){var e=this._h2.get[a].parent.id;if(0!=e){var f=this.cells(e,b);f.setValue(this._calcSCL(f.cell))}}}),this.attachEvent("onAfterRowDeleted",function(a,b){if(0!=b&&!this._parsing&&this._aggregators.length)for(var c=0;c<this._aggregators.length;c++)if(this._aggregators[c]){var d=this.cells(b,c);d.setValue(this._calcSCL(d.cell))}return!0}),this.attachEvent("onXLE",function(){for(var a=0;a<this._aggregators.length;a++)this._aggregators[a]&&this._h2.forEachChild(0,function(b){if(0!=b.childs.length){var c=this.cells(b.id,a);c.setValue(this._calcSCL(c.cell))}},this)}),this._init_point=this._init_point_bm,this._init_point&&this._init_point()},dhtmlXGridObject.prototype.enableMathSerialization=function(a){this._mathSerialization=convertStringToBoolean(a)},dhtmlXGridObject.prototype.setMathRound=function(a){this._roundDl=a,this._roundD=Math.pow(10,a)},dhtmlXGridObject.prototype.enableMathEditing=function(a){this._mathEdit=convertStringToBoolean(a)},dhtmlXGridObject.prototype._calcSCL=function(cell){if(!cell._code)return cell.innerHTML;try{var agrid=this,z=eval(cell._code)}catch(e){return"#SCL"}if(this._roundD){var pre=Math.abs(z)<1?"0":"";if(z=Math.round(z*this._roundD).toString(),0==z)return 0;if(this._roundDl>0){var n=z.length-this._roundDl;return 0>n&&(z=("000000000"+z).substring(9+n),n=0),pre+z.substring(0,n)+"."+z.substring(n,z.length)}}return z},dhtmlXGridObject.prototype._countTotal=function(a,b){for(var c=0,d=this._h2.get[a],e=0;e<d.childs.length;e++){if(!d.childs[e].buff)return c;if(d.childs[e].buff._parser)return this._h2.forEachChild(a,function(a){0==a.childs.length&&(c+=1*this._get_cell_value(a.buff,b))},this),c;c+=1*this._get_cell_value(d.childs[e].buff,b)}return c},dhtmlXGridObject.prototype._compileSCL=function(a,b){if(!a)return a;if(a=a.toString(),0!=a.indexOf("="))return this._reLink([],b),a;b.original=a;var c=null;if(a=a.replace("=",""),-1!=a.indexOf("sum"))return a=a.replace("sum","(agrid._countTotal('"+b.parentNode.idd+"',"+b._cellIndex+"))"),this._aggregators||(this._aggregators=[]),this._aggregators[b._cellIndex]="sum",b._code=a,this._parsing?"":this._calcSCL(b);if(-1!=a.indexOf("[[")){var d=/(\[\[([^\,]*)\,([^\]]*)]\])/g,e=this;c=c||new Array,a=a.replace(d,function(a,d,f,g){return"-"==f&&(f=b.parentNode.idd),0==f.indexOf("#")&&(f=e.getRowId(f.replace("#",""))),c[c.length]=[f,g],'(agrid.cells("'+f+'",'+g+").getValue()*1)"
})}if(-1!=a.indexOf(":")){var d=/:(\w+)/g,e=this,f=b.parentNode.idd;c=c||new Array,a=a.replace(d,function(a,b){return c[c.length]=[f,e.getColIndexById(b)],'(agrid.cells("'+f+'",agrid.getColIndexById("'+b+'")).getValue()*1)'})}else{var d=/c([0-9]+)/g,e=this,f=b.parentNode.idd;c=c||new Array,a=a.replace(d,function(a,b){return c[c.length]=[f,b],'(agrid.cells("'+f+'",'+b+").getValue()*1)"})}return this._reLink(c,b),b._code=a,this._calcSCL(b)},dhtmlXGridObject.prototype._reLink=function(a,b){if(a.length)for(var c=0;c<a.length;c++){this._mat_links[a[c][0]]||(this._mat_links[a[c][0]]={});var d=this._mat_links[a[c][0]];d[a[c][1]]||(d[a[c][1]]=[]),d[a[c][1]].push(b)}},_isKHTML&&!function(){var a=String.prototype.replace;String.prototype.replace=function(b,c){if("function"!=typeof c)return a.apply(this,arguments);var d=""+this,e=c;if(!(b instanceof RegExp)){var f=d.indexOf(b);return-1==f?d:a.apply(d,[b,e(b,f,d)])}for(var g,h=b,i=[],j=h.lastIndex;null!=(g=h.exec(d));){var f=g.index,k=g.concat(f,d);if(i.push(d.slice(j,f),e.apply(null,k).toString()),!h.global){j+=RegExp.lastMatch.length;break}j=h.lastIndex}return i.push(d.slice(j)),i.join("")}}(),dhtmlXGridObject.prototype.insertColumn=function(a,b,c,d,e,f,g,h,i){if(a=parseInt(a),a>this._cCount&&(a=this._cCount),this._cMod||(this._cMod=this._cCount),this._processAllArrays(this._cCount,a-1,[b||"&nbsp;",d||100,c||"ed",f||"left",g||"",e||"na",i||"",!1,this._cMod,d||100]),this._processAllRows("_addColInRow",a),"object"==typeof b)for(var j=1;j<this.hdr.rows.length;j++)if("#rspan"==b[j-1]){for(var k=j-1,l=!1,m=null;!l;){for(var m=this.hdr.rows[k],n=0;n<m.cells.length;n++)if(m.cells[n]._cellIndex==a){l=n;break}k--}this.hdr.rows[k+1].cells[n].rowSpan=(this.hdr.rows[k].cells[n].rowSpan||1)+1}else this.setHeaderCol(a,b[j-1]||"&nbsp;",j);else this.setHeaderCol(a,b||"&nbsp;");this.hdr.rows[0].cells[a],this._cCount++,this._cMod++,this._master_row=null,this.setSizes()},dhtmlXGridObject.prototype.deleteColumn=function(a){a=parseInt(a),0!=this._cCount&&(this._cMod||(this._cMod=this._cCount),a>=this._cCount||(this._processAllArrays(a,this._cCount-1,[null,null,null,null,null,null,null,null,null,null,null]),this._processAllRows("_deleteColInRow",a),this._cCount--,this._master_row=null,this.setSizes()))},dhtmlXGridObject.prototype._processAllRows=function(a,b,c){this[a](this.obj.rows[0],b,c,0);for(var d=this.hdr.rows.length,e=0;d>e;e++)this[a](this.hdr.rows[e],b,c,e);if(this.ftr)for(var d=this.ftr.firstChild.rows.length,e=0;d>e;e++)this[a](this.ftr.firstChild.rows[e],b,c,e);this.forEachRow(function(d){this.rowsAr[d]&&"TR"==this.rowsAr[d].tagName&&this[a](this.rowsAr[d],b,c,-1)})},dhtmlXGridObject.prototype._processAllArrays=function(a,b,c){var d=["hdrLabels","initCellWidth","cellType","cellAlign","cellVAlign","fldSort","columnColor","_hrrar","_c_order"];this.cellWidthPX.length&&d.push("cellWidthPX"),this.cellWidthPC.length&&d.push("cellWidthPC"),this._col_combos&&d.push("_col_combos"),this._mCols&&(d[d.length]="_mCols"),this.columnIds&&(d[d.length]="columnIds"),this._maskArr&&d.push("_maskArr"),this._drsclmW&&d.push("_drsclmW"),this.clists&&d.push("clists"),d.push("combos"),this._customSorts&&d.push("_customSorts"),this._aggregators&&d.push("_aggregators");var e=b>=a;if(!this._c_order){this._c_order=new Array;for(var f=this._cCount,g=0;f>g;g++)this._c_order[g]=g}for(var g=0;g<d.length;g++){var h=this[d[g]];if(h){if(e){for(var i=h[a],j=a;b>j;j++)h[j]=h[j+1];h[b]=i}else{for(var i=h[a],j=a;j>b+1;j--)h[j]=h[j-1];h[b+1]=i}c&&(h[b+(e?0:1)]=c[g])}}},dhtmlXGridObject.prototype.moveColumn=function(a,b){if(b--,a=parseInt(a),b=parseInt(b),a>b)var c=b+1;else var c=b;return this.callEvent("onBeforeCMove",[a,c])?void(a!=c&&(this.editStop(),this._processAllRows("_moveColInRow",a,b),this._processAllArrays(a,b),this.fldSorted&&this.setSortImgPos(this.fldSorted._cellIndex),this.callEvent("onAfterCMove",[a,c]))):!1},dhtmlXGridObject.prototype._swapColumns=function(a){for(var b=new Array,c=0;c<this._cCount;c++){var d=a[this._c_order[c]];"undefined"==typeof d&&(d=""),b[c]=d}return b},dhtmlXGridObject.prototype._moveColInRow=function(a,b,c){var d=a.childNodes[b],e=a.childNodes[c+1];if(d){e?a.insertBefore(d,e):a.appendChild(d);for(var f=0;f<a.childNodes.length;f++)a.childNodes[f]._cellIndex=a.childNodes[f]._cellIndexS=f}},dhtmlXGridObject.prototype._addColInRow=function(a,b,c,d){var e=b;if(a._childIndexes){if(a._childIndexes[b-1]!=a._childIndexes[b]&&a.childNodes[a._childIndexes[b-1]])for(var f=a._childIndexes.length;f>=b;f--)a._childIndexes[f]=f?a._childIndexes[f-1]+1:0;else{for(var f=a._childIndexes.length;f>=b;f--)a._childIndexes[f]=f?a._childIndexes[f-1]+1:0;a._childIndexes[b]--}var e=a._childIndexes[b]}var g=a.childNodes[e],h=document.createElement(d?"TD":"TH");d?h._attrs={}:h.style.width=(parseInt(this.cellWidthPX[b])||"100")+"px",g?a.insertBefore(h,g):a.appendChild(h),this.dragAndDropOff&&a.idd&&this.dragger.addDraggableItem(a.childNodes[e],this);for(var f=e+1;f<a.childNodes.length;f++)a.childNodes[f]._cellIndex=a.childNodes[f]._cellIndexS=a.childNodes[f]._cellIndex+1;a.childNodes[e]&&(a.childNodes[e]._cellIndex=a.childNodes[e]._cellIndexS=b),a.idd||"undefined"!=typeof a.idd?(this.cells3(a,b).setValue(""),h.align=this.cellAlign[b],h.style.verticalAlign=this.cellVAlign[b],h.bgColor=this.columnColor[b]):"TD"==h.tagName&&(h.innerHTML=!a.idd&&this.forceDivInHeader?"<div class='hdrcell'>&nbsp;</div>":"&nbsp;")},dhtmlXGridObject.prototype._deleteColInRow=function(a,b){a._childIndexes&&(b=a._childIndexes[b]);var c=a.childNodes[b];if(c){if(c.colSpan&&c.colSpan>1&&c.parentNode.idd){var d=c.colSpan-1,e=this.cells4(c).getValue();if(this.setColspan(c.parentNode.idd,c._cellIndex,1),d>1){var f=1*c._cellIndex;this.setColspan(c.parentNode.idd,f+1,d),this.cells(c.parentNode.idd,1*c._cellIndex+1).setValue(e),a._childIndexes.splice(f,1);for(var g=f;g<a._childIndexes.length;g++)a._childIndexes[g]-=1}}else if(a._childIndexes){a._childIndexes.splice(b,1);for(var g=b;g<a._childIndexes.length;g++)a._childIndexes[g]--}c&&a.removeChild(c);for(var g=b;g<a.childNodes.length;g++)a.childNodes[g]._cellIndex=a.childNodes[g]._cellIndexS=a.childNodes[g]._cellIndex-1}},dhtmlXGridObject.prototype.enableColumnMove=function(a,b){this._mCol=convertStringToBoolean(a),"undefined"!=typeof b&&(this._mCols=b.split(",")),this._mmevTrue||(dhtmlxEvent(this.hdr,"mousedown",this._startColumnMove),dhtmlxEvent(document.body,"mousemove",this._onColumnMove),dhtmlxEvent(document.body,"mouseup",this._stopColumnMove),this._mmevTrue=!0)},dhtmlXGridObject.prototype._startColumnMove=function(a){a=a||event;for(var b=a.target||a.srcElement,c=b;"TABLE"!=c.tagName;)c=c.parentNode;var d=c.grid;return d&&(d.setActive(),d._mCol)?(b=d.getFirstParentOfType(b,"TD"),"default"!=b.style.cursor?!0:(d&&!d._colInMove&&(d._mCols&&"true"!=d._mCols[b._cellIndex]||(d._colInMove=b._cellIndex+1)),!0)):void 0},dhtmlXGridObject.prototype._onColumnMove=function(a){a=a||event;var b=window.globalActiveDHTMLGridObject;if(b&&b._colInMove){if(b._showHContext&&b._showHContext(!1),"object"!=typeof b._colInMove){var c=document.createElement("DIV");c._aIndex=b._colInMove-1,c._bIndex=null,c.innerHTML=b.getHeaderCol(c._aIndex),c.className="dhx_dragColDiv",c.style.position="absolute",document.body.appendChild(c),b._colInMove=c}var d=[];d[0]=document.body.scrollLeft||document.documentElement.scrollLeft,d[1]=document.body.scrollTop||document.documentElement.scrollTop,b._colInMove.style.left=a.clientX+d[0]+8+"px",b._colInMove.style.top=a.clientY+d[1]+8+"px";for(var e=a.target||a.srcElement;e&&"undefined"==typeof e._cellIndexS;)e=e.parentNode;if(b._colInMove._oldHe&&(b._colInMove._oldHe.className=b._colInMove._oldHe.className.replace(/columnTarget(L|R)/g,""),b._colInMove._oldHe=null,b._colInMove._bIndex=null),e){if(b.hdr.rows[1]._childIndexes)var f=b.hdr.rows[1].cells[b.hdr.rows[1]._childIndexes[e._cellIndexS]];else var f=b.hdr.rows[1].cells[e._cellIndexS];var c=a.clientX-(getAbsoluteLeft(f)-b.hdrBox.scrollLeft);c/f.offsetWidth>.5?(f.className+=" columnTargetR",b._colInMove._bIndex=e._cellIndexS):(f.className+=" columnTargetL",b._colInMove._bIndex=e._cellIndexS-1),f.offsetLeft<b.objBox.scrollLeft+20&&(b.objBox.scrollLeft=Math.max(0,f.offsetLeft-20)),f.offsetLeft+f.offsetWidth-b.objBox.scrollLeft>b.objBox.offsetWidth-20&&(b.objBox.scrollLeft=Math.min(b.objBox.scrollLeft+f.offsetWidth+20,b.objBox.scrollWidth-b.objBox.offsetWidth)),b._colInMove._oldHe=f}return a.cancelBubble=!0,!1}return!0},dhtmlXGridObject.prototype._stopColumnMove=function(a){a=a||event;var b=window.globalActiveDHTMLGridObject;return b&&b._colInMove&&("object"==typeof b._colInMove&&(b._colInMove.parentNode.removeChild(b._colInMove),null!=b._colInMove._bIndex&&b.moveColumn(b._colInMove._aIndex,b._colInMove._bIndex+1),b._colInMove._oldHe&&(b._colInMove._oldHe.className=b._colInMove._oldHe.className.replace(/columnTarget(L|R)/g,"")),b._colInMove._oldHe=null,b._colInMove.grid=null),b._colInMove=0),!0},dhtmlXGridObject.prototype.loadCSVFile=function(a,b){this.load(a,b,"csv")},dhtmlXGridObject.prototype.enableCSVAutoID=function(a){this._csvAID=convertStringToBoolean(a)},dhtmlXGridObject.prototype.enableCSVHeader=function(a){this._csvHdr=convertStringToBoolean(a)},dhtmlXGridObject.prototype.setCSVDelimiter=function(a){this.csv.cell=a},dhtmlXGridObject.prototype._csvAID=!0,dhtmlXGridObject.prototype.loadCSVString=function(a){this.parse(a,"csv")},dhtmlXGridObject.prototype.serializeToCSV=function(a){this.editStop(),this._agetm=this._mathSerialization?"getMathValue":this._strictText||a?"getTitle":"getValue";var b=[];if(this._csvHdr)for(var c=1;c<this.hdr.rows.length;c++){for(var d=[],e=0;e<this._cCount;e++)(!this._srClmn||this._srClmn[e])&&d.push(this.getColumnLabel(e,c-1));b.push(d.join(this.csv.cell))}var e=0,f=this.rowsBuffer.length;for(e;f>e;e++){var g=this._serializeRowToCVS(null,e);""!=g&&b.push(g)}return b.join(this.csv.row)},dhtmlXGridObject.prototype._serializeRowToCVS=function(a,b,c,d){var e=new Array;a||(a=this.render_row(b),this._fake&&!this._fake.rowsAr[a.idd]&&this._fake.render_row(b)),this._csvAID||(e[e.length]=a.idd),c=c||0,d=d||this._cCount;for(var f=!1,g=c;a.childNodes[c]._cellIndex>g&&c;)c--;for(var h=c;d>g&&a.childNodes[h];h++){var i=a.childNodes[h]._cellIndex;if(!this._srClmn||this._srClmn[i]){for(var j=a.childNodes[h],k=this.cells(a.idd,i);g!=i&&(g++,e.push(""),!(g>=d)););if(g>=d)break;if(g++,zxVal=k.cell?k[this._agetm]():"",this._chAttr&&k.wasChanged()&&(f=!0),e[e.length]=null===zxVal?"":zxVal,this._ecspn&&j.colSpan&&j.colSpan>1){j=j.colSpan-1;for(var l=0;j>l;l++)e[e.length]="";g++}}else g++}return this._onlChAttr&&!f?"":e.join(this.csv.cell)},dhtmlXGridObject.prototype.toClipBoard=function(a){window.clipboardData?window.clipboardData.setData("Text",a):(new Clipboard).copy(a)},dhtmlXGridObject.prototype.fromClipBoard=function(){return window.clipboardData?window.clipboardData.getData("Text"):(new Clipboard).paste()},dhtmlXGridObject.prototype.cellToClipboard=function(a,b){if(!a||!b){if(!this.selectedRows[0])return;a=this.selectedRows[0].idd,b=this.cell._cellIndex}var c=this.cells(a,b);this.toClipBoard(c.getLabel?c.getLabel():c.getValue())},dhtmlXGridObject.prototype.updateCellFromClipboard=function(a,b){if(!a||!b){if(!this.selectedRows[0])return;a=this.selectedRows[0].idd,b=this.cell._cellIndex}var c=this.cells(a,b);c[c.setImage?"setLabel":"setValue"](this.fromClipBoard())},dhtmlXGridObject.prototype.rowToClipboard=function(a){var b="";if(this._agetm=this._mathSerialization?"getMathValue":this._strictText?"getTitle":"getValue",a)b=this._serializeRowToCVS(this.getRowById(a));else for(var c=0;c<this.selectedRows.length;c++)b&&(b+=this.csv.row),b+=this._serializeRowToCVS(this.selectedRows[c]);this.toClipBoard(b)},dhtmlXGridObject.prototype.updateRowFromClipboard=function(a){var b=this.fromClipBoard();if(b){if(a)var c=this.getRowById(a);else var c=this.selectedRows[0];if(c){b=b.split(this.csv.row)[0].split(this.csv.cell),this._csvAID||b.splice(0,1);for(var d=0;d<b.length;d++){var e=this.cells3(c,d);e[e.setImage?"setLabel":"setValue"](b[d])}}}},dhtmlXGridObject.prototype.addRowFromClipboard=function(){var a=this.fromClipBoard();if(a)for(var b=a.split(this.csv.row),c=0;c<b.length;c++)b[c]&&(a=b[c].split(this.csv.cell),this._csvAID?this.addRow(this.getRowsNum()+2,a):(this.rowsAr[a[0]]&&(a[0]=this.uid()),this.addRow(a[0],a.slice(1))))},dhtmlXGridObject.prototype.gridToClipboard=function(){this.toClipBoard(this.serializeToCSV())},dhtmlXGridObject.prototype.gridFromClipboard=function(){var a=this.fromClipBoard();a&&this.loadCSVString(a)},dhtmlXGridObject.prototype.getXLS=function(a){if(!this.xslform){this.xslform=document.createElement("FORM"),this.xslform.action=(a||"")+"xls.php",this.xslform.method="post",this.xslform.target=_isIE?"_blank":"",document.body.appendChild(this.xslform);var b=document.createElement("INPUT");b.type="hidden",b.name="csv",this.xslform.appendChild(b);var c=document.createElement("INPUT");c.type="hidden",c.name="csv_header",this.xslform.appendChild(c)}var d=this.serializeToCSV();this.xslform.childNodes[0].value=d;for(var e=[],f=this._cCount,g=0;f>g;g++)e.push(this.getHeaderCol(g));e=e.join(","),this.xslform.childNodes[1].value=e,this.xslform.submit()},dhtmlXGridObject.prototype.printView=function(a,b){var c="<style>TD {font-family:Arial;text-align:center;padding-left:2px;padding-right:2px};\n td.filter input, td.filter select {display:none};\n </style>",d=null;if(this._fake){d=[].concat(this._hrrar);for(var e=0;e<this._fake._cCount;e++)this._hrrar[e]=null}c+="<base href='"+document.location.href+"'></base>",this.parentGrid||(c+=a||""),c+='<table width="100%" border="2px" cellpadding="0" cellspacing="0">';var f=Math.max(this.rowsBuffer.length,this.rowsCol.length),g=this._cCount,h=this._printWidth();c+='<tr class="header_row_1">';for(var e=0;g>e;e++)if(!this._hrrar||!this._hrrar[e]){for(var i=this.hdr.rows[1].cells[this.hdr.rows[1]._childIndexes?this.hdr.rows[1]._childIndexes[parseInt(e)]:e],j=i.colSpan||1,k=i.rowSpan||1,l=1;j>l;l++)h[e]+=h[l];c+='<td rowspan="'+k+'" width="'+h[e]+'%" style="background-color:lightgrey;" colspan="'+j+'">'+this.getHeaderCol(e)+"</td>",e+=j-1}c+="</tr>";for(var e=2;e<this.hdr.rows.length;e++)if(_isIE){c+="<tr style='background-color:lightgrey' class='header_row_"+e+"'>";for(var m=this.hdr.rows[e].childNodes,l=0;l<m.length;l++)this._hrrar&&this._hrrar[m[l]._cellIndex]||(c+=m[l].outerHTML);c+="</tr>"}else c+="<tr class='header_row_"+e+"' style='background-color:lightgrey'>"+(this._fake?this._fake.hdr.rows[e].innerHTML:"")+this.hdr.rows[e].innerHTML+"</tr>";for(var e=0;f>e;e++)if(c+="<tr>",this.rowsCol[e]&&this.rowsCol[e]._cntr)c+=this.rowsCol[e].innerHTML.replace(/<img[^>]*>/gi,"")+"</tr>";else if(!this.rowsCol[e]||"none"!=this.rowsCol[e].style.display){var n;if(this.rowsCol[e])n=this.rowsCol[e].idd;else{if(!this.rowsBuffer[e])continue;n=this.rowsBuffer[e].idd}for(var l=0;g>l;l++)if(!this._hrrar||!this._hrrar[l]){if(this.rowsAr[n]&&"TR"==this.rowsAr[n].tagName){var o=this.cells(n,l);if(o._setState)var p="";else if(o.getContent)p=o.getContent();else if(o.getImage||o.combo)var p=o.cell.innerHTML;else var p=o.getValue()}else var p=this._get_cell_value(this.rowsBuffer[e],l);var q=this.columnColor[l]?"background-color:"+this.columnColor[l]+";":"",r=this.cellAlign[l]?"text-align:"+this.cellAlign[l]+";":"",s=o.getAttribute("colspan");c+='<td style="'+q+r+'" '+(s?'colSpan="'+s+'"':"")+">"+(""===p?"&nbsp;":p)+"</td>",s&&(l+=s-1)}if(c+="</tr>",this.rowsCol[e]&&this.rowsCol[e]._expanded){var t=this.cells4(this.rowsCol[e]._expanded.ctrl);c+=t.getSubGrid?'<tr><td colspan="'+g+'">'+t.getSubGrid().printView()+"</td></tr>":'<tr><td colspan="'+g+'">'+this.rowsCol[e]._expanded.innerHTML+"</td></tr>"}}if(this.ftr)for(var e=1;e<this.ftr.childNodes[0].rows.length;e++)c+="<tr style='background-color:lightgrey'>"+(this._fake&&_isFF?this._fake.ftr.childNodes[0].rows[e].innerHTML:"")+this.ftr.childNodes[0].rows[e].innerHTML+"</tr>";if(c+="</table>",this.parentGrid)return c;c+=b||"";var u=window.open("","_blank");u.document.write(c),u.document.write("<script>window.onerror=function(){return true}</script>"),u.document.close(),this._fake&&(this._hrrar=d)},dhtmlXGridObject.prototype._printWidth=function(){for(var a=[],b=0,c=0;c<this._cCount;c++){var d=this.getColWidth(c);a.push(d),b+=d}for(var e=[],f=0,c=0;c<a.length;c++){var g=Math.floor(a[c]/b*100);f+=g,e.push(g)}return e[e.length-1]+=100-f,e},dhtmlXGridObject.prototype.loadObject=function(){},dhtmlXGridObject.prototype.loadJSONFile=function(){},dhtmlXGridObject.prototype.serializeToObject=function(){},dhtmlXGridObject.prototype.serializeToJSON=function(){},window.clipboardData||(window.clipboardData={_make:function(){var a=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!a)return null;var b=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!b)return null;b.addDataFlavor("text/unicode");var c=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);return this._p=[a,b,c],!0},setData:function(a,b){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(c){return dhtmlxError.throwError("Clipboard","Access to clipboard denied",[a,b]),""}if(!this._make())return!1;this._p[2].data=b,this._p[1].setTransferData("text/unicode",this._p[2],2*b.length);var d=Components.interfaces.nsIClipboard;this._p[0].setData(this._p[1],null,d.kGlobalClipboard)},getData:function(a){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(b){return dhtmlxError.throwError("Clipboard","Access to clipboard denied",[a]),""}if(!this._make())return!1;this._p[0].getData(this._p[1],this._p[0].kGlobalClipboard);var c=new Object,d=new Object;try{this._p[1].getTransferData("text/unicode",d,c)}catch(b){return""}return d&&(d=d.value.QueryInterface(Components.interfaces.nsISupportsString)),d?d.data.substring(0,c.value/2):""}}),dhtmlXGridObject.prototype.enableBlockSelection=function(a){if("undefined"==typeof this._bs_mode){var b=this;this.obj.onmousedown=function(a){return b._bs_mode&&b._OnSelectionStart(a||event,this),!0},this._CSVRowDelimiter=this.csv.row,this.attachEvent("onResize",function(){return b._HideSelection(),!0}),this.attachEvent("onFilterEnd",this._HideSelection)}return a===!1?(this._bs_mode=!1,this._HideSelection()):void(this._bs_mode=!0)},dhtmlXGridObject.prototype.forceLabelSelection=function(a){this._strictText=convertStringToBoolean(a)},dhtmlXGridObject.prototype.disableBlockSelection=function(){this.obj.onmousedown=null},dhtmlXGridObject.prototype._OnSelectionStart=function(a){var b=this;if(2!=a.button){var c=a.srcElement||a.target;if(this.editor){if(c.tagName&&("INPUT"==c.tagName||"TEXTAREA"==c.tagName))return;this.editStop()}b.isActive||b.setActive(!0);var d=this.getPosition(this.obj),e=a.clientX-d[0]+document.body.scrollLeft,f=a.clientY-d[1]+document.body.scrollTop;if(this._CreateSelection(e-4,f-4),c==this._selectionObj)this._HideSelection(),this._startSelectionCell=null;else{for(;"td"!=c.tagName.toLowerCase();)c=c.parentNode;this._startSelectionCell=c}this.obj.onmousedown=null,this.obj[_isIE?"onmouseleave":"onmouseout"]=function(){b._blsTimer&&window.clearTimeout(b._blsTimer)},this.obj.onmmold=this.obj.onmousemove,this._init_pos=[e,f],this.obj.onmousemove=function(c){c=c||a,c.returnValue=!1,b._OnSelectionMove(c)},this._oldDMP=document.body.onmouseup,document.body.onmouseup=function(c){return c=c||a,b._OnSelectionStop(c,this),!0},document.body.onselectstart=function(){return!1}}},dhtmlXGridObject.prototype._getCellByPos=function(a,b){a=a,b=b;for(var c=0,d=0;d<this.obj.rows.length;d++)if(b-=this.obj.rows[d].offsetHeight,0>=b){c=this.obj.rows[d];break}if(!c||!c.idd)return null;for(var d=0;d<this._cCount;d++)if(a-=this.obj.rows[0].childNodes[d].offsetWidth,0>=a)for(;;){if(!c._childIndexes||c._childIndexes[d+1]!=c._childIndexes[d])return this.cells(c.idd,d).cell;c=c.previousSibling}return null},dhtmlXGridObject.prototype._OnSelectionMove=function(a){var b=this;this._ShowSelection();var c=this.getPosition(this.obj),d=a.clientX-c[0]+document.body.scrollLeft,e=a.clientY-c[1]+document.body.scrollTop;if(Math.abs(this._init_pos[0]-d)<5&&Math.abs(this._init_pos[1]-e)<5)return this._HideSelection();if(null==this._startSelectionCell)this._endSelectionCell=this._startSelectionCell=this.getFirstParentOfType(a.srcElement||a.target,"TD");else if(a.srcElement||a.target)if("dhtmlxGrid_selection"==(a.srcElement||a.target).className)this._endSelectionCell=this._getCellByPos(d,e)||this._endSelectionCell;else{var f=this.getFirstParentOfType(a.srcElement||a.target,"TD");f.parentNode.idd&&(this._endSelectionCell=f)}var g=this.objBox.scrollLeft+this.objBox.clientWidth,h=this.objBox.scrollTop+this.objBox.clientHeight,i=this.objBox.scrollLeft,j=this.objBox.scrollTop,k=!1;if(this._blsTimer&&window.clearTimeout(this._blsTimer),d+20>=g?(this.objBox.scrollLeft=this.objBox.scrollLeft+20,k=!0):i>d-20&&(this.objBox.scrollLeft=this.objBox.scrollLeft-20,k=!0),e+20>=h&&!this._realfake?(this.objBox.scrollTop=this.objBox.scrollTop+20,k=!0):j>e-20&&!this._realfake&&(this.objBox.scrollTop=this.objBox.scrollTop-20,k=!0),this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._endSelectionCell),k){var l=a.clientX,m=a.clientY;this._blsTimer=window.setTimeout(function(){b._OnSelectionMove({clientX:l,clientY:m})},100)}},dhtmlXGridObject.prototype._OnSelectionStop=function(a){var b=this;if(this._blsTimer&&window.clearTimeout(this._blsTimer),this.obj.onmousedown=function(c){return b._bs_mode&&b._OnSelectionStart(c||a,this),!0},this.obj.onmousemove=this.obj.onmmold||null,document.body.onmouseup=this._oldDMP||null,parseInt(this._selectionObj.style.width)<2&&parseInt(this._selectionObj.style.height)<2)this._HideSelection();else{var c=this.getFirstParentOfType(a.srcElement||a.target,"TD");if(c&&c.parentNode.idd||(c=this._endSelectionCell),!c)return this._HideSelection();for(;"td"!=c.tagName.toLowerCase();)c=c.parentNode;this._stopSelectionCell=c,this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._stopSelectionCell),this.callEvent("onBlockSelected",[])}document.body.onselectstart=function(){}},dhtmlXGridObject.prototype._RedrawSelectionPos=function(a,b){var c={};c.LeftTopCol=a._cellIndex,c.LeftTopRow=this.getRowIndex(a.parentNode.idd),c.RightBottomCol=b._cellIndex,c.RightBottomRow=this.getRowIndex(b.parentNode.idd);var d=a.offsetWidth,e=a.offsetHeight;a=this.getPosition(a,this.obj);var f=b.offsetWidth,g=b.offsetHeight;if(b=this.getPosition(b,this.obj),a[0]<b[0])var h=a[0],i=b[0]+f;else{var j=c.RightBottomCol;c.RightBottomCol=c.LeftTopCol,c.LeftTopCol=j;var h=b[0],i=a[0]+d}if(a[1]<b[1])var k=a[1],l=b[1]+g;else{var j=c.RightBottomRow;c.RightBottomRow=c.LeftTopRow,c.LeftTopRow=j;var k=b[1],l=a[1]+e}var m=i-h,n=l-k;return this._selectionObj.style.left=h+"px",this._selectionObj.style.top=k+"px",this._selectionObj.style.width=m+"px",this._selectionObj.style.height=n+"px",c},dhtmlXGridObject.prototype._CreateSelection=function(a,b){if(null==this._selectionObj){var c=document.createElement("div");c.style.position="absolute",c.style.display="none",c.className="dhtmlxGrid_selection",this._selectionObj=c,this.objBox.appendChild(this._selectionObj)}this._selectionObj.style.width="0px",this._selectionObj.style.height="0px",this._selectionObj.style.left=a+"px",this._selectionObj.style.top=b+"px",this._selectionObj.startX=a,this._selectionObj.startY=b},dhtmlXGridObject.prototype._ShowSelection=function(){this._selectionObj&&(this._selectionObj.style.display="")},dhtmlXGridObject.prototype._HideSelection=function(){this._selectionObj&&(this._selectionObj.style.display="none"),this._selectionArea=null},dhtmlXGridObject.prototype.copyBlockToClipboard=function(){if(null!=this._selectionArea){var a=new Array;this._agetm=this._mathSerialization?"getMathValue":this._strictText?"getTitle":"getValue";for(var b=this._selectionArea.LeftTopRow;b<=this._selectionArea.RightBottomRow;b++){var c=this._serializeRowToCVS(this.rowsCol[b],null,this._selectionArea.LeftTopCol,this._selectionArea.RightBottomCol+1);a[a.length]=this._csvAID?c:c.substr(c.indexOf(this.csv.cell)+1)}a=a.join(this._CSVRowDelimiter),this.toClipBoard(a)}},dhtmlXGridObject.prototype.pasteBlockFromClipboard=function(){var a=this.fromClipBoard();if(null!=this._selectionArea)var b=this._selectionArea.LeftTopRow,c=this._selectionArea.LeftTopCol;else{if(null==this.cell||this.editor)return!1;var b=this.getRowIndex(this.cell.parentNode.idd),c=this.cell._cellIndex}a=a.split(this._CSVRowDelimiter),a.length>1&&""==a[a.length-1]&&a.splice(a.length-1,1);for(var d=0;d<a.length;d++)a[d]=a[d].split(this.csv.cell);var e=b+a.length,f=c+a[0].length;f>this._cCount&&(f=this._cCount);for(var g=0,d=b;e>d;d++){var h=this.render_row(d);-1==h&&gridcontinue;for(var i=0,j=c;f>j;j++){var k=this.cells3(h,j);if(k.isDisabled())i++;else{if(this._onEditUndoRedo&&this._onEditUndoRedo(2,h.idd,j,a[g][i],k.getValue()),k.combo){for(var l=k.combo.values,m=0;m<l.length;m++)if(a[g][i]==l[m]){k.setValue(k.combo.keys[m]),l=null;break}null!=l&&k.setValue(a[g][i++])}else k[k.setImage?"setLabel":"setValue"](a[g][i++]);k.cell.wasChanged=!0}}this.callEvent("onRowPaste",[h.idd]),g++}},dhtmlXGridObject.prototype.enablePaging=function(a,b,c,d,e,f){this._pgn_parentObj="string"==typeof d?document.getElementById(d):d,this._pgn_recInfoParentObj="string"==typeof f?document.getElementById(f):f,this.pagingOn=a,this.showRecInfo=e,this.rowsBufferOutSize=parseInt(b),this.currentPage=1,this.pagesInGroup=parseInt(c),this._init_pgn_events(),this.setPagingSkin("default")},dhtmlXGridObject.prototype.setXMLAutoLoading=function(a,b){this.xmlFileUrl=a,this._dpref=b},dhtmlXGridObject.prototype.changePageRelative=function(a){this.changePage(this.currentPage+a)},dhtmlXGridObject.prototype.changePage=function(a){0==arguments.length&&(a=this.currentPage||0),a=parseInt(a),a=Math.max(1,Math.min(a,Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize))),this.callEvent("onBeforePageChanged",[this.currentPage,a])&&(this.currentPage=parseInt(a),this._reset_view(),this._fixAlterCss(),this.callEvent("onPageChanged",this.getStateOfView()))},dhtmlXGridObject.prototype.setPagingSkin=function(a){this._pgn_skin=this["_pgn_"+a],"toolbar"==a&&(this._pgn_skin_tlb=arguments[1])},dhtmlXGridObject.prototype.setPagingTemplates=function(a,b){this._pgn_templateA=this._pgn_template_compile(a),this._pgn_templateB=this._pgn_template_compile(b),this._page_skin_update()},dhtmlXGridObject.prototype._page_skin_update=function(){this.pagesInGroup||(this.pagesInGroup=Math.ceil(Math.min(5,this.rowsBuffer.length/this.rowsBufferOutSize)));var a=Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize);return a&&a<this.currentPage?this.changePage(a):void(this.pagingOn&&this._pgn_skin&&this._pgn_skin.apply(this,this.getStateOfView()))},dhtmlXGridObject.prototype._init_pgn_events=function(){this.attachEvent("onXLE",this._page_skin_update),this.attachEvent("onClearAll",this._page_skin_update),this.attachEvent("onPageChanged",this._page_skin_update),this.attachEvent("onGridReconstructed",this._page_skin_update),this._init_pgn_events=function(){}},dhtmlXGridObject.prototype._pgn_default=function(){if(!this.pagingBlock){if(this.pagingBlock=document.createElement("DIV"),this.pagingBlock.className="pagingBlock",this.recordInfoBlock=document.createElement("SPAN"),this.recordInfoBlock.className="recordsInfoBlock",!this._pgn_parentObj)return;this._pgn_parentObj.appendChild(this.pagingBlock),this._pgn_recInfoParentObj&&this.showRecInfo&&this._pgn_recInfoParentObj.appendChild(this.recordInfoBlock),this._pgn_templateA||(this._pgn_templateA=this._pgn_template_compile("[prevpages:&lt:&nbsp;] [currentpages:,&nbsp;] [nextpages:&gt:&nbsp;]"),this._pgn_templateB=this._pgn_template_compile("Results <b>[from]-[to]</b> of <b>[total]</b>"))}var a=this.getStateOfView();this.pagingBlock.innerHTML=this._pgn_templateA.apply(this,a),this.recordInfoBlock.innerHTML=this._pgn_templateB.apply(this,a),this._pgn_template_active(this.pagingBlock),this._pgn_template_active(this.recordInfoBlock),this.callEvent("onPaging",[])},dhtmlXGridObject.prototype._pgn_block=function(a){for(var b=Math.floor((this.currentPage-1)/this.pagesInGroup)*this.pagesInGroup,c=Math.min(Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize),b+this.pagesInGroup),d=[],e=b+1;c>=e;e++)d.push("<a onclick='this.grid.changePage("+e+");return false;'>"+(e==this.currentPage?"<b>"+e+"</b>":e)+"<a>");return d.join(a)},dhtmlXGridObject.prototype._pgn_link=function(a,b,c){if("prevpages"==a||"prev"==a)return 1==this.currentPage?c:"<a onclick='this.grid.changePageRelative(-1*this.grid.pagesInGroup);return false;'>"+b+"</a>";if("nextpages"==a||"next"==a)return this.rowsBuffer.length/this.rowsBufferOutSize<=this.currentPage?c:this.rowsBuffer.length/(this.rowsBufferOutSize*this.pagesInGroup)<=1?c:"<a onclick='this.grid.changePageRelative(this.grid.pagesInGroup);return false;'>"+b+"</a>";if("current"==a){var d=this.currentPage+(b?parseInt(b):0);return 1>d||Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize)<d?c:"<a "+(d==this.currentPage?"class='dhx_active_page_link' ":"")+"onclick='this.grid.changePage("+d+");return false;'>"+d+"</a>"}return b},dhtmlXGridObject.prototype._pgn_template_active=function(a){var b=a.getElementsByTagName("A");if(b)for(var c=0;c<b.length;c++)b[c].grid=this},dhtmlXGridObject.prototype._pgn_template_compile=function(a){return a=a.replace(/\[([^\]]*)\]/g,function(a,b){switch(b=b.split(":"),b[0]){case"from":return'"+(arguments[1]*1+(arguments[2]*1?1:0))+"';case"total":return'"+arguments[3]+"';case"to":return'"+arguments[2]+"';case"current":case"prev":case"next":case"prevpages":case"nextpages":return"\"+this._pgn_link('"+b[0]+"','"+b[1]+"','"+b[2]+"')+\"";case"currentpages":return"\"+this._pgn_block('"+b[1]+"')+\""}}),new Function('return "'+a+'";')},dhtmlXGridObject.prototype.i18n.paging={results:"Results",records:"Records from ",to:" to ",page:"Page ",perpage:"rows per page",first:"To first Page",previous:"Previous Page",found:"Found records",next:"Next Page",last:"To last Page",of:" of ",notfound:"No Records Found"},dhtmlXGridObject.prototype.setPagingWTMode=function(a,b,c,d){this._WTDef=[a,b,c,d]},dhtmlXGridObject.prototype._pgn_bricks=function(a,b,c){var d=this.entBox.className.split("_"),e="",f=d[d.length-1];if(d.length>1&&("light"==f||"modern"==f)&&(e="_"+f),this.pagerElAr=new Array,this.pagerElAr.pagerCont=document.createElement("DIV"),this.pagerElAr.pagerBord=document.createElement("DIV"),this.pagerElAr.pagerLine=document.createElement("DIV"),this.pagerElAr.pagerBox=document.createElement("DIV"),this.pagerElAr.pagerInfo=document.createElement("DIV"),this.pagerElAr.pagerInfoBox=document.createElement("DIV"),this.pagerElAr.pagerCont.style.width=(this.globalBox||this.objBox).offsetWidth,this.pagerElAr.pagerCont.style.clear="both",this.pagerElAr.pagerBord.className="dhx_pbox"+e,this.pagerElAr.pagerLine.className="dhx_pline"+e,this.pagerElAr.pagerBox.style.clear="both",this.pagerElAr.pagerInfo.className="dhx_pager_info"+e,this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerBord),this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerLine),this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerInfo),this.pagerElAr.pagerLine.appendChild(this.pagerElAr.pagerBox),this.pagerElAr.pagerInfo.appendChild(this.pagerElAr.pagerInfoBox),this._pgn_parentObj.innerHTML="",this._pgn_parentObj.appendChild(this.pagerElAr.pagerCont),this.rowsBuffer.length>0){var g=20,h=22;if(a>this.pagesInGroup){var i=document.createElement("DIV"),j=document.createElement("DIV");i.className="dhx_page"+e,j.innerHTML="&larr;",i.appendChild(j),this.pagerElAr.pagerBox.appendChild(i);var k=this;i.pgnum=(Math.ceil(a/this.pagesInGroup)-1)*this.pagesInGroup,i.onclick=function(){k.changePage(this.pgnum)},g+=h}for(var l=1;l<=this.pagesInGroup;l++){var i=document.createElement("DIV"),j=document.createElement("DIV");
if(i.className="dhx_page"+e,pageNumber=(Math.ceil(a/this.pagesInGroup)-1)*this.pagesInGroup+l,pageNumber>Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize))break;if(j.innerHTML=pageNumber,i.appendChild(j),a==pageNumber)i.className+=" dhx_page_active"+e,j.className="dhx_page_active"+e;else{var k=this;i.pgnum=pageNumber,i.onclick=function(){k.changePage(this.pgnum)}}g+=parseInt(h/3)*pageNumber.toString().length+15,j.style.width=parseInt(h/3)*pageNumber.toString().length+8+"px",this.pagerElAr.pagerBox.appendChild(i)}if(Math.ceil(a/this.pagesInGroup)*this.pagesInGroup<Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize)){var i=document.createElement("DIV"),j=document.createElement("DIV");i.className="dhx_page"+e,j.innerHTML="&rarr;",i.appendChild(j),this.pagerElAr.pagerBox.appendChild(i);var k=this;i.pgnum=Math.ceil(a/this.pagesInGroup)*this.pagesInGroup+1,i.onclick=function(){k.changePage(this.pgnum)},g+=h}this.pagerElAr.pagerLine.style.width=g+"px"}this.rowsBuffer.length>0&&this.showRecInfo?this.pagerElAr.pagerInfoBox.innerHTML=this.i18n.paging.records+(b+1)+this.i18n.paging.to+c+this.i18n.paging.of+this.rowsBuffer.length:0==this.rowsBuffer.length&&(this.pagerElAr.pagerLine.parentNode.removeChild(this.pagerElAr.pagerLine),this.pagerElAr.pagerInfoBox.innerHTML=this.i18n.paging.notfound),this.pagerElAr.pagerBox.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;",this.pagerElAr.pagerBord.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;",this.pagerElAr.pagerCont.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;",this.callEvent("onPaging",[])},dhtmlXGridObject.prototype._pgn_toolbar=function(a,b,c){this.aToolBar||(this.aToolBar=this._pgn_createToolBar());var d=Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize);if(this._WTDef[2]){this.aToolBar.enableItem("right"),this.aToolBar.enableItem("rightabs"),this.aToolBar.enableItem("left"),this.aToolBar.enableItem("leftabs"),this.currentPage==d?(this.aToolBar.disableItem("right"),this.aToolBar.disableItem("rightabs")):1==this.currentPage&&(this.aToolBar.disableItem("left"),this.aToolBar.disableItem("leftabs"));var e=this;this.aToolBar.forEachListOption("pages",function(a){e.aToolBar.removeListOption("pages",a)});for(var f=0;d>f;f++)this.aToolBar.addListOption("pages","pages_"+(f+1),0/0,"button",this.i18n.paging.page+(f+1));this.aToolBar.setItemText("pages","<div style='width:100%;text-align:right'>"+this.i18n.paging.page+a+"</div>")}this._WTDef[1]&&(this.getRowsNum()?this.aToolBar.setItemText("results","<div style='width:100%;text-align:center'>"+this.i18n.paging.records+(b+1)+this.i18n.paging.to+c+"</div>"):this.aToolBar.setItemText("results",this.i18n.paging.notfound)),this._WTDef[3]&&this.aToolBar.setItemText("perpagenum","<div style='width:100%;text-align:right'>"+this.rowsBufferOutSize.toString()+" "+this.i18n.paging.perpage+"</div>"),this.callEvent("onPaging",[])},dhtmlXGridObject.prototype._pgn_createToolBar=function(){this.aToolBar=new dhtmlXToolbarObject(this._pgn_parentObj,this._pgn_skin_tlb||"dhx_blue"),this._WTDef||this.setPagingWTMode(!0,!0,!0,!0);var a=this;if(this.aToolBar.attachEvent("onClick",function(b){switch(b=b.split("_"),b[0]){case"leftabs":a.changePage(1);break;case"left":a.changePage(a.currentPage-1);break;case"rightabs":a.changePage(99999);break;case"right":a.changePage(a.currentPage+1);break;case"perpagenum":if(b[1]===this.undefined)return;a.rowsBufferOutSize=parseInt(b[1]),a.changePage(),a.aToolBar.setItemText("perpagenum","<div style='width:100%;text-align:right'>"+b[1]+" "+a.i18n.paging.perpage+"</div>");break;case"pages":if(b[1]===this.undefined)return;a.changePage(b[1]),a.aToolBar.setItemText("pages","<div style='width:100%;text-align:right'>"+a.i18n.paging.page+b[1]+"</div>")}}),this._WTDef[0]&&(this.aToolBar.addButton("leftabs",0/0,"",this.imgURL+"ar_left_abs.gif",this.imgURL+"ar_left_abs_dis.gif"),this.aToolBar.setWidth("leftabs","20"),this.aToolBar.addButton("left",0/0,"",this.imgURL+"ar_left.gif",this.imgURL+"ar_left_dis.gif"),this.aToolBar.setWidth("left","20")),this._WTDef[1]&&(this.aToolBar.addText("results",0/0,this.i18n.paging.results),this.aToolBar.setWidth("results","150")),this._WTDef[0]&&(this.aToolBar.addButton("right",0/0,"",this.imgURL+"ar_right.gif",this.imgURL+"ar_right_dis.gif"),this.aToolBar.setWidth("right","20"),this.aToolBar.addButton("rightabs",0/0,"",this.imgURL+"ar_right_abs.gif",this.imgURL+"ar_right_abs_dis.gif"),this.aToolBar.setWidth("rightabs","20")),this._WTDef[2]&&(this.aToolBar.addButtonSelect("pages",0/0,"select page",[]),this.aToolBar.setWidth("pages","75")),this._WTDef[3]){this.aToolBar.addButtonSelect("perpagenum",0/0,"select size",[]);for(var b=5;35>b;b+=5)this.aToolBar.addListOption("perpagenum","perpagenum_"+b,0/0,"button",b+" "+this.i18n.paging.perpage);this.aToolBar.setWidth("perpagenum","130")}return this.aToolBar.disableItem("results"),this.aToolBar},dhtmlXGridObject.prototype.hidePivot=function(){if(this._pgridCont){this._pgrid&&this._pgrid.destructor();var a=this._pgridCont.parentNode;a.innerHTML=null,a.parentNode==this.entBox&&this.entBox.removeChild(a),this._pgrid=this._pgridSelect=this._pUNI=this._pgridCont=null}},dhtmlXGridObject.prototype.makePivot=function(a,b){if(b=b||{},this.hidePivot(),!a){var a=document.createElement("DIV");a.style.cssText="position:absolute;top:0px;left:0px;background-color:white;",a.style.height=this.entBox.offsetHeight+"px",a.style.width=this.entBox.offsetWidth+"px","absolute"!=this.entBox.style.position&&(this.entBox.style.position="relative"),this.entBox.appendChild(a)}if("object"!=typeof a&&(a=document.getElementById(a)),b.column_list)this._column_list=b.column_list;else{this._column_list=[];for(var c=0;c<this.hdr.rows[1].cells.length;c++)this._column_list.push(this.hdr.rows[1].cells[c][_isIE?"innerText":"textContent"])}var d=this;a.innerHTML="<table cellspacing='0' cellpadding='0'><tr><td style='width:160px' align='center'></td><td>&nbsp;&nbsp;&nbsp;</td><td></td></tr></table><div></div>";var e=this.makePivotSelect(this._column_list);e.style.width="80px",e.onchange=function(){d._pivotS.value=-1!=this.value?this.value:"",d._reFillPivotLists(),d._renderPivot2()};var f=this.makePivotSelect(this._column_list);f.onchange=function(){d._pivotS.x=-1!=this.value?this.value:"",d._reFillPivotLists(),d._renderPivot()};var g=this.makePivotSelect(this._column_list);g.onchange=function(){d._pivotS.y=-1!=this.value?this.value:"",d._reFillPivotLists(),d._renderPivot()};var h=this.makePivotSelect(["Sum","Min","Max","Average","Count"],-1);h.style.width="70px",h.onchange=function(){d._pivotS.action=-1!=this.value?this.value:null,d._renderPivot2()},b.readonly&&(e.disabled=f.disabled=g.disabled=h.disabled=!0),a.firstChild.rows[0].cells[0].appendChild(h),a.firstChild.rows[0].cells[0].appendChild(e),a.firstChild.rows[0].cells[2].appendChild(f);var i=a.childNodes[1];i.style.width=a.offsetWidth+"px",i.style.height=a.offsetHeight-20+"px",i.style.overflow="hidden",this._pgridCont=i,this._pgridSelect=[e,f,g,h],this._pData=this._fetchPivotData(),this._pUNI=[],this._pivotS={action:b.action||"0",value:"undefined"!=typeof b.value?b.value||"0":null,x:"undefined"!=typeof b.x?b.x||"0":null,y:"undefined"!=typeof b.y?b.y||"0":null},e.value=this._pivotS.value,f.value=this._pivotS.x,g.value=this._pivotS.y,h.value=this._pivotS.action,d._reFillPivotLists(),this._renderPivot()},dhtmlXGridObject.prototype._fetchPivotData=function(){for(var a=[],b=0;b<this._cCount;b++){for(var c=[],d=0;d<this.rowsCol.length;d++)this.rowsCol[d]._cntr||c.push(this.cells2(d,b).getValue());a.push(c)}return a},dhtmlXGridObject.prototype._renderPivot=function(){if(_isIE&&this._pgridSelect[2].removeNode(!0),this._pgrid&&this._pgrid.destructor(),this._pgrid=new dhtmlXGridObject(this._pgridCont),this._pgrid.attachEvent("onBeforeSelect",function(){return!1}),this._pivotS.x){for(var a=this._getUniList(this._pivotS.x),b=[160],c=0;c<a.length;c++)b.push(100);a=[""].concat(a),this._pgrid.setHeader(a),this._pgrid.setInitWidths(b.join(","))}else this._pgrid.setHeader(""),this._pgrid.setInitWidths("160");this._pgrid.init(),this._pgrid.setEditable(!1),this._pgrid.setSkin(this.entBox.className.replace("gridbox gridbox_",""));var d=this._pgrid.hdr.rows[1].cells[0];if(d.firstChild&&"DIV"==d.firstChild.tagName&&(d=d.firstChild),d.appendChild(this._pgridSelect[2]),this._pgrid.setSizes(),this._pivotS.y)for(var a=this._getUniList(this._pivotS.y),c=0;c<a.length;c++)this._pgrid.addRow(this._pgrid.uid(),[a[c]],-1);else this._pgrid.addRow(1,"not ready",1);this._renderPivot2()},dhtmlXGridObject.prototype._pivot_action_0=function(a,b,c,d,e,f){for(var g=0,h=f[a],i=f[b],j=f[c],k=h.length-1;k>=0;k--)h[k]==d&&i[k]==e&&(g+=parseFloat(j[k]));return g},dhtmlXGridObject.prototype._pivot_action_1=function(a,b,c,d,e,f){ret=9999999999;for(var g=f[a],h=f[b],i=f[c],j=g.length-1;j>=0;j--)g[j]==d&&h[j]==e&&(ret=Math.min(parseFloat(i[j]),ret));return 9999999999==ret&&(ret=""),ret},dhtmlXGridObject.prototype._pivot_action_2=function(a,b,c,d,e,f){ret=-9999999999;for(var g=f[a],h=f[b],i=f[c],j=g.length-1;j>=0;j--)g[j]==d&&h[j]==e&&(ret=Math.max(parseFloat(i[j]),ret));return-9999999999==ret&&(ret=""),ret},dhtmlXGridObject.prototype._pivot_action_3=function(a,b,c,d,e,f){for(var g=0,h=0,i=f[a],j=f[b],k=f[c],l=i.length-1;l>=0;l--)i[l]==d&&j[l]==e&&(g+=parseFloat(k[l]),h++);return h?g/h:""},dhtmlXGridObject.prototype._pivot_action_4=function(a,b,c,d,e,f){for(var g=0,h=f[a],i=f[b],j=(f[c],h.length-1);j>=0;j--)h[j]==d&&i[j]==e&&g++;return g},dhtmlXGridObject.prototype._renderPivot2=function(){if(this._pivotS.x&&this._pivotS.y&&this._pivotS.value&&this._pivotS.action)for(var a=this["_pivot_action_"+this._pivotS.action],b=this._getUniList(this._pivotS.x),c=this._getUniList(this._pivotS.y),d=0;d<b.length;d++)for(var e=0;e<c.length;e++)this._pgrid.cells2(e,d+1).setValue(Math.round(100*a(this._pivotS.x,this._pivotS.y,this._pivotS.value,b[d],c[e],this._pData))/100)},dhtmlXGridObject.prototype._getUniList=function(a){if(!this._pUNI[a]){for(var b={},c=[],d=this._pData[a].length-1;d>=0;d--)b[this._pData[a][d]]=!0;for(var e in b)b[e]===!0&&c.push(e);this._pUNI[a]=c.sort()}return this._pUNI[a]},dhtmlXGridObject.prototype._fillPivotList=function(a,b,c,d){c||(c={},d=-1),a.innerHTML="",a.options[a.options.length]=new Option("-select-",-1);for(var e=0;e<b.length;e++)c[e]||null===b[e]||(a.options[a.options.length]=new Option(b[e],e));a.value=parseInt(d)},dhtmlXGridObject.prototype._reFillPivotLists=function(){for(var a=[],b=[],c=0;3>c;c++)a.push(this._pgridSelect[c]),b.push(a[c].value);var d=this._reFfillPivotLists,e={};e[b[1]]=e[b[2]]=!0,this._fillPivotList(a[0],this._column_list,e,b[0]),e={},e[b[0]]=e[b[2]]=!0,this._fillPivotList(a[1],this._column_list,e,b[1]),e={},e[b[1]]=e[b[0]]=!0,this._fillPivotList(a[2],this._column_list,e,b[2]),this._reFfillPivotLists=d},dhtmlXGridObject.prototype.makePivotSelect=function(a,b){var c=document.createElement("SELECT");return this._fillPivotList(c,a,b),c.style.cssText="width:150px;height:20px;font-family:Tahoma;font-size:8pt;font-weight:normal;",c},dhtmlXGridObject.prototype.setRowspan=function(a,b,c){var d=this[this._bfs_cells?"_bfs_cells":"cells"](a,b).cell,e=this.rowsAr[a];if(d.rowSpan&&1!=d.rowSpan)for(var f=e.nextSibling,g=1;g<d.rowSpan;g++){var h=f.childNodes[f._childIndexes[d._cellIndex+1]],i=document.createElement("TD");i.innerHTML="&nbsp;",i._cellIndex=d._cellIndex,i._clearCell=!0,h?h.parentNode.insertBefore(i,h):h.parentNode.appendChild(i),this._shiftIndexes(f,d._cellIndex,-1),f=f.nextSibling}d.rowSpan=c,e=this._h2?this.rowsAr[this._h2.get[e.idd].parent.childs[this._h2.get[e.idd].index+1].id]:e.nextSibling||this.render_row(this.rowsBuffer._dhx_find(e)+1);for(var j=[],g=1;c>g;g++){var k=null;if(k=this._fake&&!this._realfake?this._bfs_cells3(e,b).cell:this.cells3(e,b).cell,this._shiftIndexes(e,d._cellIndex,1),k&&k.parentNode.removeChild(k),j.push(e),this._h2){var e=this._h2.get[e.idd].parent.childs[this._h2.get[e.idd].index+1];e&&(e=this.rowsAr[e.id])}else e=e.nextSibling||this.render_row(this.rowsBuffer._dhx_find(e)+1)}this.rowsAr[a]._rowSpan=this.rowsAr[a]._rowSpan||{},this.rowsAr[a]._rowSpan[b]=j,this._fake&&!this._realfake&&b<this._fake._cCount&&this._fake.setRowspan(a,b,c)},dhtmlXGridObject.prototype._shiftIndexes=function(a,b,c){if(!a._childIndexes){a._childIndexes=new Array;for(var d=0;d<a.childNodes.length;d++)a._childIndexes[d]=d}for(var d=0;d<a._childIndexes.length;d++)d>b&&(a._childIndexes[d]=a._childIndexes[d]-c)},dhtmlXGridObject.prototype.enableRowspan=function(){this._erspan=!0,this.enableRowspan=function(){},this.attachEvent("onAfterSorting",function(){if(!this._dload){for(var a=1;a<this.obj.rows.length;a++)if(this.obj.rows[a]._rowSpan){var b=this.obj.rows[a];for(var c in b._rowSpan)for(var d=b,e=d._rowSpan[c],f=0;f<e.length;f++){if(d.nextSibling?d.parentNode.insertBefore(e[f],d.nextSibling):d.parentNode.appendChild(e[f]),this._fake){var g=this._fake.rowsAr[d.idd],h=this._fake.rowsAr[e[f].idd];g.nextSibling?g.parentNode.insertBefore(h,g.nextSibling):g.parentNode.appendChild(h),this._correctRowHeight(d.idd)}d=d.nextSibling}}this.rowsCol=new dhtmlxArray;for(var a=1;a<this.obj.rows.length;a++)this.rowsCol.push(this.obj.rows[a])}}),this.attachEvent("onXLE",function(a,b,c,d){for(var e=this.xmlLoader.doXPath("//cell[@rowspan]",d),f=0;f<e.length;f++){for(var g=e[f].parentNode,h=g.getAttribute("id"),i=e[f].getAttribute("rowspan"),j=0,k=0;k<g.childNodes.length;k++)if("cell"==g.childNodes[k].tagName){if(g.childNodes[k]==e[f])break;j++}this.setRowspan(h,j,i)}})},dhtmlXGridObject.prototype._init_point_bspl=dhtmlXGridObject.prototype._init_point,dhtmlXGridObject.prototype._init_point=function(){this._split_later&&this.splitAt(this._split_later),this._init_point=this._init_point_bspl,this._init_point&&this._init_point()},dhtmlXGridObject.prototype.splitAt=function(b){function c(a,b){b.style.whiteSpace="";var c=b.nextSibling,d=b.parentNode;a.parentNode.insertBefore(b,a),c?d.insertBefore(a,c):d.appendChild(a);var e=a.style.display;a.style.display=b.style.display,b.style.display=e}function d(a,d,e,f){var g=new Array(b).join(this.delim),h=[];if(2==a)for(var i=0;b>i;i++){var j=d[a-1].cells[d[a-1]._childIndexes?d[a-1]._childIndexes[i]:i];j.rowSpan&&j.rowSpan>1&&(h[j._cellIndex]=j.rowSpan-1,f[a-1].cells[f[a-1]._childIndexes?f[a-1]._childIndexes[i]:i].rowSpan=j.rowSpan,j.rowSpan=1)}for(a;a<d.length;a++){this._fake.attachHeader(g,null,e),f=f||this._fake.ftr.childNodes[0].rows;for(var k=b,l=0,m=0;k>m;m++)if(h[m]){if(h[m]=h[m]-1,_isIE||_isFF&&_FFrv>=1.9||_isOpera){var n=document.createElement("TD");_isFF&&(n.style.display="none"),d[a].insertBefore(n,d[a].cells[0])}l++}else{var o=f[a].cells[m-l],p=d[a].cells[m-(_isIE?0:l)],q=p.rowSpan;if(c(o,p),q>1&&(h[m]=q-1,p.rowSpan=q),f[a].cells[m].colSpan>1){d[a].cells[m].colSpan=f[a].cells[m].colSpan,k-=f[a].cells[m].colSpan-1;for(var i=1;i<f[a].cells[m].colSpan;i++)f[a].removeChild(f[a].cells[m+1])}}}}if(!this.obj.rows[0])return this._split_later=b;b=parseInt(b);var e=document.createElement("DIV");this.entBox.appendChild(e);var f=document.createElement("DIV");this.entBox.appendChild(f);for(var g=this.entBox.childNodes.length-3;g>=0;g--)f.insertBefore(this.entBox.childNodes[g],f.firstChild);if(this.entBox.style.position="relative",this.globalBox=this.entBox,this.entBox=f,f.grid=this,e.style.cssText+="border:0px solid red !important;",f.style.cssText+="border:0px solid red !important;",f.style.top="0px",f.style.position="absolute",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=11,f.style.height=e.style.height=this.globalBox.clientHeight,this._fake=new dhtmlXGridObject(e),this.globalBox=this._fake.globalBox=this.globalBox,this._fake._fake=this,this._fake._realfake=!0,this._treeC=this.cellType._dhx_find("tree"),this._fake.delim=this.delim,this._fake.customGroupFormat=this.customGroupFormat,this._fake.imgURL=this.imgURL,this._fake._customSorts=this._customSorts,this._fake.noHeader=this.noHeader,this._fake._enbTts=this._enbTts,this._fake.clists=this.clists,this._fake.fldSort=new Array,this._fake.selMultiRows=this.selMultiRows,this._fake.multiLine=this.multiLine,this.multiLine||this._erspan){this.attachEvent("onCellChanged",this._correctRowHeight);var h=function(){this.forEachRow(function(a){this._correctRowHeight(a)})};this.attachEvent("onXLE",h),this.attachEvent("onResizeEnd",h),this._ads_count||this.attachEvent("onAfterSorting",h),this.attachEvent("onDistributedEnd",h)}this._fake.loadedKidsHash=this.loadedKidsHash,this._h2&&(this._fake._h2=this._h2),this._fake._dInc=this._dInc;var i=[[],[],[],[],[],[],[]],j=["hdrLabels","initCellWidth","cellType","cellAlign","cellVAlign","fldSort","columnColor"],k=["setHeader","setInitWidths","setColTypes","setColAlign","setColVAlign","setColSorting","setColumnColor"];this._fake.callEvent=function(){return this._fake._split_event=!0,"onGridReconstructed"==arguments[0]&&this._fake.callEvent.apply(this,arguments),this._fake.callEvent.apply(this._fake,arguments)},this._elmn&&this._fake.enableLightMouseNavigation(!0),(this.__cssEven||this._cssUnEven)&&this._fake.attachEvent("onGridReconstructed",function(){this._fixAlterCss()}),this._fake._cssEven=this._cssEven,this._fake._cssUnEven=this._cssUnEven,this._fake._cssSP=this._cssSP,this._fake.isEditable=this.isEditable,this._fake._edtc=this._edtc,this._sst&&this._fake.enableStableSorting(!0),this._fake._sclE=this._sclE,this._fake._dclE=this._dclE,this._fake._f2kE=this._f2kE,this._fake._maskArr=this._maskArr,this._fake._dtmask=this._dtmask,this._fake.combos=this.combos;for(var l=0,m=this.globalBox.offsetWidth,g=0;b>g;g++){for(var n=0;n<j.length;n++)this[j[n]]&&(i[n][g]=this[j[n]][g]),"string"==typeof i[n][g]&&(i[n][g]=i[n][g].replace(new RegExp("\\"+this.delim,"g"),"\\"+this.delim));_isFF&&(i[1][g]=1*i[1][g]+2),"%"==this.cellWidthType?(i[1][g]=Math.round(parseInt(this[j[1]][g])*m/100),l+=i[1][g]):l+=parseInt(this[j[1]][g]),this.setColumnHidden(g,!0)}for(var n=0;n<j.length;n++){var o=i[n].join(this.delim);"setHeader"!=k[n]?""!=o&&this._fake[k[n]](o):this._fake[k[n]](o,null,this._hstyles)}this._fake._strangeParams=this._strangeParams,this._fake._drsclmn=this._drsclmn,f.style.left=l+"px",e.style.width=l+"px",f.style.width=Math.max(this.globalBox.offsetWidth-l,0),this._ecspn&&(this._fake._ecspn=!0),this._fake.init(),this.dragAndDropOff&&this.dragger.addDragLanding(this._fake.entBox,this),this._fake.objBox.style.overflow="hidden",this._fake.objBox.style.overflowX="scroll",this._fake._srdh=this._srdh||20,this._fake._srnd=this._srnd,this.hdr.rows.length>2&&d.call(this,2,this.hdr.rows,"_aHead",this._fake.hdr.rows),this.ftr&&(d.call(this,1,this.ftr.childNodes[0].rows,"_aFoot"),this._fake.ftr.parentNode.style.bottom=(_isFF?2:1)+"px"),this.saveSizeToCookie&&(this.saveSizeToCookie=function(a,c){if(this._realfake)return this._fake.saveSizeToCookie.apply(this._fake,arguments);a||(a=this.entBox.id);for(var d=new Array,e="cellWidthPX",f=0;f<this[e].length;f++)d[f]=b>f?this._fake[e][f]:this[e][f];d=d.join(","),this.setCookie(a,c,0,d);var d=(this.initCellWidth||new Array).join(",");return this.setCookie(a,c,1,d),!0},this.loadSizeFromCookie=function(a){a||(a=this.entBox.id);var c=this._getCookie(a,1);if(c){this.initCellWidth=c.split(",");var c=this._getCookie(a,0),d="cellWidthPX";this.cellWidthType="px";var e=0;if(c&&c.length){c=c.split(",");for(var f=0;f<c.length;f++)b>f?(this._fake[d][f]=c[f],e+=1*c[f]):this[d][f]=c[f]}this._fake.entBox.style.width=e+"px",this._fake.objBox.style.width=e+"px";var g=this.globalBox.childNodes[1];return g.style.left=e-0+"px",this.ftr&&(this.ftr.style.left=e-0+"px"),g.style.width=this.globalBox.offsetWidth-e+"px",this.setSizes(),!0}},this._fake.onRSE=this.onRSE),this.setCellTextStyleA=this.setCellTextStyle,this.setCellTextStyle=function(a,c,d){b>c&&this._fake.setCellTextStyle(a,c,d),this.setCellTextStyleA(a,c,d)},this.setRowTextBoldA=this.setRowTextBold,this.setRowTextBold=function(a){this.setRowTextBoldA(a),this._fake.setRowTextBold(a)},this.setRowColorA=this.setRowColor,this.setRowColor=function(a,b){this.setRowColorA(a,b),this._fake.setRowColor(a,b)},this.setRowHiddenA=this.setRowHidden,this.setRowHidden=function(a,b){this.setRowHiddenA(a,b),this._fake.setRowHidden(a,b)},this.setRowTextNormalA=this.setRowTextNormal,this.setRowTextNormal=function(a){this.setRowTextNormalA(a),this._fake.setRowTextNormal(a)},this.getChangedRows=function(a){function b(a){for(var b=0;b<a.childNodes.length;b++)if(a.childNodes[b].wasChanged)return c[c.length]=a.idd}var c=new Array;return this.forEachRow(function(d){var e=this.rowsAr[d],f=this._fake.rowsAr[d];"TR"==e.tagName&&"TR"==f.tagName&&(a&&e._added?c[c.length]=e.idd:b(e)||b(f))}),c.join(this.delim)},this.setRowTextStyleA=this.setRowTextStyle,this.setRowTextStyle=function(a,b){this.setRowTextStyleA(a,b),this._fake.setRowTextStyle(a,b)},this.lockRowA=this.lockRow,this.lockRow=function(a,b){this.lockRowA(a,b),this._fake.lockRow(a,b)},this.getColWidth=function(a){return b>a?parseInt(this._fake.cellWidthPX[a])+(_isFF?2:0):parseInt(this.cellWidthPX[a])+(_isFF?2:0)},this.setColWidthA=this._fake.setColWidthA=this.setColWidth,this.setColWidth=function(a,c){a=1*a,b>a?this._fake.setColWidthA(a,c-(_isFF?2:0)):this.setColWidthA(a,c-(_isFF?2:0)),b>=a+1&&this._fake._correctSplit(Math.min(this._fake.objBox.offsetWidth,this._fake.obj.offsetWidth))},this.adjustColumnSizeA=this.adjustColumnSize,this.setColumnLabelA=this.setColumnLabel,this.setColumnLabel=function(a,c,d,e){var f=this;return b>a&&(f=this._fake),this.setColumnLabelA.apply(f,[a,c,d,e])},this.adjustColumnSize=function(a,c){return b>a?(_isIE&&(this._fake.obj.style.tableLayout=""),this._fake.adjustColumnSize(a,c),_isIE&&(this._fake.obj.style.tableLayout="fixed"),this._fake._correctSplit(),void 0):this.adjustColumnSizeA(a,c)};var p="cells";this._bfs_cells=this[p],this[p]=function(){return arguments[1]<b?this._fake.cells.apply(this._fake,arguments):this._bfs_cells.apply(this,arguments)},this._bfs_setColumnHidden=this.setColumnHidden,this.setColumnHidden=function(){return parseInt(arguments[0])<b?(this._fake.setColumnHidden.apply(this._fake,arguments),this._fake._correctSplit()):this._bfs_setColumnHidden.apply(this,arguments)};var p="cells2";this._bfs_cells2=this[p],this[p]=function(){return arguments[1]<b?this._fake.cells2.apply(this._fake,arguments):this._bfs_cells2.apply(this,arguments)};var p="cells3";this._bfs_cells3=this[p],this[p]=function(a){return arguments[1]<b&&this._fake.rowsAr[arguments[0].idd]?this._fake.rowsAr[a.idd]&&0==this._fake.rowsAr[a.idd].childNodes.length?this._bfs_cells3.apply(this,arguments):(arguments[0]=arguments[0].idd,this._fake.cells.apply(this._fake,arguments)):this._bfs_cells3.apply(this,arguments)};var p="changeRowId";this._bfs_changeRowId=this[p],this[p]=function(){this._bfs_changeRowId.apply(this,arguments),this._fake.rowsAr[arguments[0]]&&this._fake.changeRowId.apply(this._fake,arguments)},this._fake.getRowById=function(a){var b=this.rowsAr[a];if(!b&&this._fake.rowsAr[a]&&(b=this._fake.getRowById(a)),b){if("TR"!=b.tagName){for(var c=0;c<this.rowsBuffer.length;c++)if(this.rowsBuffer[c]&&this.rowsBuffer[c].idd==a)return this.render_row(c);if(this._h2)return this.render_row(null,b.idd)}return b}return null},this.collapseKids&&(this._fake._bfs_collapseKids=this.collapseKids,this._fake.collapseKids=function(){return this._fake.collapseKids.apply(this._fake,[this._fake.rowsAr[arguments[0].idd]])},this._bfs_collapseKids=this.collapseKids,this.collapseKids=function(){this._bfs_collapseKids.apply(this,arguments);this._fake._h2syncModel(),this._cssSP||this._fake._fixAlterCss()},this._fake._bfs_expandKids=this.expandKids,this._fake.expandKids=function(){this._fake.expandKids.apply(this._fake,[this._fake.rowsAr[arguments[0].idd]]),this._cssSP||this._fake._fixAlterCss()},this._bfs_expandAll=this.expandAll,this.expandAll=function(){this._bfs_expandAll(),this._fake._h2syncModel(),this._cssSP||this._fake._fixAlterCss()},this._bfs_collapseAll=this.collapseAll,this.collapseAll=function(){this._bfs_collapseAll(),this._fake._h2syncModel(),this._cssSP||this._fake._fixAlterCss()},this._bfs_expandKids=this.expandKids,this.expandKids=function(){this._bfs_expandKids.apply(this,arguments);this._fake._h2syncModel(),this._cssSP||this._fake._fixAlterCss()},this._fake._h2syncModel=function(){this._fake.pagingOn?this._fake._renderSort():this._renderSort()},this._updateTGRState=function(a){return this._fake._updateTGRState(a)}),this._elmnh&&(this._setRowHoverA=this._fake._setRowHoverA=this._setRowHover,this._unsetRowHoverA=this._fake._unsetRowHoverA=this._unsetRowHover,this._setRowHover=this._fake._setRowHover=function(){var a=this.grid;a._setRowHoverA.apply(this,arguments);var b=_isIE?event.srcElement:arguments[0].target;b=a._fake.rowsAr[a.getFirstParentOfType(b,"TD").parentNode.idd],b&&a._fake._setRowHoverA.apply(a._fake.obj,[{target:b.childNodes[0]},arguments[1]])},this._unsetRowHover=this._fake._unsetRowHover=function(){if(arguments[1])var a=this;else var a=this.grid;a._unsetRowHoverA.apply(this,arguments),a._fake._unsetRowHoverA.apply(a._fake.obj,arguments)},this._fake.enableRowsHover(!0,this._hvrCss),this.enableRowsHover(!1),this.enableRowsHover(!0,this._fake._hvrCss)),this._updateTGRState=function(a){a.update&&0!=a.id&&(this.rowsAr[a.id].imgTag&&(this.rowsAr[a.id].imgTag.src=this.imgURL+a.state+".gif"),this._fake.rowsAr[a.id]&&this._fake.rowsAr[a.id].imgTag&&(this._fake.rowsAr[a.id].imgTag.src=this.imgURL+a.state+".gif"),a.update=!1)},this.copy_row=function(a){var c=a.cloneNode(!0);c._skipInsert=a._skipInsert;var d=b;if(c._attrs={},this._ecspn){d=0;for(var e=0;e<c.childNodes.length&&b>e;e+=c.childNodes[e].colSpan||1)d++}for(;c.childNodes.length>d;)c.removeChild(c.childNodes[c.childNodes.length-1]);for(var f=d,e=0;f>e;e++)this.dragAndDropOff&&this.dragger.addDraggableItem(c.childNodes[e],this),c.childNodes[e].style.display=this._fake._hrrar&&this._fake._hrrar[e]?"none":"",c.childNodes[e]._cellIndex=e,c.childNodes[e].combo_value=arguments[0].childNodes[e].combo_value,c.childNodes[e]._clearCell=arguments[0].childNodes[e]._clearCell,c.childNodes[e]._cellType=arguments[0].childNodes[e]._cellType,c.childNodes[e]._brval=arguments[0].childNodes[e]._brval,c.childNodes[e]._attrs=arguments[0].childNodes[e]._attrs,c.childNodes[e].chstate=arguments[0].childNodes[e].chstate,a._attrs.style&&(c.childNodes[e].style.cssText+=";"+a._attrs.style),c.childNodes[e].colSpan>1&&(this._childIndexes=this._fake._childIndexes);if(this._h2&&this._treeC<b){var g=this._h2.get[arguments[0].idd];c.imgTag=c.childNodes[this._treeC].childNodes[0].childNodes[g.level],c.valTag=c.childNodes[this._treeC].childNodes[0].childNodes[g.level+2]}return c.idd=a.idd,c.grid=this._fake,c};var p="_insertRowAt";this._bfs_insertRowAt=this[p],this[p]=function(){var a=this._bfs_insertRowAt.apply(this,arguments);arguments[0]=this.copy_row(arguments[0]);var b=this._fake._insertRowAt.apply(this._fake,arguments);return a._fhd&&(b.parentNode.removeChild(b),this._fake.rowsCol._dhx_removeAt(this._fake.rowsCol._dhx_find(b)),a._fhd=!1),a},this._bfs_setSizes=this.setSizes,this.setSizes=function(){this._notresize||(this._bfs_setSizes(this,arguments),this.sync_headers(),this.sync_scroll()&&this._ahgr&&this.setSizes(),this._fake.entBox.style.height=this.entBox.style.height,this._fake.objBox.style.height=this.objBox.style.height,this._fake.hdrBox.style.height=this.hdrBox.style.height,this._fake.objBox.scrollTop=this.objBox.scrollTop,this._fake.setColumnSizes(this._fake.entBox.clientWidth),this.globalBox.style.width=parseInt(this.entBox.style.width)+parseInt(this._fake.entBox.style.width),this.globalBox.style.height=this.entBox.style.height)},this.sync_scroll=this._fake.sync_scroll=function(a){var b=this.objBox.style.overflowX;if(this.obj.offsetWidth<=this.objBox.offsetWidth){if(!a)return this._fake.sync_scroll(!0);this.objBox.style.overflowX="hidden",this._fake.objBox.style.overflowX="hidden"}else this.objBox.style.overflowX="scroll",this._fake.objBox.style.overflowX="scroll";return b!=this.objBox.style.overflowX},this.sync_headers=this._fake.sync_headers=function(){if(!this.noHeader&&this._fake.hdr.offsetHeight!=this.hdr.offsetHeight){for(var a=1;a<this.hdr.rows.length;a++){var c=this.hdr.rows[a].scrollHeight,d=this._fake.hdr.rows[a].scrollHeight;c!=d&&(this._fake.hdr.rows[a].style.height=this.hdr.rows[a].style.height=Math.max(c,d)+"px"),window._KHTMLrv&&(this._fake.hdr.rows[a].childNodes[0].style.height=this.hdr.rows[a].childNodes[b].offsetHeight+"px")}this._fake.sync_headers}},this._fake._bfs_setSizes=this._fake.setSizes,this._fake.setSizes=function(){this._fake._notresize||this._fake.setSizes()};var p="_doOnScroll";this._bfs__doOnScroll=this[p],this[p]=function(){this._bfs__doOnScroll.apply(this,arguments),this._fake.objBox.scrollTop=this.objBox.scrollTop,this._fake._doOnScroll.apply(this._fake,arguments)};var p="doClick";this._bfs_doClick=this[p],this[p]=function(){if(this._bfs_doClick.apply(this,arguments),"TD"==arguments[0].tagName){var a=arguments[0]._cellIndex>=b;if(!arguments[0].parentNode.idd)return;a||(arguments[0].className=arguments[0].className.replace(/cellselected/g,"")),this._fake.rowsAr[arguments[0].parentNode.idd]||this._fake.render_row(this.getRowIndex(arguments[0].parentNode.idd)),arguments[0]=this._fake.cells(arguments[0].parentNode.idd,a?0:arguments[0]._cellIndex).cell,a&&(this._fake.cell=null),this._fake._bfs_doClick.apply(this._fake,arguments),a?this._fake.cell=this.cell:this.cell=this._fake.cell,this._fake.onRowSelectTime&&clearTimeout(this._fake.onRowSelectTime),a?(arguments[0].className=arguments[0].className.replace(/cellselected/g,""),globalActiveDHTMLGridObject=this,this._fake.cell=this.cell):this.objBox.scrollTop=this._fake.objBox.scrollTop}},this._fake._bfs_doClick=this._fake[p],this._fake[p]=function(){if(this._bfs_doClick.apply(this,arguments),"TD"==arguments[0].tagName){var a=arguments[0]._cellIndex<b;if(!arguments[0].parentNode.idd)return;arguments[0]=this._fake._bfs_cells(arguments[0].parentNode.idd,a?b:arguments[0]._cellIndex).cell,this._fake.cell=null,this._fake._bfs_doClick.apply(this._fake,arguments),this._fake.cell=this.cell,this._fake.onRowSelectTime&&clearTimeout(this._fake.onRowSelectTime),a&&(arguments[0].className=arguments[0].className.replace(/cellselected/g,""),globalActiveDHTMLGridObject=this,this._fake.cell=this.cell,this._fake.objBox.scrollTop=this.objBox.scrollTop)}},this.clearSelectionA=this.clearSelection,this.clearSelection=function(a){a&&this._fake.clearSelection(),this.clearSelectionA()},this.moveRowUpA=this.moveRowUp,this.moveRowUp=function(a){this._h2||this._fake.moveRowUp(a),this.moveRowUpA(a),this._h2&&this._fake._h2syncModel()},this.moveRowDownA=this.moveRowDown,this.moveRowDown=function(a){this._h2||this._fake.moveRowDown(a),this.moveRowDownA(a),this._h2&&this._fake._h2syncModel()},this._fake.getUserData=function(){return this._fake.getUserData.apply(this._fake,arguments)},this._fake.setUserData=function(){return this._fake.setUserData.apply(this._fake,arguments)},this.getSortingStateA=this.getSortingState,this.getSortingState=function(){var a=this.getSortingStateA();return 0!=a.length?a:this._fake.getSortingState()},this.setSortImgStateA=this._fake.setSortImgStateA=this.setSortImgState,this.setSortImgState=function(a,c,d,e){this.setSortImgStateA(a,c,d,e),b>1*c?(this._fake.setSortImgStateA(a,c,d,e),this.setSortImgStateA(!1)):this._fake.setSortImgStateA(!1)},this._fake.doColResizeA=this._fake.doColResize,this._fake.doColResize=function(c,d,e,f){a=-1;var g=0;return arguments[1]._cellIndex==b-1?(a=this._initalSplR+(c.clientX-f),this._initalSplF||(this._initalSplF=arguments[3]+this.objBox.scrollWidth-this.objBox.offsetWidth),this.objBox.scrollWidth==this.objBox.offsetWidth&&(this._fake.alter_split_resize||c.clientX-f>0)?(arguments[3]=this._initalSplF||arguments[3],g=this.doColResizeA.apply(this,arguments)):g=this.doColResizeA.apply(this,arguments)):(this.obj.offsetWidth<this.entBox.offsetWidth&&(a=this.obj.offsetWidth),g=this.doColResizeA.apply(this,arguments)),this._correctSplit(a),this.resized=this._fake.resized=1,g
},this._fake.changeCursorState=function(a){var b=a.target||a.srcElement;if("TD"!=b.tagName&&(b=this.getFirstParentOfType(b,"TD")),"TD"!=b.tagName||!this._drsclmn||this._drsclmn[b._cellIndex]){var c=(a.layerX||0)+(_isIE||"DIV"!=a.target.tagName?0:b.offsetLeft),d=parseInt(this.getPosition(b,this.hdrBox));b.style.cursor=b.offsetWidth-(a.offsetX||-1*(d-c))<10||this.entBox.offsetWidth-(a.offsetX?a.offsetX+b.offsetLeft:0)+this.objBox.scrollLeft-c<10?"E-resize":"default",_isOpera&&(this.hdrBox.scrollLeft=this.objBox.scrollLeft)}},this._fake.startColResizeA=this._fake.startColResize,this._fake.startColResize=function(a){var b=this.startColResizeA(a);if(this._initalSplR=this.entBox.offsetWidth,this._initalSplF=null,this.entBox.onmousemove){var c=this.entBox.parentNode;if(c._aggrid)return b;c._aggrid=c.grid,c.grid=this,this.entBox.parentNode.onmousemove=this.entBox.onmousemove,this.entBox.onmousemove=null}return b},this._fake.stopColResizeA=this._fake.stopColResize,this._fake.stopColResize=function(a){if(this.entBox.parentNode.onmousemove){var b=this.entBox.parentNode;b.grid=b._aggrid,b._aggrid=null,this.entBox.onmousemove=this.entBox.parentNode.onmousemove,this.entBox.parentNode.onmousemove=null,this.obj.offsetWidth<this.entBox.offsetWidth&&this._correctSplit(this.obj.offsetWidth)}return this.stopColResizeA(a)},this.doKeyA=this.doKey,this._fake.doKeyA=this._fake.doKey,this._fake.doKey=this.doKey=function(a){if(!a)return!0;if(this._htkebl)return!0;if((a.target||a.srcElement).value!==window.undefined){var c=a.target||a.srcElement;if(!c.parentNode||-1==c.parentNode.className.indexOf("editable"))return!0}switch(a.keyCode){case 9:if(a.shiftKey){if(this._realfake){if(this.cell&&0==this.cell._cellIndex){a.preventDefault&&a.preventDefault();var d=this.rowsBuffer[this.getRowIndex(this.cell.parentNode.idd)-1];return d&&(this._fake.showRow(d.idd),this._fake.selectCell(this._fake.getRowIndex(d.idd),this._fake._cCount-1,!1,!1,!0)),!1}return this.doKeyA(a)}return this.cell&&this.cell._cellIndex==b?(a.preventDefault&&a.preventDefault(),this._fake.selectCell(this.getRowIndex(this.cell.parentNode.idd),b-1,!1,!1,!0),!1):this.doKeyA(a)}if(this._realfake){if(this.cell&&this.cell._cellIndex==b-1){a.preventDefault&&a.preventDefault();for(var e=b;this._fake._hrrar&&this._fake._hrrar[e];)e++;return this._fake.selectCell(this.getRowIndex(this.cell.parentNode.idd),e,!1,!1,!0),!1}var d=this.doKeyA(a);return globalActiveDHTMLGridObject=this,d}if(this.cell){for(var e=this.cell._cellIndex+1;this.rowsCol[0].childNodes[e]&&"none"==this.rowsCol[0].childNodes[e].style.display;)e++;if(e==this.rowsCol[0].childNodes.length){a.preventDefault&&a.preventDefault();var d=this.rowsBuffer[this.getRowIndex(this.cell.parentNode.idd)+1];return d&&(this.showRow(d.idd),this._fake.selectCell(this._fake.getRowIndex(d.idd),0,!1,!1,!0)),!1}}return this.doKeyA(a)}return this.doKeyA(a)},this.editCellA=this.editCell,this.editCell=function(){return!this.cell&&this._fake.cell?this._fake.editCell():this.editCellA()},this.deleteRowA=this.deleteRow,this.deleteRow=function(a,b){return this.deleteRowA(a,b)===!1?!1:void(this._fake.rowsAr[a]&&this._fake.deleteRow(a))},this.clearAllA=this.clearAll,this.clearAll=function(){this.clearAllA(),this._fake.clearAll()},this.attachEvent("onAfterSorting",function(a){a>=b&&this._fake.setSortImgState(!1)}),this._fake.sortField=function(a,b){if(this._fake.sortField.call(this._fake,a,b,this._fake.hdr.rows[0].cells[a]),"na"!=this.fldSort[a]){var c=this._fake.getSortingState()[1];this._fake.setSortImgState(!1),this.setSortImgState(!0,arguments[0],c)}},this.sortTreeRowsA=this.sortTreeRows,this._fake.sortTreeRowsA=this._fake.sortTreeRows,this.sortTreeRows=this._fake.sortTreeRows=function(a,b,c,d){return this._realfake?this._fake.sortTreeRows(a,b,c,d):(this.sortTreeRowsA(a,b,c,d),this._fake._h2syncModel(),this._fake.setSortImgStateA(!1),void(this._fake.fldSorted=null))},this._fake._fillers=[],this._fake.rowsBuffer=this.rowsBuffer,this.attachEvent("onClearAll",function(){this._fake.rowsBuffer=this.rowsBuffer}),this._add_filler_s=this._add_filler,this._add_filler=function(a,b,c,d){if(!d){this._fake._fillers||(this._fake._fillers=[]);var e;c&&(c.idd?e=this._fake.rowsAr[c.idd]:c.nextSibling&&(e={},e.nextSibling=this._fake.rowsAr[c.nextSibling.idd],e.parentNode=e.nextSibling.parentNode)),this._fake._fillers.push(this._fake._add_filler(a,b,e))}return this._add_filler_s.apply(this,arguments)},this._add_from_buffer_s=this._add_from_buffer,this._add_from_buffer=function(){var a=this._add_from_buffer_s.apply(this,arguments);return-1!=a&&(this._fake._add_from_buffer.apply(this._fake,arguments),this.multiLine&&this._correctRowHeight(this.rowsBuffer[arguments[0]].idd)),a},this._fake.render_row=function(a){var b=this._fake.render_row(a);return-1==b?-1:b?this.rowsAr[b.idd]=this.rowsAr[b.idd]||this._fake.copy_row(b):null},this._reset_view_s=this._reset_view,this._reset_view=function(){this._fake._reset_view(!0),this._fake._fillers=[],this._reset_view_s()},this.moveColumn_s=this.moveColumn,this.moveColumn=function(a,c){return c>=b?this.moveColumn_s(a,c):void 0},this.attachEvent("onCellChanged",function(a,c){if(this._split_event&&b>c&&this.rowsAr[a]){var d=this._fake.rowsAr[a];if(!d)return;d=d._childIndexes?d.childNodes[d._childIndexes[c]]:d.childNodes[c],this.rowsAr[a].childNodes[c].innerHTML=d.innerHTML,this.rowsAr[a].childNodes[c]._clearCell=!1,this.rowsAr[a].childNodes[c].chstate=d.chstate}}),this._fake.combos=this.combos,this.setSizes(),this.rowsBuffer[0]&&this._reset_view(),this.attachEvent("onXLE",function(){this._fake._correctSplit()}),this._fake._correctSplit()},dhtmlXGridObject.prototype._correctSplit=function(a){if(a=a||this.obj.scrollWidth-this.objBox.scrollLeft,a>-1){this.entBox.style.width=a+"px",this.objBox.style.width=a+"px";var b=(this.globalBox.offsetWidth-this.globalBox.clientWidth)/2;this._fake.entBox.style.left=a+"px",this._fake.entBox.style.width=Math.max(0,this.globalBox.offsetWidth-a-(this.quirks?0:2)*b)+"px",_isIE&&(this._fake.hdrBox.style.width=this._fake.objBox.style.width=Math.max(0,this.globalBox.offsetWidth-a)+"px")}},dhtmlXGridObject.prototype._correctRowHeight=function(a){if(this.rowsAr[a]&&this._fake.rowsAr[a]){var b=this.rowsAr[a].offsetHeight,c=this._fake.rowsAr[a].offsetHeight,d=Math.max(b,c);d&&(this.rowsAr[a].style.height=this._fake.rowsAr[a].style.height=d+"px",window._KHTMLrv&&(this.rowsAr[a].childNodes[this._fake._cCount].style.height=this._fake.rowsAr[a].firstChild.style.height=d+"px"))}},dhtmlXGridObject.prototype.enableSmartRendering=function(a,b,c){arguments.length>2&&(b&&!this.rowsBuffer[b-1]&&(this.rowsBuffer[b-1]=0),b=c),this._srnd=convertStringToBoolean(a),this._srdh=this._srdh||20,this._dpref=b||0},dhtmlXGridObject.prototype.enablePreRendering=function(a){this._srnd_pr=parseInt(a||50)},dhtmlXGridObject.prototype.forceFullLoading=function(a){a=a||50;for(var b=0;b<this.rowsBuffer.length;b++)if(!this.rowsBuffer[b]){if(this.callEvent("onDynXLS",[b,a])){var c=this;this.load(this.xmlFileUrl+getUrlSymbol(this.xmlFileUrl)+"posStart="+b+"&count="+a,function(){window.setTimeout(function(){c.forceFullLoading()},100)},this._data_type)}return}},dhtmlXGridObject.prototype.setAwaitedRowHeight=function(a){this._srdh=parseInt(a)},dhtmlXGridObject.prototype._get_view_size=function(){return Math.floor(parseInt(this.entBox.offsetHeight)/this._srdh)+2},dhtmlXGridObject.prototype._add_filler=function(a,b,c){if(!b)return null;var d="__filler__",e=this._prepareRow(d);e.firstChild.style.width="1px";for(var f=1;f<e.childNodes.length;f++)e.childNodes[f].style.display="none";return e.firstChild.style.height=b*this._srdh+"px",c=c||this.rowsCol[a],c&&c.nextSibling?c.parentNode.insertBefore(e,c.nextSibling):_isKHTML?this.obj.appendChild(e):this.obj.rows[0].parentNode.appendChild(e),[a,b,e]},dhtmlXGridObject.prototype._update_srnd_view=function(){var a=Math.floor(this.objBox.scrollTop/this._srdh),b=a+this._get_view_size();if(this.multiLine){var c=this.objBox.scrollTop;for(a=0;c>0;)c-=this.rowsCol[a]?this.rowsCol[a].offsetHeight:this._srdh,a++;b=a+this._get_view_size(),a>0&&a--}b+=this._srnd_pr||0,b>this.rowsBuffer.length&&(b=this.rowsBuffer.length);for(var d=a;b>d;d++)if(!this.rowsCol[d]){var e=this._add_from_buffer(d);if(-1==e)return void(this.xmlFileUrl&&(this._current_load=[d,this._dpref?this._dpref:b-d],this.callEvent("onDynXLS",[d,this._current_load[1]])&&this.load(this.xmlFileUrl+getUrlSymbol(this.xmlFileUrl)+"posStart="+d+"&count="+this._current_load[1],this._data_type)));this._tgle&&(this._updateLine(this._h2.get[this.rowsBuffer[d].idd],this.rowsBuffer[d]),this._updateParentLine(this._h2.get[this.rowsBuffer[d].idd],this.rowsBuffer[d])),d&&d==(this._realfake?this._fake:this)._r_select&&this.selectCell(d,this.cell?this.cell._cellIndex:0,!0)}this._fake&&!this._realfake&&this.multiLine&&(this._fake.objBox.scrollTop=this.objBox.scrollTop)},dhtmlXGridObject.prototype._add_from_buffer=function(a){var b=this.render_row(a);if(-1==b)return-1;if((b._attrs.selected||b._attrs.select)&&(this.selectRow(b,!1,!0),b._attrs.selected=b._attrs.select=null),this._cssSP){if(this._h2){var c=this._h2.get[b.idd];b.className+=" "+(c.level%2?this._cssUnEven+" "+this._cssUnEven:this._cssEven+" "+this._cssEven)+"_"+c.level+(this.rowsAr[c.id]._css||"")}}else this._cssEven&&a%2==0?b.className=this._cssEven+(-1!=b.className.indexOf("rowselected")?" rowselected ":" ")+(b._css||""):this._cssUnEven&&a%2==1&&(b.className=this._cssUnEven+(-1!=b.className.indexOf("rowselected")?" rowselected ":" ")+(b._css||""));for(var d=0;d<this._fillers.length;d++){var e=this._fillers[d];if(e&&e[0]<=a&&e[0]+e[1]>a){var f=a-e[0];return void(0==f?(this._insert_before(a,b,e[2]),this._update_fillers(d,-1,1)):f==e[1]-1?(this._insert_after(a,b,e[2]),this._update_fillers(d,-1,0)):(this._fillers.push(this._add_filler(a+1,e[1]-f-1,e[2],1)),this._insert_after(a,b,e[2]),this._update_fillers(d,-e[1]+f,0)))}}},dhtmlXGridObject.prototype._update_fillers=function(a,b,c){var d=this._fillers[a];d[1]=d[1]+b,d[0]=d[0]+c,d[1]?d[2].firstChild.style.height=parseFloat(d[2].firstChild.style.height)+b*this._srdh+"px":(d[2].parentNode.removeChild(d[2]),this._fillers.splice(a,1))},dhtmlXGridObject.prototype._insert_before=function(a,b,c){c.parentNode.insertBefore(b,c),this.rowsCol[a]=b},dhtmlXGridObject.prototype._insert_after=function(a,b,c){c.nextSibling?c.parentNode.insertBefore(b,c.nextSibling):c.parentNode.appendChild(b),this.rowsCol[a]=b},dhtmlXGridObject.prototype.enableAutoSizeSaving=function(a,b){this.attachEvent("onResizeEnd",function(){this.saveSizeToCookie(a,b)})},dhtmlXGridObject.prototype.saveOpenStates=function(a,b){a||(a=this.entBox.id);var c=[];this._h2.forEachChild(0,function(a){"minus"==a.state&&c.push(a.id)});var d="gridOpen"+(a||"")+"="+c.join("|")+(b?";"+b:"");document.cookie=d},dhtmlXGridObject.prototype.loadOpenStates=function(a){var b=this.getCookie(a,"gridOpen");if(b){b=b.split("|");for(var c=0;c<b.length;c++)this.openItem(b[c])}},dhtmlXGridObject.prototype.enableAutoHiddenColumnsSaving=function(a,b){this.setColumnHiddenSSC=this.setColumnHidden,this.setColumnHidden=function(){this.setColumnHiddenSSC.apply(this,arguments),this.saveHiddenColumnsToCookie(a,b)}},dhtmlXGridObject.prototype.enableSortingSaving=function(a,b){this.attachEvent("onBeforeSorting",function(){var c=this;return window.setTimeout(function(){c.saveSortingToCookie(a,b)},1),!0})},dhtmlXGridObject.prototype.enableOrderSaving=function(a,b){this.attachEvent("onAfterCMove",function(){this.saveOrderToCookie(a,b),this.saveSizeToCookie(a,b)})},dhtmlXGridObject.prototype.enableAutoSaving=function(a,b){this.enableOrderSaving(a,b),this.enableAutoSizeSaving(a,b),this.enableSortingSaving(a,b)},dhtmlXGridObject.prototype.saveSizeToCookie=function(a,b){if("px"==this.cellWidthType)var c=this.cellWidthPX.join(",");else var c=this.cellWidthPC.join(",");var d=(this.initCellWidth||new Array).join(",");this.setCookie(a,b,0,c),this.setCookie(a,b,1,d)},dhtmlXGridObject.prototype.saveHiddenColumnsToCookie=function(a,b){var c=[].concat(this._hrrar||[]);if(this._fake&&this._fake._hrrar)for(var d=0;d<this._fake._cCount;d++)c[d]=this._fake._hrrar[d]?"1":"";this.setCookie(a,b,4,c.join(",").replace(/display:none;/g,"1"))},dhtmlXGridObject.prototype.loadHiddenColumnsFromCookie=function(a){var b=this._getCookie(a,4),c=(b||"").split(",");if(!(c.length>this._cCount)&&b)for(var d=0;d<c.length;d++)this.setColumnHidden(d,c[d]?!0:!1)},dhtmlXGridObject.prototype.saveSortingToCookie=function(a,b){this.setCookie(a,b,2,(this.getSortingState()||[]).join(","))},dhtmlXGridObject.prototype.loadSortingFromCookie=function(a){var b=this._getCookie(a,2);b=(b||"").split(","),b.length>1&&b[0]<this._cCount&&(this.sortRows(b[0],null,b[1]),this.setSortImgState(!0,b[0],b[1]))},dhtmlXGridObject.prototype.saveOrderToCookie=function(a,b){if(!this._c_order){this._c_order=[];for(var c=this._cCount,d=0;c>d;d++)this._c_order[d]=d}this.setCookie(a,b,3,(this._c_order||[]).slice(0,this._cCount).join(","))},dhtmlXGridObject.prototype.loadOrderFromCookie=function(a){var b=this._getCookie(a,3);if(b=(b||"").split(","),b.length>1&&b.length<=this._cCount)for(var c=0;c<b.length;c++)if(!this._c_order&&b[c]!=c||this._c_order&&b[c]!=this._c_order[c]){var d=b[c];if(this._c_order)for(var e=0;e<this._c_order.length;e++)if(this._c_order[e]==b[c]){d=e;break}this.moveColumn(1*d,c)}},dhtmlXGridObject.prototype.loadSizeFromCookie=function(a){var b=this._getCookie(a,1);b&&(this.initCellWidth=b.split(","));var b=this._getCookie(a,0);if(b&&b.length){if(!this._fake&&this._hrrar)for(var c=0;c<b.length;c++)this._hrrar[c]&&(b[c]=0);"px"==this.cellWidthType?this.cellWidthPX=b.split(","):this.cellWidthPC=b.split(",")}return this.setSizes(),!0},dhtmlXGridObject.prototype.clearConfigCookie=function(a){a||(a=this.entBox.id);var b="gridSettings"+a+"=||||";document.cookie=b},dhtmlXGridObject.prototype.clearSizeCookie=dhtmlXGridObject.prototype.clearConfigCookie,dhtmlXGridObject.prototype.setCookie=function(a,b,c,d){a||(a=this.entBox.id);var e=this.getCookie(a);e=(e||"||||").split("|"),e[c]=d;var f="gridSettings"+a+"="+e.join("|")+(b?";"+b:"");document.cookie=f},dhtmlXGridObject.prototype.getCookie=function(a,b){a||(a=this.entBox.id),a=(b||"gridSettings")+a;var c=a+"=";if(document.cookie.length>0){var d=document.cookie.indexOf(c);if(-1!=d){d+=c.length;var e=document.cookie.indexOf(";",d);return-1==e&&(e=document.cookie.length),document.cookie.substring(d,e)}}},dhtmlXGridObject.prototype._getCookie=function(a,b){return(this.getCookie(a)||"||||").split("|")[b]},dhtmlXGridObject.prototype._process_html=function(a){if(a.tagName&&"TABLE"==a.tagName)return this._process_inner_html(a,0);var b=document.createElement("DIV");b.innerHTML=a.xmlDoc.responseText;var c=b.getElementsByTagName("TABLE")[0];this._process_inner_html(c,0)},dhtmlXGridObject.prototype._process_inner_html=function(a,b){for(var c=a.rows.length,d=b;c>d;d++){var e=a.rows[d].getAttribute("id")||d;this.rowsBuffer.push({idd:e,data:a.rows[d],_parser:this._process_html_row,_locator:this._get_html_data})}this.render_dataset(),this.setSizes()},dhtmlXGridObject.prototype._process_html_row=function(a,b){var c=b.getElementsByTagName("TD"),d=[];a._attrs=this._xml_attrs(b);for(var e=0;e<c.length;e++){var f=c[e],g=f.getAttribute("type");if(a.childNodes[e]&&(g&&(a.childNodes[e]._cellType=g),a.childNodes[e]._attrs=this._xml_attrs(c[e])),d.push(f.firstChild?f.innerHTML:""),f.colSpan>1){a.childNodes[e]._attrs.colspan=f.colSpan;for(var h=1;h<f.colSpan;h++)d.push("")}}for(e<c.length;e<a.childNodes.length;e++)a.childNodes[e]._attrs={};return this._fillRow(a,this._c_order?this._swapColumns(d):d),a},dhtmlXGridObject.prototype._get_html_data=function(a,b){for(a=a.firstChild;;){if(!a)return"";if("TD"==a.tagName&&b--,0>b)break;a=a.nextSibling}return a.firstChild?a.firstChild.data:""},dhtmlxEvent(window,"load",function(){for(var a=document.getElementsByTagName("table"),b=0;b<a.length;b++)"dhtmlxGrid"==a[b].className&&dhtmlXGridFromTable(a[b])}),dhtmlXGridObject.prototype.enableUndoRedo=function(){var a=this,b=function(){return a._onEditUndoRedo.apply(a,arguments)};this.attachEvent("onEditCell",b);var c=function(b,c,d){return a._onEditUndoRedo.apply(a,[2,b,c,d?1:0,d?0:1])};this.attachEvent("onCheckbox",c),this._IsUndoRedoEnabled=!0,this._UndoRedoData=[],this._UndoRedoPos=-1},dhtmlXGridObject.prototype.disableUndoRedo=function(){this._IsUndoRedoEnabled=!1,this._UndoRedoData=[],this._UndoRedoPos=-1},dhtmlXGridObject.prototype._onEditUndoRedo=function(a,b,c,d,e){if(this._IsUndoRedoEnabled&&2==a&&e!=d){-1!==this._UndoRedoPos&&this._UndoRedoPos!=this._UndoRedoData.length-1?this._UndoRedoData=this._UndoRedoData.slice(0,this._UndoRedoPos+1):-1===this._UndoRedoPos&&this._UndoRedoData.length>0&&(this._UndoRedoData=[]);var f={old_value:e,new_value:d,row_id:b,cell_index:c};this._UndoRedoData.push(f),this._UndoRedoPos++}return!0},dhtmlXGridObject.prototype.doUndo=function(){if(-1===this._UndoRedoPos)return!1;var a=this._UndoRedoData[this._UndoRedoPos--],b=this.cells(a.row_id,a.cell_index);"tree"==this.getColType(a.cell_index)?b.setLabel(a.old_value):b.setValue(a.old_value)},dhtmlXGridObject.prototype.doRedo=function(){if(this._UndoRedoPos==this._UndoRedoData.length-1)return!1;var a=this._UndoRedoData[++this._UndoRedoPos];this.cells(a.row_id,a.cell_index).setValue(a.new_value)},dhtmlXGridObject.prototype.getRedo=function(){return this._UndoRedoPos==this._UndoRedoData.length-1?[]:this._UndoRedoData.slice(this._UndoRedoPos+1)},dhtmlXGridObject.prototype.getUndo=function(){return-1==this._UndoRedoPos?[]:this._UndoRedoData.slice(0,this._UndoRedoPos+1)},eXcell_sub_row.prototype=new eXcell,eXcell_sub_row_ajax.prototype=new eXcell_sub_row,eXcell_sub_row_grid.prototype=new eXcell_sub_row,dhtmlXGridObject.prototype._expandMonolite=function(a,b,c){var d=this.parentNode,e=d.parentNode,f=e.grid,g=f.getUserData(e.idd,"__sub_row");if(f._sub_row_editor||(f._sub_row_editor=new eXcell_sub_row(d)),g){if(e._expanded&&!b){f._sub_row_editor._setState("plus.gif",d),d._previous_content=e._expanded,f.objBox.removeChild(e._expanded),e._expanded=!1,e.style.height=(e.oldHeight||20)+"px",d.style.height=(e.oldHeight||20)+"px",f._fake&&(f._fake.rowsAr[e.idd].style.height=(e.oldHeight||20)+"px");for(var h=0;h<e.cells.length;h++)e.cells[h].style.verticalAlign="middle",e.cells[h].style.paddingTop="0px";delete f._flow[e.idd],f._correctMonolite(),e._expanded.ctrl=null}else if(!e._expanded&&!c){if(f._sub_row_editor._setState("minus.gif",d),d._previous_content){var i=d._previous_content;i.ctrl=d,f.objBox.appendChild(i),f._detectHeight(i,d,parseInt(i.style.height))}else{var i=document.createElement("DIV");e.oldHeight=d.offsetHeight,i.ctrl=d,d._sub_row_type?f._sub_row_render[d._sub_row_type](f,i,d,g):i.innerHTML=g,i.style.cssText="position:absolute;left:0px;top:0px;overflow:auto;font-family:Tahoma;font-size:8pt;margin-top:2px;margin-left:4px;",i.className="dhx_sub_row",f.objBox.appendChild(i),f._detectHeight(i,d)}f._flow||(f.attachEvent("onGridReconstructed",function(){this.pagingOn?this._collapsMonolite():this._correctMonolite()}),f.attachEvent("onResizeEnd",function(){this._correctMonolite(!0)}),f.attachEvent("onAfterCMove",function(){this._correctMonolite(!0)}),f.attachEvent("onDrop",function(){this._correctMonolite(!0)}),f.attachEvent("onBeforePageChanged",function(){return this._collapsMonolite(),!0}),f.attachEvent("onGroupStateChanged",function(){return this._correctMonolite(),!0}),f.attachEvent("onFilterEnd",function(){this._collapsMonolite()}),f.attachEvent("onUnGroup",function(){this._collapsMonolite()}),f.attachEvent("onPageChanged",function(){this._collapsMonolite()}),f.attachEvent("onXLE",function(){this._collapsMonolite()}),f.attachEvent("onClearAll",function(){for(var a in this._flow)this._flow[a]&&this._flow[a].parentNode&&this._flow[a].parentNode.removeChild(this._flow[a]);this._flow=[]}),f.attachEvent("onEditCell",function(a,b,c){return 2!==a&&this._flow[b]&&"ch"!=this.cellType[c]&&"ra"!=this.cellType[c]&&this._expandMonolite.apply(this._flow[b].ctrl.firstChild,[0,!1,!0]),!0}),f.attachEvent("onCellChanged",function(a,b){if(this._flow[a]){var c=this.cells(a,b).cell;c.style.verticalAlign="top",c.style.paddingTop="3px"}}),f._flow=[]),f._flow[e.idd]=i,f._correctMonolite();for(var h=0;h<e.cells.length;h++)e.cells[h].style.verticalAlign="top",e.cells[h].style.paddingTop="3px";if(f._fake)for(var j=f._fake.rowsAr[e.idd],h=0;h<j.cells.length;h++)j.cells[h].style.verticalAlign="top",j.cells[h].style.paddingTop="3px";d.style.paddingTop="1px",e._expanded=i}f._ahgr&&f.setSizes(),f.parentGrid&&f.callEvent("onGridReconstructed",[]),f.callEvent("onSubRowOpen",[e.idd,!!e._expanded])}},dhtmlXGridObject.prototype._sub_row_render={ajax:function(that,d,td,c){d.innerHTML="Loading...";var xml=new dtmlXMLLoaderObject(function(){d.innerHTML=xml.xmlDoc.responseText;var z=xml.xmlDoc.responseText.match(/<script[^>]*>([^<]+)<\/script>/g);if(z)for(var i=0;i<z.length;i++)eval(z[i].replace(/<([\/]{0,1})s[^>]*>/g,""));that._detectHeight(d,td),that._correctMonolite(),that.setUserData(td.parentNode.idd,"__sub_row",xml.xmlDoc.responseText),td._sub_row_type=null,that._ahgr&&that.setSizes(),that.callEvent("onSubAjaxLoad",[td.parentNode.idd,xml.xmlDoc.responseText])},this,!0,!0);xml.loadXML(c)},grid:function(a,b,c,d){c._sub_grid=new dhtmlXGridObject(b),c._sub_grid.parentGrid=a,c._sub_grid.setImagePath(a.imgURL),c._sub_grid.enableAutoHeight(!0),c._sub_grid.attachEvent("onGridReconstructed",function(){a._detectHeight(b,c,c._sub_grid.objBox.scrollHeight+c._sub_grid.hdr.offsetHeight+(this.ftr?this.ftr.offsetHeight:0)),a._correctMonolite(),this.setSizes(),a.parentGrid&&a.callEvent("onGridReconstructed",[])}),a.callEvent("onSubGridCreated",[c._sub_grid,c.parentNode.idd,c._cellIndex,d])&&c._sub_grid.loadXML(d,function(){a._detectHeight(b,c,c._sub_grid.objBox.scrollHeight+c._sub_grid.hdr.offsetHeight+(c._sub_grid.ftr?c._sub_grid.ftr.offsetHeight:0)),c._sub_grid.objBox.style.overflow="hidden",a._correctMonolite(),c._sub_row_type=null,!a.callEvent("onSubGridLoaded",[c._sub_grid,c.parentNode.idd,c._cellIndex,d])})}},dhtmlXGridObject.prototype._detectHeight=function(a,b,c){var d=b.offsetLeft+b.offsetWidth;a.style.left=d+"px",a.style.width=Math.max(0,b.parentNode.offsetWidth-d-4)+"px";var c=c||a.scrollHeight;a.style.overflow="hidden",a.style.height=c+"px";var e=b.parentNode;if(b.parentNode.style.height=(e.oldHeight||20)+3+1*c+"px",b.style.height=(e.oldHeight||20)+3+1*c+"px",this._fake){var f=this._fake.rowsAr[b.parentNode.idd];f.style.height=(e.oldHeight||20)+3+1*c+"px"}},dhtmlXGridObject.prototype._correctMonolite=function(a){for(var b in this._flow)if(this._flow[b]&&"DIV"==this._flow[b].tagName)if(this.rowsAr[b]){if("none"==this.rowsAr[b].style.display){this.cells4(this._flow[b].ctrl).close();continue}if(this._flow[b].style.top=this.rowsAr[b].offsetTop+(this.rowsAr[b].oldHeight||20)+"px",a){var c=this._flow[b].ctrl.offsetLeft+this._flow[b].ctrl.offsetWidth;this._flow[b].style.left=c+"px",this._flow[b].style.width=this.rowsAr[b].offsetWidth-c-4+"px"}}else this._flow[b].ctrl=null,this.objBox.removeChild(this._flow[b]),delete this._flow[b]},dhtmlXGridObject.prototype._collapsMonolite=function(){for(var a in this._flow)this._flow[a]&&"DIV"==this._flow[a].tagName&&this.rowsAr[a]&&this.cells4(this._flow[a].ctrl).close()},dhtmlXGridObject.prototype._init_point_bcg=dhtmlXGridObject.prototype._init_point,dhtmlXGridObject.prototype._init_point=function(){window.dhx_globalImgPath||(window.dhx_globalImgPath=this.imgURL),this._col_combos=[];for(var a=0;a<this._cCount;a++)"combo"==this.cellType[a]&&(this._col_combos[a]=eXcell_combo.prototype.initCombo.call({grid:this}));this._loading_handler_set||(this._loading_handler_set=this.attachEvent("onXLE",function(a,b,c,d){eXcell_combo.prototype.fillColumnCombos(this,d),this.detachEvent(this._loading_handler_set)})),this._init_point=this._init_point_bcg,this._init_point&&this._init_point()},eXcell_combo.prototype=new eXcell,eXcell_combo.prototype.initCombo=function(){return container=document.createElement("DIV"),combo=new dhtmlXCombo(container,"combo",0),combo.DOMelem.className+=" fake_editable",grid=this.grid,combo.DOMelem.onselectstart=function(){return event.cancelBubble=!0,!0},combo.attachEvent("onKeyPressed",function(a){13==a&&(grid.editStop(),grid._fake&&grid._fake.editStop())}),combo.attachEvent("onBlur",function(){this.ncm||(grid.editStop(),grid._fake&&grid._fake.editStop())}),combo.DOMelem.style.border="0px",combo.DOMelem.style.height="18px",combo},eXcell_combo.prototype.fillColumnCombos=function(a,b){if(b){a.combo_columns=a.combo_columns||[],columns=a.xmlLoader.doXPath("//column",b);for(var c=0;c<columns.length;c++)"combo"==columns[c].getAttribute("type")&&(a.combo_columns[a.combo_columns.length]=c,this.setComboOptions(a._col_combos[c],columns[c],a,c))}},eXcell_combo.prototype.setComboOptions=function(a,b,c,d,e){if(convertStringToBoolean(b.getAttribute("xmlcontent"))&&!b.getAttribute("source")){options=b.childNodes;for(var f=0;f<options.length;f++)if("option"==options[f].tagName){var g=options[f].firstChild?options[f].firstChild.data:"";a.addOption(options[f].getAttribute("value"),g)}if(4==arguments.length)c.forEachRow(function(b){var e=c.cells(b,d);e.cell._brval||e.cell._cellType||e.setCValue(""==e.cell.combo_value?"&nbsp;":a.getOption(e.cell.combo_value)?a.getOption(e.cell.combo_value).text:e.cell.combo_value)});else{var h=this.cell?this:c.cells(e,d);h.setCValue(b.getAttribute("text")?""==b.getAttribute("text")._dhx_trim()?"&nbsp;":b.getAttribute("text"):h.cell.combo_value&&""!=h.cell.combo_value._dhx_trim()?a.getOption(h.cell.combo_value)?a.getOption(h.cell.combo_value).text:h.cell.combo_value:"&nbsp;")}}if(b.getAttribute("source"))if(b.getAttribute("auto")&&convertStringToBoolean(b.getAttribute("auto"))){if(b.getAttribute("xmlcontent")){var h=this.cell?this:c.cells(e,d);b.getAttribute("text")&&h.setCValue(b.getAttribute("text"))}else c.forEachRow(function(a){var b=c.cells(a,d);if(!b.cell._brval&&!b.cell._cellType){var e=b.cell.combo_value.toString();if(-1!=e.indexOf("^")){var f=e.split("^");b.cell.combo_value=f[0],b.setCValue(f[1])}}});a.enableFilteringMode(!0,b.getAttribute("source"),convertStringToBoolean(b.getAttribute("cache")||!0),convertStringToBoolean(b.getAttribute("sub")||!1))}else{var i=arguments.length;a.loadXML(b.getAttribute("source"),function(){if(4==i)c.forEachRow(function(b){var e=c.cells(b,d);e.cell._brval||e.cell._cellType||e.setCValue(a.getOption(e.cell.combo_value)?a.getOption(e.cell.combo_value).text:e.cell.combo_value)});else{var b=c.cells(e,d);b.setCValue(a.getOption(b.cell.combo_value)?a.getOption(b.cell.combo_value).text:b.cell.combo_value)}})}b.getAttribute("auto")&&convertStringToBoolean(b.getAttribute("auto"))||(b.getAttribute("editable")&&!convertStringToBoolean(b.getAttribute("editable"))&&a.readonly(!0),b.getAttribute("filter")&&convertStringToBoolean(b.getAttribute("filter"))&&a.enableFilteringMode(!0))},eXcell_combo.prototype.getCellCombo=function(){return this.cell._brval?this.cell._brval:(this.cell._brval=this.initCombo(),this.cell._brval)},dhtmlXGridObject.prototype.getColumnCombo=function(a){return this._col_combos&&this._col_combos[a]?this._col_combos[a]:(this._col_combos||(this._col_combos=[]),this._col_combos[a]=eXcell_combo.prototype.initCombo.call({grid:this}),this._col_combos[a])},eXcell_clist.prototype=new eXcell,eXcell_clist.prototype.setValue=function(a){if("object"==typeof a){var b=this.grid.xmlLoader.doXPath("./option",a);b.length&&(this.cell._combo=[]);for(var c=0;c<b.length;c++)this.cell._combo.push(b[c].firstChild?b[c].firstChild.data:"");a=a.firstChild.data}""===a||a===this.undefined?(this.setCTxtValue(" ",a),this.cell._clearCell=!0):(this.setCValue(a),this.cell._clearCell=!1)},dhtmlXGridObject.prototype.registerCList=function(a,b){this.clists||(this.clists=new Array),"object"!=typeof b&&(b=b.split(",")),this.clists[a]=b},dhtmlXGridObject.prototype.resetCounter=function(a){this._fake&&!this._realfake&&a<this._fake._cCount&&this._fake.resetCounter(a,this.currentPage);var b=arguments[0]||0;for(this.currentPage&&(b=(this.currentPage-1)*this.rowsBufferOutSize),b=0;b<this.rowsBuffer.length;b++)"TR"==this.rowsBuffer[b].tagName&&(this.rowsAr[this.rowsBuffer[b].idd].childNodes[a].innerHTML=b+1)},eXcell_cntr.prototype=new eXcell,eXcell_link.prototype=new eXcell,eXcell_link.prototype.getTitle=function(){var a=this.cell.firstChild;return a&&a.tagName?a.getAttribute("href"):""},eXcell_link.prototype.getContent=function(){var a=this.cell.firstChild;return a&&a.tagName?a.innerHTML:""},eXcell_stree.prototype=new eXcell,dhtmlXGridObject.prototype.setSubTree=function(a,b,c){this._sub_trees||(this._sub_trees=[]),this._sub_trees[b]=[a,c],a.parentObject.style.display="none";var d=this;a.parentObject.onclick=function(a){return(a||window.event).cancelBubble=!0,!1},a.ev_onDblClick=null,a.attachEvent("onDblClick",function(a){return d._sub_id=a,d.editStop(),!0}),a._chRRS=!0},xmlPointer.prototype={text:function(){if(!_isFF)return this.d.xml;var a=new XMLSerializer;return a.serializeToString(this.d)},get:function(a){return this.d.getAttribute(a)},exists:function(){return!!this.d},content:function(){return this.d.firstChild?this.d.firstChild.data:""},each:function(a,b,c,d){var e=this.d.childNodes,f=new xmlPointer;if(e.length)for(d=d||0;d<e.length;d++)if(e[d].tagName==a&&(f.d=e[d],-1==b.apply(c,[f,d])))return},get_all:function(){for(var a={},b=this.d.attributes,c=0;c<b.length;c++)a[b[c].name]=b[c].value;return a},sub:function(a){var b=this.d.childNodes,c=new xmlPointer;if(b.length)for(var d=0;d<b.length;d++)if(b[d].tagName==a)return c.d=b[d],c},up:function(){return new xmlPointer(this.d.parentNode)},set:function(a,b){this.d.setAttribute(a,b)},clone:function(){return new xmlPointer(this.d)},sub_exists:function(a){var b=this.d.childNodes;if(b.length)for(var c=0;c<b.length;c++)if(b[c].tagName==a)return!0;return!1},through:function(a,b,c,d,e){var f=this.d.childNodes;if(f.length)for(var g=0;g<f.length;g++){if(f[g].tagName==a&&null!=f[g].getAttribute(b)&&""!=f[g].getAttribute(b)&&(!c||f[g].getAttribute(b)==c)){var h=new xmlPointer(f[g]);d.apply(e,[h,g])}var i=this.d;this.d=f[g],this.through(a,b,c,d,e),this.d=i}}},dhtmlXTreeObject.prototype.setDataMode=function(a){this._datamode=a},dhtmlXTreeObject.prototype._doContClick=function(a){if(2!=a.button)return this._acMenu&&(this._acMenu.hideContextMenu?this._acMenu.hideContextMenu():this.cMenu._contextEnd()),!0;for(var b=_isIE?a.srcElement:a.target;b&&"BODY"!=b.tagName&&!b.parentObject;)b=b.parentNode;if(!b||!b.parentObject)return!0;var c=b.parentObject;if(this.callEvent("onRightClick",[c.id,a]),this._acMenu=c.cMenu||this.cMenu,this._acMenu){if(!this.callEvent("onBeforeContextMenu",[c.id]))return!0;if(_isIE&&(a.srcElement.oncontextmenu=function(){return event.cancelBubble=!0,!1}),_isFF&&(a.target.oncontextmenu=function(a){return a.cancelBubble=!0,!1}),this._acMenu.showContextMenu){var d=window.document.documentElement,e=window.document.body,f=new Array(d.scrollLeft||e.scrollLeft,d.scrollTop||e.scrollTop);if(_isIE)var g=a.clientX+f[0],h=a.clientY+f[1];else var g=a.pageX,h=a.pageY;this._acMenu.showContextMenu(g-1,h-1),this.contextID=this._acMenu.contextMenuZoneId=c.id,a.cancelBubble=!0,this._acMenu._skip_hide=!0}else b.contextMenuId=c.id,b.contextMenu=this._acMenu,b.a=this._acMenu._contextStart,b.a(b,a),b.a=null;return!1}return!0},dhtmlXTreeObject.prototype.enableIEImageFix=function(a){a?(this._getImg=function(){var a=document.createElement("DIV");return a.innerHTML="&nbsp;",a.className="dhx_bg_img_fix",a},this._setSrc=function(a,b){a.style.backgroundImage="url("+b+")"},this._getSrc=function(a){var b=a.style.backgroundImage;return b.substr(4,b.length-5)}):(this._getImg=function(a){return document.createElement(a==this.rootId?"div":"img")},this._setSrc=function(a,b){a.src=b},this._getSrc=function(a){return a.src})},dhtmlXTreeObject.prototype.destructor=function(){for(var a in this._idpull){var b=this._idpull[a];b&&(b.parentObject=null,b.treeNod=null,b.childNodes=null,b.span=null,b.tr.nodem=null,b.tr=null,b.htmlNode.objBelong=null,b.htmlNode=null,this._idpull[a]=null)
}this.parentObject.innerHTML="",this.XMLLoader&&this.XMLLoader.destructor(),this.allTree.onselectstart=null,this.allTree.oncontextmenu=null,this.allTree.onmousedown=null;for(var a in this)this[a]=null},cObject.prototype=new Object,cObject.prototype.clone=function(){function a(){}return a.prototype=this,new a},dhtmlXTreeObject.prototype._globalIdStorageAdd=function(a,b){return this._globalIdStorageFind(a,1,1)?(a=a+"_"+(new Date).valueOf(),this._globalIdStorageAdd(a,b)):(this._idpull[a]=b,this._pullSize++,a)},dhtmlXTreeObject.prototype._globalIdStorageSub=function(a){this._idpull[a]&&(this._unselectItem(this._idpull[a]),this._idpull[a]=null,this._pullSize--),this._locker&&this._locker[a]&&(this._locker[a]=!1)},dhtmlXTreeObject.prototype._globalIdStorageFind=function(a,b,c,d){var e=this._idpull[a];if(e){if(e.unParsed&&!c&&this.reParse(e,0),this._srnd&&!e.htmlNode&&this._buildSRND(e,c),d&&this._edsbpsA)for(var f=0;f<this._edsbpsA.length;f++)if(this._edsbpsA[f][2]==a)return dhtmlxError.throwError("getItem","Requested item still in parsing process.",a),null;return e}return this.slowParse&&0!=a&&!b?this.preParse(a):null},dhtmlXTreeObject.prototype._getSubItemsXML=function(a){var b=[];return a.each("item",function(a){b.push(a.get("id"))},this),b.join(",")},dhtmlXTreeObject.prototype.enableSmartXMLParsing=function(a){this.slowParse=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.findXML=function(){},dhtmlXTreeObject.prototype._getAllCheckedXML=function(a,b,c){var d=[];return 2==c&&a.through("item","checked",c,function(a){d.push(a.get("id"))},this),1==c&&a.through("item","id",null,function(a){a.get("checked")&&-1!=a.get("checked")&&d.push(a.get("id"))},this),0==c&&a.through("item","id",null,function(a){a.get("checked")&&0!=a.get("checked")||d.push(a.get("id"))},this),b+(b?",":"")+d.join(",")},dhtmlXTreeObject.prototype._setSubCheckedXML=function(a,b){var c=a?"1":"";b.through("item","id",null,function(a){a.set("checked",c)},this)},dhtmlXTreeObject.prototype._getAllScraggyItemsXML=function(a){var b=[],c=function(a){a.sub_exists("item")?a.each("item",c,this):b.push(a.get("id"))};return c(a),b.join(",")},dhtmlXTreeObject.prototype._getAllFatItemsXML=function(a){var b=[],c=function(a){a.sub_exists("item")&&(b.push(a.get("id")),a.each("item",c,this))};return c(a),b.join(",")},dhtmlXTreeObject.prototype._getAllSubItemsXML=function(a,b,c){var b=[];return c.through("item","id",null,function(a){b.push(a.get("id"))},this),b.join(",")},dhtmlXTreeObject.prototype.reParse=function(a){var b=this;this.parsCount||b.callEvent("onXLS",[b,a.id]),this.xmlstate=1;var c=a.unParsed;a.unParsed=0,this.XMLloadingWarning=1;var d=this.parsingOn,e=this.waitUpdateXML,f=this.parsedArray;this.parsedArray=new Array,this.waitUpdateXML=!1,this.parsingOn=a.id,this.parsedArray=new Array,this.setCheckList="",this._parse(c,a.id,2);for(var g=this.setCheckList.split(this.dlmtr),h=0;h<this.parsedArray.length;h++)a.htmlNode.childNodes[0].appendChild(this.parsedArray[h]);c.get("order")&&"none"!=c.get("order")&&this._reorderBranch(a,c.get("order"),!0),this.oldsmcheck=this.smcheck,this.smcheck=!1;for(var i=0;i<g.length;i++)g[i]&&this.setCheck(g[i],1);return this.smcheck=this.oldsmcheck,this.parsingOn=d,this.waitUpdateXML=e,this.parsedArray=f,this.XMLloadingWarning=0,this._redrawFrom(this,a),this._srnd&&!a._sready&&this.prepareSR(a.id),!0},dhtmlXTreeObject.prototype.preParse=function(a){if(!a||!this._p)return null;var b=!1;if(this._p.clone().through("item","id",a,function(a){return this._globalIdStorageFind(a.up().get("id")),b=!0},this),b){var c=this._globalIdStorageFind(a,!0,!1);c||dhtmlxError.throwError("getItem","The item "+a+" not operable. Seems you have non-unique|incorrect IDs in tree's XML.",a)}return c},dhtmlXTreeObject.prototype._escape=function(a){switch(this.utfesc){case"none":return a;case"utf8":return encodeURIComponent(a);default:return escape(a)}},dhtmlXTreeObject.prototype._drawNewTr=function(a){var b=document.createElement("tr"),c=document.createElement("td"),d=document.createElement("td");return c.appendChild(document.createTextNode(" ")),d.colSpan=3,d.appendChild(a),b.appendChild(c),b.appendChild(d),b},dhtmlXTreeObject.prototype.loadXMLString=function(a,b){var c=this;this.parsCount||this.callEvent("onXLS",[c,null]),this.xmlstate=1,b&&(this.XMLLoader.waitCall=b),this.XMLLoader.loadXMLString(a)},dhtmlXTreeObject.prototype.loadXML=function(a,b){if(this._datamode&&"xml"!=this._datamode)return this["load"+this._datamode.toUpperCase()](a,b);var c=this;this.parsCount||this.callEvent("onXLS",[c,this._ld_id]),this._ld_id=null,this.xmlstate=1,this.XMLLoader=new dtmlXMLLoaderObject(this._parseXMLTree,this,!0,this.no_cashe),b&&(this.XMLLoader.waitCall=b),this.XMLLoader.loadXML(a)},dhtmlXTreeObject.prototype._attachChildNode=function(a,b,c,d,e,f,g,h,i,j,k){j&&j.parentObject&&(a=j.parentObject),0==a.XMLload&&this.XMLsource&&!this.XMLloadingWarning&&(a.XMLload=1,this._loadDynXML(a.id));var l=a.childsCount,m=a.childNodes;if(k&&(k.tr.previousSibling.previousSibling?j=k.tr.previousSibling.nodem:h=h.replace("TOP","")+",TOP"),j){var n,o;for(n=0;l>n;n++)if(m[n]==j){for(o=l;o!=n;o--)m[1+o]=m[o];break}n++,l=n}if(h)for(var p=h.split(","),q=0;q<p.length;q++)switch(p[q]){case"TOP":for(a.childsCount>0&&(j=new Object,j.tr=a.childNodes[0].tr.previousSibling),a._has_top=!0,n=l;n>0;n--)m[n]=m[n-1];l=0}var r;(r=this._idpull[b])&&-1==r.span||(r=m[l]=new dhtmlXTreeItemObject(b,c,a,this,d,1),b=m[l].id,a.childsCount++),r.htmlNode||(r.label=c,r.htmlNode=this._createItem(this.checkBoxOff?1:0,r),r.htmlNode.objBelong=r),e&&(r.images[0]=e),f&&(r.images[1]=f),g&&(r.images[2]=g);var s=this._drawNewTr(r.htmlNode);if((this.XMLloadingWarning||this._hAdI)&&(r.htmlNode.parentNode.parentNode.style.display="none"),j&&j.tr.nextSibling?a.htmlNode.childNodes[0].insertBefore(s,j.tr.nextSibling):this.parsingOn==a.id?this.parsedArray[this.parsedArray.length]=s:a.htmlNode.childNodes[0].appendChild(s),j&&!j.span&&(j=null),this.XMLsource&&(r.XMLload=i&&0!=i?0:1),r.tr=s,s.nodem=r,0==a.itemId&&(s.childNodes[0].className="hiddenRow"),(a._r_logic||this._frbtr)&&this._setSrc(r.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.imPath+this.radioArray[0]),h)for(var p=h.split(","),q=0;q<p.length;q++)switch(p[q]){case"SELECT":this.selectItem(b,!1);break;case"CALL":this.selectItem(b,!0);break;case"CHILD":r.XMLload=0;break;case"CHECKED":this.XMLloadingWarning?this.setCheckList+=this.dlmtr+b:this.setCheck(b,1);break;case"HCHECKED":this._setCheck(r,"unsure");break;case"OPEN":r.openMe=1}if(!this.XMLloadingWarning&&(this._getOpenState(a)<0&&!this._hAdI&&this.openItem(a.id),j&&(this._correctPlus(j),this._correctLine(j)),this._correctPlus(a),this._correctLine(a),this._correctPlus(r),a.childsCount>=2&&(this._correctPlus(m[a.childsCount-2]),this._correctLine(m[a.childsCount-2])),2!=a.childsCount&&this._correctPlus(m[0]),this.tscheck&&this._correctCheckStates(a),this._onradh))if(1==this.xmlstate){var t=this.onXLE;this.onXLE=function(a){this._onradh(b),t&&t(a)}}else this._onradh(b);return r},dhtmlXTreeObject.prototype.enableContextMenu=function(a){a&&(this.cMenu=a)},dhtmlXTreeObject.prototype.setItemContextMenu=function(a,b){for(var c=a.toString().split(this.dlmtr),d=0;d<c.length;d++){var e=this._globalIdStorageFind(c[d]);e&&(e.cMenu=b)}},dhtmlXTreeObject.prototype.insertNewItem=function(a,b,c,d,e,f,g,h,i){var j=this._globalIdStorageFind(a);if(!j)return-1;var k=this._attachChildNode(j,b,c,d,e,f,g,h,i);return!this.XMLloadingWarning&&this.childCalc&&this._fixChildCountLabel(j),k},dhtmlXTreeObject.prototype.insertNewChild=function(a,b,c,d,e,f,g,h,i){return this.insertNewItem(a,b,c,d,e,f,g,h,i)},dhtmlXTreeObject.prototype._parseXMLTree=function(a,b,c,d,e){var f=new xmlPointer(e.getXMLTopNode("tree"));a._parse(f),a._p=f},dhtmlXTreeObject.prototype._parseItem=function(a,b,c,d){var e;if(this._srnd&&(!this._idpull[e=a.get("id")]||!this._idpull[e].span))return void this._addItemSRND(b.id,e,a);var f=a.get_all();if("object"==typeof this.waitUpdateXML&&!this.waitUpdateXML[f.id])return void this._parse(a,f.id,1);(null===f.text||"undefined"==typeof f.text)&&(f.text=a.sub("itemtext"),f.text&&(f.text=f.text.content()));var g=[];if(f.select&&g.push("SELECT"),f.top&&g.push("TOP"),f.call&&(this.nodeAskingCall=f.id),-1==f.checked?g.push("HCHECKED"):f.checked&&g.push("CHECKED"),f.open&&g.push("OPEN"),this.waitUpdateXML)if(this._globalIdStorageFind(f.id))var h=this.updateItem(f.id,f.text,f.im0,f.im1,f.im2,f.checked);else{0==this.npl?g.push("TOP"):c=b.childNodes[this.npl];var h=this._attachChildNode(b,f.id,f.text,0,f.im0,f.im1,f.im2,g.join(","),f.child,0,c);c=null}else var h=this._attachChildNode(b,f.id,f.text,0,f.im0,f.im1,f.im2,g.join(","),f.child,d||0,c);if(f.tooltip&&(h.span.parentNode.parentNode.title=f.tooltip),f.style&&(h.span.style.cssText?h.span.style.cssText+=";"+f.style:h.span.setAttribute("style",h.span.getAttribute("style")+";"+f.style)),f.radio&&(h._r_logic=!0),f.nocheckbox){var i=h.span.parentNode.previousSibling.previousSibling;i.childNodes[0].style.display="none",window._KHTMLrv&&(i.style.display="none"),h.nocheckbox=!0}f.disabled&&(null!=f.checked&&this._setCheck(h,f.checked),this.disableCheckbox(h,1)),h._acc=f.child||0,this.parserExtension&&this.parserExtension._parseExtension.call(this,a,f,b?b.id:0),this.setItemColor(h,f.aCol,f.sCol),"1"==f.locked&&this.lockItem(h.id,!0,!0),(f.imwidth||f.imheight)&&this.setIconSize(f.imwidth,f.imheight,h),("0"==f.closeable||"1"==f.closeable)&&this.setItemCloseable(h,f.closeable);var j="";f.topoffset&&this.setItemTopOffset(h,f.topoffset),this.slowParse&&"object"!=typeof this.waitUpdateXML?(!h.childsCount&&a.sub_exists("item")&&(h.unParsed=a.clone()),a.each("userdata",function(a){this.setUserData(f.id,a.get("name"),a.content())},this)):a.sub_exists("item")&&(j=this._parse(a,f.id,1)),""!=j&&(this.nodeAskingCall=j),a.each("userdata",function(b){this.setUserData(a.get("id"),b.get("name"),b.content())},this)},dhtmlXTreeObject.prototype._parse=function(a,b,c,d){if(this._srnd&&!this.parentObject.offsetHeight){var e=this;return window.setTimeout(function(){e._parse(a,b,c,d)},100)}if(a.exists()){this.skipLock=!0,b||(b=a.get("id"),a.get("radio")&&(this.htmlNode._r_logic=!0),this.parsingOn=b,this.parsedArray=new Array,this.setCheckList="",this.nodeAskingCall="");var f=this._globalIdStorageFind(b);if(!f)return dhtmlxError.throwError("DataStructure","XML refers to not existing parent");if(this.parsCount=this.parsCount?this.parsCount+1:1,this.XMLloadingWarning=1,!f.childsCount||d||this._edsbps||f._has_top)var g=0;else var g=f.childNodes[f.childsCount-1];if(this.npl=0,a.each("item",function(e,h){return f.XMLload=1,this._epgps&&this._epgpsC==this.npl?(this._setNextPageSign(f,this.npl+1*(d||0),c,node),-1):(this._parseItem(e,f,g),this._edsbps&&this.npl==this._edsbpsC?(this._distributedStart(a,h+1,b,c,f.childsCount),-1):void this.npl++)},this,d),!c){if(a.each("userdata",function(b){this.setUserData(a.get("id"),b.get("name"),b.content())},this),f.XMLload=1,this.waitUpdateXML){this.waitUpdateXML=!1;for(var h=f.childsCount-1;h>=0;h--)f.childNodes[h]._dmark&&this.deleteItem(f.childNodes[h].id)}for(var h=(this._globalIdStorageFind(this.parsingOn),0);h<this.parsedArray.length;h++)f.htmlNode.childNodes[0].appendChild(this.parsedArray[h]);this.lastLoadedXMLId=b,this.XMLloadingWarning=0;for(var i=this.setCheckList.split(this.dlmtr),j=0;j<i.length;j++)i[j]&&this.setCheck(i[j],1);this.XMLsource&&this.tscheck&&this.smcheck&&f.id!=this.rootId&&(0===f.checkstate?this._setSubChecked(0,f):1===f.checkstate&&this._setSubChecked(1,f)),this._redrawFrom(this,null,d),a.get("order")&&"none"!=a.get("order")&&this._reorderBranch(f,a.get("order"),!0),""!=this.nodeAskingCall&&this.callEvent("onClick",[this.nodeAskingCall,this.getSelectedItemId()]),this._branchUpdate&&this._branchUpdateNext(a)}if(1==this.parsCount){if(this.parsingOn=null,this._srnd&&f.id!=this.rootId&&(this.prepareSR(f.id),this.XMLsource&&this.openItem(f.id)),a.through("item","open",null,function(a){this.openItem(a.get("id"))},this),!this._edsbps||!this._edsbpsA.length){var k=this;window.setTimeout(function(){k.callEvent("onXLE",[k,b])},1),this.xmlstate=0}this.skipLock=!1}this.parsCount--;var k=this;return this._edsbps&&window.setTimeout(function(){k._distributedStep(b)},this._edsbpsD),this._epgps&&d&&this._setPrevPageSign(f,d||0,c,node),!c&&this.onXLE&&this.onXLE(this,b),this.nodeAskingCall}},dhtmlXTreeObject.prototype._branchUpdateNext=function(a){a.each("item",function(a){var b=a.get("id");(!this._idpull[b]||this._idpull[b].XMLload)&&(this._branchUpdate++,this.smartRefreshItem(a.get("id"),a))},this),this._branchUpdate--},dhtmlXTreeObject.prototype.checkUserData=function(a,b){if(1==a.nodeType&&"userdata"==a.tagName){var c=a.getAttribute("name");c&&a.childNodes[0]&&this.setUserData(b,c,a.childNodes[0].data)}},dhtmlXTreeObject.prototype._redrawFrom=function(a,b,c,d){if(b)e=b;else{var e=a._globalIdStorageFind(a.lastLoadedXMLId);if(a.lastLoadedXMLId=-1,!e)return 0}for(var f=0,g=c?c-1:0;g<e.childsCount;g++)if(this._branchUpdate&&1!=this._getOpenState(e)||b&&1!=d||(e.childNodes[g].htmlNode.parentNode.parentNode.style.display=""),1==e.childNodes[g].openMe&&(this._openItem(e.childNodes[g]),e.childNodes[g].openMe=0),a._redrawFrom(a,e.childNodes[g]),null!=this.childCalc){if((e.childNodes[g].unParsed||!e.childNodes[g].XMLload&&this.XMLsource)&&(e.childNodes[g].span.innerHTML=e.childNodes[g]._acc?e.childNodes[g].label+this.htmlcA+e.childNodes[g]._acc+this.htmlcB:e.childNodes[g].label),e.childNodes[g].childNodes.length&&this.childCalc){if(1==this.childCalc&&(e.childNodes[g].span.innerHTML=e.childNodes[g].label+this.htmlcA+e.childNodes[g].childsCount+this.htmlcB),2==this.childCalc){var h=e.childNodes[g].childsCount-(e.childNodes[g].pureChilds||0);h&&(e.childNodes[g].span.innerHTML=e.childNodes[g].label+this.htmlcA+h+this.htmlcB),e.pureChilds?e.pureChilds++:e.pureChilds=1}if(3==this.childCalc&&(e.childNodes[g].span.innerHTML=e.childNodes[g].label+this.htmlcA+e.childNodes[g]._acc+this.htmlcB),4==this.childCalc){var h=e.childNodes[g]._acc;h&&(e.childNodes[g].span.innerHTML=e.childNodes[g].label+this.htmlcA+h+this.htmlcB)}}else 4==this.childCalc&&f++;f+=e.childNodes[g]._acc,3==this.childCalc&&f++}e.unParsed||!e.XMLload&&this.XMLsource||(e._acc=f),a._correctLine(e),a._correctPlus(e),this.childCalc&&!b&&a._fixChildCountLabel(e)},dhtmlXTreeObject.prototype._createSelf=function(){var a=document.createElement("div");return a.className="containerTableStyle",a.style.width=this.width,a.style.height=this.height,this.parentObject.appendChild(a),a},dhtmlXTreeObject.prototype._xcloseAll=function(a){if(!a.unParsed){if(this.rootId!=a.id){for(var b=a.htmlNode.childNodes[0].childNodes,c=b.length,d=1;c>d;d++)b[d].style.display="none";this._correctPlus(a)}for(var d=0;d<a.childsCount;d++)a.childNodes[d].childsCount&&this._xcloseAll(a.childNodes[d])}},dhtmlXTreeObject.prototype._xopenAll=function(a){this._HideShow(a,2);for(var b=0;b<a.childsCount;b++)this._xopenAll(a.childNodes[b])},dhtmlXTreeObject.prototype._correctPlus=function(a){if(a.htmlNode){var b=a.htmlNode.childNodes[0].childNodes[0].childNodes[0].lastChild,c=a.htmlNode.childNodes[0].childNodes[0].childNodes[2].childNodes[0],d=this.lineArray;if(this.XMLsource&&!a.XMLload){var d=this.plusArray;if(this._setSrc(c,this.iconURL+a.images[2]),this._txtimg)return b.innerHTML="[+]"}else if(a.childsCount||a.unParsed)if(a.htmlNode.childNodes[0].childNodes[1]&&"none"!=a.htmlNode.childNodes[0].childNodes[1].style.display){if(!a.wsign)var d=this.minusArray;if(this._setSrc(c,this.iconURL+a.images[1]),this._txtimg)return b.innerHTML="[-]"}else{if(!a.wsign)var d=this.plusArray;if(this._setSrc(c,this.iconURL+a.images[2]),this._txtimg)return b.innerHTML="[+]"}else this._setSrc(c,this.iconURL+a.images[0]);var e=2;a.treeNod.treeLinesOn?(a.parentObject&&(e=this._getCountStatus(a.id,a.parentObject)),this._setSrc(b,this.imPath+d[e])):this._setSrc(b,this.imPath+d[3])}},dhtmlXTreeObject.prototype._correctLine=function(a){if(a.htmlNode){var b=a.parentObject;if(b)if(0!=this._getLineStatus(a.id,b)&&this.treeLinesOn)for(var c=1;c<=a.childsCount&&a.htmlNode.childNodes[0].childNodes[c];c++)a.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")",a.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundRepeat="repeat-y";else for(var c=1;c<=a.childsCount&&a.htmlNode.childNodes[0].childNodes[c];c++)a.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundImage="none",a.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundRepeat=""}},dhtmlXTreeObject.prototype._getCountStatus=function(a,b){return b.childsCount<=1?b.id==this.rootId?4:0:b.childNodes[0].id==a?b.id==this.rootId?2:1:b.childNodes[b.childsCount-1].id==a?0:1},dhtmlXTreeObject.prototype._getLineStatus=function(a,b){return b.childNodes[b.childsCount-1].id==a?0:1},dhtmlXTreeObject.prototype._HideShow=function(a,b){if(this.XMLsource&&!a.XMLload){if(1==b)return;return a.XMLload=1,void this._loadDynXML(a.id)}a.unParsed&&this.reParse(a);var c=a.htmlNode.childNodes[0].childNodes,d=c.length;if(d>1){"none"==c[1].style.display&&1!=b||2==b?nodestyle="":(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0",nodestyle="none");for(var e=1;d>e;e++)c[e].style.display=nodestyle}this._correctPlus(a)},dhtmlXTreeObject.prototype._getOpenState=function(a){var b=a.htmlNode.childNodes[0].childNodes;return b.length<=1?0:"none"!=b[1].style.display?1:-1},dhtmlXTreeObject.prototype.onRowClick2=function(){var a=this.parentObject.treeNod;return a.callEvent("onDblClick",[this.parentObject.id,a])?(this.parentObject.closeble&&"0"!=this.parentObject.closeble?a._HideShow(this.parentObject):a._HideShow(this.parentObject,2),void(a.checkEvent("onOpenEnd")&&(a.xmlstate?(a._oie_onXLE.push(a.onXLE),a.onXLE=a._epnFHe):a.callEvent("onOpenEnd",[this.parentObject.id,a._getOpenState(this.parentObject)])))):0},dhtmlXTreeObject.prototype.onRowClick=function(){var a=this.parentObject.treeNod;return a.callEvent("onOpenStart",[this.parentObject.id,a._getOpenState(this.parentObject)])?(this.parentObject.closeble&&"0"!=this.parentObject.closeble?a._HideShow(this.parentObject):a._HideShow(this.parentObject,2),void(a.checkEvent("onOpenEnd")&&(a.xmlstate?(a._oie_onXLE.push(a.onXLE),a.onXLE=a._epnFHe):a.callEvent("onOpenEnd",[this.parentObject.id,a._getOpenState(this.parentObject)])))):0},dhtmlXTreeObject.prototype._epnFHe=function(a,b,c){b!=this.rootId&&this.callEvent("onOpenEnd",[b,a.getOpenState(b)]),a.onXLE=a._oie_onXLE.pop(),c||a._oie_onXLE.length||a.onXLE&&a.onXLE(a,b)},dhtmlXTreeObject.prototype.onRowClickDown=function(a){a=a||window.event;var b=this.parentObject.treeNod;b._selectItem(this.parentObject,a)},dhtmlXTreeObject.prototype.getSelectedItemId=function(){for(var a=new Array,b=0;b<this._selected.length;b++)a[b]=this._selected[b].id;return a.join(this.dlmtr)},dhtmlXTreeObject.prototype._selectItem=function(a,b){if(this.checkEvent("onSelect")&&(this._onSSCFold=this.getSelectedItemId()),this._amsel&&b&&(b.ctrlKey||b.metaKey||b.shiftKey)||this._unselectItems(),a.i_sel&&this._amsel&&b&&(b.ctrlKey||b.metaKey))this._unselectItem(a);else if(!(a.i_sel||this._amselS&&0!=this._selected.length&&this._selected[0].parentObject!=a.parentObject))if(this._amsel&&b&&b.shiftKey&&0!=this._selected.length&&this._selected[this._selected.length-1].parentObject==a.parentObject){var c=this._getIndex(this._selected[this._selected.length-1]),d=this._getIndex(a);if(c>d){var e=c;c=d,d=e}for(var f=c;d>=f;f++)a.parentObject.childNodes[f].i_sel||this._markItem(a.parentObject.childNodes[f])}else this._markItem(a);if(this.checkEvent("onSelect")){var g=this.getSelectedItemId();g!=this._onSSCFold&&this.callEvent("onSelect",[g])}},dhtmlXTreeObject.prototype._markItem=function(a){a.scolor&&(a.span.style.color=a.scolor),a.span.className="selectedTreeRow",a.i_sel=!0,this._selected[this._selected.length]=a},dhtmlXTreeObject.prototype.getIndexById=function(a){var b=this._globalIdStorageFind(a);return b?this._getIndex(b):null},dhtmlXTreeObject.prototype._getIndex=function(a){for(var b=a.parentObject,c=0;c<b.childsCount;c++)if(b.childNodes[c]==a)return c},dhtmlXTreeObject.prototype._unselectItem=function(a){if(a&&a.i_sel){a.span.className="standartTreeRow",a.acolor&&(a.span.style.color=a.acolor),a.i_sel=!1;for(var b=0;b<this._selected.length;b++)if(!this._selected[b].i_sel){this._selected.splice(b,1);break}}},dhtmlXTreeObject.prototype._unselectItems=function(){for(var a=0;a<this._selected.length;a++){var b=this._selected[a];b.span.className="standartTreeRow",b.acolor&&(b.span.style.color=b.acolor),b.i_sel=!1}this._selected=new Array},dhtmlXTreeObject.prototype.onRowSelect=function(a,b,c){a=a||window.event;var d=this.parentObject;b&&(d=b.parentObject);var e=d.treeNod,f=e.getSelectedItemId();a&&a.skipUnSel||e._selectItem(d,a),c||(d.actionHandler?d.actionHandler(d.id,f):e.callEvent("onClick",[d.id,f]))},dhtmlXTreeObject.prototype._correctCheckStates=function(a){if(this.tscheck&&a&&a.id!=this.rootId){var b=a.childNodes,c=0,d=0;if(0!=a.childsCount){for(var e=0;e<a.childsCount;e++)if(!b[e].dscheck)if(0==b[e].checkstate)c=1;else{if(1!=b[e].checkstate){c=1,d=1;break}d=1}c&&d?this._setCheck(a,"unsure"):c?this._setCheck(a,!1):this._setCheck(a,!0),this._correctCheckStates(a.parentObject)}}},dhtmlXTreeObject.prototype.onCheckBoxClick=function(){return this.treeNod.callEvent("onBeforeCheck",[this.parentObject.id,this.parentObject.checkstate])?this.parentObject.dscheck?!0:(this.treeNod.tscheck?1==this.parentObject.checkstate?this.treeNod._setSubChecked(!1,this.parentObject):this.treeNod._setSubChecked(!0,this.parentObject):1==this.parentObject.checkstate?this.treeNod._setCheck(this.parentObject,!1):this.treeNod._setCheck(this.parentObject,!0),this.treeNod._correctCheckStates(this.parentObject.parentObject),this.treeNod.callEvent("onCheck",[this.parentObject.id,this.parentObject.checkstate])):void 0},dhtmlXTreeObject.prototype._createItem=function(a,b,c){var d=document.createElement("table");d.cellSpacing=0,d.cellPadding=0,d.border=0,this.hfMode&&(d.style.tableLayout="fixed"),d.style.margin=0,d.style.padding=0;var e=document.createElement("tbody"),f=document.createElement("tr"),g=document.createElement("td");if(g.className="standartTreeImage",this._txtimg){var h=document.createElement("div");g.appendChild(h),h.className="dhx_tree_textSign"}else{var h=this._getImg(b.id);h.border="0","IMG"==h.tagName&&(h.align="absmiddle"),g.appendChild(h),h.style.padding=0,h.style.margin=0,h.style.width=this.def_line_img_x,h.style.height=this.def_line_img_y}var i=document.createElement("td"),j=this._getImg(this.cBROf?this.rootId:b.id);j.checked=0,this._setSrc(j,this.imPath+this.checkArray[0]),j.style.width="16px",j.style.height="16px",a||((_isIE?j:i).style.display="none"),i.appendChild(j),this.cBROf||"IMG"!=j.tagName||(j.align="absmiddle"),j.onclick=this.onCheckBoxClick,j.treeNod=this,j.parentObject=b,i.width=window._KHTMLrv?"16px":"20px";var k=document.createElement("td");k.className="standartTreeImage";var l=this._getImg(this.timgen?b.id:this.rootId);l.onmousedown=this._preventNsDrag,l.ondragstart=this._preventNsDrag,l.border="0",this._aimgs&&(l.parentObject=b,"IMG"==l.tagName&&(l.align="absmiddle"),l.onclick=this.onRowSelect),c||this._setSrc(l,this.iconURL+this.imageArray[0]),k.appendChild(l),l.style.padding=0,l.style.margin=0,this.timgen?(k.style.width=l.style.width=this.def_img_x,l.style.height=this.def_img_y):(l.style.width="0px",l.style.height="0px",_isOpera&&(k.style.display="none"));var m=document.createElement("td");return m.className="standartTreeRow",b.span=document.createElement("span"),b.span.className="standartTreeRow",this.mlitems?(b.span.style.width=this.mlitems,b.span.style.display="block"):m.noWrap=!0,_isIE&&_isIE>7?m.style.width="999999px":window._KHTMLrv||(m.style.width="100%"),b.span.innerHTML=b.label,m.appendChild(b.span),m.parentObject=b,g.parentObject=b,m.onclick=this.onRowSelect,g.onclick=this.onRowClick,m.ondblclick=this.onRowClick2,this.ettip&&(f.title=b.label),this.dragAndDropOff&&(this._aimgs&&(this.dragger.addDraggableItem(k,this),k.parentObject=b),this.dragger.addDraggableItem(m,this)),b.span.style.paddingLeft="5px",b.span.style.paddingRight="5px",m.style.verticalAlign="",m.style.fontSize="10pt",m.style.cursor=this.style_pointer,f.appendChild(g),f.appendChild(i),f.appendChild(k),f.appendChild(m),e.appendChild(f),d.appendChild(e),(this.ehlt||this.checkEvent("onMouseIn")||this.checkEvent("onMouseOut"))&&(f.onmousemove=this._itemMouseIn,f[_isIE?"onmouseleave":"onmouseout"]=this._itemMouseOut),d},dhtmlXTreeObject.prototype.setImagePath=function(a){this.imPath=a,this.iconURL||(this.iconURL=a)},dhtmlXTreeObject.prototype.setIconPath=function(a){this.iconURL=a},dhtmlXTreeObject.prototype._getLeafCount=function(a){for(var b=0,c=0;c<a.childsCount;c++)0==a.childNodes[c].childsCount&&b++;return b},dhtmlXTreeObject.prototype._getChildCounterValue=function(a){var b=this._globalIdStorageFind(a);if(!b)return 0;if(b.unParsed||!b.XMLload&&this.XMLsource)return b._acc;switch(this.childCalc){case 1:return b.childsCount;case 2:return this._getLeafCount(b);case 3:return b._acc;case 4:return b._acc}},dhtmlXTreeObject.prototype._fixChildCountLabel=function(a){if(null!=this.childCalc){if(a.unParsed||!a.XMLload&&this.XMLsource)return void(a.span.innerHTML=a._acc?a.label+this.htmlcA+a._acc+this.htmlcB:a.label);switch(this.childCalc){case 1:a.span.innerHTML=0!=a.childsCount?a.label+this.htmlcA+a.childsCount+this.htmlcB:a.label;break;case 2:var b=this._getLeafCount(a);a.span.innerHTML=0!=b?a.label+this.htmlcA+b+this.htmlcB:a.label;break;case 3:if(0!=a.childsCount){for(var c=0,d=0;d<a.childsCount;d++)a.childNodes[d]._acc||(a.childNodes[d]._acc=0),c+=1*a.childNodes[d]._acc;c+=1*a.childsCount,a.span.innerHTML=a.label+this.htmlcA+c+this.htmlcB,a._acc=c}else a.span.innerHTML=a.label,a._acc=0;a.parentObject&&a.parentObject!=this.htmlNode&&this._fixChildCountLabel(a.parentObject);break;case 4:if(0!=a.childsCount){for(var c=0,d=0;d<a.childsCount;d++)a.childNodes[d]._acc||(a.childNodes[d]._acc=1),c+=1*a.childNodes[d]._acc;a.span.innerHTML=a.label+this.htmlcA+c+this.htmlcB,a._acc=c}else a.span.innerHTML=a.label,a._acc=1;a.parentObject&&a.parentObject!=this.htmlNode&&this._fixChildCountLabel(a.parentObject)}}},dhtmlXTreeObject.prototype.setChildCalcMode=function(a){switch(a){case"child":this.childCalc=1;break;case"leafs":this.childCalc=2;break;case"childrec":this.childCalc=3;break;case"leafsrec":this.childCalc=4;break;case"disabled":this.childCalc=null;break;default:this.childCalc=4}},dhtmlXTreeObject.prototype.setChildCalcHTML=function(a,b){this.htmlcA=a,this.htmlcB=b},dhtmlXTreeObject.prototype.setOnRightClickHandler=function(a){this.attachEvent("onRightClick",a)},dhtmlXTreeObject.prototype.setOnClickHandler=function(a){this.attachEvent("onClick",a)},dhtmlXTreeObject.prototype.setOnSelectStateChange=function(a){this.attachEvent("onSelect",a)},dhtmlXTreeObject.prototype.setXMLAutoLoading=function(a){this.XMLsource=a},dhtmlXTreeObject.prototype.setOnCheckHandler=function(a){this.attachEvent("onCheck",a)},dhtmlXTreeObject.prototype.setOnOpenHandler=function(a){this.attachEvent("onOpenStart",a)},dhtmlXTreeObject.prototype.setOnOpenStartHandler=function(a){this.attachEvent("onOpenStart",a)},dhtmlXTreeObject.prototype.setOnOpenEndHandler=function(a){this.attachEvent("onOpenEnd",a)},dhtmlXTreeObject.prototype.setOnDblClickHandler=function(a){this.attachEvent("onDblClick",a)},dhtmlXTreeObject.prototype.openAllItems=function(a){var b=this._globalIdStorageFind(a);return b?void this._xopenAll(b):0},dhtmlXTreeObject.prototype.getOpenState=function(a){var b=this._globalIdStorageFind(a);return b?this._getOpenState(b):""},dhtmlXTreeObject.prototype.closeAllItems=function(a){a===window.undefined&&(a=this.rootId);var b=this._globalIdStorageFind(a);return b?(this._xcloseAll(b),this.allTree.childNodes[0].border="1",void(this.allTree.childNodes[0].border="0")):0},dhtmlXTreeObject.prototype.setUserData=function(a,b,c){var d=this._globalIdStorageFind(a,0,!0);d&&("hint"==b&&(d.htmlNode.childNodes[0].childNodes[0].title=c),"undefined"==typeof d.userData["t_"+b]&&(d._userdatalist?d._userdatalist+=","+b:d._userdatalist=b),d.userData["t_"+b]=c)},dhtmlXTreeObject.prototype.getUserData=function(a,b){var c=this._globalIdStorageFind(a,0,!0);if(c)return c.userData["t_"+b]},dhtmlXTreeObject.prototype.getItemColor=function(a){var b=this._globalIdStorageFind(a);if(!b)return 0;var c=new Object;return b.acolor&&(c.acolor=b.acolor),b.scolor&&(c.scolor=b.scolor),c},dhtmlXTreeObject.prototype.setItemColor=function(a,b,c){if(a&&a.span)var d=a;else var d=this._globalIdStorageFind(a);return d?(d.i_sel?c&&(d.span.style.color=c):b&&(d.span.style.color=b),c&&(d.scolor=c),b&&(d.acolor=b),void 0):0},dhtmlXTreeObject.prototype.getItemText=function(a){var b=this._globalIdStorageFind(a);return b?b.htmlNode.childNodes[0].childNodes[0].childNodes[3].childNodes[0].innerHTML:0},dhtmlXTreeObject.prototype.getParentId=function(a){var b=this._globalIdStorageFind(a);return b&&b.parentObject?b.parentObject.id:""},dhtmlXTreeObject.prototype.changeItemId=function(a,b){if(a!=b){var c=this._globalIdStorageFind(a);if(!c)return 0;c.id=b,c.span.contextMenuId=b,this._idpull[b]=this._idpull[a],delete this._idpull[a]}},dhtmlXTreeObject.prototype.doCut=function(){this.nodeCut&&this.clearCut(),this.nodeCut=(new Array).concat(this._selected);for(var a=0;a<this.nodeCut.length;a++){var b=this.nodeCut[a];b._cimgs=new Array,b._cimgs[0]=b.images[0],b._cimgs[1]=b.images[1],b._cimgs[2]=b.images[2],b.images[0]=b.images[1]=b.images[2]=this.cutImage,this._correctPlus(b)}},dhtmlXTreeObject.prototype.doPaste=function(a){var b=this._globalIdStorageFind(a);if(!b)return 0;for(var c=0;c<this.nodeCut.length;c++)this._checkPNodes(b,this.nodeCut[c])||this._moveNode(this.nodeCut[c],b);this.clearCut()},dhtmlXTreeObject.prototype.clearCut=function(){for(var a=0;a<this.nodeCut.length;a++){var b=this.nodeCut[a];b.images[0]=b._cimgs[0],b.images[1]=b._cimgs[1],b.images[2]=b._cimgs[2],this._correctPlus(b)}this.nodeCut=new Array},dhtmlXTreeObject.prototype._moveNode=function(a,b){var c=this.dadmodec;if(1==c){var d=b;if(this.dadmodefix<0){for(;;){if(d=this._getPrevNode(d),-1==d){d=this.htmlNode;break}if(0==d.tr||""==d.tr.style.display||!d.parentObject)break}var e=d,f=b}else{for(;;){if(d=this._getNextNode(d),-1==d){d=this.htmlNode;break}if(""==d.tr.style.display||!d.parentObject)break}var f=d,e=b}return this._getNodeLevel(e,0)>this._getNodeLevel(f,0)?this.dropLower?f.id!=this.rootId?this._moveNodeTo(a,f.parentObject,f):this._moveNodeTo(a,this.htmlNode,null):this._moveNodeTo(a,e.parentObject):this._moveNodeTo(a,f.parentObject,f)}return this._moveNodeTo(a,b)},dhtmlXTreeObject.prototype._fixNodesCollection=function(a,b){var c=0,d=a.childNodes,e=a.childsCount-1;if(b!=d[e]){for(var f=0;e>f;f++)d[f]==d[e]&&(d[f]=d[f+1],d[f+1]=d[e]);for(var f=0;e+1>f;f++)if(c){var g=d[f];d[f]=c,c=g}else d[f]==b&&(c=d[f],d[f]=d[e])}},dhtmlXTreeObject.prototype._recreateBranch=function(a,b,c,d){var e,f="";if(c){for(e=0;e<b.childsCount&&b.childNodes[e]!=c;e++);0!=e?c=b.childNodes[e-1]:(f="TOP",c="")}var g=this._onradh;this._onradh=null;var h=this._attachChildNode(b,a.id,a.label,0,a.images[0],a.images[1],a.images[2],f,0,c);h._userdatalist=a._userdatalist,h.userData=a.userData.clone(),h.XMLload=a.XMLload,g&&(this._onradh=g,this._onradh(h.id)),a.treeNod.dpcpy?a.treeNod._globalIdStorageFind(a.id):h.unParsed=a.unParsed,this._correctPlus(h);for(var e=0;e<a.childsCount;e++)this._recreateBranch(a.childNodes[e],h,0,1);return!d&&this.childCalc&&this._redrawFrom(this,b),h},dhtmlXTreeObject.prototype._moveNodeTo=function(a,b,c){if(a.treeNod._nonTrivialNode)return a.treeNod._nonTrivialNode(this,b,c,a);if(b.mytype)var d=a.treeNod.lWin!=b.lWin;else var d=a.treeNod.lWin!=b.treeNod.lWin;if(!this.callEvent("onDrag",[a.id,b.id,c?c.id:null,a.treeNod,b.treeNod]))return!1;0==b.XMLload&&this.XMLsource&&(b.XMLload=1,this._loadDynXML(b.id)),this.openItem(b.id);
var e=a.treeNod,f=a.parentObject.childsCount,g=a.parentObject;if(d||e.dpcpy){var h=a.id;a=this._recreateBranch(a,b,c),e.dpcpy||e.deleteItem(h)}else{var i=b.childsCount,j=b.childNodes;0==i&&(b._open=!0),e._unselectItem(a),j[i]=a,a.treeNod=b.treeNod,b.childsCount++;var k=this._drawNewTr(j[i].htmlNode);c?(b.htmlNode.childNodes[0].insertBefore(k,c.tr),this._fixNodesCollection(b,c),j=b.childNodes):(b.htmlNode.childNodes[0].appendChild(k),1==this.dadmode&&this._fixNodesCollection(b,c))}if(!e.dpcpy&&!d){var l=a.tr;if(document.all&&-1!=navigator.appVersion.search(/MSIE\ 5\.0/gi)?window.setTimeout(function(){l.parentNode.removeChild(l)},250):a.parentObject.htmlNode.childNodes[0].removeChild(a.tr),c&&b==a.parentObject)g.childNodes[g.childsCount-1]=0;else for(var m=0;m<g.childsCount;m++)if(g.childNodes[m].id==a.id){g.childNodes[m]=0;break}e._compressChildList(g.childsCount,g.childNodes),g.childsCount--}if(!d&&!e.dpcpy){if(a.tr=k,k.nodem=a,a.parentObject=b,e!=b.treeNod){if(a.treeNod._registerBranch(a,e))return;this._clearStyles(a),this._redrawFrom(this,a.parentObject)}this._correctPlus(b),this._correctLine(b),this._correctLine(a),this._correctPlus(a),c?this._correctPlus(c):b.childsCount>=2&&(this._correctPlus(j[b.childsCount-2]),this._correctLine(j[b.childsCount-2])),this._correctPlus(j[b.childsCount-1]),this.tscheck&&this._correctCheckStates(b),e.tscheck&&e._correctCheckStates(g)}return f>1&&(e._correctPlus(g.childNodes[f-2]),e._correctLine(g.childNodes[f-2])),e._correctPlus(g),e._correctLine(g),this._fixChildCountLabel(b),e._fixChildCountLabel(g),this.callEvent("onDrop",[a.id,b.id,c?c.id:null,e,b.treeNod]),a.id},dhtmlXTreeObject.prototype._clearStyles=function(a){if(a.htmlNode){var b=a.htmlNode.childNodes[0].childNodes[0].childNodes[1],c=b.nextSibling.nextSibling;a.span.innerHTML=a.label,a.i_sel=!1,a._aimgs&&this.dragger.removeDraggableItem(b.nextSibling),this.checkBoxOff?(b.childNodes[0].style.display="",b.childNodes[0].onclick=this.onCheckBoxClick,this._setSrc(b.childNodes[0],this.imPath+this.checkArray[a.checkstate])):b.childNodes[0].style.display="none",b.childNodes[0].treeNod=this,this.dragger.removeDraggableItem(c),this.dragAndDropOff&&this.dragger.addDraggableItem(c,this),this._aimgs&&this.dragger.addDraggableItem(b.nextSibling,this),c.childNodes[0].className="standartTreeRow",c.onclick=this.onRowSelect,c.ondblclick=this.onRowClick2,b.previousSibling.onclick=this.onRowClick,this._correctLine(a),this._correctPlus(a);for(var d=0;d<a.childsCount;d++)this._clearStyles(a.childNodes[d])}},dhtmlXTreeObject.prototype._registerBranch=function(a,b){b&&b._globalIdStorageSub(a.id),a.id=this._globalIdStorageAdd(a.id,a),a.treeNod=this;for(var c=0;c<a.childsCount;c++)this._registerBranch(a.childNodes[c],b);return 0},dhtmlXTreeObject.prototype.enableThreeStateCheckboxes=function(a){this.tscheck=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.setOnMouseInHandler=function(a){this.ehlt=!0,this.attachEvent("onMouseIn",a)},dhtmlXTreeObject.prototype.setOnMouseOutHandler=function(a){this.ehlt=!0,this.attachEvent("onMouseOut",a)},dhtmlXTreeObject.prototype.enableMercyDrag=function(a){this.dpcpy=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.enableTreeImages=function(a){this.timgen=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.enableFixedMode=function(a){this.hfMode=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.enableCheckBoxes=function(a,b){this.checkBoxOff=convertStringToBoolean(a),this.cBROf=!(this.checkBoxOff||convertStringToBoolean(b))},dhtmlXTreeObject.prototype.setStdImages=function(a,b,c){this.imageArray[0]=a,this.imageArray[1]=b,this.imageArray[2]=c},dhtmlXTreeObject.prototype.enableTreeLines=function(a){this.treeLinesOn=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.setImageArrays=function(a,b,c,d,e,f){switch(a){case"plus":this.plusArray[0]=b,this.plusArray[1]=c,this.plusArray[2]=d,this.plusArray[3]=e,this.plusArray[4]=f;break;case"minus":this.minusArray[0]=b,this.minusArray[1]=c,this.minusArray[2]=d,this.minusArray[3]=e,this.minusArray[4]=f}},dhtmlXTreeObject.prototype.openItem=function(a){var b=this._globalIdStorageFind(a);return b?this._openItem(b):0},dhtmlXTreeObject.prototype._openItem=function(a){var b=this._getOpenState(a);if(0>b||this.XMLsource&&!a.XMLload){if(!this.callEvent("onOpenStart",[a.id,b]))return 0;this._HideShow(a,2),this.checkEvent("onOpenEnd")&&(this.onXLE==this._epnFHe&&this._epnFHe(this,a.id,!0),this.xmlstate&&this.XMLsource?(this._oie_onXLE.push(this.onXLE),this.onXLE=this._epnFHe):this.callEvent("onOpenEnd",[a.id,this._getOpenState(a)]))}else this._srnd&&this._HideShow(a,2);a.parentObject&&this._openItem(a.parentObject)},dhtmlXTreeObject.prototype.closeItem=function(a){if(this.rootId==a)return 0;var b=this._globalIdStorageFind(a);return b?void(b.closeble&&this._HideShow(b,1)):0},dhtmlXTreeObject.prototype.getLevel=function(a){var b=this._globalIdStorageFind(a);return b?this._getNodeLevel(b,0):0},dhtmlXTreeObject.prototype.setItemCloseable=function(a,b){if(b=convertStringToBoolean(b),a&&a.span)var c=a;else var c=this._globalIdStorageFind(a);return c?void(c.closeble=b):0},dhtmlXTreeObject.prototype._getNodeLevel=function(a,b){return a.parentObject?this._getNodeLevel(a.parentObject,b+1):b},dhtmlXTreeObject.prototype.hasChildren=function(a){var b=this._globalIdStorageFind(a);return b?this.XMLsource&&!b.XMLload?!0:b.childsCount:0},dhtmlXTreeObject.prototype._getLeafCount=function(a){for(var b=0,c=0;c<a.childsCount;c++)0==a.childNodes[c].childsCount&&b++;return b},dhtmlXTreeObject.prototype.setItemText=function(a,b,c){var d=this._globalIdStorageFind(a);return d?(d.label=b,d.span.innerHTML=b,this.childCalc&&this._fixChildCountLabel(d),void(d.span.parentNode.parentNode.title=c||"")):0},dhtmlXTreeObject.prototype.getItemTooltip=function(a){var b=this._globalIdStorageFind(a);return b?b.span.parentNode.parentNode._dhx_title||b.span.parentNode.parentNode.title||"":""},dhtmlXTreeObject.prototype.refreshItem=function(a){a||(a=this.rootId);this._globalIdStorageFind(a);this.deleteChildItems(a),this._loadDynXML(a)},dhtmlXTreeObject.prototype.setItemImage2=function(a,b,c,d){var e=this._globalIdStorageFind(a);return e?(e.images[1]=c,e.images[2]=d,e.images[0]=b,void this._correctPlus(e)):0},dhtmlXTreeObject.prototype.setItemImage=function(a,b,c){var d=this._globalIdStorageFind(a);return d?(c?(d.images[1]=b,d.images[2]=c):d.images[0]=b,void this._correctPlus(d)):0},dhtmlXTreeObject.prototype.getSubItems=function(a){var b=this._globalIdStorageFind(a,0,1);if(!b)return 0;if(b.unParsed)return this._getSubItemsXML(b.unParsed);var c="";for(i=0;i<b.childsCount;i++)c?c+=this.dlmtr+b.childNodes[i].id:c=b.childNodes[i].id;return c},dhtmlXTreeObject.prototype._getAllScraggyItems=function(a){for(var b="",c=0;c<a.childsCount;c++)if(a.childNodes[c].unParsed||a.childNodes[c].childsCount>0){if(a.childNodes[c].unParsed)var d=this._getAllScraggyItemsXML(a.childNodes[c].unParsed,1);else var d=this._getAllScraggyItems(a.childNodes[c]);d&&(b?b+=this.dlmtr+d:b=d)}else b?b+=this.dlmtr+a.childNodes[c].id:b=a.childNodes[c].id;return b},dhtmlXTreeObject.prototype._getAllFatItems=function(a){for(var b="",c=0;c<a.childsCount;c++)if(a.childNodes[c].unParsed||a.childNodes[c].childsCount>0){if(b?b+=this.dlmtr+a.childNodes[c].id:b=a.childNodes[c].id,a.childNodes[c].unParsed)var d=this._getAllFatItemsXML(a.childNodes[c].unParsed,1);else var d=this._getAllFatItems(a.childNodes[c]);d&&(b+=this.dlmtr+d)}return b},dhtmlXTreeObject.prototype._getAllSubItems=function(a,b,c){if(c)d=c;else var d=this._globalIdStorageFind(a);if(!d)return 0;b="";for(var e=0;e<d.childsCount;e++){b?b+=this.dlmtr+d.childNodes[e].id:b=d.childNodes[e].id;var f=this._getAllSubItems(0,b,d.childNodes[e]);f&&(b+=this.dlmtr+f)}return d.unParsed&&(b=this._getAllSubItemsXML(a,b,d.unParsed)),b},dhtmlXTreeObject.prototype.selectItem=function(a,b,c){b=convertStringToBoolean(b);var d=this._globalIdStorageFind(a);if(!d||!d.parentObject)return 0;this.XMLloadingWarning?d.parentObject.openMe=1:this._openItem(d.parentObject);var e=null;c&&(e=new Object,e.ctrlKey=!0,d.i_sel&&(e.skipUnSel=!0)),b?this.onRowSelect(e,d.htmlNode.childNodes[0].childNodes[0].childNodes[3],!1):this.onRowSelect(e,d.htmlNode.childNodes[0].childNodes[0].childNodes[3],!0)},dhtmlXTreeObject.prototype.getSelectedItemText=function(){for(var a=new Array,b=0;b<this._selected.length;b++)a[b]=this._selected[b].span.innerHTML;return a.join(this.dlmtr)},dhtmlXTreeObject.prototype._compressChildList=function(a,b){a--;for(var c=0;a>c;c++)0==b[c]&&(b[c]=b[c+1],b[c+1]=0)},dhtmlXTreeObject.prototype._deleteNode=function(a,b,c){if(!b||!b.parentObject)return 0;var d=0,e=0;b.tr.nextSibling&&(d=b.tr.nextSibling.nodem),b.tr.previousSibling&&(e=b.tr.previousSibling.nodem);for(var f=b.parentObject,g=f.childsCount,h=f.childNodes,i=0;g>i;i++)if(h[i].id==a){c||f.htmlNode.childNodes[0].removeChild(h[i].tr),h[i]=0;break}this._compressChildList(g,h),c||f.childsCount--,d&&(this._correctPlus(d),this._correctLine(d)),e&&(this._correctPlus(e),this._correctLine(e)),this.tscheck&&this._correctCheckStates(f),c||this._globalIdStorageRecSub(b)},dhtmlXTreeObject.prototype.setCheck=function(a,b){var c=this._globalIdStorageFind(a,0,1);c&&("unsure"===b?this._setCheck(c,b):(b=convertStringToBoolean(b),this.tscheck&&this.smcheck?this._setSubChecked(b,c):this._setCheck(c,b)),this.smcheck&&this._correctCheckStates(c.parentObject))},dhtmlXTreeObject.prototype._setCheck=function(a,b){if(a){if((a.parentObject._r_logic||this._frbtr)&&b)if(this._frbtrs)this._frbtrL&&this.setCheck(this._frbtrL.id,0),this._frbtrL=a;else for(var c=0;c<a.parentObject.childsCount;c++)this._setCheck(a.parentObject.childNodes[c],0);var d=a.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];a.checkstate="unsure"==b?2:b?1:0,a.dscheck&&(a.checkstate=a.dscheck),this._setSrc(d,this.imPath+(a.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[a.checkstate])}},dhtmlXTreeObject.prototype.setSubChecked=function(a,b){var c=this._globalIdStorageFind(a);this._setSubChecked(b,c),this._correctCheckStates(c.parentObject)},dhtmlXTreeObject.prototype._setSubChecked=function(a,b){if(a=convertStringToBoolean(a),b){if((b.parentObject._r_logic||this._frbtr)&&a)for(var c=0;c<b.parentObject.childsCount;c++)this._setSubChecked(0,b.parentObject.childNodes[c]);if(b.unParsed&&this._setSubCheckedXML(a,b.unParsed),b._r_logic||this._frbtr)this._setSubChecked(a,b.childNodes[0]);else for(var c=0;c<b.childsCount;c++)this._setSubChecked(a,b.childNodes[c]);var d=b.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];b.checkstate=a?1:0,b.dscheck&&(b.checkstate=b.dscheck),this._setSrc(d,this.imPath+(b.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[b.checkstate])}},dhtmlXTreeObject.prototype.isItemChecked=function(a){var b=this._globalIdStorageFind(a);if(b)return b.checkstate},dhtmlXTreeObject.prototype.deleteChildItems=function(a){var b=this._globalIdStorageFind(a);if(b)for(var c=b.childsCount,d=0;c>d;d++)this._deleteNode(b.childNodes[0].id,b.childNodes[0])},dhtmlXTreeObject.prototype.deleteItem=function(a,b){if(!this._onrdlh||this._onrdlh(a)){var c=this._deleteItem(a,b);this._fixChildCountLabel(c)}this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0"},dhtmlXTreeObject.prototype._deleteItem=function(a,b,c){b=convertStringToBoolean(b);var d=this._globalIdStorageFind(a);if(d){var e=this.getParentId(a),f=d.parentObject;return this._deleteNode(a,d,c),this._correctPlus(f),this._correctLine(f),b&&e!=this.rootId&&this.selectItem(e,1),f}},dhtmlXTreeObject.prototype._globalIdStorageRecSub=function(a){for(var b=0;b<a.childsCount;b++)this._globalIdStorageRecSub(a.childNodes[b]),this._globalIdStorageSub(a.childNodes[b].id);this._globalIdStorageSub(a.id);var c=a;c.span=null,c.tr.nodem=null,c.tr=null,c.htmlNode=null},dhtmlXTreeObject.prototype.insertNewNext=function(a,b,c,d,e,f,g,h,i){var j=this._globalIdStorageFind(a);if(!j||!j.parentObject)return 0;var k=this._attachChildNode(0,b,c,d,e,f,g,h,i,j);return!this.XMLloadingWarning&&this.childCalc&&this._fixChildCountLabel(j.parentObject),k},dhtmlXTreeObject.prototype.getItemIdByIndex=function(a,b){var c=this._globalIdStorageFind(a);return!c||b>=c.childsCount?null:c.childNodes[b].id},dhtmlXTreeObject.prototype.getChildItemIdByIndex=function(a,b){var c=this._globalIdStorageFind(a);return!c||b>=c.childsCount?null:c.childNodes[b].id},dhtmlXTreeObject.prototype.setDragHandler=function(a){this.attachEvent("onDrag",a)},dhtmlXTreeObject.prototype._clearMove=function(){this._lastMark&&(this._lastMark.className=this._lastMark.className.replace(/dragAndDropRow/g,""),this._lastMark=null),this.selectionBar.style.display="none",this.allTree.className=this.allTree.className.replace(" selectionBox","")},dhtmlXTreeObject.prototype.enableDragAndDrop=function(a,b){"temporary_disabled"==a?(this.dADTempOff=!1,a=!0):this.dADTempOff=!0,this.dragAndDropOff=convertStringToBoolean(a),this.dragAndDropOff&&this.dragger.addDragLanding(this.allTree,this),arguments.length>1&&(this._ddronr=!convertStringToBoolean(b))},dhtmlXTreeObject.prototype._setMove=function(a,b,c){if(a.parentObject.span){var d=getAbsoluteTop(a),e=getAbsoluteTop(this.allTree);if(this.dadmodec=this.dadmode,this.dadmodefix=0,2==this.dadmode){var f=c-d+this.allTree.scrollTop+(document.body.scrollTop||document.documentElement.scrollTop)-2-a.offsetHeight/2;Math.abs(f)-a.offsetHeight/6>0?(this.dadmodec=1,0>f&&(this.dadmodefix=0-a.offsetHeight)):this.dadmodec=0}if(0==this.dadmodec){var g=a.parentObject.span;g.className+=" dragAndDropRow",this._lastMark=g}else this._clearMove(),this.selectionBar.style.top=d-e+((parseInt(a.parentObject.span.parentNode.previousSibling.childNodes[0].style.height)||18)-1)+this.dadmodefix+"px",this.selectionBar.style.left="5px",this.allTree.offsetWidth>20&&(this.selectionBar.style.width=this.allTree.offsetWidth-(_isFF?30:25)+"px"),this.selectionBar.style.display="";this._autoScroll(null,d,e)}},dhtmlXTreeObject.prototype._autoScroll=function(a,b,c){this.autoScroll&&(a&&(b=getAbsoluteTop(a),c=getAbsoluteTop(this.allTree)),b-c-parseInt(this.allTree.scrollTop)>parseInt(this.allTree.offsetHeight)-50&&(this.allTree.scrollTop=parseInt(this.allTree.scrollTop)+20),b-c<parseInt(this.allTree.scrollTop)+30&&(this.allTree.scrollTop=parseInt(this.allTree.scrollTop)-20))},dhtmlXTreeObject.prototype._createDragNode=function(a,b){if(!this.dADTempOff)return null;var c=a.parentObject;if(!this.callEvent("onBeforeDrag",[c.id]))return null;c.i_sel||this._selectItem(c,b),this._checkMSelectionLogic();var d=document.createElement("div"),e=new Array;if(this._itim_dg)for(var f=0;f<this._selected.length;f++)e[f]="<table cellspacing='0' cellpadding='0'><tr><td><img width='18px' height='18px' src='"+this._getSrc(this._selected[f].span.parentNode.previousSibling.childNodes[0])+"'></td><td>"+this._selected[f].span.innerHTML+"</td></tr></table>";else e=this.getSelectedItemText().split(this.dlmtr);return d.innerHTML=e.join(""),d.style.position="absolute",d.className="dragSpanDiv",this._dragged=(new Array).concat(this._selected),d},dhtmlXTreeObject.prototype._focusNode=function(a){var b=getAbsoluteTop(a.htmlNode)-getAbsoluteTop(this.allTree);(b>this.allTree.scrollTop+this.allTree.offsetHeight-30||b<this.allTree.scrollTop)&&(this.allTree.scrollTop=b)},dhtmlXTreeObject.prototype._preventNsDrag=function(a){return a&&a.preventDefault?(a.preventDefault(),!1):!1},dhtmlXTreeObject.prototype._drag=function(a,b,c){this._autoOpenTimer&&clearTimeout(this._autoOpenTimer),c.parentObject||(c=this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.dadmodec=0),this._clearMove();var d=a.parentObject.treeNod;if(d&&d._clearMove&&d._clearMove(""),!this.dragMove||this.dragMove()){if(d&&d._clearMove&&d._dragged)var e=d._dragged;else var e=new Array(a.parentObject);for(var f=c.parentObject,g=0;g<e.length;g++){var h=this._moveNode(e[g],f);this.dadmodec&&h!==!1&&(f=this._globalIdStorageFind(h,!0,!0)),h&&!this._sADnD&&this.selectItem(h,0,1)}}d&&(d._dragged=new Array)},dhtmlXTreeObject.prototype._dragIn=function(a,b,c,d){if(!this.dADTempOff)return 0;var e=b.parentObject,f=a.parentObject;if(f||!this._ddronr){if(!this.callEvent("onDragIn",[e.id,f?f.id:null,e.treeNod,this]))return 0;if(f){if(null==e.childNodes)return this._setMove(a,c,d),a;for(var g=e.treeNod,h=0;h<g._dragged.length;h++)if(this._checkPNodes(f,g._dragged[h]))return this._autoScroll(a),0;this.selectionBar.parentNode.removeChild(this.selectionBar),f.span.parentNode.appendChild(this.selectionBar),this._setMove(a,c,d),this._getOpenState(f)<=0&&(this._autoOpenId=f.id,this._autoOpenTimer=window.setTimeout(new callerFunction(this._autoOpenItem,this),1e3))}else this.allTree.className+=" selectionBox";return a}},dhtmlXTreeObject.prototype._autoOpenItem=function(a,b){b.openItem(b._autoOpenId)},dhtmlXTreeObject.prototype._dragOut=function(){this._clearMove(),this._autoOpenTimer&&clearTimeout(this._autoOpenTimer)},dhtmlXTreeObject.prototype._getNextNode=function(a,b){return!b&&a.childsCount?a.childNodes[0]:a==this.htmlNode?-1:a.tr&&a.tr.nextSibling&&a.tr.nextSibling.nodem?a.tr.nextSibling.nodem:this._getNextNode(a.parentObject,!0)},dhtmlXTreeObject.prototype._lastChild=function(a){return a.childsCount?this._lastChild(a.childNodes[a.childsCount-1]):a},dhtmlXTreeObject.prototype._getPrevNode=function(a){return a.tr&&a.tr.previousSibling&&a.tr.previousSibling.nodem?this._lastChild(a.tr.previousSibling.nodem):a.parentObject?a.parentObject:-1},dhtmlXTreeObject.prototype.findItem=function(a,b,c){var d=this._findNodeByLabel(a,b,c?this.htmlNode:null);return d?(this.selectItem(d.id,!0),this._focusNode(d),d.id):null},dhtmlXTreeObject.prototype.findItemIdByLabel=function(a,b,c){var d=this._findNodeByLabel(a,b,c?this.htmlNode:null);return d?d.id:null},dhtmlXTreeObject.prototype.findStrInXML=function(a,b,c){if(!a.childNodes&&a.item)return this.findStrInJSON(a,b,c);for(var d=0;d<a.childNodes.length;d++)if(1==a.childNodes[d].nodeType){var e=a.childNodes[d].getAttribute(b);if(e||"itemtext"!=a.childNodes[d].tagName||(e=a.childNodes[d].firstChild.data),e&&-1!=e.toLowerCase().search(c))return!0;if(this.findStrInXML(a.childNodes[d],b,c))return!0}return!1},dhtmlXTreeObject.prototype.findStrInJSON=function(a,b,c){for(var d=0;d<a.item.length;d++){var e=a.item[d].text;if(e&&-1!=e.toLowerCase().search(c))return!0;if(this.item[d].item&&this.findStrInJSON(a.item[d],b,c))return!0}return!1},dhtmlXTreeObject.prototype._findNodeByLabel=function(a,b,c){var a=a.replace(new RegExp("^( )+"),"").replace(new RegExp("( )+$"),"");a=new RegExp(a.replace(/([\?\*\+\\\[\]\(\)]{1})/gi,"\\$1").replace(/ /gi,".*"),"gi"),c||(c=this._selected[0],c||(c=this.htmlNode));var d=c;if(b){var e=this._getPrevNode(d);-1==e&&(e=this._lastChild(this.htmlNode)),e.unParsed&&this.findStrInXML(e.unParsed.d,"text",a)?(this.reParse(e),c=this._getPrevNode(d)):c=e,-1==c&&(c=this._lastChild(this.htmlNode))}else c.unParsed&&this.findStrInXML(c.unParsed.d,"text",a)&&this.reParse(c),c=this._getNextNode(d),-1==c&&(c=this.htmlNode.childNodes[0]);for(;c&&c!=d;){if(c.label&&-1!=c.label.search(a))return c;if(b){var e=this._getPrevNode(c);-1==e&&(e=this._lastChild(this.htmlNode)),e.unParsed&&this.findStrInXML(e.unParsed.d,"text",a)?(this.reParse(e),c=this._getPrevNode(c)):c=e,-1==c&&(c=this._lastChild(this.htmlNode))}else{if(-1==c){if(d==this.htmlNode)break;c=this.htmlNode.childNodes[0]}c.unParsed&&this.findStrInXML(c.unParsed.d,"text",a)&&this.reParse(c),c=this._getNextNode(c),-1==c&&(c=this.htmlNode)}}return null},dhtmlXTreeObject.prototype.moveItem=function(a,b,c,d){var e=this._globalIdStorageFind(a);if(!e)return 0;switch(b){case"right":alert("Not supported yet");break;case"item_child":var f=(d||this)._globalIdStorageFind(c);if(!f)return 0;(d||this)._moveNodeTo(e,f,0);break;case"item_sibling":var f=(d||this)._globalIdStorageFind(c);if(!f)return 0;(d||this)._moveNodeTo(e,f.parentObject,f);break;case"item_sibling_next":var f=(d||this)._globalIdStorageFind(c);if(!f)return 0;f.tr&&f.tr.nextSibling&&f.tr.nextSibling.nodem?(d||this)._moveNodeTo(e,f.parentObject,f.tr.nextSibling.nodem):(d||this)._moveNodeTo(e,f.parentObject);break;case"left":e.parentObject.parentObject&&this._moveNodeTo(e,e.parentObject.parentObject,e.parentObject);break;case"up":var g=this._getPrevNode(e);if(-1==g||!g.parentObject)return;this._moveNodeTo(e,g.parentObject,g);break;case"up_strict":var g=this._getIndex(e);0!=g&&this._moveNodeTo(e,e.parentObject,e.parentObject.childNodes[g-1]);break;case"down_strict":var g=this._getIndex(e),h=e.parentObject.childsCount-2;g==h?this._moveNodeTo(e,e.parentObject):h>g&&this._moveNodeTo(e,e.parentObject,e.parentObject.childNodes[g+2]);break;case"down":var g=this._getNextNode(this._lastChild(e));if(-1==g||!g.parentObject)return;if(g.parentObject==e.parentObject)var g=this._getNextNode(g);if(-1==g)this._moveNodeTo(e,e.parentObject);else{if(-1==g||!g.parentObject)return;this._moveNodeTo(e,g.parentObject,g)}}},dhtmlXTreeObject.prototype.setDragBehavior=function(a,b){switch(this._sADnD=!convertStringToBoolean(b),a){case"child":this.dadmode=0;break;case"sibling":this.dadmode=1;break;case"complex":this.dadmode=2}},dhtmlXTreeObject.prototype._loadDynXML=function(a,b){b=b||this.XMLsource;var c=(new Date).valueOf();this._ld_id=a,"function"==this.xmlalb?b&&b(this._escape(a)):this.loadXML("name"==this.xmlalb?b+this._escape(a):"xmlname"==this.xmlalb?b+this._escape(a)+".xml?uid="+c:b+getUrlSymbol(b)+"uid="+c+"&id="+this._escape(a))},dhtmlXTreeObject.prototype.enableMultiselection=function(a,b){this._amsel=convertStringToBoolean(a),this._amselS=convertStringToBoolean(b)},dhtmlXTreeObject.prototype._checkMSelectionLogic=function(){for(var a=new Array,b=0;b<this._selected.length;b++)for(var c=0;c<this._selected.length;c++)b!=c&&this._checkPNodes(this._selected[c],this._selected[b])&&(a[a.length]=this._selected[c]);for(var b=0;b<a.length;b++)this._unselectItem(a[b])},dhtmlXTreeObject.prototype._checkPNodes=function(a,b){return b==a?1:a.parentObject?this._checkPNodes(a.parentObject,b):0},dhtmlXTreeObject.prototype.enableDistributedParsing=function(a,b,c){this._edsbps=convertStringToBoolean(a),this._edsbpsA=new Array,this._edsbpsC=b||10,this._edsbpsD=c||250},dhtmlXTreeObject.prototype.getDistributedParsingState=function(){return!(!this._edsbpsA||!this._edsbpsA.length)},dhtmlXTreeObject.prototype.getItemParsingState=function(a){var b=this._globalIdStorageFind(a,!0,!0);if(!b)return 0;if(this._edsbpsA)for(var c=0;c<this._edsbpsA.length;c++)if(this._edsbpsA[c][2]==a)return-1;return 1},dhtmlXTreeObject.prototype._distributedStart=function(a,b,c,d,e){this._edsbpsA||(this._edsbpsA=new Array),this._edsbpsA[this._edsbpsA.length]=[a,b,c,d,e]},dhtmlXTreeObject.prototype._distributedStep=function(a){var b=this;if(!this._edsbpsA||!this._edsbpsA.length)return void(b.XMLloadingWarning=0);var c=this._edsbpsA[0];this.parsedArray=new Array,this._parse(c[0],c[2],c[3],c[1]);var d=this._globalIdStorageFind(c[2]);this._redrawFrom(this,d,c[4],this._getOpenState(d));for(var e=this.setCheckList.split(this.dlmtr),f=0;f<e.length;f++)e[f]&&this.setCheck(e[f],1);this._edsbpsA=(new Array).concat(this._edsbpsA.slice(1)),this._edsbpsA.length||(window.setTimeout(function(){b.onXLE&&b.onXLE(b,a),b.callEvent("onXLE",[b,a])},1),b.xmlstate=0)},dhtmlXTreeObject.prototype.enablePaging=function(a,b){this._epgps=convertStringToBoolean(a),this._epgpsC=b||50},dhtmlXTreeObject.prototype._setPrevPageSign=function(a,b,c,d){var e=document.createElement("DIV");e.innerHTML="Previous "+this._epgpsC+" items",e.className="dhx_next_button";var f=this;e.onclick=function(){f._prevPageCall(this)},e._pageData=[a,b,c,d];var g=a.childNodes[0],h=g.span.parentNode.parentNode.parentNode.parentNode.parentNode;h.insertBefore(e,h.firstChild)},dhtmlXTreeObject.prototype._setNextPageSign=function(a,b,c,d){var e=document.createElement("DIV");e.innerHTML="Next "+this._epgpsC+" items",e.className="dhx_next_button";var f=this;e.onclick=function(){f._nextPageCall(this)},e._pageData=[a,b,c,d];var g=a.childNodes[a.childsCount-1];g.span.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e)},dhtmlXTreeObject.prototype._nextPageCall=function(a){tree.deleteChildItems(a._pageData[0].id),a.parentNode.removeChild(a);var b=this._getOpenState(a._pageData[0]);this._parseXMLTree(this,a._pageData[3],a._pageData[0].id,a._pageData[2],null,a._pageData[1]),this._redrawFrom(this,a._pageData[0],0),b>-1&&this._openItem(a._pageData[0]),a._pageData=null},dhtmlXTreeObject.prototype._prevPageCall=function(a){tree.deleteChildItems(a._pageData[0].id),a.parentNode.removeChild(a);var b=this._getOpenState(a._pageData[0]),c=a._pageData[1]-this._epgpsC;0>c&&(c=0),this._parseXMLTree(this,a._pageData[3],a._pageData[0].id,a._pageData[2],null,c),this._redrawFrom(this,a._pageData[0],0),b>-1&&this._openItem(a._pageData[0]),a._pageData=null},dhtmlXTreeObject.prototype.enableTextSigns=function(a){this._txtimg=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.preventIECaching=function(a){this.no_cashe=convertStringToBoolean(a),this.XMLLoader.rSeed=this.no_cashe},dhtmlXTreeObject.prototype.preventIECashing=dhtmlXTreeObject.prototype.preventIECaching,dhtmlXTreeObject.prototype.disableCheckbox=function(a,b){if("object"!=typeof a)var c=this._globalIdStorageFind(a,0,1);else var c=a;c&&(c.dscheck=convertStringToBoolean(b)?(c.checkstate||0)%3+3:c.checkstate>2?c.checkstate-3:c.checkstate,this._setCheck(c),c.dscheck<3&&(c.dscheck=!1))},dhtmlXTreeObject.prototype.smartRefreshBranch=function(a,b){this._branchUpdate=1,this.smartRefreshItem(a,b)},dhtmlXTreeObject.prototype.smartRefreshItem=function(a,b){for(var c=this._globalIdStorageFind(a),d=0;d<c.childsCount;d++)c.childNodes[d]._dmark=!0;this.waitUpdateXML=!0,b&&b.exists?this._parse(b,a):this._loadDynXML(a,b)},dhtmlXTreeObject.prototype.refreshItems=function(a,b){var c=a.toString().split(this.dlmtr);this.waitUpdateXML=new Array;for(var d=0;d<c.length;d++)this.waitUpdateXML[c[d]]=!0;this.loadXML((b||this.XMLsource)+getUrlSymbol(b||this.XMLsource)+"ids="+this._escape(a))},dhtmlXTreeObject.prototype.updateItem=function(a,b,c,d,e,f){var g=this._globalIdStorageFind(a);return g.userData=new cObject,b&&(g.label=b),g.images=new Array(c||this.imageArray[0],d||this.imageArray[1],e||this.imageArray[2]),this.setItemText(a,b),f&&this._setCheck(g,!0),this._correctPlus(g),g._dmark=!1,g},dhtmlXTreeObject.prototype.setDropHandler=function(a){this.attachEvent("onDrop",a)},dhtmlXTreeObject.prototype.setOnLoadingStart=function(a){this.attachEvent("onXLS",a)},dhtmlXTreeObject.prototype.setOnLoadingEnd=function(a){this.attachEvent("onXLE",a)},dhtmlXTreeObject.prototype.setXMLAutoLoadingBehaviour=function(a){this.xmlalb=a},dhtmlXTreeObject.prototype.enableSmartCheckboxes=function(a){this.smcheck=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.getXMLState=function(){return 1==this.xmlstate},dhtmlXTreeObject.prototype.setItemTopOffset=function(a,b){if("string"==typeof a)var c=this._globalIdStorageFind(a);else var c=a;for(var d=c.span.parentNode.parentNode,e=0;e<d.childNodes.length;e++){if(0!=e)d.childNodes[e].style.height=18+parseInt(b)+"px";else{var f=d.childNodes[e].firstChild;"DIV"!=d.childNodes[e].firstChild.tagName&&(f=document.createElement("DIV"),d.childNodes[e].insertBefore(f,d.childNodes[e].firstChild)),f.style.height=parseInt(b)+"px",c.parentObject.id==this.rootId&&c.parentObject.childNodes[0]==c||!this.treeLinesOn||(f.style.backgroundImage="url("+this.imPath+this.lineArray[5]+")"),f.innerHTML="&nbsp;",f.style.overflow="hidden",0==parseInt(b)&&d.childNodes[e].removeChild(f)}d.childNodes[e].vAlign="bottom"}},dhtmlXTreeObject.prototype.setIconSize=function(a,b,c){if(c){if(c&&c.span)var d=c;else var d=this._globalIdStorageFind(c);if(!d)return 0;var e=d.span.parentNode.previousSibling.childNodes[0];a&&(e.style.width=a,window._KHTMLrv&&(e.parentNode.style.width=a)),b&&(e.style.height=b,window._KHTMLrv&&(e.parentNode.style.height=b))}else this.def_img_x=a,this.def_img_y=b},dhtmlXTreeObject.prototype.getItemImage=function(a,b,c){var d=this._globalIdStorageFind(a);if(!d)return"";var e=d.images[b||0];return c&&(e=this.iconURL+e),e},dhtmlXTreeObject.prototype.enableRadioButtons=function(a,b){if(1==arguments.length)return this._frbtr=convertStringToBoolean(a),void(this.checkBoxOff=this.checkBoxOff||this._frbtr);var c=this._globalIdStorageFind(a);if(!c)return"";if(b=convertStringToBoolean(b),b&&!c._r_logic){c._r_logic=!0;for(var d=0;d<c.childsCount;d++)this._setCheck(c.childNodes[d],c.childNodes[d].checkstate)}if(!b&&c._r_logic){c._r_logic=!1;for(var d=0;d<c.childsCount;d++)this._setCheck(c.childNodes[d],c.childNodes[d].checkstate)}},dhtmlXTreeObject.prototype.enableSingleRadioMode=function(a){this._frbtrs=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.openOnItemAdded=function(a){this._hAdI=!convertStringToBoolean(a)},dhtmlXTreeObject.prototype.openOnItemAdding=function(a){this._hAdI=!convertStringToBoolean(a)},dhtmlXTreeObject.prototype.enableMultiLineItems=function(a){this.mlitems=a===!0?"100%":a},dhtmlXTreeObject.prototype.enableAutoTooltips=function(a){this.ettip=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.clearSelection=function(a){a?this._unselectItem(this._globalIdStorageFind(a)):this._unselectItems()},dhtmlXTreeObject.prototype.showItemSign=function(a,b){var c=this._globalIdStorageFind(a);if(!c)return 0;c.span.parentNode.previousSibling.previousSibling.previousSibling;convertStringToBoolean(b)?(c.closeble=!0,c.wsign=!1):(this._openItem(c),c.closeble=!1,c.wsign=!0),this._correctPlus(c)},dhtmlXTreeObject.prototype.showItemCheckbox=function(a,b){if(!a)for(var c in this._idpull)this.showItemCheckbox(this._idpull[c],b);if("object"!=typeof a&&(a=this._globalIdStorageFind(a,0,0)),!a)return 0;a.nocheckbox=!convertStringToBoolean(b);var d=a.span.parentNode.previousSibling.previousSibling.childNodes[0];d.style.display=a.nocheckbox?"none":"",window._KHTMLrv&&(d.parentNode.style.display=a.nocheckbox?"none":"")},dhtmlXTreeObject.prototype.setListDelimeter=function(a){this.dlmtr=a},dhtmlXTreeObject.prototype.setEscapingMode=function(a){this.utfesc=a},dhtmlXTreeObject.prototype.enableHighlighting=function(a){this.ehlt=!0,this.ehlta=convertStringToBoolean(a)},dhtmlXTreeObject.prototype._itemMouseOut=function(){var a=this.childNodes[3].parentObject,b=a.treeNod;b.callEvent("onMouseOut",[a.id]),a.id==b._l_onMSI&&(b._l_onMSI=null),b.ehlta&&(a.span.className=a.span.className.replace("_lor",""))},dhtmlXTreeObject.prototype._itemMouseIn=function(){var a=this.childNodes[3].parentObject,b=a.treeNod;b._l_onMSI!=a.id&&b.callEvent("onMouseIn",[a.id]),b._l_onMSI=a.id,b.ehlta&&(a.span.className=a.span.className.replace("_lor",""),a.span.className=a.span.className.replace(/((standart|selected)TreeRow)/,"$1_lor"))},dhtmlXTreeObject.prototype.enableActiveImages=function(a){this._aimgs=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.focusItem=function(a){var b=this._globalIdStorageFind(a);return b?void this._focusNode(b):0},dhtmlXTreeObject.prototype.getAllSubItems=function(a){return this._getAllSubItems(a)},dhtmlXTreeObject.prototype.getAllChildless=function(){return this._getAllScraggyItems(this.htmlNode)},dhtmlXTreeObject.prototype.getAllLeafs=dhtmlXTreeObject.prototype.getAllChildless,dhtmlXTreeObject.prototype._getAllScraggyItems=function(a){for(var b="",c=0;c<a.childsCount;c++)if(a.childNodes[c].unParsed||a.childNodes[c].childsCount>0){if(a.childNodes[c].unParsed)var d=this._getAllScraggyItemsXML(a.childNodes[c].unParsed,1);else var d=this._getAllScraggyItems(a.childNodes[c]);d&&(b?b+=this.dlmtr+d:b=d)}else b?b+=this.dlmtr+a.childNodes[c].id:b=a.childNodes[c].id;return b},dhtmlXTreeObject.prototype._getAllFatItems=function(a){for(var b="",c=0;c<a.childsCount;c++)if(a.childNodes[c].unParsed||a.childNodes[c].childsCount>0){if(b?b+=this.dlmtr+a.childNodes[c].id:b=a.childNodes[c].id,a.childNodes[c].unParsed)var d=this._getAllFatItemsXML(a.childNodes[c].unParsed,1);else var d=this._getAllFatItems(a.childNodes[c]);d&&(b+=this.dlmtr+d)}return b
},dhtmlXTreeObject.prototype.getAllItemsWithKids=function(){return this._getAllFatItems(this.htmlNode)},dhtmlXTreeObject.prototype.getAllFatItems=dhtmlXTreeObject.prototype.getAllItemsWithKids,dhtmlXTreeObject.prototype.getAllChecked=function(){return this._getAllChecked("","",1)},dhtmlXTreeObject.prototype.getAllUnchecked=function(a){return a&&(a=this._globalIdStorageFind(a)),this._getAllChecked(a,"",0)},dhtmlXTreeObject.prototype.getAllPartiallyChecked=function(){return this._getAllChecked("","",2)},dhtmlXTreeObject.prototype.getAllCheckedBranches=function(){var a=this._getAllChecked("","",1);return""!=a&&(a+=this.dlmtr),a+this._getAllChecked("","",2)},dhtmlXTreeObject.prototype._getAllChecked=function(a,b,c){a||(a=this.htmlNode),a.checkstate==c&&(a.nocheckbox||(b?b+=this.dlmtr+a.id:b=a.id));for(var d=a.childsCount,e=0;d>e;e++)b=this._getAllChecked(a.childNodes[e],b,c);return a.unParsed&&(b=this._getAllCheckedXML(a.unParsed,b,c)),b?b:""},dhtmlXTreeObject.prototype.setItemStyle=function(a,b){var c=this._globalIdStorageFind(a);return c?void(c.span.style.cssText?c.span.style.cssText+=";"+b:c.span.setAttribute("style",c.span.getAttribute("style")+";"+b)):0},dhtmlXTreeObject.prototype.enableImageDrag=function(a){this._itim_dg=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.setOnDragIn=function(a){this.attachEvent("onDragIn",a)},dhtmlXTreeObject.prototype.enableDragAndDropScrolling=function(a){this.autoScroll=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.setSkin=function(a){this.parentObject.className+=" dhxtree_"+a},dhtmlXTreeObject.prototype.parserExtension={_parseExtension:function(a,b){this._idpull[b.id]._attrs=b}},dhtmlXTreeObject.prototype.getAttribute=function(a,b){this._globalIdStorageFind(a);var c=this._idpull[a]._attrs;return c?c[b]:window.undefined},dhtmlXTreeObject.prototype.setAttribute=function(a,b,c){this._globalIdStorageFind(a);var d=this._idpull[a]._attrs||{};d[b]=c,this._idpull[a]._attrs=d},dhtmlXTreeObject.prototype.makeDraggable=function(a,b){"object"!=typeof a&&(a=document.getElementById(a)),dragger=new dhtmlDragAndDropObject,dropper=new dhx_dragSomethingInTree,dragger.addDraggableItem(a,dropper),a.dragLanding=null,a.ondragstart=dropper._preventNsDrag,a.onselectstart=new Function("return false;"),a.parentObject=new Object,a.parentObject.img=a,a.parentObject.treeNod=dropper,dropper._customDrop=b},dhtmlXTreeObject.prototype.makeDragable=dhtmlXTreeObject.prototype.makeDraggable,dhtmlXTreeObject.prototype.makeAllDraggable=function(a){for(var b=document.getElementsByTagName("div"),c=0;c<b.length;c++)b[c].getAttribute("dragInDhtmlXTree")&&this.makeDragable(b[c],a)},dhtmlXTreeObject.prototype.enableItemEditor=function(a){this._eItEd=convertStringToBoolean(a),this._eItEdFlag||(this._edn_click_IE=!0,this._edn_dblclick=!0,this._ie_aFunc=this.aFunc,this._ie_dblclickFuncHandler=this.dblclickFuncHandler,this.setOnDblClickHandler(function(a,b){return this._edn_dblclick&&this._editItem(a,b),!0}),this.setOnClickHandler(function(a,b){return this._stopEditItem(a,b),this.ed_hist_clcik==a&&this._edn_click_IE&&this._editItem(a,b),this.ed_hist_clcik=a,!0}),this._eItEdFlag=!0)},dhtmlXTreeObject.prototype.setOnEditHandler=function(a){this.attachEvent("onEdit",a)},dhtmlXTreeObject.prototype.setEditStartAction=function(a,b){this._edn_click_IE=convertStringToBoolean(a),this._edn_dblclick=convertStringToBoolean(b)},dhtmlXTreeObject.prototype._stopEdit=function(a){if(this._editCell&&(this.dADTempOff=this.dADTempOffEd,this._editCell.id!=a)){var b=!0;b=this.callEvent("onEdit",[2,this._editCell.id,this,this._editCell.span.childNodes[0].value]),b===!0?b=this._editCell.span.childNodes[0].value:b===!1&&(b=this._editCell._oldValue);var c=b!=this._editCell._oldValue;this._editCell.span.innerHTML=b,this._editCell.label=this._editCell.span.innerHTML;var d=this._editCell.i_sel?"selectedTreeRow":"standartTreeRow";this._editCell.span.className=d,this._editCell.span.parentNode.className="standartTreeRow",this._editCell.span.style.paddingRight=this._editCell.span.style.paddingLeft="5px",this._editCell.span.onclick=function(){};var e=this._editCell.id;this.childCalc&&this._fixChildCountLabel(this._editCell),this._editCell=null,this.callEvent("onEdit",[3,e,this,c]),this._enblkbrd&&(this.parentObject.lastChild.focus(),this.parentObject.lastChild.focus())}},dhtmlXTreeObject.prototype._stopEditItem=function(a){this._stopEdit(a)},dhtmlXTreeObject.prototype.stopEdit=function(){this._editCell&&this._stopEdit(this._editCell.id+"_non")},dhtmlXTreeObject.prototype.editItem=function(a){this._editItem(a,this)},dhtmlXTreeObject.prototype._editItem=function(a){if(this._eItEd){this._stopEdit();var b=this._globalIdStorageFind(a);if(!b)return;if(editText=this.callEvent("onEdit",[0,a,this,b.span.innerHTML]),editText===!0)editText=b.label;else if(editText===!1)return;this.dADTempOffEd=this.dADTempOff,this.dADTempOff=!1,this._editCell=b,b._oldValue=editText,b.span.innerHTML="<input type='text' class='intreeeditRow' />",b.span.style.paddingRight=b.span.style.paddingLeft="0px",b.span.childNodes[0].value=editText,b.span.childNodes[0].onselectstart=function(a){return(a||event).cancelBubble=!0,!0},b.span.childNodes[0].onmousedown=function(a){return(a||event).cancelBubble=!0,!0},b.span.childNodes[0].focus(),b.span.childNodes[0].focus(),b.span.onclick=function(a){return(a||event).cancelBubble=!0,!1},b.span.className="",b.span.parentNode.className="";var c=this;b.span.childNodes[0].onkeydown=function(a){a||(a=window.event),13==a.keyCode?(a.cancelBubble=!0,c._stopEdit(-1)):27==a.keyCode&&(c._editCell.span.childNodes[0].value=c._editCell._oldValue,c._stopEdit(-1)),(a||event).cancelBubble=!0},this.callEvent("onEdit",[1,a,this])}},jsonPointer.prototype={text:function(){var a=function(a){for(var c=[],d=0;d<a.length;d++)c.push("{"+b(a[d])+"}");return c.join(",")},b=function(c){var d=[];for(var e in c)d.push("object"==typeof c[e]?e.length?'"'+e+'":['+a(c[e])+"]":'"'+e+'":{'+b(c[e])+"}":'"'+e+'":"'+c[e]+'"');return d.join(",")};return"{"+b(this.d)+"}"},get:function(a){return this.d[a]},exists:function(){return!!this.d},content:function(){return this.d.content},each:function(a,b,c){var d=this.d[a],e=new jsonPointer;if(d)for(var f=0;f<d.length;f++)e.d=d[f],b.apply(c,[e,f])},get_all:function(){return this.d},sub:function(a){return new jsonPointer(this.d[a],this.d)},sub_exists:function(a){return!!this.d[a]},each_x:function(a,b,c,d,e){var f=this.d[a],g=new jsonPointer(0,this.d);if(f)for(e=e||0;e<f.length;e++)if(f[e][b]&&(g.d=f[e],-1==c.apply(d,[g,e])))return},up:function(){return new jsonPointer(this.dp,this.d)},set:function(a,b){this.d[a]=b},clone:function(){return new jsonPointer(this.d,this.dp)},through:function(a,b,c,d,e){var f=this.d[a];if(f.length)for(var g=0;g<f.length;g++){if(null!=f[g][b]&&""!=f[g][b]&&(!c||f[g][b]==c)){var h=new jsonPointer(f[g],this.d);d.apply(e,[h,g])}var i=this.d;this.d=f[g],this.sub_exists(a)&&this.through(a,b,c,d,e),this.d=i}}},dhtmlXTreeObject.prototype.loadJSArrayFile=function(file,afterCall){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]),this._ld_id=null,this.xmlstate=1;var that=this;this.XMLLoader=new dtmlXMLLoaderObject(function(){eval("var z="+arguments[4].xmlDoc.responseText),that.loadJSArray(z)},this,!0,this.no_cashe),afterCall&&(this.XMLLoader.waitCall=afterCall),this.XMLLoader.loadXML(file)},dhtmlXTreeObject.prototype.loadCSV=function(a,b){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]),this._ld_id=null,this.xmlstate=1;var c=this;this.XMLLoader=new dtmlXMLLoaderObject(function(){c.loadCSVString(arguments[4].xmlDoc.responseText)},this,!0,this.no_cashe),b&&(this.XMLLoader.waitCall=b),this.XMLLoader.loadXML(a)},dhtmlXTreeObject.prototype.loadJSArray=function(a,b){for(var c=[],d=0;d<a.length;d++)c[a[d][1]]||(c[a[d][1]]=[]),c[a[d][1]].push({id:a[d][0],text:a[d][2]});var e={id:this.rootId},f=function(a,b){if(c[a.id]){a.item=c[a.id];for(var d=0;d<a.item.length;d++)b(a.item[d],b)}};f(e,f),this.loadJSONObject(e,b)},dhtmlXTreeObject.prototype.loadCSVString=function(a,b){for(var c=[],d=a.split("\n"),e=0;e<d.length;e++){var f=d[e].split(",");c[f[1]]||(c[f[1]]=[]),c[f[1]].push({id:f[0],text:f[2]})}var g={id:this.rootId},h=function(a,b){if(c[a.id]){a.item=c[a.id];for(var d=0;d<a.item.length;d++)b(a.item[d],b)}};h(g,h),this.loadJSONObject(g,b)},dhtmlXTreeObject.prototype.loadJSONObject=function(a,b){this.parsCount||this.callEvent("onXLS",[this,null]),this.xmlstate=1;var c=new jsonPointer(a);this._parse(c),this._p=c,b&&b()},dhtmlXTreeObject.prototype.loadJSON=function(file,afterCall){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]),this._ld_id=null,this.xmlstate=1;var that=this;this.XMLLoader=new dtmlXMLLoaderObject(function(){eval("var t="+arguments[4].xmlDoc.responseText);var p=new jsonPointer(t);that._parse(p),that._p=p},this,!0,this.no_cashe),afterCall&&(this.XMLLoader.waitCall=afterCall),this.XMLLoader.loadXML(file)},dhtmlXTreeObject.prototype.serializeTreeToJSON=function(){for(var a=['{"id":"'+this.rootId+'", "item":['],b=[],c=0;c<this.htmlNode.childsCount;c++)b.push(this._serializeItemJSON(this.htmlNode.childNodes[c]));return a.push(b.join(",")),a.push("]}"),a.join("")},dhtmlXTreeObject.prototype._serializeItemJSON=function(a){var b=[];if(a.unParsed)return a.unParsed.text();if(this._selected.length)var c=this._selected[0].id;else c="";var d=a.span.innerHTML;if(this._xescapeEntities)for(var e=0;e<this._serEnts.length;e++)d=d.replace(this._serEnts[e][2],this._serEnts[e][1]);if(b.push(this._xfullXML?'{"id":"'+a.id+'", '+(1==this._getOpenState(a)?' "open":"1", ':"")+(c==a.id?' "select":"1",':"")+' "text":"'+d+'", "im0":"'+a.images[0]+'", "im1":"'+a.images[1]+'", "im2":"'+a.images[2]+'" '+(a.acolor?', "aCol":"'+a.acolor+'" ':"")+(a.scolor?', "sCol":"'+a.scolor+'" ':"")+(1==a.checkstate?', "checked":"1" ':2==a.checkstate?', "checked":"-1"':"")+(a.closeable?', "closeable":"1" ':""):'{"id":"'+a.id+'", '+(1==this._getOpenState(a)?' "open":"1", ':"")+(c==a.id?' "select":"1",':"")+' "text":"'+d+'"'+(this.XMLsource&&0==a.XMLload?', "child":"1" ':"")),this._xuserData&&a._userdatalist){b.push(', "userdata":[');for(var f=a._userdatalist.split(","),g=[],e=0;e<f.length;e++)g.push('{"name":"'+f[e]+'" , "content":"'+a.userData["t_"+f[e]]+'" }');b.push(g.join(",")),b.push("]")}if(a.childsCount){b.push(', "item":[');for(var g=[],e=0;e<a.childsCount;e++)g.push(this._serializeItemJSON(a.childNodes[e]));b.push(g.join(",")),b.push("]\n")}return b.push("}\n"),b.join("")},dhtmlXTreeObject.prototype.enableKeyboardNavigation=function(a){if(this._enblkbrd=convertStringToBoolean(a),this._enblkbrd){if(_isFF){var b=window.getComputedStyle(this.parentObject,null).position;"absolute"!=b&&"relative"!=b&&(this.parentObject.style.position="relative")}this._navKeys=[["up",38],["down",40],["open",39],["close",37],["call",13],["edit",113]];var c=this,b=document.createElement("INPUT");b.className="a_dhx_hidden_input",b.autocomplete="off",window._KHTMLrv&&(b.style.color="white"),this.parentObject.appendChild(b),this.parentObject.onkeydown=function(a){return c.callEvent("onKeyPress",[(a||window.event).keyCode,a||window.event])?c._onKeyDown(a||window.event):void 0},this.parentObject.onclick=function(){_isFF&&b.select(),(window._KHTMLrv||_isOpera)&&b.focus()}}else this.parentObject.onkeydown=null},dhtmlXTreeObject.prototype._onKeyDown=function(a){for(var b=0;b<this._navKeys.length;b++)if(this._navKeys[b][1]==a.keyCode)return this["_onkey_"+this._navKeys[b][0]].apply(this,[this.getSelectedItemId()]),a.preventDefault&&a.preventDefault(),(a||event).cancelBubble=!0,!1;return this._textSearch?this._searchItemByKey(a):!0},dhtmlXTreeObject.prototype._onkey_up=function(a){var b=this._globalIdStorageFind(a);if(b){var c=this._getPrevVisibleNode(b);c.id!=this.rootId&&(this.focusItem(c.id),this.selectItem(c.id,!1))}},dhtmlXTreeObject.prototype._onkey_down=function(a){var b=this._globalIdStorageFind(a);if(b){var c=this._getNextVisibleNode(b);c.id!=this.rootId&&(this.focusItem(c.id),this.selectItem(c.id,!1))}},dhtmlXTreeObject.prototype._onkey_open=function(a){this.openItem(a)},dhtmlXTreeObject.prototype._onkey_close=function(a){this.closeItem(a)},dhtmlXTreeObject.prototype._onkey_call=function(a){this.stopEdit?(this.stopEdit(),this.parentObject.lastChild.focus(),this.parentObject.lastChild.focus(),this.selectItem(a,!0)):this.selectItem(this.getSelectedItemId(),!0)},dhtmlXTreeObject.prototype._onkey_edit=function(a){this.editItem&&this.editItem(a)},dhtmlXTreeObject.prototype._getNextVisibleNode=function(a,b){return!b&&this._getOpenState(a)>0?a.childNodes[0]:a.tr&&a.tr.nextSibling&&a.tr.nextSibling.nodem?a.tr.nextSibling.nodem:a.parentObject?this._getNextVisibleNode(a.parentObject,1):a},dhtmlXTreeObject.prototype._getPrevVisibleNode=function(a){return a.tr&&a.tr.previousSibling&&a.tr.previousSibling.nodem?this._lastVisibleChild(a.tr.previousSibling.nodem):a.parentObject?a.parentObject:a},dhtmlXTreeObject.prototype._lastVisibleChild=function(a){return this._getOpenState(a)>0?this._lastVisibleChild(a.childNodes[a.childsCount-1]):a},dhtmlXTreeObject.prototype._searchItemByKey=function(a){if(8==a.keyCode)return this._textSearchString="",!0;var b=String.fromCharCode(a.keyCode).toUpperCase();return b.match(/[A-Z,a-z,0-9\ ]/)?(this._textSearchString+=b,this._textSearchInProgress=!0,(this.getSelectedItemText()||"").match(RegExp("^"+this._textSearchString,"i"))||this.findItem("^"+this._textSearchString,0),this._textSearchInProgress=!1,a.preventDefault&&a.preventDefault(),(a||event).cancelBubble=!0,!1):!0},dhtmlXTreeObject.prototype.assignKeys=function(a){this._navKeys=a},dhtmlXTreeObject.prototype.enableKeySearch=function(a){if(this._textSearch=convertStringToBoolean(a),this._textSearch){this._textSearchString="";var b=this;this._markItem2=this._markItem,this._markItem=function(a){b._textSearchInProgress||(b._textSearchString=""),b._markItem2(a)}}},dhtmlXTreeObject.prototype.enableLoadingItem=function(a){this.attachEvent("onXLS",this._showFakeItem),this.attachEvent("onXLE",this._hideFakeItem),this._tfi_text=a||"Loading..."},dhtmlXTreeObject.prototype._showFakeItem=function(a,b){if(null!==b&&!this._globalIdStorageFind("fake_load_xml_"+b)){var c=this.XMLsource;this.XMLsource=null,this.insertNewItem(b,"fake_load_xml_"+b,this._tfi_text),this.XMLsource=c}},dhtmlXTreeObject.prototype._hideFakeItem=function(a,b){null!==b&&this.deleteItem("fake_load_xml_"+b)},dhtmlXTreeObject.prototype.isLocked=function(a){return this._locker||this._init_lock(),1==this._locker[a]},dhtmlXTreeObject.prototype._lockItem=function(a,b,c){if(this._locker||this._init_lock(),b){if(1==this._locker[a.id])return;this._locker[a.id]=!0,a.bIm0=a.images[0],a.bIm1=a.images[1],a.bIm2=a.images[2],a.images[0]=this.lico0,a.images[1]=this.lico1,a.images[2]=this.lico2;var d=a.span.parentNode,e=d.previousSibling;this.dragger.removeDraggableItem(d),this.dragger.removeDraggableItem(e)}else{if(1!=this._locker[a.id])return;this._locker[a.id]=!1,a.images[0]=a.bIm0,a.images[1]=a.bIm1,a.images[2]=a.bIm2;var d=a.span.parentNode,e=d.previousSibling;this.dragger.addDraggableItem(d,this),this.dragger.addDraggableItem(e,this)}c||this._correctPlus(a)},dhtmlXTreeObject.prototype.lockItem=function(a,b){this._locker||this._init_lock(),this._lockOn=!1;var c=this._globalIdStorageFind(a);this._lockOn=!0,this._lockItem(c,convertStringToBoolean(b))},dhtmlXTreeObject.prototype.setLockedIcons=function(a,b,c){this._locker||this._init_lock(),this.lico0=a,this.lico1=b,this.lico2=c},dhtmlXTreeObject.prototype._init_lock=function(){this._locker=new Array,this._locker_count="0",this._lockOn=!0,this._globalIdStorageFindA=this._globalIdStorageFind,this._globalIdStorageFind=this._lockIdFind,this._serializeItem&&(this._serializeItemA=this._serializeItem,this._serializeItem=this._serializeLockItem,this._serializeTreeA=this.serializeTree,this.serializeTree=this._serializeLockTree),this.setLockedIcons(this.imageArray[0],this.imageArray[1],this.imageArray[2])},dhtmlXTreeObject.prototype._lockIdFind=function(a,b,c){return this.skipLock||c||1!=this._lockOn||1!=this._locker[a]?this._globalIdStorageFindA(a,b,c):null},dhtmlXTreeObject.prototype._serializeLockItem=function(a){return 1==this._locker[a.id]?"":this._serializeItemA(a)},dhtmlXTreeObject.prototype._serializeLockTree=function(){var a=this._serializeTreeA();return a.replace(/<item[^>]+locked\=\"1\"[^>]+\/>/g,"")},dhtmlXTreeObject.prototype._moveNodeToA=dhtmlXTreeObject.prototype._moveNodeTo,dhtmlXTreeObject.prototype._moveNodeTo=function(a,b,c){return b.treeNod.isLocked&&b.treeNod.isLocked(b.id)?!1:this._moveNodeToA(a,b,c)},dhtmlXTreeObject.prototype.lockTree=function(a){convertStringToBoolean(a)?this._initTreeLocker():this._TreeLocker&&(this._TreeLocker.parentNode.removeChild(this._TreeLocker),this._TreeLocker=null)},dhtmlXTreeObject.prototype._initTreeLocker=function(){if(!this._TreeLocker){this.parentObject.style.overflow="hidden","absolute"!=this.parentObject.style.position&&(this.parentObject.style.position="relative");var a=document.createElement("div");a.style.position="absolute",a.style.left="0px",a.style.top="0px",a.className="dhx_tree_opacity",a.style.width=this.allTree.offsetWidth+"px",a.style.backgroundColor="#FFFFFF",a.style.height=this.allTree.offsetHeight+"px",this._TreeLocker=a,this.parentObject.appendChild(this._TreeLocker)}},dhtmlXTreeObject.prototype.addPath=function(a,b,c,d){this.activatePaths(),c=c||{};for(var e=[],f=null,g=this._idpull[b],h=this._idpull[a];h!=f;)e.push({open:this._getOpenState(g),from:g.id,size:f?this._getIndex(f):0,to:f?f.id:null,style:"border-left:"+(c.width||1)+"px "+(c.mode||"solid")+" "+(c.color||"red")+";border-bottom:"+(c.width||1)+"px "+(c.mode||"solid")+" "+(c.color||"red")+";"}),f=g,g=g.parentObject;for(;!d||this._pathspull[d];)d=(d||0)+1;this._pathspull[d]={path:e,id:d},this._paths.push(this._pathspull[d]),this._renderPath(this._pathspull[d])},dhtmlXTreeObject.prototype.activatePaths=function(a){var b=this;this.attachEvent("onOpenEnd",function(){for(var a=0;a<b._paths.length;a++)b._clearPath(b._paths[a]),b._renderPath(b._paths[a])}),this.attachEvent("onXLE",function(){for(var a=b.XMLLoader.doXPath("//pathend"),c=b.XMLLoader.doXPath("//pathstart"),d={},e=0;e<c.length;e++)d[c[e].getAttribute("id")]=c[e];for(var e=0;e<c.length;e++){var f=a[e].parentNode,g=d[a[e].getAttribute("id")];this.addPath(g.parentNode.getAttribute("id"),f.getAttribute("id"),{color:g.getAttribute("color"),mode:g.getAttribute("mode"),width:g.getAttribute("width")},g.getAttribute("id"))}}),a?this._halfHeight=a:this._idpull[0].childsCount&&(this._halfHeight=Math.floor(this._idpull[0].childNodes[0].span.parentNode.offsetHeight/2)),this._halfHeight||(this._halfHeight=9),this.activatePaths=function(){}},dhtmlXTreeObject.prototype._clearPath=function(a){for(var b=a.path.length-1;b>0;b--){var c=a.path[b];c._html&&c._html.parentNode.removeChild(c._html),c._html=null}},dhtmlXTreeObject.prototype._renderPath=function(a){for(var b=this._idpull[a.path[a.path.length-1].from].span.parentNode.parentNode,c=(_isIE?9:8)+this._halfHeight,d=27;b.offsetParent!=this.allTree;)c+=b.offsetTop,d+=b.offsetLeft,b=b.offsetParent;for(var e=a.path.length-1;e>0;e--){var f=a.path[e],g=document.createElement("div");if(!this._idpull[f.to].tr.offsetHeight)return;var h=this._idpull[f.to].tr.offsetTop;g.style.cssText="position:absolute;z-index:-1;width:"+(_isIE?10:8)+"px;height:"+(h-9)+"px;left:"+d+"px;top:"+c+"px;"+f.style,c+=h,d+=18,this.allTree.appendChild(g),f._html=g}},dhtmlXTreeObject.prototype.deletePath=function(a){var b=this._pathspull[a];if(b){this._clearPath(b),delete this._pathspull[a];for(var c=0;c<this._paths.length;c++)if(this._paths[c]==b)return this._paths.splice(c,1)}},dhtmlXTreeObject.prototype.deleteAllPaths=function(){for(var a=this._paths.length-1;a>=0;a--)this.deletePath(this._paths[a].id)},dhtmlXTreeObject.prototype._paths=[],dhtmlXTreeObject.prototype._pathspull={},dhtmlXTreeObject.prototype.enableRTL=function(a){var b=convertStringToBoolean(a);(b&&!this.rtlMode||!b&&this.rtlMode)&&(this.rtlMode=b,this._switchToRTL(this.rtlMode))},dhtmlXTreeObject.prototype._switchToRTL=function(a){a?(this.allTree.className=this._ltr_line=this.lineArray,this._ltr_min=this.minusArray,this._ltr_plus=this.plusArray,this.lineArray=new Array("line2_rtl.gif","line3_rtl.gif","line4_rtl.gif","blank.gif","blank.gif","line1_rtl.gif"),this.minusArray=new Array("minus2_rtl.gif","minus3_rtl.gif","minus4_rtl.gif","minus.gif","minus5_rtl.gif"),this.plusArray=new Array("plus2_rtl.gif","plus3_rtl.gif","plus4_rtl.gif","plus.gif","plus5_rtl.gif"),this.allTree.className="containerTableStyleRTL"):(this.allTree.className="containerTableStyle",this.lineArray=this._ltr_line,this.minusArray=this._ltr_min,this.plusArray=this._ltr_plus),this.htmlNode.childsCount&&this._redrawFrom(this,this.htmlNode)},dhtmlXTreeObject.prototype.sortTree=function(a,b,c){var d=this._globalIdStorageFind(a);return d?void this._reorderBranch(d,"asc"==b.toString().toLowerCase(),convertStringToBoolean(c)):!1},dhtmlXTreeObject.prototype.setCustomSortFunction=function(a){this._csfunca=a},dhtmlXTreeObject.prototype._reorderBranch=function(a,b,c){var d=[],e=a.childsCount;if(e){for(var f=a.childNodes[0].tr.parentNode,g=0;e>g;g++)d[g]=a.childNodes[g],f.removeChild(d[g].tr);var h=this;d.sort(1==b?this._csfunca?function(a,b){return h._csfunca(a.id,b.id)}:function(a,b){return a.span.innerHTML.toUpperCase()>b.span.innerHTML.toUpperCase()?1:a.span.innerHTML.toUpperCase()==b.span.innerHTML.toUpperCase()?0:-1}:this._csfunca?function(a,b){return h._csfunca(b.id,a.id)}:function(a,b){return a.span.innerHTML.toUpperCase()<b.span.innerHTML.toUpperCase()?1:a.span.innerHTML.toUpperCase()==b.span.innerHTML.toUpperCase()?0:-1});for(var g=0;e>g;g++)f.appendChild(d[g].tr),a.childNodes[g]=d[g],c&&d[g].unParsed?d[g].unParsed.set("order",b?1:-1):c&&d[g].childsCount&&this._reorderBranch(d[g],b,c);for(var g=0;e>g;g++)this._correctPlus(d[g]),this._correctLine(d[g])}},dhtmlXTreeObject.prototype._reorderXMLBranch=function(a){var b=a.getAttribute("order");if("none"!=b){var c=1==b,d=a.childNodes.length;if(d){for(var e=new Array,f=0,g=0;d>g;g++)1==a.childNodes[g].nodeType&&(e[f]=a.childNodes[g],f++);for(var g=d-1;0!=g;g--)a.removeChild(a.childNodes[g]);e.sort(c?function(a,b){return a.getAttribute("text")>b.getAttribute("text")?1:a.getAttribute("text")==b.getAttribute("text")?0:-1}:function(a,b){return a.getAttribute("text")<b.getAttribute("text")?1:a.getAttribute("text")==b.getAttribute("text")?0:-1});for(var g=0;f>g;g++)e[g].setAttribute("order",b),a.appendChild(e[g]);a.setAttribute("order","none")}}},dhtmlXTreeObject.prototype.enableSmartRendering=function(){this.enableSmartXMLParsing(!0),this._srnd=!0,this.itemHeight=18;var a=this;this.allTree.onscroll=function(){a._srndT||(a._srndT=window.setTimeout(function(){a._srndT=null,a._renderState()},300))},this.attachEvent("onXLE",function(){a._renderState()}),this._singleTimeSRND()},dhtmlXTreeObject.prototype._renderState=function(){this._idpull[this.rootId]._sready||this.prepareSR(this.rootId,!0);var a=this.allTree.scrollTop,b=(Math.floor(a/this.itemHeight),Math.ceil(this.allTree.offsetHeight/this.itemHeight));this._group_render=!0,this._getItemByPos(a,this.itemHeight,b,null,!1,this._renderItemSRND),this._group_render=!1},dhtmlXTreeObject.prototype._renderItemSRND=function(a,b){if(!a.span){a.span=-1;for(var c=a.parentObject.htmlNode.childNodes[0].childNodes,d=b*this.itemHeight,e=null,f=1;f<c.length;f++){e=c[f];var g=e.nodem?this.itemHeight:e.offsetHeight||parseInt(e.childNodes[1].firstChild.style.height);if(d-=g,0>d){if(-1==d){d++;continue}var h=e.childNodes[1].firstChild;if(h.style.height=parseInt(h.style.height)-(g-Math.abs(d)+this.itemHeight)+"px",Math.abs(d)!=g){var i=this._drawNewHolder(d+g,!0);e.parentNode.insertBefore(i,e)}e.tr={nextSibling:e};break}}if(h&&"0px"!=h.style.height&&!e.offsetHeight){var j=this._hAdI;this._hAdI=!0}this._parseItem(a._sxml,a.parentObject,null,e),h&&"0px"!=h.style.height&&!e.offsetHeight&&(this._hAdI=j),a.unParsed&&this._correctPlus(a),h&&"0px"==h.style.height&&e.parentNode.removeChild(e)}},dhtmlXTreeObject.prototype._buildSRND=function(a,b){a.parentObject&&this._globalIdStorageFind(a.parentObject.id),this._idpull[this.rootId]._sready||this.prepareSR(this.rootId,!0),this._renderItemSRND(a,this._getIndex(a)),a.unParsed&&!b&&this.reParse(a,0),a.prepareSR||this.prepareSR(a.id)},dhtmlXTreeObject.prototype._getIndex=function(a){for(var b=0;b<a.parentObject.childsCount;b++)if(a.parentObject.childNodes[b]==a)return b},dhtmlXTreeObject.prototype.prepareSR=function(a,b){if(a=this._idpull[a],!a._sready){var c=this._drawNewHolder(this.itemHeight*a.childsCount,b);a.htmlNode.childNodes[0].appendChild(c),a._sready=!0}},dhtmlXTreeObject.prototype._drawNewHolder=function(a,b){var c=document.createElement("TR"),d=document.createElement("TD"),e=document.createElement("TD"),f=document.createElement("DIV");return f.innerHTML="&nbsp;",d.appendChild(f),c.appendChild(e),c.appendChild(d),b||(c.style.display="none"),f.style.height=a+"px",c},dhtmlXTreeObject.prototype._getNextNodeSR=function(a,b){return!b&&a.childsCount?a.childNodes[0]:a==this.htmlNode?-1:a.tr&&a.tr.nextSibling&&a.tr.nextSibling.nodem?a.tr.nextSibling.nodem:this._getNextNode(a.parentObject,!0)},dhtmlXTreeObject.prototype._getItemByPos=function(a,b,c,d,e,f){d||(this._pos_c=a,d=this._idpull[this.rootId]);for(var g=0;g<d.childsCount;g++){if(this._pos_c-=b,this._pos_c<=0&&(e=!0),e&&(f.apply(this,[d.childNodes[g],g]),c--),0>c)return c;if(d.childNodes[g]._open&&(c=this._getItemByPos(null,b,c,d.childNodes[g],e,f),0>c))return c}return c},dhtmlXTreeObject.prototype._addItemSRND=function(a,b,c){var d=this._idpull[a],e=d.childsCount,f=d.childNodes;f[e]=new dhtmlXTreeItemObject(b,"",d,this,null,1),itemId=f[e].id,f[e]._sxml=c.clone(),d.childsCount++},dhtmlXTreeObject.prototype._singleTimeSRND=function(){this._redrawFrom=function(){};var a=dhtmlXTreeItemObject;this._singleTimeSRND=function(){},window.dhtmlXTreeItemObject=function(b,c,d,e,f,g){return e._srnd?(this.htmlNode="",this.acolor="",this.scolor="",this.tr=0,this.childsCount=0,this.tempDOMM=0,this.tempDOMU=0,this.dragSpan=0,this.dragMove=0,this.span=0,this.closeble=1,this.childNodes=new Array,this.userData=new cObject,this.checkstate=0,this.treeNod=e,this.label=c,this.parentObject=d,this.actionHandler=f,this.images=new Array(e.imageArray[0],e.imageArray[1],e.imageArray[2]),this.id=e._globalIdStorageAdd(b,this),b==e.rootId&&(this.htmlNode=this.treeNod.checkBoxOff?this.treeNod._createItem(1,this,g):this.treeNod._createItem(0,this,g),this.htmlNode.objBelong=this),this):a.call(this,b,c,d,e,f,g)},this.setCheckSR=this.setCheck,this.setCheck=function(a,b){return this._globalIdStorageFind(a),this.setCheckSR(a,b)},this._get_srnd_p=function(a){for(var b=[];a!=this.rootId;){for(var c=this.getParentId(a),d=0;d<this._idpull[c].childsCount;d++)if(this._idpull[c].childNodes[d].id==a){b.push([c,d]);break}a=c}return b.reverse(),b},this._get_srnd_p_last=function(a,b,c){b=b||[];for(var d=0;;){var e=this._idpull[a];e._sxml&&this.findStrInXML(e._sxml.d,"text",c)&&this._globalIdStorageFind(e.id);var d=e.childsCount;if(!d)break;b.push([a,d-1]),a=e.childNodes[d-1].id}return b},this._get_prev_srnd=function(a,b){a.length||a.push.apply(a,this._get_srnd_p_last(0,null,b));var c=a[a.length-1];if(c[1]){c[1]--;var d=this._idpull[c[0]].childNodes[c[1]];this._get_srnd_p_last(d.id,a,b);var c=a[a.length-1];return this._idpull[c[0]].childNodes[c[1]]}if(a.pop(),!a.length)return this._get_prev_srnd(a,b);var c=a[a.length-1];return this._idpull[c[0]].childNodes[c[1]]},this._get_next_srnd=function(a,b){a.length||a.push([this.rootId,0]);var c=a[a.length-1],d=this._idpull[c[0]].childNodes[c[1]];if(d.childsCount&&!b)return a.push([d.id,0]),d.childNodes[0];c[1]++;var d=this._idpull[c[0]].childNodes[c[1]];return d?d:(a.pop(),a.length?this._get_next_srnd(a,!0):this.htmlNode)},this._findNodeByLabel=function(a,b,c){var a=a.replace(new RegExp("^( )+"),"").replace(new RegExp("( )+$"),"");a=new RegExp(a.replace(/([\*\+\\\[\]\(\)]{1})/gi,"\\$1").replace(/ /gi,".*"),"gi"),c||(c=this._selected[0],c||(c=this.htmlNode));for(var d=c,e=this._get_srnd_p(d.id);c=b?this._get_prev_srnd(e,a):this._get_next_srnd(e);){if(c.label){if(-1!=c.label.search(a))return c}else if(c._sxml){if(-1!=c._sxml.get("text").search(a))return c;this.findStrInXML(c._sxml.d,"text",a)&&this._globalIdStorageFind(c.id)}if(c.unParsed&&this.findStrInXML(c.unParsed.d,"text",a)&&this.reParse(c),d==c)break}return null},this.deleteChildItems=function(a){this.rootId==a&&(this._selected=new Array,this._idpull={},this._p=this._pos_c=this._pullSize=null,this.allTree.removeChild(this.htmlNode.htmlNode),this.htmlNode=new dhtmlXTreeItemObject(this.rootId,"",0,this),this.htmlNode.htmlNode.childNodes[0].childNodes[0].style.display="none",this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[0].className="hiddenRow",this.allTree.insertBefore(this.htmlNode.htmlNode,this.selectionBar),_isFF&&(this.allTree.childNodes[0].width="100%",this.allTree.childNodes[0].style.overflow="hidden"))},this._HideShow=function(a,b){if(this.XMLsource&&!a.XMLload){if(1==b)return;return a.XMLload=1,void this._loadDynXML(a.id)}if(a.span||this._buildSRND(a),a.unParsed&&(this.reParse(a),this.prepareSR(a.id)),0!=a.childsCount){var c=a.htmlNode.childNodes[0].childNodes,d=c.length;if(d>1){if("none"==c[1].style.display&&1!=b||2==b){var e="";a._open=!0}else{this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0";var e="none";a._open=!1}for(var f=1;d>f;f++)c[f].style.display=e;this._renderState()}this._correctPlus(a)}}},window.addEventListener?window.addEventListener("load",dhx_init_trees,!1):window.attachEvent&&window.attachEvent("onload",dhx_init_trees),dhtmlXTreeObject.prototype._serEnts=[["&","&amp;"],["<","&lt;"],[">","&gt;"]],dhtmlXTreeObject.prototype.registerXMLEntity=function(a,b){this._serEnts[this._serEnts.length]=[a,b,new RegExp(a,"g")]},dhtmlXTreeObject.prototype.setSerializationLevel=function(a,b,c,d,e){this._xuserData=convertStringToBoolean(a),this._xfullXML=convertStringToBoolean(b),this._dtd=e,this._xescapeEntities=convertStringToBoolean(c),convertStringToBoolean(d)&&(this._apreUC="<![CDATA[",this._apstUC="]]>");for(var f=0;f<this._serEnts.length;f++)this._serEnts[f][2]=new RegExp(this._serEnts[f][0],"g")},dhtmlXTreeObject.prototype.serializeTree=function(){this.stopEdit&&this.stopEdit(),this._apreUC=this._apreUC||"",this._apstUC=this._apstUC||"";var a='<?xml version="1.0"?>';if(this._dtd&&(a+='<!DOCTYPE tree SYSTEM "'+this._dtd+'">'),a+='<tree id="'+this.rootId+'">',this._xuserData&&this._idpull[this.rootId]._userdatalist)for(var b=this._idpull[this.rootId]._userdatalist.split(","),c=0;c<b.length;c++)a+='<userdata name="'+b[c]+'">'+this._apreUC+this._idpull[this.rootId].userData["t_"+b[c]]+this._apstUC+"</userdata>";for(var c=0;c<this.htmlNode.childsCount;c++)a+=this._serializeItem(this.htmlNode.childNodes[c]);return a+="</tree>"},dhtmlXTreeObject.prototype._serializeItem=function(a){if(a.unParsed){if(document.all)return a.unParsed.d.xml;var b=new XMLSerializer;return b.serializeToString(a.unParsed.d)}var c="";if(this._selected.length)var d=this._selected[0].id;else d='"';var e=a.span.innerHTML;if(this._xescapeEntities)for(var f=0;f<this._serEnts.length;f++)e=e.replace(this._serEnts[f][2],this._serEnts[f][1]);if(c=this._xfullXML?'<item id="'+a.id+'" '+(1==this._getOpenState(a)?' open="1" ':"")+(d==a.id?' select="1"':"")+' text="'+e+'" im0="'+a.images[0]+'" im1="'+a.images[1]+'" im2="'+a.images[2]+'" '+(a.acolor?'aCol="'+a.acolor+'" ':"")+(a.scolor?'sCol="'+a.scolor+'" ':"")+(1==a.checkstate?'checked="1" ':2==a.checkstate?'checked="-1"':"")+(a.closeable?'closeable="1" ':"")+">":'<item id="'+a.id+'" '+(1==this._getOpenState(a)?' open="1" ':"")+(d==a.id?' select="1"':"")+' text="'+e+'"'+(this.XMLsource&&0==a.XMLload?' child="1" ':"")+">",this._xuserData&&a._userdatalist)for(var g=a._userdatalist.split(","),f=0;f<g.length;f++)c+='<userdata name="'+g[f]+'">'+this._apreUC+a.userData["t_"+g[f]]+this._apstUC+"</userdata>";
for(var f=0;f<a.childsCount;f++)c+=this._serializeItem(a.childNodes[f]);return c+="</item>"},dhtmlXTreeObject.prototype.saveSelectedItem=function(a,b){a=a||"",this.setCookie("treeStateSelected"+a,this.getSelectedItemId(),b)},dhtmlXTreeObject.prototype.restoreSelectedItem=function(a){a=a||"";var b=this.getCookie("treeStateSelected"+a);this.selectItem(b,!1)},dhtmlXTreeObject.prototype.enableAutoSavingSelected=function(a,b){this.assMode=convertStringToBoolean(a),this.assMode&&!this.oldOnSelect&&(this.oldOnSelect=this.onRowSelect,this.onRowSelect=function(a,b,c){b||(b=this),b.parentObject.treeNod.oldOnSelect(a,b,c),b.parentObject.treeNod.assMode&&b.parentObject.treeNod.saveSelectedItem(b.parentObject.treeNod.assCookieName)}),this.assCookieName=b},dhtmlXTreeObject.prototype.saveState=function(a,b){var c=this._escape(this.serializeTree()),d=4e3;if(c.length>d){if(-1!=navigator.appName.indexOf("Microsoft"))return!1;this.setCookie("treeStatex"+a,Math.ceil(c.length/d));for(var e=0;e<Math.ceil(c.length/d);e++)this.setCookie("treeStatex"+a+"x"+e,c.substr(e*d,d),b)}else this.setCookie("treeStatex"+a,c,b);var c=this.getCookie("treeStatex"+a);return c?!0:(this.setCookie("treeStatex"+a,"",b),!1)},dhtmlXTreeObject.prototype.loadState=function(a){var b=this.getCookie("treeStatex"+a);if(!b)return!1;if(b.length){if(b.toString().length<4){for(var c="",d=0;b>d;d++)c+=this.getCookie("treeStatex"+a+"x"+d);b=c}this.loadXMLString("utf8"==this.utfesc?decodeURI(b):unescape(b))}return!0},dhtmlXTreeObject.prototype.setCookie=function(a,b,c){var d=a+"="+b+(c?";"+c:"");document.cookie=d},dhtmlXTreeObject.prototype.getCookie=function(a){var b=a+"=";if(document.cookie.length>0){var c=document.cookie.indexOf(b);if(-1!=c){c+=b.length;var d=document.cookie.indexOf(";",c);return-1==d&&(d=document.cookie.length),document.cookie.substring(c,d)}}},dhtmlXTreeObject.prototype.saveOpenStates=function(a,b){for(var c=[],d=0;d<this.htmlNode.childsCount;d++)c=c.concat(this._collectOpenStates(this.htmlNode.childNodes[d]));c=c.join(this.dlmtr),this.setCookie("treeOpenStatex"+a,c,b)},dhtmlXTreeObject.prototype.loadOpenStates=function(a){for(var b=0;b<this.htmlNode.childsCount;b++)this._xcloseAll(this.htmlNode.childNodes[b]);this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0";var c=getCookie("treeOpenStatex"+a);if(c)for(var d=c.split(this.dlmtr),b=0;b<d.length;b++){var e=this._globalIdStorageFind(d[b]);if(e){if(this.XMLsource&&!e.XMLload&&e.id!=this.rootId)return void this._delayedLoad(e,"loadOpenStates('"+a+"')");this.openItem(d[b])}}this.callEvent("onAllOpenDynamic",[])},dhtmlXTreeObject.prototype._delayedLoad=function(a,b){this.afterLoadMethod=b,this.onLoadReserve=this.onXLE,this.onXLE=this._delayedLoadStep2,this.loadXML(this.XMLsource+getUrlSymbol(this.XMLsource)+"id="+this._escape(a.id))},dhtmlXTreeObject.prototype._delayedLoadStep2=function(tree){tree.onXLE=tree.onLoadReserve,window.setTimeout(function(){eval("tree."+tree.afterLoadMethod)},100),tree.onXLE&&tree.onXLE(tree),tree.callEvent("onXLE",[tree])},dhtmlXTreeObject.prototype._collectOpenStates=function(a){var b=[];if(1==this._getOpenState(a)){b.push(a.id);for(var c=0;c<a.childsCount;c++)b=b.concat(this._collectOpenStates(a.childNodes[c]))}return b},dhtmlXTreeObject.prototype.openAllItemsDynamic=function(a){this.ClosedElem=new Array,this.G_node=null;var b=this._globalIdStorageFind(a||this.rootId);b.id!=this.rootId&&0!=this.getOpenState(b.id)&&this.openItem(a),this._openAllNodeChilds(b,0),this.ClosedElem.length>0&&(this.onLoadReserve=this.onXLE,this.onXLE=this._loadAndOpen,this._loadAndOpen(this))},dhtmlXTreeObject.prototype._openAllNodeChilds=function(a){(0==a.XMLload||a.unParsed)&&this.ClosedElem.push(a);for(var b=0;b<a.childsCount;b++)this._getOpenState(a.childNodes[b])<0&&this._HideShow(a.childNodes[b],2),a.childNodes[b].childsCount>0&&this._openAllNodeChilds(a.childNodes[b]),(0==a.childNodes[b].XMLload||a.childNodes[b].unParsed)&&this.ClosedElem.push(a.childNodes[b])},dhtmlXTreeObject.prototype._loadAndOpen=function(a){a.G_node&&(a._openItem(a.G_node),a._openAllNodeChilds(a.G_node),a.G_node=null),a.ClosedElem.length>0&&(a.G_node=a.ClosedElem.shift()),a.G_node?a.G_node.unParsed?a.reParse(a.G_node):window.setTimeout(function(){a._loadDynXML(a.G_node.id)},100):(a.onXLE=a.onLoadReserve,a.onXLE&&a.onXLE(a),a.callEvent("onAllOpenDynamic",[a]))},dhtmlXTreeObject.prototype.openItemsDynamic=function(a,b){this.onXLE!=this._stepOpen&&(this._opnItmsDnmcFlg=convertStringToBoolean(b),this.onLoadReserve=this.onXLE,this.onXLE=this._stepOpen,this.ClosedElem=a.split(",").reverse(),this._stepOpen(this))},dhtmlXTreeObject.prototype._stepOpen=function(a){if(!a.ClosedElem.length)return a.onXLE=a.onLoadReserve,a._opnItmsDnmcFlg&&a.selectItem(a.G_node,!0),a.onXLE&&arguments[1]&&a.onXLE.apply(a,arguments),void a.callEvent("onOpenDynamicEnd",[]);a.G_node=a.ClosedElem.pop();var b=a._globalIdStorageFind(a.G_node);0===b.XMLload?a.openItem(a.G_node):(a.openItem(a.G_node),a._stepOpen(a))},dhtmlXGridObject.prototype._updateTGRState=function(a){a.update&&0!=a.id&&(this.rowsAr[a.id].imgTag&&(this.rowsAr[a.id].imgTag.src=this.imgURL+a.state+".gif"),a.update=!1)},dhtmlXGridObject.prototype.doExpand=function(a){this.editStop();var b=a.parentNode.parentNode.parentNode,c=this._h2.get[b.idd];this.callEvent("onOpen",[b.idd,"plus"==c.state?-1:1])&&("plus"==c.state?this.expandKids(b):"minus"!=c.state||c._closeable||this.collapseKids(b))},dhtmlXGridObject.prototype._getOpenLenght=function(a,b){var c=this._h2.get[a].childs;b+=c.length;for(var d=0;d<c.length;d++)c[d].childs.length&&"minus"==c[d].state&&(b+=this._getOpenLenght(c[d].id,0));return b},dhtmlXGridObject.prototype.collapseKids=function(a){var b=this._h2.get[a.idd];if("minus"==b.state&&this.callEvent("onOpenStart",[a.idd,1])){var c=a.rowIndex;if(0>c&&(c=this.rowsCol._dhx_find(a)+1),this._h2.change(b.id,"state","plus"),this._updateTGRState(b),this._srnd||this.pagingOn)this._h2_to_buff(),this._renderSort();else{for(var d=this._getOpenLenght(this.rowsCol[c-1].idd,0),e=0;d>e;e++)this.rowsCol[c+e].parentNode.removeChild(this.rowsCol[c+e]);this.rowsCol.splice(c,d)}this.callEvent("onGridReconstructed",[]),this.setSizes(),this._h2_to_buff(),this.callEvent("onOpenEnd",[a.idd,-1])}},dhtmlXGridObject.prototype._massInsert=function(a,b,c){var d=[],e=_isKHTML?this.obj:this.obj.rows[0].parentNode;if(this._h2_to_buff(),this._srnd||this.pagingOn)return this._renderSort();for(var f=this._getOpenLenght(a.id,0),g=0;f>g;g++){var h=this.render_row(c+g);b?b.parentNode.insertBefore(h,b):e.appendChild(h),d.push(h)}return this.rowsCol=dhtmlxArray(this.rowsCol.slice(0,c).concat(d).concat(this.rowsCol.slice(c))),a.childs.length+d.length},dhtmlXGridObject.prototype.expandKids=function(a,b){var c=this._h2.get[a.idd];if((c.childs.length||c._xml_await)&&"plus"==c.state&&(c._loading||b||this.callEvent("onOpenStart",[c.id,-1]))){var d=this.getRowIndex(c.id)+1;if(c.childs.length){c._loading=!1,this._h2.change(c.id,"state","minus"),this._updateTGRState(c);{this._massInsert(c,this.rowsCol[d],d)}this.callEvent("onGridReconstructed",[])}else c._xml_await&&(c._loading=!0,this.callEvent("onDynXLS",[c.id])&&this.loadXML(this.kidsXmlFile+""+(-1!=this.kidsXmlFile.indexOf("?")?"&":"?")+"id="+c.id));this.setSizes(),c._loading||this.callEvent("onOpenEnd",[c.id,1]),this._fixAlterCss()}},dhtmlXGridObject.prototype.kidsXmlFile="",dhtmlXGridObject.prototype.sortTreeRows=function(a,b,c){var d="getValue";this.cells5({parentNode:{grid:this}},this.getColType(a)).getDate&&(d="getDate",b="str"),this.forEachRow(function(c){var e=this._h2.get[c];if(e){var f=this._get_cell_value(e.buff,a,d);"int"==b?(e._sort=parseFloat(f),e._sort=isNaN(e._sort)?-99999999999999:e._sort):e._sort=f}});var e=this,f=1,g=-1;"des"==c&&(f=-1,g=1);var h=null;"cus"==b&&(h=function(b,d){return e._customSorts[a](b._sort,d._sort,c,b.id,d.id)}),"str"==b&&(h=function(a,b){return a._sort<b._sort?g:a._sort==b._sort?0:f}),"int"==b&&(h=function(a,b){return a._sort<b._sort?g:a._sort==b._sort?0:f}),"date"==b&&(h=function(a,b){return(Date.parse(new Date(a._sort||"01/01/1900"))-Date.parse(new Date(b._sort||"01/01/1900")))*f}),this._sortTreeRows(h,0),this._renderSort(0,!0),this.callEvent("onGridReconstructed",[])},dhtmlXGridObject.prototype._sortTreeRows=function(a,b){var c=this._h2.get[b].childs;c.sort(a);for(var d=0;d<c.length;d++)c[d].childs.length&&this._sortTreeRows(a,c[d].id),c[d].index=d},dhtmlXGridObject.prototype._renderSort=function(){this._h2_to_buff();var a=this.objBox.scrollTop;this._reset_view(),this.objBox.scrollTop=a},dhtmlXGridObject.prototype._fixAlterCssTGR=function(){this._h2.forEachChild(0,function(a){if("TR"==a.buff.tagName){var b=a.level%2?this._cssUnEven:this._cssEven;this.rowsAr[a.id].className=b+(this._cssSU?" "+b+"_"+a.level:"")+" "+(this.rowsAr[a.id]._css||"")+(-1!=this.rowsAr[a.id].className.indexOf("rowselected")?" rowselected":"")}},this)},dhtmlXGridObject.prototype.moveRowUDTG=function(a,b){var c=this._h2.get[a],d=c.parent.childs[c.index+b];if(d&&d.parent==c.parent){var e=[c.state,d.state];this.collapseKids(this.rowsAr[c.id]),this.collapseKids(this.rowsAr[d.id]);var f=this.rowsCol._dhx_find(this.rowsAr[a]),g=this.rowsBuffer._dhx_find(this.rowsAr[a]),h=this.obj.rows[0].parentNode.removeChild(this.rowsCol[f]),i=this.rowsCol[f+(1==b?2:b)];i?i.parentNode.insertBefore(h,i):this.obj.rows[0].parentNode.appendChild(h),this.rowsCol._dhx_swapItems(f,f+b),this.rowsBuffer._dhx_swapItems(g,g+b),this._h2.swap(d,c),"minus"==e[0]&&this.expandKids(this.rowsAr[c.id]),"minus"==e[1]&&this.expandKids(this.rowsAr[d.id]),this._fixAlterCss(Math.min(f,f+b))}},eXcell_tree.prototype=new eXcell,eXcell_tree.prototype.setValueA=function(a){this.cell.parentNode.valTag.innerHTML=a,this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,a])},eXcell_tree.prototype.setValue=function(a){if(this.cell.parentNode.imgTag)return this.setLabel(a);if(null==this.grid._tgc.imgURL||this.grid._tgc.imgURL!=this.grid.imgURL){var b={};b.spacer="<img src='"+this.grid.imgURL+"blank.gif' align='absmiddle' class='space'>",b.imst="<img src='"+this.grid.imgURL,b.imsti="<img src='"+(this.grid.iconURL||this.grid.imgURL),b.imact="' align='absmiddle' onclick='this."+(_isKHTML?"":"parentNode.")+"parentNode.parentNode.parentNode.parentNode.grid.doExpand(this);event.cancelBubble=true;'>",b.plus=b.imst+"plus.gif"+b.imact,b.minus=b.imst+"minus.gif"+b.imact,b.blank=b.imst+"blank.gif"+b.imact,b.start="<div style=' overflow:hidden;white-space : nowrap;height:"+(_isIE?20:18)+"px;'>",b.itemim="' align='absmiddle' "+(this.grid._img_height?' height="'+this.grid._img_height+'"':"")+(this.grid._img_width?' width="'+this.grid._img_width+'"':"")+" ><span "+(_isFF?"style='position:relative;top:2px;'":"")+"id='nodeval'>",b.close="</span></div>",this.grid._tgc=b}var b=(this.grid._h2,this.grid._tgc),c=this.cell.parentNode.idd,d=this.grid._h2.get[c];(this.grid.kidsXmlFile||this.grid._slowParse)&&(d.has_kids=d.has_kids||this.cell.parentNode._attrs.xmlkids&&"minus"!=d.state,d._xml_await=!!d.has_kids),d.image=d.image||this.cell._attrs.image||"leaf.gif",d.label=a;for(var e=[b.start],f=0;f<d.level;f++)e.push(b.spacer);d.has_kids?(e.push(b.plus),d.state="plus"):e.push(b.imst+d.state+".gif"+b.imact),e.push(b.imsti),e.push(d.image),e.push(b.itemim),e.push(d.label),e.push(b.close),this.cell.innerHTML=e.join(""),this.cell.parentNode.imgTag=this.cell.childNodes[0].childNodes[d.level],this.cell.parentNode.valTag=this.cell.childNodes[0].childNodes[d.level+2],_isKHTML&&(this.cell.vAlign="top"),0!=d.parent.id&&"plus"==d.parent.state&&(this.grid._updateTGRState(d.parent,!1),this.cell.parentNode._skipInsert=!0),this.grid.callEvent("onCellChanged",[c,this.cell._cellIndex,a])},dhtmlXGridObject.prototype._process_tree_xml=function(a,b,c){this._parsing=!0;var d=!1;b||(this.render_row=this.render_row_tree,d=!0,b=a.getXMLTopNode(this.xml.top),c=b.getAttribute("parent")||0,"0"==c&&(c=0),this._h2||(this._h2=new dhtmlxHierarchy),this._fake&&(this._fake._h2=this._h2));var e=a.doXPath(this.xml.row,b);this._open=this._open||[];for(var f=0;f<e.length;f++){var g=e[f].getAttribute("id"),h=this._h2.add(g,c);h.buff={idd:g,data:e[f],_parser:this._process_xml_row,_locator:this._get_xml_data},e[f].getAttribute("open")&&(h.state="minus",this._open.push(g)),this.rowsAr[g]=h.buff,this._process_tree_xml(a,e[f],g)}if(d){e.length?0==c||this._srnd||this._h2.change(c,"state","minus"):this._h2.change(c,"state",dhtmlXGridObject._emptyLineImg);for(var f=0;f<this._open.length;f++){var i=this._h2.get[this._open[f]];i.childs.length||(i.state=dhtmlXGridObject._emptyLineImg)}if(this._updateTGRState(this._h2.get[c]),this._h2_to_buff(),0!=c&&this._srnd?this.openItem(c):this.render_dataset(),this.kidsXmlFile)for(var f=0;f<this._open.length;f++){var i=this._h2.get[this._open[f]];i._xml_await&&this.expandKids({idd:i.id})}return this._open=[],this._slowParse===!1&&this.forEachRow(function(a){this.render_row_tree(0,a)}),this._parsing=!1,a.xmlDoc.responseXML?a.xmlDoc.responseXML:a.xmlDoc}},dhtmlXGridObject.prototype._h2_to_buff=function(a){a||(a=this._h2.get[0],this.rowsBuffer=new dhtmlxArray);for(var b=0;b<a.childs.length;b++)this.rowsBuffer.push(a.childs[b].buff),"minus"==a.childs[b].state&&this._h2_to_buff(a.childs[b])},dhtmlXGridObject.prototype.render_row_tree=function(a,b){if(b){var c=this._h2.get[b];c=c?c.buff:c}else var c=this.rowsBuffer[a];if(!c)return-1;if(c._parser){if(this.rowsAr[c.idd]&&"TR"==this.rowsAr[c.idd].tagName)return this._h2.get[c.idd].buff=this.rowsBuffer[a]=this.rowsAr[c.idd];var d=this._prepareRow(c.idd);return this.rowsAr[c.idd]=d,b||(this.rowsBuffer[a]=d),this._h2.get[c.idd].buff=d,c._parser.call(this,d,c.data),this._postRowProcessing(d),d}return c},dhtmlXGridObject.prototype._removeTrGrRow=function(a,b){if(b)return void this._h2.forEachChild(b.id,function(a){this._removeTrGrRow(null,a),delete this.rowsAr[a.id]},this);var c=this.getRowIndex(a.idd),b=this._h2.get[a.idd];if(-1!=c&&c!==this.undefined){var d=1;b&&"minus"==b.state&&(d+=this._getOpenLenght(b.id,0));for(var e=0;d>e;e++)this.rowsCol[e+c]&&this.rowsCol[e+c].parentNode.removeChild(this.rowsCol[e+c]);if(this._fake)for(var e=0;d>e;e++)this._fake.rowsCol[e+c].parentNode.removeChild(this._fake.rowsCol[e+c]);this.rowsCol.splice(c,d),this.rowsBuffer.splice(c,d)}b&&(this._removeTrGrRow(null,b),delete this.rowsAr[b.id],1==b.parent.childs.length&&(this._h2.change(b.parent.id,"state",dhtmlXGridObject._emptyLineImg),this._updateTGRState(b.parent)),this._h2.remove(b.id))},dhtmlXGridObject.prototype.openItem=function(a){var b=this._h2.get[a||0],c=this.getRowById(a||0);c&&(b.parent&&0!=b.parent.id&&this.openItem(b.parent.id),this.expandKids(c))},dhtmlXGridObject.prototype._addRowClassic=dhtmlXGridObject.prototype.addRow,dhtmlXGridObject.prototype.addRow=function(a,b,c,d,e,f){if(!this._h2)return this._addRowClassic(a,b,c);d=d||0;this.cellType._dhx_find("tree");"string"==typeof b&&(b=b.split(this.delim));var g=this._h2.get[a];return g||(0==d?c=this.rowsBuffer.length:(c=this.getRowIndex(d)+1,"minus"==this._h2.get[d].state?c+=this._getOpenLenght(d,0):this._skipInsert=!0)),g=g||this._h2.add(a,d),g.image=e,g.has_kids=f,g.buff=this._addRowClassic(a,b,c)},dhtmlXGridObject.prototype.addRowBefore=function(a,b,c,d,e){var f=this.rowsAr[c];if(f){if(!this._h2)return this.addRow(a,b,this.getRowIndex(c));var g=this._h2.get[c].parent.id,h=this.getRowIndex(c);return this._h2.addBefore(a,g,c),this.addRow(a,b,h,this._h2.get[c].parent.id,d,e)}},dhtmlXGridObject.prototype.addRowAfter=function(a,b,c,d,e){var f=this.rowsAr[c];if(f){if(!this._h2)return this.addRow(a,b,this.getRowIndex(c)+1);var g=this._h2.get[c].parent.id,h=this.getRowIndex(c);return"minus"==this._h2.get[c].state?h+=this._getOpenLenght(c,0)+1:h++,this._h2.addAfter(a,g,c),this.addRow(a,b,h,g,d,e)}},dhtmlXGridObject.prototype.enableSmartXMLParsing=function(a){this._slowParse=convertStringToBoolean(a)},dhtmlXGridObject.prototype._copyTreeGridRowContent=function(a,b,c){var d=this.cellType._dhx_find("tree");for(i=0;i<a.cells.length;i++)i!=d?this.cells(c,i).setValue(this.cells(b,i).getValue()):this.cells(c,i).setValueA(this.cells(b,i).getValue())},dhtmlXGridObject.prototype.closeItem=function(a){var b=this.getRowById(a);b&&this.collapseKids(b)},dhtmlXGridObject.prototype.deleteChildItems=function(a){var b=this._h2.get[a];if(b)for(;b.childs.length;)this.deleteRow(b.childs[0].id)},dhtmlXGridObject.prototype.getAllSubItems=function(a){var b=[],c=this._h2.get[a||0];if(c)for(var d=0;d<c.childs.length;d++)b.push(c.childs[d].id),c.childs[d].childs.length&&(b=b.concat(this.getAllSubItems(c.childs[d].id).split(this.delim)));return b.join(this.delim)},dhtmlXGridObject.prototype.getChildItemIdByIndex=function(a,b){var c=this._h2.get[a||0];return c&&c.childs[b]?c.childs[b].id:null},dhtmlXGridObject.prototype.getItemText=function(a){return this.cells(a,this.cellType._dhx_find("tree")).getLabel()},dhtmlXGridObject.prototype.getOpenState=function(a){var b=this._h2.get[a||0];if(b)return"minus"==b.state?!0:!1},dhtmlXGridObject.prototype.getParentId=function(a){var b=this._h2.get[a||0];return b&&b.parent?b.parent.id:null},dhtmlXGridObject.prototype.getSubItems=function(a){var b=[],c=this._h2.get[a||0];if(c)for(var d=0;d<c.childs.length;d++)b.push(c.childs[d].id);return b.join(this.delim)},dhtmlXGridObject.prototype.expandAll=function(){this._renderAllExpand(0),this._h2_to_buff(),this._reset_view(),this.setSizes(),this.callEvent("onGridReconstructed",[]),this._redrawLines&&this._redrawLines()},dhtmlXGridObject.prototype._renderAllExpand=function(a){for(var b=this._h2.get[a].childs,c=0;c<b.length;c++)b[c].childs.length&&(this._h2.change(b[c].id,"state","minus"),this._updateTGRState(b[c]),this._renderAllExpand(b[c].id))},dhtmlXGridObject.prototype.collapseAll=function(){this._h2.forEachChild(0,function(a){a&&"minus"==a.state&&(a.state="plus",a.update=!0,this._updateTGRState(a))},this),this._h2_to_buff(),this._reset_view(),this.setSizes(),this.callEvent("onGridReconstructed",[]),this._redrawLines&&this._redrawLines()},dhtmlXGridObject.prototype.hasChildren=function(a){var b=this._h2.get[a];return b&&b.childs.length?b.childs.length:b._xml_await?-1:0},dhtmlXGridObject.prototype.setItemCloseable=function(a,b){var c=this._h2.get[a];c&&(c._closeable=!convertStringToBoolean(b))},dhtmlXGridObject.prototype.setItemText=function(a,b){return this.cells(a,this.cellType._dhx_find("tree")).setLabel(b)},dhtmlXGridObject.prototype.setItemImage=function(a,b){this._h2.get[a].image=b,this.rowsAr[a].imgTag.nextSibling.src=b},dhtmlXGridObject.prototype.getItemImage=function(a){return this.getRowById(a),this._h2.get[a].image},dhtmlXGridObject.prototype.setImageSize=function(a,b){this._img_width=a,this._img_height=b},dhtmlXGridObject.prototype._getRowImage=function(a){return this._h2.get[a.idd].image},dhtmlXGridObject.prototype.setOnOpenStartHandler=function(a){this.attachEvent("onOpenStart",a)},dhtmlXGridObject.prototype.setOnOpenEndHandler=function(a){this.attachEvent("onOpenEnd",a)},dhtmlXGridObject.prototype.enableTreeCellEdit=function(a){this._edtc=!convertStringToBoolean(a)},dhtmlXGridObject.prototype.getLevel=function(a){var b=this._h2.get[a||0];return b?b.level:-1},dhtmlXGridObject.prototype._fixHiddenRowsAllTG=function(a,b){for(i in this.rowsAr)this.rowsAr[i]&&this.rowsAr[i].childNodes&&(this.rowsAr[i].childNodes[a].style.display=b)},dhtmlXGridObject._emptyLineImg="blank",dhtmlXGridObject.prototype.enableTreeGridLines=function(){arguments[0]!==!1&&(dhtmlXGridObject._emptyLineImg="line",this._updateTGRState=function(a,b){!b&&a.update&&0!=a.id&&(this._updateLine(a,this.rowsAr[a.id]),a.update=!1)},this._updateLine=function(a,b){if(b=b||this.rowsAr[a.id]){var c=b.imgTag;if(c){if("blank"==a.state)return c.src=this.imgURL+"blank.gif";var d=1;d=0==a.index&&0==a.level?a.parent.childs.length-1>a.index?3:1:a.parent.childs.length-1>a.index?3:2,c.src=this.imgURL+a.state+d+".gif"}}},this._updateParentLine=function(a,b){if(b=b||this.rowsAr[a.id]){var c=b.imgTag;if(c)for(var d=a.level;d>0&&0!=a.id;d--)c=c.previousSibling,a=a.parent,c.src=a.parent.childs.length-1>a.index?this.imgURL+"line1.gif":this.imgURL+"blank.gif"}},this._renderSortA=this._renderSort,this._renderSort=function(){this._renderSortA.apply(this,arguments),this._redrawLines(0)},this._redrawLines=function(a){this._h2.forEachChild(a||0,function(a){this._updateLine(a),this._updateParentLine(a)},this)},this._tgle=!0,this.attachEvent("onXLE",function(a,b,c){this._redrawLines(c)}),this.attachEvent("onOpenEnd",function(a){this._redrawLines(a)}),this.attachEvent("onRowAdded",function(a){var b=this._h2.get[a];this._updateLine(b),this._updateParentLine(b),b.index<b.parent.childs.length-1?(b=b.parent.childs[b.index+1],this._updateLine(b),this._updateParentLine(b)):0!=b.index&&(b=b.parent.childs[b.index-1],this._updateLine(b),this._updateParentLine(b),b.childs.length&&this._h2.forEachChild(b.id,function(a){this._updateParentLine(a)},this))}),this.attachEvent("onOpen",function(a,b){if(b)for(var c=this._h2.get[a],d=0;d<c.childs.length;d++)this._updateParentLine(c.childs[d]);return!0}),this.attachEvent("onBeforeRowDeleted",function(a){var b=this,c=this._h2.get[a],d=null;return 0!=c.index&&(d=c.parent.childs[c.index-1]),c=c.parent,window.setTimeout(function(){c=this._h2.get[c.id],c&&(b._updateLine(c),b._updateParentLine(c),d&&(b._updateLine(d),"minus"==d.state&&b._h2.forEachChild(d.id,function(a){b._updateParentLine(a)},this)))},1),!0}))},dhtmlXGridObject.prototype.setFiltrationLevel=function(a,b,c){this._tr_strfltr=a,this._tr_fltr_c=b,this._tr_fltr_d=c,this.refreshFilters()},dhtmlXGridObject.prototype.filterTreeBy=function(a,b,c){var d=this._h2;"undefined"==typeof this._tr_strfltr&&(this._tr_strfltr=-1),this._f_rowsBuffer?c||(this._h2=this._f_rowsBuffer,this._fake&&(this._fake._h2=this._h2)):this._f_rowsBuffer=this._h2;if(this.dma(!0),this._fbf={},"object"==typeof a)for(var e=0;e<b.length;e++)this._filterTreeA(a[e],b[e]);else this._filterTreeA(a,b);this._fbf=null,this.dma(!1),this._fix_filtered_images(this._h2,d),this._renderSort(),this.callEvent("onGridReconstructed",[])},dhtmlXGridObject.prototype._filterTreeA=function(a,b){if(""!=b){var c=!0;"function"==typeof b?c=!1:b=(b||"").toString().toLowerCase();var d,e=function(a,b,c){var d=c.get[a.parent.id];d||(d=e(a.parent,b,c));var c=g.get[a.id];return c||(c={id:a.id,childs:[],level:a.level,parent:d,index:d.childs.length,image:a.image,state:a.state,buff:a.buff,has_kids:a.has_kids},d.childs.push(c),g.get[c.id]=c),c},f=this._fbf,g=new dhtmlxHierarchy,h=this._tr_strfltr,i=this,j=function(a){for(var b=0;b<a.childs.length;b++)i.temp(a.childs[b])};switch(h.toString()){case"-2":d=function(a){return f[a.id]?!1:(j(a),!0)};break;case"-1":d=function(a){return!a.childs.length};break;default:d=function(a){return h==a.level}}this.temp=function(i){return 0!=i.id&&d(i)?(c?-1!=this._get_cell_value(i.buff,a).toString().toLowerCase().indexOf(b):b(this._get_cell_value(i.buff,a),i.id))?(e(i,this._h2,g),i.childs&&-2!=h&&this._h2.forEachChild(i.id,function(a){e(a,this._h2,g)},this),!0):(f[i.id]=!0,this._tr_fltr_c&&e(i.parent,this._h2,g),!1):(this._tr_fltr_d&&this._tr_strfltr>i.level&&0!=i.id&&e(i,this._h2,g),void j(i))},this.temp(this._h2.get[0]),this._h2=g,this._fake&&(this._fake._h2=this._h2)}},dhtmlXGridObject.prototype._fix_filtered_images=function(a,b){a.forEachChild(0,function(a){if(a.childs.length||a.has_kids){if("TR"==a.buff.tagName){var c=b.get[a.id];c&&"blank"!=c.state&&(a.state=c.state),a.update=!0,this._updateTGRState(a)}}else a.state!=dhtmlXGridObject._emptyLineImg&&(a.state=dhtmlXGridObject._emptyLineImg,a.update=!0,this._updateTGRState(a))},this)},dhtmlXGridObject.prototype.collectTreeValues=function(a){"undefined"==typeof this._tr_strfltr&&(this._tr_strfltr=-1),this.dma(!0),this._build_m_order(),a=this._m_order?this._m_order[a]:a;var b={},c=[],e=this._f_rowsBuffer||this._h2;e.forEachChild(0,function(c){if(-2==this._tr_strfltr||-1==this._tr_strfltr&&!c.childs.length||this._tr_strfltr==c.level){var d=this._get_cell_value(c.buff,a);d&&(b[d]=!0)}},this),this.dma(!1);var f=this.combos[a];for(d in b)b[d]===!0&&c.push(f?f.get(d)||d:d);return c.sort()},dhtmlXGridObject.prototype._in_header_stat_tree_total=function(a,b,c){var d=function(){var a=0;return this._h2.forEachChild(0,function(c){var d=parseFloat(this._get_cell_value(c.buff||this.rowsAr[c.id],b));a+=isNaN(d)?0:d},this),this._maskArr[b]?this._aplNF(a,b):Math.round(100*a)/100};this._stat_in_header(a,d,b,c,c)},dhtmlXGridObject.prototype._in_header_stat_tree_total_leaf=function(a,b,c){var d=function(){var a=0;return this._h2.forEachChild(0,function(c){if(!c.childs.length){var d=parseFloat(this._get_cell_value(c.buff||this.rowsAr[c.id],b));a+=isNaN(d)?0:d}},this),this._maskArr[b]?this._aplNF(a,b):Math.round(100*a)/100};this._stat_in_header(a,d,b,c,c)},dhtmlXGridObject.prototype._in_header_stat_tree_multi_total=function(a,b,c){var d=c[1].split(":");c[1]="";var e=function(){var a=0;return this._h2.forEachChild(0,function(b){var c=parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],d[0]))*parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],d[1]));a+=isNaN(c)?0:c},this),this._maskArr[b]?this._aplNF(a,b):Math.round(100*a)/100};this._stat_in_header(a,e,b,c,c)},dhtmlXGridObject.prototype._in_header_stat_tree_multi_total_leaf=function(a,b,c){var d=c[1].split(":");c[1]="";var e=function(){var a=0;return this._h2.forEachChild(0,function(b){if(!b.childs.length){var c=parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],d[0]))*parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],d[1]));a+=isNaN(c)?0:c}},this),this._maskArr[b]?this._aplNF(a,b):Math.round(100*a)/100};this._stat_in_header(a,e,b,c,c)},dhtmlXGridObject.prototype._in_header_stat_tree_max=function(a,b,c){var d=function(){var a=-999999999;return 0==this.getRowsNum()?"":(this._h2.forEachChild(0,function(c){var d=parseFloat(this._get_cell_value(c.buff||this.rowsAr[c.id],b));isNaN(d)||(a=Math.max(a,d))},this),this._maskArr[b]?this._aplNF(a,b):a)};this._stat_in_header(a,d,b,c)},dhtmlXGridObject.prototype._in_header_stat_tree_min=function(a,b,c){var d=function(){var a=999999999;return 0==this.getRowsNum()?"":(this._h2.forEachChild(0,function(c){var d=parseFloat(this._get_cell_value(c.buff||this.rowsAr[c.id],b));isNaN(d)||(a=Math.min(a,d))},this),this._maskArr[b]?this._aplNF(a,b):a)};this._stat_in_header(a,d,b,c)},dhtmlXGridObject.prototype._in_header_stat_tree_average=function(a,b,c){var d=function(){var a=0,c=0;return this._h2.forEachChild(0,function(d){var e=parseFloat(this._get_cell_value(d.buff||this.rowsAr[d.id],b));a+=isNaN(e)?0:e,c++},this),this._maskArr[b]?this._aplNF(a,b):Math.round(a/c*100)/100};this._stat_in_header(a,d,b,c)},dhtmlXGridObject.prototype._in_header_stat_tree_max_leaf=function(a,b,c){var d=function(){var a=-999999999;return 0==this.getRowsNum()?"":(this._h2.forEachChild(0,function(c){if(!c.childs.length){var d=parseFloat(this._get_cell_value(c.buff||this.rowsAr[c.id],b));isNaN(d)||(a=Math.max(a,d))}},this),this._maskArr[b]?this._aplNF(a,b):a)};this._stat_in_header(a,d,b,c)},dhtmlXGridObject.prototype._in_header_stat_tree_min_leaf=function(a,b,c){var d=function(){var a=999999999;return 0==this.getRowsNum()?"":(this._h2.forEachChild(0,function(c){if(!c.childs.length){var d=parseFloat(this._get_cell_value(c.buff||this.rowsAr[c.id],b));isNaN(d)||(a=Math.min(a,d))}},this),this._maskArr[b]?this._aplNF(a,b):a)};this._stat_in_header(a,d,b,c)},dhtmlXGridObject.prototype._in_header_stat_tree_average_leaf=function(a,b,c){var d=function(){var a=0,c=0;return this._h2.forEachChild(0,function(d){if(!d.childs.length){var e=parseFloat(this._get_cell_value(d.buff||this.rowsAr[d.id],b));a+=isNaN(e)?0:e,c++}},this),this._maskArr[b]?this._aplNF(a,b):Math.round(a/c*100)/100};this._stat_in_header(a,d,b,c)},dhtmlXGridObject.prototype._in_header_stat_tree_count=function(a,b,c){var d=function(){var a=0;return this._h2.forEachChild(0,function(){a++},this),a};this._stat_in_header(a,d,b,c)},dhtmlXGridObject.prototype._in_header_stat_tree_count_leaf=function(a,b,c){var d=function(){var a=0;return this._h2.forEachChild(0,function(b){b.childs.length||a++},this),a};this._stat_in_header(a,d,b,c)},dhtmlXGridObject.prototype._stat_in_header=function(a,b,c,d){var e=function(){this.dma(!0),a.innerHTML=(d[0]?d[0]:"")+b.call(this)+(d[1]?d[1]:""),this.dma(!1),this.callEvent("onStatReady",[])};this._stat_events||(this._stat_events=[],this.attachEvent("onClearAll",function(){if(!this.hdr.rows[1]){for(var a=0;a<this._stat_events.length;a++)for(var b=0;4>b;b++)this.detachEvent(this._stat_events[a][b]);this._stat_events=[]}})),this._stat_events.push([this.attachEvent("onGridReconstructed",e),this.attachEvent("onXLE",e),this.attachEvent("onFilterEnd",e),this.attachEvent("onEditCell",function(a,b,d){return 2==a&&d==c&&e.call(this),!0})]),a.innerHTML=""},dataProcessor.prototype={setTransactionMode:function(a,b){this._tMode=a,this._tSend=b},escape:function(a){return this._utf?encodeURIComponent(a):escape(a)},enableUTFencoding:function(a){this._utf=convertStringToBoolean(a)},setDataColumns:function(a){this._columns="string"==typeof a?a.split(","):a},getSyncState:function(){return!this.updatedRows.length},enableDataNames:function(a){this._endnm=convertStringToBoolean(a)},enablePartialDataSend:function(a){this._changed=convertStringToBoolean(a)},setUpdateMode:function(a,b){this.autoUpdate="cell"==a,this.updateMode=a,this.dnd=b},setUpdated:function(a,b,c){var d=this.findRow(a);c=c||"updated";var e=this.obj.getUserData(a,this.action_param);if(e&&"updated"==c&&(c=e),b?(this.set_invalid(a,!1),this.updatedRows[d]=a,this.obj.setUserData(a,this.action_param,c)):this.is_invalid(a)||(this.updatedRows.splice(d,1),this.obj.setUserData(a,this.action_param,"")),!b&&"tree"!=this.obj.mytype){var f=this.obj.getRowById(a);if(f)for(var g=0;g<this.obj._cCount;g++)this.obj.cells(a,g).cell.wasChanged=!1}this.markRow(a,b,c),b&&this.autoUpdate&&this.sendData(a)},markRow:function(a,b,c){var d="",e=this.is_invalid(a);if(e&&(d=this.styles[e],b=!0),this.callEvent("onRowMark",[a,b,c,e])){var f="tree"==this.obj.mytype?"setItemStyle":"setRowTextStyle";if(d+=b?this.styles[c]:this.styles.clear,this.obj[f](a,d),e&&e.details){d+=this.styles[e+"_cell"];for(var g=0;g<e.details.length;g++)e.details[g]&&this.obj.setCellTextStyle(a,g,d)}}},getState:function(a){return this.obj.getUserData(a,this.action_param)},is_invalid:function(a){return this._invalid[a]},set_invalid:function(a,b,c){c&&(b={value:b,details:c,toString:function(){return this.value.toString()}}),this._invalid[a]=b},checkBeforeUpdate:function(a){var b=!0,c=[];if("deleted"!=this.getState(a))for(var d=0;d<this.obj._cCount;d++)if(this.mandatoryFields[d]){var e=this.mandatoryFields[d].call(this.obj,this.obj.cells(a,d).getValue(),a,d);"string"==typeof e?this.messages.push(e):(b&=e,c[d]=!e)}return b||(this.set_invalid(a,"invalid",c),this.setUpdated(a,!1)),b},sendData:function(a){return!this._waitMode||"tree"!=this.obj.mytype&&!this.obj._h2?(this.obj.editStop&&this.obj.editStop(),this.obj.linked_form&&this.obj.linked_form.update(),"undefined"==typeof a||this._tSend?this.sendAllData():this._in_progress[a]?!1:(this.messages=[],!this.checkBeforeUpdate(a)&&this.callEvent("onValidatationError",[a,this.messages])?!1:void this._beforeSendData(this._getRowData(a),a))):void 0},_beforeSendData:function(a,b){return this.callEvent("onBeforeUpdate",[b,this.getState(b)])?void this._sendData(a,b):!1},_sendData:function(a,b){if(a){if(b&&(this._in_progress[b]=(new Date).valueOf()),!this.callEvent("onBeforeDataSending",b?[b,this.getState(b)]:[]))return!1;var c=new dtmlXMLLoaderObject(this.afterUpdate,this,!0),d=this.serverProcessor;"POST"!=this._tMode?c.loadXML(d+(-1!=d.indexOf("?")?"&":"?")+a):c.loadXML(d,!0,a),this._waitMode++}},sendAllData:function(){if(this.updatedRows.length){this.messages=[];for(var a=!0,b=0;b<this.updatedRows.length;b++)a&=this.checkBeforeUpdate(this.updatedRows[b]);if(!a&&!this.callEvent("onValidatationError",["",this.messages]))return!1;if(this._tSend)this._sendData(this._getAllData());
else for(var b=0;b<this.updatedRows.length;b++)if(!this._in_progress[this.updatedRows[b]]){if(this.is_invalid(this.updatedRows[b]))continue;if(this._beforeSendData(this._getRowData(this.updatedRows[b]),this.updatedRows[b]),this._waitMode&&("tree"==this.obj.mytype||this.obj._h2))return}}},_getAllData:function(){for(var a=new Array,b=new Array,c=0;c<this.updatedRows.length;c++){var d=this.updatedRows[c];this._in_progress[d]||this.is_invalid(d)||this.callEvent("onBeforeUpdate",[d,this.getState(d)])&&(a[a.length]=this._getRowData(d,d+"_"),b[b.length]=d,this._in_progress[d]=(new Date).valueOf())}return a.length&&(a[a.length]="ids="+b.join(",")),a.join("&")},_getRowData:function(a,b){if(b=b||"","tree"==this.obj.mytype){var c=this.obj._globalIdStorageFind(a),d=c.parentObject,e=0;for(e=0;e<d.childsCount&&d.childNodes[e]!=c;e++);var f=b+"tr_id="+this.escape(c.id);for(f+="&"+b+"tr_pid="+this.escape(d.id),f+="&"+b+"tr_order="+e,f+="&"+b+"tr_text="+this.escape(c.span.innerHTML),d=(c._userdatalist||"").split(","),e=0;e<d.length;e++)f+="&"+b+this.escape(d[e])+"="+this.escape(c.userData["t_"+d[e]])}else{var f=b+"gr_id="+this.escape(a);this.obj.isTreeGrid()&&(f+="&"+b+"gr_pid="+this.escape(this.obj.getParentId(a)));for(var g=this.obj.getRowById(a),e=0;e<this.obj._cCount;e++){if(this.obj._c_order)var h=this.obj._c_order[e];else var h=e;var i=this.obj.cells(g.idd,e);(!this._changed||i.wasChanged())&&(f+=this._endnm?"&"+b+this.obj.getColumnId(e)+"="+this.escape(i.getValue()):"&"+b+"c"+h+"="+this.escape(i.getValue()))}var j=this.obj.UserData[a];if(j)for(var k=0;k<j.keys.length;k++)0!=j.keys[k].indexOf("__")&&(f+="&"+b+j.keys[k]+"="+this.escape(j.values[k]));var j=this.obj.UserData.gridglobaluserdata;if(j)for(var k=0;k<j.keys.length;k++)f+="&"+b+j.keys[k]+"="+this.escape(j.values[k])}return this.obj.linked_form&&(f+=this.obj.linked_form.get_serialized(a,b)),f},setVerificator:function(a,b){this.mandatoryFields[a]=b||function(a){return""!=a}},clearVerificator:function(a){this.mandatoryFields[a]=!1},findRow:function(a){var b=0;for(b=0;b<this.updatedRows.length&&a!=this.updatedRows[b];b++);return b},defineAction:function(a,b){this._uActions||(this._uActions=[]),this._uActions[a]=b},afterUpdateCallback:function(a,b,c,d){delete this._in_progress[a];var e="error"!=c&&"invalid"!=c;if(e||this.set_invalid(a,c),!this._uActions||!this._uActions[c]||this._uActions[c](d)){this.setUpdated(a,!1);switch(c){case"inserted":case"insert":b!=a&&("tree"==this.obj.mytype?this.obj.changeItemId(a,b):this.obj.changeRowId(a,b),a=b);break;case"delete":case"deleted":return this.obj.setUserData(a,this.action_param,"true_deleted"),"tree"==this.obj.mytype?this.obj.deleteItem(a):this.obj.deleteRow(a),this.callEvent("onAfterUpdate",[a,c,b,d])}e&&this.obj.setUserData(a,this.action_param,""),this.callEvent("onAfterUpdate",[a,c,b,d])}},afterUpdate:function(a,b,c,d,e){var f=e.getXMLTopNode("data");if("data"!=f.tagName)return!1;if(e.xmlDoc.responseXML){for(var g=e.doXPath("//data/action"),h=0;h<g.length;h++){var i=g[h],j=i.getAttribute("type"),k=i.getAttribute("sid"),l=i.getAttribute("tid");a.afterUpdateCallback(k,l,j,i)}a._waitMode&&a._waitMode--,("tree"==a.obj.mytype||a.obj._h2)&&a.updatedRows.length&&a.sendData(),a.callEvent("onAfterUpdateFinish",[]),a.updatedRows.length&&a.callEvent("onFullSync",[])}},init:function(a){this.obj=a;var b=this;"tree"==this.obj.mytype?(this.obj.attachEvent("onEdit",function(a,c,d,e){return 3==a&&e&&b.setUpdated(c,!0),!0}),this.obj.attachEvent("onDrop",function(a,c,d,e,f){e==f&&b.setUpdated(a,!0)}),this.obj._onrdlh=function(a){return"true_deleted"==b.getState(a)?!0:(b.setUpdated(a,!0,"deleted"),!1)},this.obj._onradh=function(a){b.setUpdated(a,!0,"inserted")}):(this.obj.attachEvent("onEditCell",function(a,c,d){if(b._columns&&!b._columns[d])return!0;var e=b.obj.cells(c,d);return 1==a?e.isCheckbox()&&b.setUpdated(c,!0):2==a&&e.wasChanged()&&b.setUpdated(c,!0),!0}),this.obj.attachEvent("onRowPaste",function(a){b.setUpdated(a,!0)}),this.obj.attachEvent("onRowIdChange",function(a,c){var d=b.findRow(a);d<b.updatedRows.length&&(b.updatedRows[d]=c)}),this.obj.attachEvent("onSelectStateChanged",function(){return"row"==b.updateMode&&b.sendData(),!0}),this.obj.attachEvent("onEnter",function(){return"row"==b.updateMode&&b.sendData(),!0}),this.obj.attachEvent("onBeforeRowDeleted",function(a){if(this.dragContext&&b.dnd)return window.setTimeout(function(){b.setUpdated(a,!0)},1),!0;var c=b.getState(a);return this._h2&&this._h2.forEachChild(a,function(a){b.setUpdated(a.id,!1),b.markRow(a.id,!0,"deleted")},this),"inserted"==c?(b.setUpdated(a,!1),!0):"deleted"==c?!1:"true_deleted"==c?!0:(b.setUpdated(a,!0,"deleted"),!1)}),this.obj.attachEvent("onRowAdded",function(a){return this.dragContext&&b.dnd?!0:(b.setUpdated(a,!0,"inserted"),!0)}),this.obj.on_form_update=function(a){return b.setUpdated(a,!0),!0})},link_form:function(a){a.on_update=this.obj.on_form_update},setOnAfterUpdate:function(a){this.attachEvent("onAfterUpdate",a)},enableDebug:function(){},setOnBeforeUpdateHandler:function(a){this.attachEvent("onBeforeDataSending",a)}};var dhtmlXCombo_optionTypes=[];dhtmlXCombo.prototype.setSize=function(a){this.DOMlist.style.width=a+"px",this.DOMlistF&&(this.DOMlistF.style.width=a+"px"),this.DOMelem.style.width=a+"px",this.DOMelem_input.style.width=Math.max(0,a-19)-("default"==this.optionType?0:18)+"px"},dhtmlXCombo.prototype.enableFilteringMode=function(a,b,c,d){this._filter=convertStringToBoolean(a),b&&(this._xml=b,this._autoxml=convertStringToBoolean(d)),convertStringToBoolean(c)&&(this._xmlCache=[])},dhtmlXCombo.prototype.setFilteringParam=function(a,b){this._prs||(this._prs=[]),this._prs.push([a,b])},dhtmlXCombo.prototype.disable=function(a){var b=convertStringToBoolean(a);this._disabled!=b&&(this.DOMelem_input.disabled=b,this._disabled=b)},dhtmlXCombo.prototype.readonly=function(a,b){if(this.DOMelem_input.readOnly=a?!0:!1,b===!1||a===!1)this.DOMelem.onkeyup=function(){};else{var c=this;this.DOMelem.onkeyup=function(a){if(a=a||window.event,9!=a.keyCode&&(a.cancelBubble=!0),a.keyCode>=48&&a.keyCode<=57||a.keyCode>=65&&a.keyCode<=90){for(var b=0;b<c.optionsArr.length;b++){var d=c.optionsArr[b].text;if(0==d.toString().toUpperCase().indexOf(String.fromCharCode(a.keyCode))){c.selectOption(b);break}}a.cancelBubble=!0}}}},dhtmlXCombo.prototype.getOption=function(a){for(var b=0;b<this.optionsArr.length;b++)if(this.optionsArr[b].value==a)return this.optionsArr[b];return null},dhtmlXCombo.prototype.getOptionByLabel=function(a){for(var b=0;b<this.optionsArr.length;b++)if(this.optionsArr[b].text==a||this.optionsArr[b]._ctext==a)return this.optionsArr[b];return null},dhtmlXCombo.prototype.getOptionByIndex=function(a){return this.optionsArr[a]},dhtmlXCombo.prototype.clearAll=function(a){a&&this.setComboText(""),this.optionsArr=new Array,this.redrawOptions(),a&&this._confirmSelection()},dhtmlXCombo.prototype.deleteOption=function(a){var b=this.getIndexByValue(a);0>b||(this.optionsArr[b]==this._selOption&&(this._selOption=null),this.optionsArr.splice(b,1),this.redrawOptions())},dhtmlXCombo.prototype.render=function(a){this._skiprender=!convertStringToBoolean(a),this.redrawOptions()},dhtmlXCombo.prototype.updateOption=function(a,b,c,d){var e=this.getOption(a);"object"!=typeof b&&(b={text:c,value:b,css:d}),e.setValue(b),this.redrawOptions()},dhtmlXCombo.prototype.addOption=function(a){args=arguments[0].length&&"object"==typeof arguments[0]?a:[arguments],this.render(!1);for(var b=0;b<args.length;b++){var c=args[b];c.length&&(c.value=c[0]||"",c.text=c[1]||"",c.css=c[2]||""),this._addOption(c)}this.render(!0)},dhtmlXCombo.prototype._addOption=function(a){dOpt=new this._optionObject,this.optionsArr.push(dOpt),dOpt.setValue.apply(dOpt,[a]),this.redrawOptions()},dhtmlXCombo.prototype.getIndexByValue=function(a){for(var b=0;b<this.optionsArr.length;b++)if(this.optionsArr[b].value==a)return b;return-1},dhtmlXCombo.prototype.getSelectedValue=function(){return this._selOption?this._selOption.value:null},dhtmlXCombo.prototype.getComboText=function(){return this.DOMelem_input.value},dhtmlXCombo.prototype.setComboText=function(a){this.DOMelem_input.value=a},dhtmlXCombo.prototype.setComboValue=function(a){this.setComboText(a);for(var b=0;b<this.optionsArr.length;b++)if(this.optionsArr[b].data()[0]==a)return this.selectOption(b,null,!0);this.DOMelem_hidden_input.value=a},dhtmlXCombo.prototype.getActualValue=function(){return this.DOMelem_hidden_input.value},dhtmlXCombo.prototype.getSelectedText=function(){return this._selOption?this._selOption.text:""},dhtmlXCombo.prototype.getSelectedIndex=function(){for(var a=0;a<this.optionsArr.length;a++)if(this.optionsArr[a]==this._selOption)return a;return-1},dhtmlXCombo.prototype.setName=function(a){this.DOMelem_hidden_input.name=a,this.DOMelem_hidden_input2=a+"_new_value",this.name=a},dhtmlXCombo.prototype.show=function(a){this.DOMelem.style.display=convertStringToBoolean(a)?"":"none"},dhtmlXCombo.prototype.destructor=function(){var a=this._inID;this.DOMParent.removeChild(this.DOMelem),this.DOMlist.parentNode.removeChild(this.DOMlist);var b=dhx_glbSelectAr;this.DOMParent=this.DOMlist=this.DOMelem=0,this.DOMlist.combo=this.DOMelem.combo=0;for(var c=0;c<b.length;c++)if(b[c]._inID==a)return b[c]=null,void b.splice(c,1)},dhtmlXCombo.prototype._createSelf=function(a,b,c,d){if(-1!=c.toString().indexOf("%")){var e=this,f=parseInt(c)/100;window.setInterval(function(){if(a.parentNode){var b=a.parentNode.offsetWidth*f-2;0>b||b!=e._lastTs&&e.setSize(e._lastTs=b)}},500);var c=parseInt(a.offsetWidth)}var c=parseInt(c||100);this.ListPosition="Bottom",this.DOMParent=a,this._inID=null,this.name=b,this._selOption=null,this.optionsArr=Array();var g=new this._optionObject;g.DrawHeader(this,b,c,d),this.DOMlist=document.createElement("DIV"),this.DOMlist.className="dhx_combo_list",this.rtl&&(this.DOMlist.className="dhx_combo_list_rtl"),this.DOMlist.style.width=c-0+"px",(_isOpera||_isKHTML)&&(this.DOMlist.style.overflow="auto"),this.DOMlist.style.display="none",document.body.insertBefore(this.DOMlist,document.body.firstChild),_isIE&&(this.DOMlistF=document.createElement("IFRAME"),this.DOMlistF.style.border="0px",this.DOMlistF.className="dhx_combo_list",this.DOMlistF.style.width=c-0+"px",this.DOMlistF.style.display="none",this.DOMlistF.src="javascript:false;",document.body.insertBefore(this.DOMlistF,document.body.firstChild)),this.DOMlist.combo=this.DOMelem.combo=this,this.DOMelem_input.onkeydown=this._onKey,this.DOMelem_input.onkeypress=this._onKeyF,this.DOMelem_input.onblur=this._onBlur,this.DOMelem.onclick=this._toggleSelect,this.DOMlist.onclick=this._selectOption,this.DOMlist.onmousedown=function(){this._skipBlur=!0},this.DOMlist.onkeydown=function(a){this.combo.DOMelem_input.focus(),(a||event).cancelBubble=!0,this.combo.DOMelem_input.onkeydown(a)},this.DOMlist.onmouseover=this._listOver},dhtmlXCombo.prototype._listOver=function(a){a=a||event,a.cancelBubble=!0;var b=_isIE?event.srcElement:a.target,c=this.combo;if(b.parentNode==c.DOMlist){c._selOption&&c._selOption.deselect(),c._tempSel&&c._tempSel.deselect();var d=0;for(d;d<c.DOMlist.childNodes.length&&c.DOMlist.childNodes[d]!=b;d++);var e=c.optionsArr[d];c._tempSel=e,c._tempSel.select(),c._autoxml&&d+1==c._lastLength&&c._fetchOptions(d+1,c._lasttext||"")}},dhtmlXCombo.prototype._positList=function(){var a=this.getPosition(this.DOMelem);"Bottom"==this.ListPosition?(this.DOMlist.style.top=a[1]+this.DOMelem.offsetHeight+"px",this.DOMlist.style.left=a[0]+"px"):"Top"==this.ListPosition?(this.DOMlist.style.top=a[1]-this.DOMlist.offsetHeight+"px",this.DOMlist.style.left=a[0]+"px"):(this.DOMlist.style.top=a[1]+"px",this.DOMlist.style.left=a[0]+this.DOMelem.offsetWidth+"px")},dhtmlXCombo.prototype.getPosition=function(a,b){if(!b)var b=document.body;for(var c=a,d=0,e=0;c&&c!=b;)d+=c.offsetLeft-c.scrollLeft,e+=c.offsetTop-c.scrollTop,c=c.offsetParent;return b==document.body&&(_isIE&&8>_isIE?(document.documentElement.scrollTop&&(e+=document.documentElement.scrollTop),document.documentElement.scrollLeft&&(d+=document.documentElement.scrollLeft)):_isFF||(d+=document.body.offsetLeft,e+=document.body.offsetTop)),new Array(d,e)},dhtmlXCombo.prototype._correctSelection=function(){if(""!=this.getComboText())for(var a=0;a<this.optionsArr.length;a++)if(!this.optionsArr[a].isHidden())return this.selectOption(a,!0,!1);this.unSelectOption()},dhtmlXCombo.prototype.selectNext=function(a){for(var b=this.getSelectedIndex()+a;this.optionsArr[b];){if(!this.optionsArr[b].isHidden())return this.selectOption(b,!1,!1);b+=a}},dhtmlXCombo.prototype._onKeyF=function(a){var b=this.parentNode.combo,c=a||event;return c.cancelBubble=!0,"13"==c.keyCode||"9"==c.keyCode?(b._confirmSelection(),b.closeAll()):"27"==c.keyCode?(b._resetSelection(),b.closeAll()):b._activeMode=!0,"13"==c.keyCode||"27"==c.keyCode?(b.callEvent("onKeyPressed",[c.keyCode]),!1):!0},dhtmlXCombo.prototype._onKey=function(a){var b=this.parentNode.combo;(a||event).cancelBubble=!0;var c=(a||event).keyCode;if(c>15&&19>c)return!0;if(27!=c)if("block"==b.DOMlist.style.display||"13"==c||"9"==c||b._filter&&!b._filterAny||b.DOMelem.onclick(a||event),"13"!=c&&"9"!=c){if(window.setTimeout(function(){b._onKeyB(c)},1),"40"==c||"38"==c)return!1}else 9==c&&(b.closeAll(),(a||event).cancelBubble=!1)},dhtmlXCombo.prototype._onKeyB=function(a){if("40"==a){this.selectNext(1)}else if("38"==a)this.selectNext(-1);else{if(this.callEvent("onKeyPressed",[a]),this._filter)return this.filterSelf(8==a||46==a);for(var b=0;b<this.optionsArr.length;b++)if(this.optionsArr[b].data()[1]==this.DOMelem_input.value)return this.selectOption(b,!1,!1),!1;this.unSelectOption()}return!0},dhtmlXCombo.prototype._onBlur=function(){var a=this.parentNode._self;window.setTimeout(function(){return a.DOMlist._skipBlur?!(a.DOMlist._skipBlur=!1):(a._confirmSelection(),void a.callEvent("onBlur",[]))},100)},dhtmlXCombo.prototype.redrawOptions=function(){if(!this._skiprender){for(var a=this.DOMlist.childNodes.length-1;a>=0;a--)this.DOMlist.removeChild(this.DOMlist.childNodes[a]);for(var a=0;a<this.optionsArr.length;a++)this.DOMlist.appendChild(this.optionsArr[a].render())}},dhtmlXCombo.prototype.loadXML=function(a,b){if(this._load=!0,this.callEvent("onXLS",[]),this._xmlCache&&this._xmlCache[a])this._fillFromXML(this,null,null,null,this._xmlCache[a]),b&&b();else{var c=new dtmlXMLLoaderObject(this._fillFromXML,this,!0,!0);if(b&&(c.waitCall=b),this._prs)for(var d=0;d<this._prs.length;d++)a+=[getUrlSymbol(a),escape(this._prs[d][0]),"=",escape(this._prs[d][1])].join("");c._cPath=a,c.loadXML(a)}},dhtmlXCombo.prototype.loadXMLString=function(a){var b=new dtmlXMLLoaderObject(this._fillFromXML,this,!0,!0);b.loadXMLString(a)},dhtmlXCombo.prototype._fillFromXML=function(a,b,c,d,e){a._xmlCache&&(a._xmlCache[e._cPath]=e);var f=e.getXMLTopNode("complete");if("complete"==f.tagName){var g=e.doXPath("//complete"),h=e.doXPath("//option"),i=!1;a.render(!1),g[0]&&g[0].getAttribute("add")?(a._lastLength+=h.length,i=!0):(a.clearAll(),a._lastLength=h.length,a._xml&&(h&&h.length?a._activeMode&&(a._positList(),a.DOMlist.style.display="block",_isIE&&a._IEFix(!0)):a.closeAll()));for(var j=0;j<h.length;j++){var k=new Object;k.text=h[j].firstChild?h[j].firstChild.nodeValue:"";for(var l=0;l<h[j].attributes.length;l++){var m=h[j].attributes[l];m&&(k[m.nodeName]=m.nodeValue)}a._addOption(k)}a.render(1!=i||h.length),a._load&&a._load!==!0?a.loadXML(a._load):(a._load=!1,a._lkmode||a._filter||a._correctSelection());var n=e.doXPath("//option[@selected]");n.length&&a.selectOption(a.getIndexByValue(n[0].getAttribute("value")),!1,!0),a.callEvent("onXLE",[])}},dhtmlXCombo.prototype.unSelectOption=function(){this._selOption&&this._selOption.deselect(),this._tempSel&&this._tempSel.deselect(),this._tempSel=this._selOption=null},dhtmlXCombo.prototype._confirmSelection=function(a,b){if(0==arguments.length){var c=this.getOptionByLabel(this.DOMelem_input.value);if(a=c?c.value:this.DOMelem_input.value,b=null==c,a==this.getActualValue())return}this.DOMelem_hidden_input.value=a,this.DOMelem_hidden_input2.value=b?"true":"false",this.callEvent("onChange",[]),this._activeMode=!1},dhtmlXCombo.prototype._resetSelection=function(){var a=this.getOption(this.DOMelem_hidden_input.value);this.setComboValue(a?a.data()[0]:this.DOMelem_hidden_input.value),this.setComboText(a?a.data()[1]:this.DOMelem_hidden_input.value)},dhtmlXCombo.prototype.selectOption=function(a,b,c){arguments.length<3&&(c=!0),this.unSelectOption();var d=this.optionsArr[a];if(d){this._selOption=d,this._selOption.select();var e=this._selOption.content.offsetTop+this._selOption.content.offsetHeight-this.DOMlist.scrollTop-this.DOMlist.offsetHeight;e>0&&(this.DOMlist.scrollTop+=e),e=this.DOMlist.scrollTop-this._selOption.content.offsetTop,e>0&&(this.DOMlist.scrollTop-=e);var f=this._selOption.data();if(c&&(this.setComboText(f[1]),this._confirmSelection(f[0],!1)),this._autoxml&&a+1==this._lastLength&&this._fetchOptions(a+1,this._lasttext||""),b){var g=this.getComboText();g!=f[1]&&(this.setComboText(f[1]),dhtmlXRange(this.DOMelem_input,g.length+1,f[1].length))}else this.setComboText(f[1]);this._selOption.RedrawHeader(this),this.callEvent("onSelectionChange",[])}},dhtmlXCombo.prototype._selectOption=function(a){(a||event).cancelBubble=!0;for(var b=_isIE?event.srcElement:a.target,c=this.combo;!b._self;)if(b=b.parentNode,!b)return;var d=0;for(d;d<c.DOMlist.childNodes.length&&c.DOMlist.childNodes[d]!=b;d++);c.selectOption(d,!1,!0),c.closeAll(),c.callEvent("onBlur",[]),c._activeMode=!1},dhtmlXCombo.prototype.openSelect=function(){if(!this._disabled){if(this.closeAll(),this._positList(),this.DOMlist.style.display="block",this.callEvent("onOpen",[]),this._tempSel&&this._tempSel.deselect(),this._selOption&&this._selOption.select(),this._selOption){var a=this._selOption.content.offsetTop+this._selOption.content.offsetHeight-this.DOMlist.scrollTop-this.DOMlist.offsetHeight;a>0&&(this.DOMlist.scrollTop+=a),a=this.DOMlist.scrollTop-this._selOption.content.offsetTop,a>0&&(this.DOMlist.scrollTop-=a)}_isIE&&this._IEFix(!0),this.DOMelem_input.focus(),this._filter&&this.filterSelf()}},dhtmlXCombo.prototype._toggleSelect=function(a){var b=this.combo;"block"==b.DOMlist.style.display?b.closeAll():b.openSelect(),(a||event).cancelBubble=!0},dhtmlXCombo.prototype._fetchOptions=function(a,b){if(""==b)return this.closeAll(),this.clearAll();var c=this._xml+(-1!=this._xml.indexOf("?")?"&":"?")+"pos="+a+"&mask="+encodeURIComponent(b);this._lasttext=b,this._load?this._load=c:this.loadXML(c)},dhtmlXCombo.prototype.filterSelf=function(a){var b=this.getComboText();this._xml&&(this._lkmode=a,this._fetchOptions(0,b));try{var c=new RegExp("^"+b,"i")}catch(d){var c=new RegExp("^"+b.replace(/([\[\]\{\}\(\)\+\*\\])/g,"\\$1"))}this.filterAny=!1;for(var e=0;e<this.optionsArr.length;e++){var f=c.test(this.optionsArr[e].text);this.filterAny|=f,this.optionsArr[e].hide(!f)}this.filterAny?("block"!=this.DOMlist.style.display&&this.openSelect(),_isIE&&this._IEFix(!0)):(this.closeAll(),this._activeMode=!0),a?this.unSelectOption():this._correctSelection()},dhtmlXCombo.prototype._IEFix=function(a){this.DOMlistF.style.display=a?"block":"none",this.DOMlistF.style.top=this.DOMlist.style.top,this.DOMlistF.style.left=this.DOMlist.style.left},dhtmlXCombo.prototype.closeAll=function(){if(window.dhx_glbSelectAr)for(var a=0;a<dhx_glbSelectAr.length;a++)"block"==dhx_glbSelectAr[a].DOMlist.style.display&&(dhx_glbSelectAr[a].DOMlist.style.display="none",_isIE&&dhx_glbSelectAr[a]._IEFix(!1)),dhx_glbSelectAr[a]._activeMode=!1},dhtmlXCombo_defaultOption=function(){this.init()},dhtmlXCombo_defaultOption.prototype.init=function(){this.value=null,this.text="",this.selected=!1,this.css=""},dhtmlXCombo_defaultOption.prototype.select=function(){this.content&&(this.content.className="dhx_selected_option")},dhtmlXCombo_defaultOption.prototype.hide=function(a){this.render().style.display=a?"none":""},dhtmlXCombo_defaultOption.prototype.isHidden=function(){return"none"==this.render().style.display},dhtmlXCombo_defaultOption.prototype.deselect=function(){this.content&&this.render(),this.content.className=""},dhtmlXCombo_defaultOption.prototype.setValue=function(a){this.value=a.value||"",this.text=a.text||"",this.css=a.css||"",this.content=null},dhtmlXCombo_defaultOption.prototype.render=function(){return this.content||(this.content=document.createElement("DIV"),this.content._self=this,this.content.style.cssText="width:100%;overflow:hidden;"+this.css,(_isOpera||_isKHTML)&&(this.content.style.padding="2px 0px 2px 0px"),this.content.innerHTML=this.text,this._ctext=_isIE?this.content.innerText:this.content.textContent),this.content},dhtmlXCombo_defaultOption.prototype.data=function(){return this.content?[this.value,this._ctext?this._ctext:this.text]:void 0},dhtmlXCombo_defaultOption.prototype.DrawHeader=function(a,b,c,d){var e=document.createElement("DIV");e.style.width=c+"px",e.className="dhx_combo_box",e._self=a,a.DOMelem=e,this._DrawHeaderInput(a,b,c,d),this._DrawHeaderButton(a,b,c),a.DOMParent.appendChild(a.DOMelem)},dhtmlXCombo_defaultOption.prototype._DrawHeaderInput=function(a,b,c,d){if(a.rtl&&_isIE){var e=document.createElement("textarea");e.style.overflow="hidden",e.style.whiteSpace="nowrap"}else{var e=document.createElement("input");e.setAttribute("autocomplete","off"),e.type="text"}e.className="dhx_combo_input",a.rtl&&(e.style.left="18px",e.style.direction="rtl",e.style.unicodeBidi="bidi-override"),d&&(e.tabIndex=d),e.style.width=c-19+"px",a.DOMelem.appendChild(e),a.DOMelem_input=e,e=document.createElement("input"),e.type="hidden",e.name=b,a.DOMelem.appendChild(e),a.DOMelem_hidden_input=e,e=document.createElement("input"),e.type="hidden",e.name=b+"_new_value",e.value="true",a.DOMelem.appendChild(e),a.DOMelem_hidden_input2=e},dhtmlXCombo_defaultOption.prototype._DrawHeaderButton=function(a){var b=document.createElement("img");b.className=a.rtl?"dhx_combo_img_rtl":"dhx_combo_img",b.src=(window.dhx_globalImgPath?dhx_globalImgPath:"")+"combo_select.gif",a.DOMelem.appendChild(b),a.DOMelem_button=b},dhtmlXCombo_defaultOption.prototype.RedrawHeader=function(){},dhtmlXCombo_optionTypes["default"]=dhtmlXCombo_defaultOption,dhtmlXCombo_imageOption=function(){this.init()},dhtmlXCombo_imageOption.prototype=new dhtmlXCombo_defaultOption,dhtmlXCombo_imageOption.prototype.setValue=function(a){this.value=a.value||"",this.text=a.text||"",this.css=a.css||"",this.img_src=a.img_src||this.getDefImage()},dhtmlXCombo_imageOption.prototype.render=function(){if(!this.content){this.content=document.createElement("DIV"),this.content._self=this,this.content.style.cssText="width:100%;overflow:hidden;"+this.css;var a="";""!=this.img_src&&(a+='<img style="float:left;" src="'+this.img_src+'" />'),a+='<div style="float:left">'+this.text+"</div>",this.content.innerHTML=a}return this.content},dhtmlXCombo_imageOption.prototype.data=function(){return[this.value,this.text,this.img_src]},dhtmlXCombo_imageOption.prototype.DrawHeader=function(a,b,c){var d=document.createElement("DIV");d.style.width=c+"px",d.className="dhx_combo_box",d._self=a,a.DOMelem=d,this._DrawHeaderImage(a,b,c),this._DrawHeaderInput(a,b,c-23),this._DrawHeaderButton(a,b,c),a.DOMParent.appendChild(a.DOMelem)},dhtmlXCombo_imageOption.prototype._DrawHeaderImage=function(a){var b=document.createElement("img");b.className=a.rtl?"dhx_combo_option_img_rtl":"dhx_combo_option_img",b.style.visibility="hidden",a.DOMelem.appendChild(b),a.DOMelem_image=b},dhtmlXCombo_imageOption.prototype.RedrawHeader=function(a){a.DOMelem_image.style.visibility="visible",a.DOMelem_image.src=this.img_src},dhtmlXCombo_imageOption.prototype.getDefImage=function(){return""},dhtmlXCombo.prototype.setDefaultImage=function(a){dhtmlXCombo_imageOption.prototype.getDefImage=function(){return a}},dhtmlXCombo_optionTypes.image=dhtmlXCombo_imageOption,dhtmlXCombo_checkboxOption=function(){this.init()},dhtmlXCombo_checkboxOption.prototype=new dhtmlXCombo_defaultOption,dhtmlXCombo_checkboxOption.prototype.setValue=function(a){this.value=a.value||"",this.text=a.text||"",this.css=a.css||"",this.checked=a.checked||0},dhtmlXCombo_checkboxOption.prototype.render=function(){if(!this.content){this.content=document.createElement("DIV"),this.content._self=this,this.content.style.cssText="width:100%;overflow:hidden;"+this.css;var a="";a+=this.checked?'<input style="float:left;" type="checkbox" checked />':'<input style="float:left;" type="checkbox" />',a+='<div style="float:left">'+this.text+"</div>",this.content.innerHTML=a,this.content.firstChild.onclick=function(a){this.parentNode.parentNode.combo.callEvent("onCheck",[this.parentNode._self.value]),(a||event).cancelBubble=!0,this.parentNode.parentNode.combo.setCheckedByValue(this.parentNode._self.value,this.checked),this.parentNode.parentNode.combo.DOMelem_input.focus()}}return this.content},dhtmlXCombo_checkboxOption.prototype.data=function(){return[this.value,this.text,this.render().firstChild.checked]},dhtmlXCombo_checkboxOption.prototype.DrawHeader=function(a,b,c){a.DOMelem=document.createElement("DIV"),a.DOMelem.style.width=c+"px",a.DOMelem.className="dhx_combo_box",a.DOMelem._self=a,this._DrawHeaderCheckbox(a,b,c),this._DrawHeaderInput(a,b,c-18),this._DrawHeaderButton(a,b,c),a.DOMParent.appendChild(a.DOMelem)},dhtmlXCombo_checkboxOption.prototype._DrawHeaderCheckbox=function(a){var b=document.createElement("input");b.type="checkbox",b.className=a.rtl?"dhx_combo_option_img_rtl":"dhx_combo_option_img",b.style.height="auto",b.style.visibility="hidden",b.onclick=function(b){(b||event).cancelBubble=!0,a.setCheckedByValue(a.getActualValue(),this.checked)},a.DOMelem.appendChild(b),a.DOMelem_checkbox=b},dhtmlXCombo_checkboxOption.prototype.RedrawHeader=function(a){a.DOMelem_checkbox.style.visibility="",a.DOMelem_checkbox.checked=this.content.firstChild.checked},dhtmlXCombo_optionTypes.checkbox=dhtmlXCombo_checkboxOption,dhtmlXCombo.prototype.getChecked=function(){for(var a=[],b=0;b<this.optionsArr.length;b++)this.optionsArr[b].data()[2]&&a.push(this.optionsArr[b].value);return a},dhtmlXCombo.prototype.setChecked=function(a,b){0>a||(this.optionsArr[a].content.firstChild.checked=!(b===!1),this.getActualValue()==this.optionsArr[a].value&&(this.DOMelem_checkbox.checked=!(b===!1)))},dhtmlXCombo.prototype.setCheckedByValue=function(a,b){return this.setChecked(this.getIndexByValue(a),b)},dhtmlXCombo.prototype.enableOptionAutoPositioning=function(a){this.ListAutoPosit||(this.ListAutoPosit=1),this.attachEvent("onOpen",function(){this._setOptionAutoPositioning(a)})},dhtmlXCombo.prototype._setOptionAutoPositioning=function(a){if("undefined"!=typeof a&&!convertStringToBoolean(a))return this.ListPosition="Bottom",this.ListAutoPosit=0,!0;var b=this.getPosition(this.DOMelem),c=this._getClientHeight()-b[1]-this.DOMelem.offsetHeight,d=this.autoHeight?this.DOMlist.scrollHeight:parseInt(this.DOMlist.offsetHeight);this.ListPosition=d>c&&b[1]>d?"Top":"Bottom",this._positList()},dhtmlXCombo.prototype._getClientHeight=function(){return"CSS1Compat"!=document.compatMode||window.opera?document.body.clientHeight:document.documentElement.clientHeight},dhtmlXCombo.prototype.setOptionWidth=function(a){arguments.length>0&&(this.DOMlist.style.width=a+"px",this.DOMlistF&&(this.DOMlistF.style.width=a+"px"))},dhtmlXCombo.prototype.setOptionHeight=function(a){arguments.length>0&&(this.DOMlist.style.height=_isIE?this.DOMlistF.style.height=a+"px":a+"px",this._positList())},dhtmlXCombo.prototype.enableOptionAutoWidth=function(a){if(this._listWidthConf||(this._listWidthConf=parseInt(this.DOMlist.style.width)),0==arguments.length)var a=1;convertStringToBoolean(a)?(this.autoOptionWidth=1,awOnOpen=this.attachEvent("onOpen",function(){this._setOptionAutoWidth()})):"undefined"!=typeof awOnOpen&&(this.autoOptionWidth=0,this.detachEvent(awOnOpen),this.setOptionWidth(this._listWidthConf))},dhtmlXCombo.prototype._setOptionAutoWidth=function(){this.setOptionWidth(1);for(var a=this.DOMlist.offsetWidth,b=0;b<this.optionsArr.length;b++){var c=_isFF?this.DOMlist.childNodes[b].scrollWidth-2:this.DOMlist.childNodes[b].scrollWidth;c>a&&(a=this.DOMlist.childNodes[b].scrollWidth)}this.setOptionWidth(a)},dhtmlXCombo.prototype.enableOptionAutoHeight=function(a,b){if(this._listHeightConf||(this._listHeightConf=""==this.DOMlist.style.height?100:parseInt(this.DOMlist.style.height)),0==arguments.length)var a=1;this.autoHeight=convertStringToBoolean(a),this.autoHeight?ahOnOpen=this.attachEvent("onOpen",function(){this._setOptionAutoHeight(a,b),_isIE&&this._setOptionAutoHeight(a,b)}):"undefined"!=typeof ahOnOpen&&(this.detachEvent(ahOnOpen),this.setOptionHeight(this._listHeightConf))},dhtmlXCombo.prototype._setOptionAutoHeight=function(a,b){if(convertStringToBoolean(a)){this.setOptionHeight(1);var c=0;if(this.optionsArr.length>0){if(c=this.DOMlist.scrollHeight>this.DOMlist.offsetHeight?this.DOMlist.scrollHeight+2:this.DOMlist.offsetHeight,arguments.length>1&&b){var b=parseInt(b);c=c>b?b:c}this.setOptionHeight(c)}}},dhtmlXCombo.prototype.attachChildCombo=function(a,b){this._child_combos||(this._child_combos=[]),this._has_childen=1,this._child_combos[this._child_combos.length]=a,a.show(0);var c=this,d=arguments.length;this.attachEvent("onChange",function(){for(var e=0;e<c._child_combos.length;e++)c._child_combos[e]==a&&(a.show(1),a.callEvent("onMasterChange",[c.getActualValue(),c]));return""==c.getActualValue()?void c.showSubCombo(c,0):void(a._xml?(1==d&&(b=a._xml),a._xml=c.deleteParentVariable(b)+(-1!=a._xml.indexOf("?")?"&":"?")+"parent="+c.getActualValue()):b&&(a.clearAll(!0),b=c.deleteParentVariable(b),b=b+(-1!=b.indexOf("?")?"&":"?")+"parent="+c.getActualValue(),a.loadXML(b)))})},dhtmlXCombo.prototype.setAutoSubCombo=function(a,b){if(1==arguments.length&&(b="subcombo"),this._parentCombo){var c=new dhtmlXCombo(this._parentCombo.DOMParent,b,this._parentCombo.DOMelem.style.width);c._parentCombo=this._parentCombo}else{var c=new dhtmlXCombo(this.DOMParent,b,this.DOMelem.style.width);c._parentCombo=this}return this._filter&&(c._filter=1),this._xml&&(c._xml=arguments.length>0?a:this._xml,a=c._xml,c._autoxml=this._autoxml,this._xmlCache&&(c._xmlCache=[])),this.attachChildCombo(c,a),c},dhtmlXCombo.prototype.detachChildCombo=function(a){for(var b=0;b<this._child_combos.length;b++)this._child_combos[b]==a,this._child_combos.splice(b,1);a.show(1)},dhtmlXCombo.prototype.showSubCombo=function(a,b){if(a._child_combos)for(var c=0;c<a._child_combos.length;c++)a._child_combos[c].show(b),a.showSubCombo(a._child_combos[c],0)},dhtmlXCombo.prototype.deleteParentVariable=function(a){return a=a.replace(/\?parent\=[^&]*/g,"").replace(/&parent\=[^&]*/g,"")},function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b=a.length,c=_.type(a);return"function"===c||_.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function d(a,b,c){if(_.isFunction(b))return _.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return _.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(hb.test(b))return _.filter(b,a,c);b=_.filter(b,a)}return _.grep(a,function(a){return U.call(b,a)>=0!==c})}function e(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function f(a){var b=ob[a]={};return _.each(a.match(nb)||[],function(a,c){b[c]=!0}),b}function g(){Z.removeEventListener("DOMContentLoaded",g,!1),a.removeEventListener("load",g,!1),_.ready()}function h(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=_.expando+h.uid++}function i(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(ub,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:tb.test(c)?_.parseJSON(c):c}catch(e){}sb.set(a,b,c)}else c=void 0;return c}function j(){return!0}function k(){return!1}function l(){try{return Z.activeElement
}catch(a){}}function m(a,b){return _.nodeName(a,"table")&&_.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function n(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function o(a){var b=Kb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function p(a,b){for(var c=0,d=a.length;d>c;c++)rb.set(a[c],"globalEval",!b||rb.get(b[c],"globalEval"))}function q(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(rb.hasData(a)&&(f=rb.access(a),g=rb.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)_.event.add(b,e,j[e][c])}sb.hasData(a)&&(h=sb.access(a),i=_.extend({},h),sb.set(b,i))}}function r(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&_.nodeName(a,b)?_.merge([a],c):c}function s(a,b){var c=b.nodeName.toLowerCase();"input"===c&&yb.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}function t(b,c){var d,e=_(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:_.css(e[0],"display");return e.detach(),f}function u(a){var b=Z,c=Ob[a];return c||(c=t(a,b),"none"!==c&&c||(Nb=(Nb||_("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=Nb[0].contentDocument,b.write(),b.close(),c=t(a,b),Nb.detach()),Ob[a]=c),c}function v(a,b,c){var d,e,f,g,h=a.style;return c=c||Rb(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||_.contains(a.ownerDocument,a)||(g=_.style(a,b)),Qb.test(g)&&Pb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function w(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function x(a,b){if(b in a)return b;for(var c=b[0].toUpperCase()+b.slice(1),d=b,e=Xb.length;e--;)if(b=Xb[e]+c,b in a)return b;return d}function y(a,b,c){var d=Tb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function z(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=_.css(a,c+wb[f],!0,e)),d?("content"===c&&(g-=_.css(a,"padding"+wb[f],!0,e)),"margin"!==c&&(g-=_.css(a,"border"+wb[f]+"Width",!0,e))):(g+=_.css(a,"padding"+wb[f],!0,e),"padding"!==c&&(g+=_.css(a,"border"+wb[f]+"Width",!0,e)));return g}function A(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Rb(a),g="border-box"===_.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=v(a,b,f),(0>e||null==e)&&(e=a.style[b]),Qb.test(e))return e;d=g&&(Y.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+z(a,b,c||(g?"border":"content"),d,f)+"px"}function B(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=rb.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&xb(d)&&(f[g]=rb.access(d,"olddisplay",u(d.nodeName)))):(e=xb(d),"none"===c&&e||rb.set(d,"olddisplay",e?c:_.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function C(a,b,c,d,e){return new C.prototype.init(a,b,c,d,e)}function D(){return setTimeout(function(){Yb=void 0}),Yb=_.now()}function E(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=wb[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function F(a,b,c){for(var d,e=(cc[b]||[]).concat(cc["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function G(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},n=a.style,o=a.nodeType&&xb(a),p=rb.get(a,"fxshow");c.queue||(h=_._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,_.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],j=_.css(a,"display"),k="none"===j?rb.get(a,"olddisplay")||u(a.nodeName):j,"inline"===k&&"none"===_.css(a,"float")&&(n.display="inline-block")),c.overflow&&(n.overflow="hidden",l.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],$b.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(o?"hide":"show")){if("show"!==e||!p||void 0===p[d])continue;o=!0}m[d]=p&&p[d]||_.style(a,d)}else j=void 0;if(_.isEmptyObject(m))"inline"===("none"===j?u(a.nodeName):j)&&(n.display=j);else{p?"hidden"in p&&(o=p.hidden):p=rb.access(a,"fxshow",{}),f&&(p.hidden=!o),o?_(a).show():l.done(function(){_(a).hide()}),l.done(function(){var b;rb.remove(a,"fxshow");for(b in m)_.style(a,b,m[b])});for(d in m)g=F(o?p[d]:0,d,l),d in p||(p[d]=g.start,o&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function H(a,b){var c,d,e,f,g;for(c in a)if(d=_.camelCase(c),e=b[d],f=a[c],_.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=_.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function I(a,b,c){var d,e,f=0,g=bc.length,h=_.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Yb||D(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:_.extend({},b),opts:_.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Yb||D(),duration:c.duration,tweens:[],createTween:function(b,c){var d=_.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(H(k,j.opts.specialEasing);g>f;f++)if(d=bc[f].call(j,a,k,j.opts))return d;return _.map(k,F,j),_.isFunction(j.opts.start)&&j.opts.start.call(a,j),_.fx.timer(_.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function J(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(nb)||[];if(_.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function K(a,b,c,d){function e(h){var i;return f[h]=!0,_.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===tc;return e(b.dataTypes[0])||!f["*"]&&e("*")}function L(a,b){var c,d,e=_.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&_.extend(!0,a,d),a}function M(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function N(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function O(a,b,c,d){var e;if(_.isArray(b))_.each(b,function(b,e){c||yc.test(a)?d(a,e):O(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==_.type(b))d(a,b);else for(e in b)O(a+"["+e+"]",b[e],c,d)}function P(a){return _.isWindow(a)?a:9===a.nodeType&&a.defaultView}var Q=[],R=Q.slice,S=Q.concat,T=Q.push,U=Q.indexOf,V={},W=V.toString,X=V.hasOwnProperty,Y={},Z=a.document,$="2.1.3",_=function(a,b){return new _.fn.init(a,b)},ab=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,bb=/^-ms-/,cb=/-([\da-z])/gi,db=function(a,b){return b.toUpperCase()};_.fn=_.prototype={jquery:$,constructor:_,selector:"",length:0,toArray:function(){return R.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:R.call(this)},pushStack:function(a){var b=_.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return _.each(this,a,b)},map:function(a){return this.pushStack(_.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(R.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:T,sort:Q.sort,splice:Q.splice},_.extend=_.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||_.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(_.isPlainObject(d)||(e=_.isArray(d)))?(e?(e=!1,f=c&&_.isArray(c)?c:[]):f=c&&_.isPlainObject(c)?c:{},g[b]=_.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},_.extend({expando:"jQuery"+($+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===_.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!_.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return"object"!==_.type(a)||a.nodeType||_.isWindow(a)?!1:a.constructor&&!X.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?V[W.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=_.trim(a),a&&(1===a.indexOf("use strict")?(b=Z.createElement("script"),b.text=a,Z.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(bb,"ms-").replace(cb,db)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(ab,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?_.merge(d,"string"==typeof a?[a]:a):T.call(d,a)),d},inArray:function(a,b,c){return null==b?-1:U.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&i.push(e);else for(f in a)e=b(a[f],f,d),null!=e&&i.push(e);return S.apply([],i)},guid:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(c=a[b],b=a,a=c),_.isFunction(a)?(d=R.call(arguments,2),e=function(){return a.apply(b||this,d.concat(R.call(arguments)))},e.guid=a.guid=a.guid||_.guid++,e):void 0},now:Date.now,support:Y}),_.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){V["[object "+b+"]"]=b.toLowerCase()});var eb=function(a){function b(a,b,c,d){var e,f,g,h,i,j,l,n,o,p;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],h=b.nodeType,"string"!=typeof a||!a||1!==h&&9!==h&&11!==h)return c;if(!d&&I){if(11!==h&&(e=sb.exec(a)))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return $.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&v.getElementsByClassName)return $.apply(c,b.getElementsByClassName(g)),c}if(v.qsa&&(!J||!J.test(a))){if(n=l=N,o=b,p=1!==h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=z(a),(l=b.getAttribute("id"))?n=l.replace(ub,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",i=j.length;i--;)j[i]=n+m(j[i]);o=tb.test(a)&&k(b.parentNode)||b,p=j.join(",")}if(p)try{return $.apply(c,o.querySelectorAll(p)),c}catch(q){}finally{l||b.removeAttribute("id")}}}return B(a.replace(ib,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>w.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[N]=!0,a}function e(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=a.length;d--;)w.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||V)-(~a.sourceIndex||V);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function k(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function l(){}function m(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[P,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[N]||(b[N]={}),(h=i[d])&&h[0]===P&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,c,d){for(var e=0,f=c.length;f>e;e++)b(a,c[e],d);return d}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function r(a,b,c,e,f,g){return e&&!e[N]&&(e=r(e)),f&&!f[N]&&(f=r(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,r=d||p(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?r:q(r,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=q(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?ab(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=q(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function s(a){for(var b,c,d,e=a.length,f=w.relative[a[0].type],g=f||w.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return ab(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==C)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];e>h;h++)if(c=w.relative[a[h].type])k=[n(o(k),c)];else{if(c=w.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!w.relative[a[d].type];d++);return r(h>1&&o(k),h>1&&m(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ib,"$1"),c,d>h&&s(a.slice(h,d)),e>d&&s(a=a.slice(d)),e>d&&m(a))}k.push(c)}return o(k)}function t(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],r=[],s=C,t=d||f&&w.find.TAG("*",j),u=P+=null==s?1:Math.random()||.1,v=t.length;for(j&&(C=g!==G&&g);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0;m=a[l++];)if(m(k,g,h)){i.push(k);break}j&&(P=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,r,g,h);if(d){if(n>0)for(;o--;)p[o]||r[o]||(r[o]=Y.call(i));r=q(r)}$.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(P=u,C=s),p};return e?d(g):g}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+1*new Date,O=a.document,P=0,Q=0,R=c(),S=c(),T=c(),U=function(a,b){return a===b&&(E=!0),0},V=1<<31,W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,ab=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},bb="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",cb="[\\x20\\t\\r\\n\\f]",db="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",eb=db.replace("w","w#"),fb="\\["+cb+"*("+db+")(?:"+cb+"*([*^$|!~]?=)"+cb+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+eb+"))|)"+cb+"*\\]",gb=":("+db+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+fb+")*)|.*)\\)|)",hb=new RegExp(cb+"+","g"),ib=new RegExp("^"+cb+"+|((?:^|[^\\\\])(?:\\\\.)*)"+cb+"+$","g"),jb=new RegExp("^"+cb+"*,"+cb+"*"),kb=new RegExp("^"+cb+"*([>+~]|"+cb+")"+cb+"*"),lb=new RegExp("="+cb+"*([^\\]'\"]*?)"+cb+"*\\]","g"),mb=new RegExp(gb),nb=new RegExp("^"+eb+"$"),ob={ID:new RegExp("^#("+db+")"),CLASS:new RegExp("^\\.("+db+")"),TAG:new RegExp("^("+db.replace("w","w*")+")"),ATTR:new RegExp("^"+fb),PSEUDO:new RegExp("^"+gb),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+cb+"*(even|odd|(([+-]|)(\\d*)n|)"+cb+"*(?:([+-]|)"+cb+"*(\\d+)|))"+cb+"*\\)|)","i"),bool:new RegExp("^(?:"+bb+")$","i"),needsContext:new RegExp("^"+cb+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+cb+"*((?:-\\d)?\\d*)"+cb+"*\\)|)(?=[^-]|$)","i")},pb=/^(?:input|select|textarea|button)$/i,qb=/^h\d$/i,rb=/^[^{]+\{\s*\[native \w/,sb=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tb=/[+~]/,ub=/'|\\/g,vb=new RegExp("\\\\([\\da-f]{1,6}"+cb+"?|("+cb+")|.)","ig"),wb=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},xb=function(){F()};try{$.apply(X=_.call(O.childNodes),O.childNodes),X[O.childNodes.length].nodeType}catch(yb){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}v=b.support={},y=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},F=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:O;return d!==G&&9===d.nodeType&&d.documentElement?(G=d,H=d.documentElement,c=d.defaultView,c&&c!==c.top&&(c.addEventListener?c.addEventListener("unload",xb,!1):c.attachEvent&&c.attachEvent("onunload",xb)),I=!y(d),v.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),v.getElementsByTagName=e(function(a){return a.appendChild(d.createComment("")),!a.getElementsByTagName("*").length}),v.getElementsByClassName=rb.test(d.getElementsByClassName),v.getById=e(function(a){return H.appendChild(a).id=N,!d.getElementsByName||!d.getElementsByName(N).length}),v.getById?(w.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},w.filter.ID=function(a){var b=a.replace(vb,wb);return function(a){return a.getAttribute("id")===b}}):(delete w.find.ID,w.filter.ID=function(a){var b=a.replace(vb,wb);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),w.find.TAG=v.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):v.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},w.find.CLASS=v.getElementsByClassName&&function(a,b){return I?b.getElementsByClassName(a):void 0},K=[],J=[],(v.qsa=rb.test(d.querySelectorAll))&&(e(function(a){H.appendChild(a).innerHTML="<a id='"+N+"'></a><select id='"+N+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&J.push("[*^$]="+cb+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||J.push("\\["+cb+"*(?:value|"+bb+")"),a.querySelectorAll("[id~="+N+"-]").length||J.push("~="),a.querySelectorAll(":checked").length||J.push(":checked"),a.querySelectorAll("a#"+N+"+*").length||J.push(".#.+[+~]")}),e(function(a){var b=d.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&J.push("name"+cb+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(v.matchesSelector=rb.test(L=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&e(function(a){v.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",gb)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),b=rb.test(H.compareDocumentPosition),M=b||rb.test(H.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},U=b?function(a,b){if(a===b)return E=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c?c:(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!v.sortDetached&&b.compareDocumentPosition(a)===c?a===d||a.ownerDocument===O&&M(O,a)?-1:b===d||b.ownerDocument===O&&M(O,b)?1:D?ab(D,a)-ab(D,b):0:4&c?-1:1)}:function(a,b){if(a===b)return E=!0,0;var c,e=0,f=a.parentNode,h=b.parentNode,i=[a],j=[b];if(!f||!h)return a===d?-1:b===d?1:f?-1:h?1:D?ab(D,a)-ab(D,b):0;if(f===h)return g(a,b);for(c=a;c=c.parentNode;)i.unshift(c);for(c=b;c=c.parentNode;)j.unshift(c);for(;i[e]===j[e];)e++;return e?g(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},d):G},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==G&&F(a),c=c.replace(lb,"='$1']"),!(!v.matchesSelector||!I||K&&K.test(c)||J&&J.test(c)))try{var d=L.call(a,c);if(d||v.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return b(c,G,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==G&&F(a);var c=w.attrHandle[b.toLowerCase()],d=c&&W.call(w.attrHandle,b.toLowerCase())?c(a,b,!I):void 0;return void 0!==d?d:v.attributes||!I?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!v.detectDuplicates,D=!v.sortStable&&a.slice(0),a.sort(U),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return D=null,a},x=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=x(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=x(b);return c},w=b.selectors={cacheLength:50,createPseudo:d,match:ob,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(vb,wb),a[3]=(a[3]||a[4]||a[5]||"").replace(vb,wb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return ob.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&mb.test(c)&&(b=z(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(vb,wb).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+cb+")"+a+"("+cb+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:c?(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(hb," ")+" ").indexOf(d)>-1:"|="===c?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,c){var e,f=w.pseudos[a]||w.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[N]?f(c):f.length>1?(e=[a,a,"",c],w.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=ab(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=A(a.replace(ib,"$1"));return e[N]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(vb,wb),function(b){return(b.textContent||b.innerText||x(b)).indexOf(a)>-1}}),lang:d(function(a){return nb.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(vb,wb).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!w.pseudos.empty(a)},header:function(a){return qb.test(a.nodeName)},input:function(a){return pb.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:j(function(){return[0]}),last:j(function(a,b){return[b-1]}),eq:j(function(a,b,c){return[0>c?c+b:c]}),even:j(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:j(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:j(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:j(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},w.pseudos.nth=w.pseudos.eq;for(u in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[u]=h(u);for(u in{submit:!0,reset:!0})w.pseudos[u]=i(u);return l.prototype=w.filters=w.pseudos,w.setFilters=new l,z=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=w.preFilter;h;){(!d||(e=jb.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=kb.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ib," ")}),h=h.slice(d.length));for(g in w.filter)!(e=ob[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):S(a,i).slice(0)},A=b.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=z(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d)),f.selector=a}return f},B=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,l=!d&&z(a=j.selector||a);if(c=c||[],1===l.length){if(f=l[0]=l[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&v.getById&&9===b.nodeType&&I&&w.relative[f[1].type]){if(b=(w.find.ID(g.matches[0].replace(vb,wb),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=ob.needsContext.test(a)?0:f.length;e--&&(g=f[e],!w.relative[h=g.type]);)if((i=w.find[h])&&(d=i(g.matches[0].replace(vb,wb),tb.test(f[0].type)&&k(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&m(f),!a)return $.apply(c,d),c;break}}return(j||A(a,l))(d,b,!I,c,tb.test(a)&&k(b.parentNode)||b),c},v.sortStable=N.split("").sort(U).join("")===N,v.detectDuplicates=!!E,F(),v.sortDetached=e(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),v.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(bb,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);_.find=eb,_.expr=eb.selectors,_.expr[":"]=_.expr.pseudos,_.unique=eb.uniqueSort,_.text=eb.getText,_.isXMLDoc=eb.isXML,_.contains=eb.contains;var fb=_.expr.match.needsContext,gb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,hb=/^.[^:#\[\.,]*$/;_.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?_.find.matchesSelector(d,a)?[d]:[]:_.find.matches(a,_.grep(b,function(a){return 1===a.nodeType}))},_.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(_(a).filter(function(){for(b=0;c>b;b++)if(_.contains(e[b],this))return!0}));for(b=0;c>b;b++)_.find(a,e[b],d);return d=this.pushStack(c>1?_.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"==typeof a&&fb.test(a)?_(a):a||[],!1).length}});var ib,jb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,kb=_.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:jb.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||ib).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof _?b[0]:b,_.merge(this,_.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:Z,!0)),gb.test(c[1])&&_.isPlainObject(b))for(c in b)_.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=Z.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=Z,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):_.isFunction(a)?"undefined"!=typeof ib.ready?ib.ready(a):a(_):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),_.makeArray(a,this))};kb.prototype=_.fn,ib=_(Z);var lb=/^(?:parents|prev(?:Until|All))/,mb={children:!0,contents:!0,next:!0,prev:!0};_.extend({dir:function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&_(a).is(c))break;
d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),_.fn.extend({has:function(a){var b=_(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(_.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=fb.test(a)||"string"!=typeof a?_(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&_.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?_.unique(f):f)},index:function(a){return a?"string"==typeof a?U.call(_(a),this[0]):U.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(_.unique(_.merge(this.get(),_(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),_.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return _.dir(a,"parentNode")},parentsUntil:function(a,b,c){return _.dir(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return _.dir(a,"nextSibling")},prevAll:function(a){return _.dir(a,"previousSibling")},nextUntil:function(a,b,c){return _.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return _.dir(a,"previousSibling",c)},siblings:function(a){return _.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return _.sibling(a.firstChild)},contents:function(a){return a.contentDocument||_.merge([],a.childNodes)}},function(a,b){_.fn[a]=function(c,d){var e=_.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=_.filter(d,e)),this.length>1&&(mb[a]||_.unique(e),lb.test(a)&&e.reverse()),this.pushStack(e)}});var nb=/\S+/g,ob={};_.Callbacks=function(a){a="string"==typeof a?ob[a]||f(a):_.extend({},a);var b,c,d,e,g,h,i=[],j=!a.once&&[],k=function(f){for(b=a.memory&&f,c=!0,h=e||0,e=0,g=i.length,d=!0;i&&g>h;h++)if(i[h].apply(f[0],f[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,i&&(j?j.length&&k(j.shift()):b?i=[]:l.disable())},l={add:function(){if(i){var c=i.length;!function f(b){_.each(b,function(b,c){var d=_.type(c);"function"===d?a.unique&&l.has(c)||i.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),d?g=i.length:b&&(e=c,k(b))}return this},remove:function(){return i&&_.each(arguments,function(a,b){for(var c;(c=_.inArray(b,i,c))>-1;)i.splice(c,1),d&&(g>=c&&g--,h>=c&&h--)}),this},has:function(a){return a?_.inArray(a,i)>-1:!(!i||!i.length)},empty:function(){return i=[],g=0,this},disable:function(){return i=j=b=void 0,this},disabled:function(){return!i},lock:function(){return j=void 0,b||l.disable(),this},locked:function(){return!j},fireWith:function(a,b){return!i||c&&!j||(b=b||[],b=[a,b.slice?b.slice():b],d?j.push(b):k(b)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!c}};return l},_.extend({Deferred:function(a){var b=[["resolve","done",_.Callbacks("once memory"),"resolved"],["reject","fail",_.Callbacks("once memory"),"rejected"],["notify","progress",_.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return _.Deferred(function(c){_.each(b,function(b,f){var g=_.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&_.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?_.extend(a,d):d}},e={};return d.pipe=d.then,_.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=R.call(arguments),g=f.length,h=1!==g||a&&_.isFunction(a.promise)?g:0,i=1===h?a:_.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?R.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&_.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}});var pb;_.fn.ready=function(a){return _.ready.promise().done(a),this},_.extend({isReady:!1,readyWait:1,holdReady:function(a){a?_.readyWait++:_.ready(!0)},ready:function(a){(a===!0?--_.readyWait:_.isReady)||(_.isReady=!0,a!==!0&&--_.readyWait>0||(pb.resolveWith(Z,[_]),_.fn.triggerHandler&&(_(Z).triggerHandler("ready"),_(Z).off("ready"))))}}),_.ready.promise=function(b){return pb||(pb=_.Deferred(),"complete"===Z.readyState?setTimeout(_.ready):(Z.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1))),pb.promise(b)},_.ready.promise();var qb=_.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===_.type(c)){e=!0;for(h in c)_.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,_.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(_(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};_.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType},h.uid=1,h.accepts=_.acceptData,h.prototype={key:function(a){if(!h.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=h.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,_.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(_.isEmptyObject(f))_.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,_.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{_.isArray(b)?d=b.concat(b.map(_.camelCase)):(e=_.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(nb)||[])),c=d.length;for(;c--;)delete g[d[c]]}},hasData:function(a){return!_.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var rb=new h,sb=new h,tb=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ub=/([A-Z])/g;_.extend({hasData:function(a){return sb.hasData(a)||rb.hasData(a)},data:function(a,b,c){return sb.access(a,b,c)},removeData:function(a,b){sb.remove(a,b)},_data:function(a,b,c){return rb.access(a,b,c)},_removeData:function(a,b){rb.remove(a,b)}}),_.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=sb.get(f),1===f.nodeType&&!rb.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=_.camelCase(d.slice(5)),i(f,d,e[d])));rb.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){sb.set(this,a)}):qb(this,function(b){var c,d=_.camelCase(a);if(f&&void 0===b){if(c=sb.get(f,a),void 0!==c)return c;if(c=sb.get(f,d),void 0!==c)return c;if(c=i(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=sb.get(this,d);sb.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&sb.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){sb.remove(this,a)})}}),_.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=rb.get(a,b),c&&(!d||_.isArray(c)?d=rb.access(a,b,_.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=_.queue(a,b),d=c.length,e=c.shift(),f=_._queueHooks(a,b),g=function(){_.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return rb.get(a,c)||rb.access(a,c,{empty:_.Callbacks("once memory").add(function(){rb.remove(a,[b+"queue",c])})})}}),_.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?_.queue(this[0],a):void 0===b?this:this.each(function(){var c=_.queue(this,a,b);_._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&_.dequeue(this,a)})},dequeue:function(a){return this.each(function(){_.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=_.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=rb.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var vb=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wb=["Top","Right","Bottom","Left"],xb=function(a,b){return a=b||a,"none"===_.css(a,"display")||!_.contains(a.ownerDocument,a)},yb=/^(?:checkbox|radio)$/i;!function(){var a=Z.createDocumentFragment(),b=a.appendChild(Z.createElement("div")),c=Z.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),Y.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",Y.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var zb="undefined";Y.focusinBubbles="onfocusin"in a;var Ab=/^key/,Bb=/^(?:mouse|pointer|contextmenu)|click/,Cb=/^(?:focusinfocus|focusoutblur)$/,Db=/^([^.]*)(?:\.(.+)|)$/;_.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=rb.get(a);if(q)for(c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=_.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return typeof _!==zb&&_.event.triggered!==b.type?_.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(nb)||[""],j=b.length;j--;)h=Db.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=_.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=_.event.special[n]||{},k=_.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&_.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),_.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=rb.hasData(a)&&rb.get(a);if(q&&(i=q.events)){for(b=(b||"").match(nb)||[""],j=b.length;j--;)if(h=Db.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=_.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||_.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)_.event.remove(a,n+b[j],c,d,!0);_.isEmptyObject(i)&&(delete q.handle,rb.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||Z],n=X.call(b,"type")?b.type:b,o=X.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||Z,3!==d.nodeType&&8!==d.nodeType&&!Cb.test(n+_.event.triggered)&&(n.indexOf(".")>=0&&(o=n.split("."),n=o.shift(),o.sort()),j=n.indexOf(":")<0&&"on"+n,b=b[_.expando]?b:new _.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:_.makeArray(c,[b]),l=_.event.special[n]||{},e||!l.trigger||l.trigger.apply(d,c)!==!1)){if(!e&&!l.noBubble&&!_.isWindow(d)){for(i=l.delegateType||n,Cb.test(i+n)||(g=g.parentNode);g;g=g.parentNode)m.push(g),h=g;h===(d.ownerDocument||Z)&&m.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=m[f++])&&!b.isPropagationStopped();)b.type=f>1?i:l.bindType||n,k=(rb.get(g,"events")||{})[b.type]&&rb.get(g,"handle"),k&&k.apply(g,c),k=j&&g[j],k&&k.apply&&_.acceptData(g)&&(b.result=k.apply(g,c),b.result===!1&&b.preventDefault());return b.type=n,e||b.isDefaultPrevented()||l._default&&l._default.apply(m.pop(),c)!==!1||!_.acceptData(d)||j&&_.isFunction(d[n])&&!_.isWindow(d)&&(h=d[j],h&&(d[j]=null),_.event.triggered=n,d[n](),_.event.triggered=void 0,h&&(d[j]=h)),b.result}},dispatch:function(a){a=_.event.fix(a);var b,c,d,e,f,g=[],h=R.call(arguments),i=(rb.get(this,"events")||{})[a.type]||[],j=_.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!j.preDispatch||j.preDispatch.call(this,a)!==!1){for(g=_.event.handlers.call(this,a,i),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(f.namespace))&&(a.handleObj=f,a.data=f.data,d=((_.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,h),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?_(e,this).index(i)>=0:_.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||Z,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[_.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Bb.test(e)?this.mouseHooks:Ab.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new _.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=Z),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==l()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===l()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&_.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return _.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=_.extend(new _.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?_.event.trigger(e,null,b):_.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},_.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},_.Event=function(a,b){return this instanceof _.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?j:k):this.type=a,b&&_.extend(this,b),this.timeStamp=a&&a.timeStamp||_.now(),void(this[_.expando]=!0)):new _.Event(a,b)},_.Event.prototype={isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=j,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=j,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=j,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){_.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!_.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),Y.focusinBubbles||_.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){_.event.simulate(b,a.target,_.event.fix(a),!0)};_.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=rb.access(d,b);e||d.addEventListener(a,c,!0),rb.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=rb.access(d,b)-1;e?rb.access(d,b,e):(d.removeEventListener(a,c,!0),rb.remove(d,b))}}}),_.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=k;else if(!d)return this;return 1===e&&(f=d,d=function(a){return _().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=_.guid++)),this.each(function(){_.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,_(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=k),this.each(function(){_.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){_.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?_.event.trigger(a,b,c,!0):void 0}});var Eb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Fb=/<([\w:]+)/,Gb=/<|&#?\w+;/,Hb=/<(?:script|style|link)/i,Ib=/checked\s*(?:[^=]|=\s*.checked.)/i,Jb=/^$|\/(?:java|ecma)script/i,Kb=/^true\/(.*)/,Lb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Mb={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Mb.optgroup=Mb.option,Mb.tbody=Mb.tfoot=Mb.colgroup=Mb.caption=Mb.thead,Mb.th=Mb.td,_.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=_.contains(a.ownerDocument,a);if(!(Y.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||_.isXMLDoc(a)))for(g=r(h),f=r(a),d=0,e=f.length;e>d;d++)s(f[d],g[d]);if(b)if(c)for(f=f||r(a),g=g||r(h),d=0,e=f.length;e>d;d++)q(f[d],g[d]);else q(a,h);return g=r(h,"script"),g.length>0&&p(g,!i&&r(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,n=a.length;n>m;m++)if(e=a[m],e||0===e)if("object"===_.type(e))_.merge(l,e.nodeType?[e]:e);else if(Gb.test(e)){for(f=f||k.appendChild(b.createElement("div")),g=(Fb.exec(e)||["",""])[1].toLowerCase(),h=Mb[g]||Mb._default,f.innerHTML=h[1]+e.replace(Eb,"<$1></$2>")+h[2],j=h[0];j--;)f=f.lastChild;_.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));for(k.textContent="",m=0;e=l[m++];)if((!d||-1===_.inArray(e,d))&&(i=_.contains(e.ownerDocument,e),f=r(k.appendChild(e),"script"),i&&p(f),c))for(j=0;e=f[j++];)Jb.test(e.type||"")&&c.push(e);return k},cleanData:function(a){for(var b,c,d,e,f=_.event.special,g=0;void 0!==(c=a[g]);g++){if(_.acceptData(c)&&(e=c[rb.expando],e&&(b=rb.cache[e]))){if(b.events)for(d in b.events)f[d]?_.event.remove(c,d):_.removeEvent(c,d,b.handle);rb.cache[e]&&delete rb.cache[e]}delete sb.cache[c[sb.expando]]}}}),_.fn.extend({text:function(a){return qb(this,function(a){return void 0===a?_.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=m(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=m(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?_.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||_.cleanData(r(c)),c.parentNode&&(b&&_.contains(c.ownerDocument,c)&&p(r(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(_.cleanData(r(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return _.clone(this,a,b)})},html:function(a){return qb(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!Hb.test(a)&&!Mb[(Fb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Eb,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(_.cleanData(r(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,_.cleanData(r(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=S.apply([],a);var c,d,e,f,g,h,i=0,j=this.length,k=this,l=j-1,m=a[0],p=_.isFunction(m);if(p||j>1&&"string"==typeof m&&!Y.checkClone&&Ib.test(m))return this.each(function(c){var d=k.eq(c);p&&(a[0]=m.call(this,c,d.html())),d.domManip(a,b)});if(j&&(c=_.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(e=_.map(r(c,"script"),n),f=e.length;j>i;i++)g=c,i!==l&&(g=_.clone(g,!0,!0),f&&_.merge(e,r(g,"script"))),b.call(this[i],g,i);if(f)for(h=e[e.length-1].ownerDocument,_.map(e,o),i=0;f>i;i++)g=e[i],Jb.test(g.type||"")&&!rb.access(g,"globalEval")&&_.contains(h,g)&&(g.src?_._evalUrl&&_._evalUrl(g.src):_.globalEval(g.textContent.replace(Lb,"")))}return this}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){_.fn[a]=function(a){for(var c,d=[],e=_(a),f=e.length-1,g=0;f>=g;g++)c=g===f?this:this.clone(!0),_(e[g])[b](c),T.apply(d,c.get());return this.pushStack(d)}});var Nb,Ob={},Pb=/^margin/,Qb=new RegExp("^("+vb+")(?!px)[a-z%]+$","i"),Rb=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)};!function(){function b(){g.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",g.innerHTML="",e.appendChild(f);var b=a.getComputedStyle(g,null);c="1%"!==b.top,d="4px"===b.width,e.removeChild(f)}var c,d,e=Z.documentElement,f=Z.createElement("div"),g=Z.createElement("div");g.style&&(g.style.backgroundClip="content-box",g.cloneNode(!0).style.backgroundClip="",Y.clearCloneStyle="content-box"===g.style.backgroundClip,f.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",f.appendChild(g),a.getComputedStyle&&_.extend(Y,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return null==d&&b(),d},reliableMarginRight:function(){var b,c=g.appendChild(Z.createElement("div"));return c.style.cssText=g.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",g.style.width="1px",e.appendChild(f),b=!parseFloat(a.getComputedStyle(c,null).marginRight),e.removeChild(f),g.removeChild(c),b}}))}(),_.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Sb=/^(none|table(?!-c[ea]).+)/,Tb=new RegExp("^("+vb+")(.*)$","i"),Ub=new RegExp("^([+-])=("+vb+")","i"),Vb={position:"absolute",visibility:"hidden",display:"block"},Wb={letterSpacing:"0",fontWeight:"400"},Xb=["Webkit","O","Moz","ms"];_.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=v(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=_.camelCase(b),i=a.style;return b=_.cssProps[h]||(_.cssProps[h]=x(i,h)),g=_.cssHooks[b]||_.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Ub.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(_.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||_.cssNumber[h]||(c+="px"),Y.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=_.camelCase(b);return b=_.cssProps[h]||(_.cssProps[h]=x(a.style,h)),g=_.cssHooks[b]||_.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=v(a,b,d)),"normal"===e&&b in Wb&&(e=Wb[b]),""===c||c?(f=parseFloat(e),c===!0||_.isNumeric(f)?f||0:e):e}}),_.each(["height","width"],function(a,b){_.cssHooks[b]={get:function(a,c,d){return c?Sb.test(_.css(a,"display"))&&0===a.offsetWidth?_.swap(a,Vb,function(){return A(a,b,d)}):A(a,b,d):void 0},set:function(a,c,d){var e=d&&Rb(a);return y(a,c,d?z(a,b,d,"border-box"===_.css(a,"boxSizing",!1,e),e):0)}}}),_.cssHooks.marginRight=w(Y.reliableMarginRight,function(a,b){return b?_.swap(a,{display:"inline-block"},v,[a,"marginRight"]):void 0}),_.each({margin:"",padding:"",border:"Width"},function(a,b){_.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+wb[d]+b]=f[d]||f[d-2]||f[0];return e}},Pb.test(a)||(_.cssHooks[a+b].set=y)}),_.fn.extend({css:function(a,b){return qb(this,function(a,b,c){var d,e,f={},g=0;if(_.isArray(b)){for(d=Rb(a),e=b.length;e>g;g++)f[b[g]]=_.css(a,b[g],!1,d);return f}return void 0!==c?_.style(a,b,c):_.css(a,b)},a,b,arguments.length>1)},show:function(){return B(this,!0)},hide:function(){return B(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){xb(this)?_(this).show():_(this).hide()})}}),_.Tween=C,C.prototype={constructor:C,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(_.cssNumber[c]?"":"px")},cur:function(){var a=C.propHooks[this.prop];return a&&a.get?a.get(this):C.propHooks._default.get(this)},run:function(a){var b,c=C.propHooks[this.prop];return this.pos=b=this.options.duration?_.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):C.propHooks._default.set(this),this}},C.prototype.init.prototype=C.prototype,C.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=_.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){_.fx.step[a.prop]?_.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[_.cssProps[a.prop]]||_.cssHooks[a.prop])?_.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},C.propHooks.scrollTop=C.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},_.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},_.fx=C.prototype.init,_.fx.step={};var Yb,Zb,$b=/^(?:toggle|show|hide)$/,_b=new RegExp("^(?:([+-])=|)("+vb+")([a-z%]*)$","i"),ac=/queueHooks$/,bc=[G],cc={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=_b.exec(b),f=e&&e[3]||(_.cssNumber[a]?"":"px"),g=(_.cssNumber[a]||"px"!==f&&+d)&&_b.exec(_.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,_.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};_.Animation=_.extend(I,{tweener:function(a,b){_.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],cc[c]=cc[c]||[],cc[c].unshift(b)},prefilter:function(a,b){b?bc.unshift(a):bc.push(a)}}),_.speed=function(a,b,c){var d=a&&"object"==typeof a?_.extend({},a):{complete:c||!c&&b||_.isFunction(a)&&a,duration:a,easing:c&&b||b&&!_.isFunction(b)&&b};return d.duration=_.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in _.fx.speeds?_.fx.speeds[d.duration]:_.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){_.isFunction(d.old)&&d.old.call(this),d.queue&&_.dequeue(this,d.queue)},d},_.fn.extend({fadeTo:function(a,b,c,d){return this.filter(xb).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=_.isEmptyObject(a),f=_.speed(b,c,d),g=function(){var b=I(this,_.extend({},a),f);(e||rb.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=_.timers,g=rb.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&ac.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&_.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=rb.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=_.timers,g=d?d.length:0;for(c.finish=!0,_.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),_.each(["toggle","show","hide"],function(a,b){var c=_.fn[b];_.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(E(b,!0),a,d,e)}}),_.each({slideDown:E("show"),slideUp:E("hide"),slideToggle:E("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){_.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),_.timers=[],_.fx.tick=function(){var a,b=0,c=_.timers;for(Yb=_.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||_.fx.stop(),Yb=void 0},_.fx.timer=function(a){_.timers.push(a),a()?_.fx.start():_.timers.pop()},_.fx.interval=13,_.fx.start=function(){Zb||(Zb=setInterval(_.fx.tick,_.fx.interval))},_.fx.stop=function(){clearInterval(Zb),Zb=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(a,b){return a=_.fx?_.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=Z.createElement("input"),b=Z.createElement("select"),c=b.appendChild(Z.createElement("option"));a.type="checkbox",Y.checkOn=""!==a.value,Y.optSelected=c.selected,b.disabled=!0,Y.optDisabled=!c.disabled,a=Z.createElement("input"),a.value="t",a.type="radio",Y.radioValue="t"===a.value}();var dc,ec,fc=_.expr.attrHandle;_.fn.extend({attr:function(a,b){return qb(this,_.attr,a,b,arguments.length>1)
},removeAttr:function(a){return this.each(function(){_.removeAttr(this,a)})}}),_.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===zb?_.prop(a,b,c):(1===f&&_.isXMLDoc(a)||(b=b.toLowerCase(),d=_.attrHooks[b]||(_.expr.match.bool.test(b)?ec:dc)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=_.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void _.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(nb);if(f&&1===a.nodeType)for(;c=f[e++];)d=_.propFix[c]||c,_.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!Y.radioValue&&"radio"===b&&_.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),ec={set:function(a,b,c){return b===!1?_.removeAttr(a,c):a.setAttribute(c,c),c}},_.each(_.expr.match.bool.source.match(/\w+/g),function(a,b){var c=fc[b]||_.find.attr;fc[b]=function(a,b,d){var e,f;return d||(f=fc[b],fc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,fc[b]=f),e}});var gc=/^(?:input|select|textarea|button)$/i;_.fn.extend({prop:function(a,b){return qb(this,_.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[_.propFix[a]||a]})}}),_.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!_.isXMLDoc(a),f&&(b=_.propFix[b]||b,e=_.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||gc.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),Y.optSelected||(_.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_.propFix[this.toLowerCase()]=this});var hc=/[\t\r\n\f]/g;_.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(_.isFunction(a))return this.each(function(b){_(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(nb)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(hc," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=_.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(_.isFunction(a))return this.each(function(b){_(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(nb)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(hc," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?_.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(_.isFunction(a)?function(c){_(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var b,d=0,e=_(this),f=a.match(nb)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===zb||"boolean"===c)&&(this.className&&rb.set(this,"__className__",this.className),this.className=this.className||a===!1?"":rb.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(hc," ").indexOf(b)>=0)return!0;return!1}});var ic=/\r/g;_.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=_.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,_(this).val()):a,null==e?e="":"number"==typeof e?e+="":_.isArray(e)&&(e=_.map(e,function(a){return null==a?"":a+""})),b=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=_.valHooks[e.type]||_.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(ic,""):null==c?"":c)}}}),_.extend({valHooks:{option:{get:function(a){var b=_.find.attr(a,"value");return null!=b?b:_.trim(_.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(Y.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&_.nodeName(c.parentNode,"optgroup"))){if(b=_(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=_.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=_.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),_.each(["radio","checkbox"],function(){_.valHooks[this]={set:function(a,b){return _.isArray(b)?a.checked=_.inArray(_(a).val(),b)>=0:void 0}},Y.checkOn||(_.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),_.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){_.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),_.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var jc=_.now(),kc=/\?/;_.parseJSON=function(a){return JSON.parse(a+"")},_.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&_.error("Invalid XML: "+a),b};var lc=/#.*$/,mc=/([?&])_=[^&]*/,nc=/^(.*?):[ \t]*([^\r\n]*)$/gm,oc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,pc=/^(?:GET|HEAD)$/,qc=/^\/\//,rc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,sc={},tc={},uc="*/".concat("*"),vc=a.location.href,wc=rc.exec(vc.toLowerCase())||[];_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vc,type:"GET",isLocal:oc.test(wc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":uc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":_.parseJSON,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?L(L(a,_.ajaxSettings),b):L(_.ajaxSettings,a)},ajaxPrefilter:J(sc),ajaxTransport:J(tc),ajax:function(a,b){function c(a,b,c,g){var i,k,r,s,u,w=b;2!==t&&(t=2,h&&clearTimeout(h),d=void 0,f=g||"",v.readyState=a>0?4:0,i=a>=200&&300>a||304===a,c&&(s=M(l,v,c)),s=N(l,s,v,i),i?(l.ifModified&&(u=v.getResponseHeader("Last-Modified"),u&&(_.lastModified[e]=u),u=v.getResponseHeader("etag"),u&&(_.etag[e]=u)),204===a||"HEAD"===l.type?w="nocontent":304===a?w="notmodified":(w=s.state,k=s.data,r=s.error,i=!r)):(r=w,(a||!w)&&(w="error",0>a&&(a=0))),v.status=a,v.statusText=(b||w)+"",i?o.resolveWith(m,[k,w,v]):o.rejectWith(m,[v,w,r]),v.statusCode(q),q=void 0,j&&n.trigger(i?"ajaxSuccess":"ajaxError",[v,l,i?k:r]),p.fireWith(m,[v,w]),j&&(n.trigger("ajaxComplete",[v,l]),--_.active||_.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=void 0),b=b||{};var d,e,f,g,h,i,j,k,l=_.ajaxSetup({},b),m=l.context||l,n=l.context&&(m.nodeType||m.jquery)?_(m):_.event,o=_.Deferred(),p=_.Callbacks("once memory"),q=l.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!g)for(g={};b=nc.exec(f);)g[b[1].toLowerCase()]=b[2];b=g[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return d&&d.abort(b),c(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,l.url=((a||l.url||vc)+"").replace(lc,"").replace(qc,wc[1]+"//"),l.type=b.method||b.type||l.method||l.type,l.dataTypes=_.trim(l.dataType||"*").toLowerCase().match(nb)||[""],null==l.crossDomain&&(i=rc.exec(l.url.toLowerCase()),l.crossDomain=!(!i||i[1]===wc[1]&&i[2]===wc[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(wc[3]||("http:"===wc[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=_.param(l.data,l.traditional)),K(sc,l,b,v),2===t)return v;j=_.event&&l.global,j&&0===_.active++&&_.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!pc.test(l.type),e=l.url,l.hasContent||(l.data&&(e=l.url+=(kc.test(e)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=mc.test(e)?e.replace(mc,"$1_="+jc++):e+(kc.test(e)?"&":"?")+"_="+jc++)),l.ifModified&&(_.lastModified[e]&&v.setRequestHeader("If-Modified-Since",_.lastModified[e]),_.etag[e]&&v.setRequestHeader("If-None-Match",_.etag[e])),(l.data&&l.hasContent&&l.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",l.contentType),v.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+uc+"; q=0.01":""):l.accepts["*"]);for(k in l.headers)v.setRequestHeader(k,l.headers[k]);if(l.beforeSend&&(l.beforeSend.call(m,v,l)===!1||2===t))return v.abort();u="abort";for(k in{success:1,error:1,complete:1})v[k](l[k]);if(d=K(tc,l,b,v)){v.readyState=1,j&&n.trigger("ajaxSend",[v,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){v.abort("timeout")},l.timeout));try{t=1,d.send(r,c)}catch(w){if(!(2>t))throw w;c(-1,w)}}else c(-1,"No Transport");return v},getJSON:function(a,b,c){return _.get(a,b,c,"json")},getScript:function(a,b){return _.get(a,void 0,b,"script")}}),_.each(["get","post"],function(a,b){_[b]=function(a,c,d,e){return _.isFunction(c)&&(e=e||d,d=c,c=void 0),_.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),_._evalUrl=function(a){return _.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},_.fn.extend({wrapAll:function(a){var b;return _.isFunction(a)?this.each(function(b){_(this).wrapAll(a.call(this,b))}):(this[0]&&(b=_(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(_.isFunction(a)?function(b){_(this).wrapInner(a.call(this,b))}:function(){var b=_(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=_.isFunction(a);return this.each(function(c){_(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){_.nodeName(this,"body")||_(this).replaceWith(this.childNodes)}).end()}}),_.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},_.expr.filters.visible=function(a){return!_.expr.filters.hidden(a)};var xc=/%20/g,yc=/\[\]$/,zc=/\r?\n/g,Ac=/^(?:submit|button|image|reset|file)$/i,Bc=/^(?:input|select|textarea|keygen)/i;_.param=function(a,b){var c,d=[],e=function(a,b){b=_.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=_.ajaxSettings&&_.ajaxSettings.traditional),_.isArray(a)||a.jquery&&!_.isPlainObject(a))_.each(a,function(){e(this.name,this.value)});else for(c in a)O(c,a[c],b,e);return d.join("&").replace(xc,"+")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=_.prop(this,"elements");return a?_.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!_(this).is(":disabled")&&Bc.test(this.nodeName)&&!Ac.test(a)&&(this.checked||!yb.test(a))}).map(function(a,b){var c=_(this).val();return null==c?null:_.isArray(c)?_.map(c,function(a){return{name:b.name,value:a.replace(zc,"\r\n")}}):{name:b.name,value:c.replace(zc,"\r\n")}}).get()}}),_.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Cc=0,Dc={},Ec={0:200,1223:204},Fc=_.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Dc)Dc[a]()}),Y.cors=!!Fc&&"withCredentials"in Fc,Y.ajax=Fc=!!Fc,_.ajaxTransport(function(a){var b;return Y.cors||Fc&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Cc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Dc[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Ec[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Dc[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return _.globalEval(a),a}}}),_.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),_.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=_("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),Z.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Gc=[],Hc=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Gc.pop()||_.expando+"_"+jc++;return this[a]=!0,a}}),_.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Hc.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Hc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=_.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Hc,"$1"+e):b.jsonp!==!1&&(b.url+=(kc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||_.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Gc.push(e)),g&&_.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),_.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||Z;var d=gb.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=_.buildFragment([a],b,e),e&&e.length&&_(e).remove(),_.merge([],d.childNodes))};var Ic=_.fn.load;_.fn.load=function(a,b,c){if("string"!=typeof a&&Ic)return Ic.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=_.trim(a.slice(h)),a=a.slice(0,h)),_.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&_.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?_("<div>").append(_.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){_.fn[b]=function(a){return this.on(b,a)}}),_.expr.filters.animated=function(a){return _.grep(_.timers,function(b){return a===b.elem}).length};var Jc=a.document.documentElement;_.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=_.css(a,"position"),l=_(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=_.css(a,"top"),i=_.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),_.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},_.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){_.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,_.contains(b,d)?(typeof d.getBoundingClientRect!==zb&&(e=d.getBoundingClientRect()),c=P(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===_.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),_.nodeName(a[0],"html")||(d=a.offset()),d.top+=_.css(a[0],"borderTopWidth",!0),d.left+=_.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-_.css(c,"marginTop",!0),left:b.left-d.left-_.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Jc;a&&!_.nodeName(a,"html")&&"static"===_.css(a,"position");)a=a.offsetParent;return a||Jc})}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;_.fn[b]=function(e){return qb(this,function(b,e,f){var g=P(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),_.each(["top","left"],function(a,b){_.cssHooks[b]=w(Y.pixelPosition,function(a,c){return c?(c=v(a,b),Qb.test(c)?_(a).position()[b]+"px":c):void 0})}),_.each({Height:"height",Width:"width"},function(a,b){_.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){_.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return qb(this,function(b,c,d){var e;return _.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?_.css(b,c,g):_.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),_.fn.size=function(){return this.length},_.fn.andSelf=_.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return _});var Kc=a.jQuery,Lc=a.$;return _.noConflict=function(b){return a.$===_&&(a.$=Lc),b&&a.jQuery===_&&(a.jQuery=Kc),_},typeof b===zb&&(a.jQuery=a.$=_),_});var JoelPurra=JoelPurra||{};!function(a,b){function c(a){return a.replace(/(!"#$%&'\(\)\*\+,\.\/:;<=>\?@\[\]^`\{\|\}~)/g,"\\\\$1")}function d(b,d){var e=a(k).not(":disabled").not(":hidden").not("a[href]:empty");if("INPUT"===b[0].tagName&&"radio"===b[0].type&&""!==b[0].name){var f=c(b[0].name);e=e.not("input[type=radio][name="+f+"]").add(b)}var g=e.index(b),h=(g+d)%e.length;-1>=h&&(h=e.length+h);var i=e.eq(h);return i}function e(a){l=a.target}function f(b){try{var c=a(b);if(c&&0!==c.size())return c}catch(d){}return null}function g(){var b=null||f(":focus")||f(document.activeElement)||f(l)||a();return b}function h(a,b){var c=d(a,b);c.focus()}function i(){a(document).on("focusin"+j,e)}b.EmulateTab=function(){};var j=".EmulateTab",k=":input, a[href]",l=null;b.EmulateTab.forwardTab=function(a){return b.EmulateTab.tab(a,1)},b.EmulateTab.reverseTab=function(a){return b.EmulateTab.tab(a,-1)},b.EmulateTab.tab=function(c,d){a.isNumeric(c)&&(d=c,c=void 0),c=c||b.EmulateTab.getFocused(),d=d||1,h(c,d)},b.EmulateTab.getFocused=function(){return g()},a.extend({emulateTab:function(a,c){return b.EmulateTab.tab(a,c)}}),a.fn.extend({emulateTab:function(a){return b.EmulateTab.tab(this,a)}}),a(i)}(jQuery,JoelPurra);var JoelPurra=JoelPurra||{};!function(a,b){function c(a,b,c){return a=a===!0,b=b===!0,a&&void 0!==c&&0!==c.length?(c.emulateTab(b?-1:1),!0):!1}function d(b){return b===k.key||a.isArray(k.key)&&-1!==a.inArray(b,k.key)?!0:!1}function e(a){return a.altKey||a.ctrlKey||a.metaKey||!d(a.which)?!1:!0}function f(b){if(e(b)){var d=a(b.target);if(!(d.is(m)||d.parents(m).length>0||!d.is(l)&&0===d.parents(l).length)){var f=c(!0,b.shiftKey,d);return f?(b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation(),!1):void 0}}}function g(){a(document).on("keydown"+h,f)}b.PlusAsTab={};var h=".PlusAsTab",i=107,j={key:i},k=a.extend(!0,{},j),l=".plus-as-tab, [data-plus-as-tab=true]",m=".disable-plus-as-tab, [data-plus-as-tab=false]";b.PlusAsTab.setOptions=function(b){a.extend(!0,k,b)},b.PlusAsTab.plusAsTab=function(b,c){return c=void 0===c?!0:c===!0,b.each(function(){var b=a(this);b.not(m).not(l).attr("data-plus-as-tab",c?"true":"false")})},a.fn.extend({plusAsTab:function(a){return b.PlusAsTab.plusAsTab(this,a)}}),a(g)}(jQuery,JoelPurra),function(a){a.fn.bValidator=function(b,c){return this.each(function(){new bValidator(a(this),b,c)})},bValidator=function(b,c,d){var e,f={singleError:!1,offset:{x:-23,y:-4},position:{x:"right",y:"top"},template:'<div class="{errMsgClass}"><em/>{message}</div>',templateCloseIcon:'<div style="display:table"><div style="display:table-cell">{message}</div><div style="display:table-cell"><div class="{closeIconClass}">x</div></div></div>',showCloseIcon:!0,showErrMsgSpeed:"normal",scrollToError:!0,classNamePrefix:"bvalidator_",closeIconClass:"close_icon",errMsgClass:"errmsg",errorClass:"invalid",validClass:"",lang:"en",errorMessageAttr:"data-bvalidator-msg",validateActionsAttr:"data-bvalidator",forceValidAttr:"data-bvalidator-forcevalid",modifyActionsAttr:"data-bvalidator-modifier",paramsDelimiter:":",actionsDelimiter:",",validateOn:null,errorValidateOn:"keyup",onBeforeValidate:null,onAfterValidate:null,onValidateFail:null,onValidateSuccess:null,onBeforeElementValidation:null,onAfterElementValidation:null,onBeforeAllValidations:null,onAfterAllValidations:null,validateOnSubmit:!0,stopSubmitPropagation:!0,noMsgIfExistsForInstance:[],validateTillInvalid:!1,autoModifiers:{digit:["trim"],number:["trim"],email:["trim"],url:["trim"],date:["trim"],ip4:["trim"],ip6:["trim"]},ajaxAnswerValid:"ok",ajaxDelay:300,ajaxOptions:{cache:!1},ajaxParamName:"bValue",errorMessages:{en:{"default":"Please correct this value.",equalto:"Please enter the same value again.",differs:"Please enter a different value.",minlength:"The length must be at least {0} characters",maxlength:"The length must be at max {0} characters",rangelength:"The length must be between {0} and {1}",min:"Please enter a number greater than or equal to {0}.",max:"Please enter a number less than or equal to {0}.",between:"Please enter a number between {0} and {1}.",required:"This field is required.",alpha:"Please enter alphabetic characters only.",alphanum:"Please enter alphanumeric characters only.",digit:"Please enter only digits.",number:"Please enter a valid number.",email:"Please enter a valid email address.",image:"This field should only contain image types",url:"Please enter a valid URL.",ip4:"Please enter a valid IPv4 address.",ip6:"Please enter a valid IPv6 address.",date:"Please enter a valid date in format {0}."}}},g=function(b,c,d,e){var g=b.data("ajaxData.bV"+c);if(g?clearTimeout(g.timeOut):(g={},b.data("ajaxData.bV"+c,g)),g.val=b.val(),g.lastValidated===g.val)return v.ajax(g.lastResponse);var h=a.extend({},f.ajaxOptions);if("object"!=typeof h.data&&(h.data={}),h.url=d,e){var i=!1;return h.async=!1,h.data[f.ajaxParamName]=g.val,a.ajax(h).done(function(a){g.lastValidated=g.val,g.lastResponse=a,i=v.ajax(a)}),i}g.timeOut=setTimeout(function(){var c=b.val();g.val==c&&(h.async=!0,h.data[f.ajaxParamName]=c,a.ajax(h).done(function(a){g.lastValidated=c,g.lastResponse=a,x.validate(!1,b,void 0,a)}))},f.ajaxDelay)},h=function(a){return a.is(":input")?a:a.find(":input["+f.validateActionsAttr+"], :input["+f.modifyActionsAttr+"]").not(":button, :image, :reset, :submit, :hidden, :disabled")},i=function(b){b.bind(f.validateOn+".bV"+d,{bVInstance:x},function(b){b.data.bVInstance.validate(!1,a(this))})},j=function(a,b){for(var c=0;c<b.length;c++)if(a.data("errMsg.bV"+b[c]))return!0;return!1},k=function(b,c){l(b),msg_container=a('<div class="bVErrMsgContainer"></div>').css("position","absolute"),b.data("errMsg.bV"+d,msg_container),msg_container.insertAfter(b);for(var g="",h=0;h<c.length;h++)g+="<div>"+c[h]+"</div>\n";f.showCloseIcon&&(g=f.templateCloseIcon.replace("{message}",g).replace("{closeIconClass}",f.classNamePrefix+f.closeIconClass));var i=a(f.template.replace("{errMsgClass}",f.classNamePrefix+f.errMsgClass).replace("{message}",g));i.appendTo(msg_container),i.find("."+f.classNamePrefix+f.closeIconClass).click(function(b){b.preventDefault(),a(this).closest("."+f.classNamePrefix+f.errMsgClass).css("visibility","hidden")});var j=m(b,i);if(i.css({visibility:"visible",position:"absolute",top:j.top,left:j.left}).fadeIn(f.showErrMsgSpeed),f.scrollToError){var k=i.offset().top;(null===e||e>k)&&(e=k)}},l=function(a){var b=a.data("errMsg.bV"+d);b&&(b.remove(),a.data("errMsg.bV"+d,null))},m=function(a,b){var c=a.data("errMsg.bV"+d),e=-(c.offset().top-a.offset().top+b.outerHeight()-f.offset.y),g=a.offset().left+a.outerWidth()-c.offset().left+f.offset.x,h=f.position.x,i=f.position.y;if("center"==i||"bottom"==i){var j=b.outerHeight()+a.outerHeight();"center"==i&&(e+=j/2),"bottom"==i&&(e+=j)}if("center"==h||"left"==h){var k=a.outerWidth();"center"==h&&(g-=k/2),"left"==h&&(g-=k)}return{top:e,left:g}},n=function(b,c,d,e){return a.isFunction(f[b])?f[b](c,d,e):void 0},o=function(b){var c=b.attr("name");return c&&/^[^\[\]]+\[.*\]$/.test(c)?a("input:checkbox").filter(function(){var a=new RegExp(c.match(/^[^\[\]]+/)[0]+"\\[.*\\]$");return this.name.match(a)}):b},p=function(b){var c={};return b.is("input:checkbox")?c.value=b.attr("name")?c.selectedInGroup=o(b).filter(":checked").length:b.attr("checked"):b.is("input:radio")?c.value=b.attr("name")?c.value=a('input:radio[name="'+b.attr("name")+'"]:checked').length:b.val():b.is("select")?(c.selectedInGroup=a("option:selected",b).length,c.value=b.val()):b.is(":input")&&(c.value=b.val()),c},q=function(b){var c=a.trim(b).replace(new RegExp("\\s*\\"+f.actionsDelimiter+"\\s*","g"),f.actionsDelimiter);return c?c.split(f.actionsDelimiter):null},r=function(b){var c=a.trim(b).match(/^(.*?)\[(.*?)\]/);return c&&3==c.length?{name:c[1],params:c[2].split(f.paramsDelimiter)}:{name:b,params:[]}},s=function(b,c){var d,e=t(b,c);"undefined"!=typeof e&&(d=a(c).val(),d!=e&&a(c).val(e))},t=function(b,c){var d=[a(c).val()].concat(b.params);return"function"==typeof w[b.name]?w[b.name].apply(c,d):"function"==typeof window[b.name]?window[b.name].apply(c,d):void(window.console.warn&&window.console.warn("[bValidator] unknown modifier: "+b.name))},u=function(a,b,c){return"function"==typeof v[a.name]?v[a.name].apply(b,[c].concat(a.params)):"function"==typeof window[a.name]?window[a.name].apply(b,[c.value].concat(a.params)):void(window.console.warn&&window.console.warn("[bValidator] unknown validator: "+a.name))},v={equalto:function(b,c){return b.value==a("#"+c).val()},differs:function(b,c){return b.value!=a("#"+c).val()},minlength:function(a,b){return a.value.length>=parseInt(b)},maxlength:function(a,b){return a.value.length<=parseInt(b)},rangelength:function(a,b,c){return a.value.length>=parseInt(b)&&a.value.length<=parseInt(c)},min:function(a,b){return a.selectedInGroup?a.selectedInGroup>=parseFloat(b):v.number(a)?parseFloat(a.value)>=parseFloat(b):!1},max:function(a,b){return a.selectedInGroup?a.selectedInGroup<=parseFloat(b):v.number(a)?parseFloat(a.value)<=parseFloat(b):!1},between:function(a,b,c){if(a.selectedInGroup)return a.selectedInGroup>=parseFloat(b)&&a.selectedInGroup<=parseFloat(c);if(!v.number(a))return!1;var d=parseFloat(a.value);return d>=parseFloat(b)&&d<=parseFloat(c)},required:function(b){return b.value&&a.trim(b.value)?!0:!1},alpha:function(a){return v.regex(a,/^[a-z ._\-]+$/i)},alphanum:function(a){return v.regex(a,/^[a-z\d ._\-]+$/i)},digit:function(a){return v.regex(a,/^\d+$/)},number:function(a){return v.regex(a,/^[-+]?\d+(\.\d+)?$/)},email:function(a){return v.regex(a,/^([a-zA-Z\d_\.\-\+%])+\@(([a-zA-Z\d\-])+\.)+([a-zA-Z\d]{2,4})+$/)},image:function(a){return v.regex(a,/\.(jpg|jpeg|png|gif|bmp)$/i)},url:function(a){return v.regex(a,/^\b(https?|ftp):\/\/([-A-Z0-9.]+)(\/[-A-Z0-9+&@#\/%=~_|!:,.;]*)?(\?[A-Z0-9+&@#\/%=~_|!:,.;]*)?$/i)},regex:function(a,b,c){return"string"==typeof b&&(b=new RegExp(b,c)),b.test(a.value)},ip4:function(a){return v.regex(a,/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/)},ip6:function(a){return v.regex(a,/^(?:(?:(?:[A-F\d]{1,4}:){5}[A-F\d]{1,4}|(?:[A-F\d]{1,4}:){4}:[A-F\d]{1,4}|(?:[A-F\d]{1,4}:){3}(?::[A-F\d]{1,4}){1,2}|(?:[A-F\d]{1,4}:){2}(?::[A-F\d]{1,4}){1,3}|[A-F\d]{1,4}:(?::[A-F\d]{1,4}){1,4}|(?:[A-F\d]{1,4}:){1,5}|:(?::[A-F\d]{1,4}){1,5}|:):(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)|(?:[A-F\d]{1,4}:){7}[A-F\d]{1,4}|(?:[A-F\d]{1,4}:){6}:[A-F\d]{1,4}|(?:[A-F\d]{1,4}:){5}(?::[A-F\d]{1,4}){1,2}|(?:[A-F\d]{1,4}:){4}(?::[A-F\d]{1,4}){1,3}|(?:[A-F\d]{1,4}:){3}(?::[A-F\d]{1,4}){1,4}|(?:[A-F\d]{1,4}:){2}(?::[A-F\d]{1,4}){1,5}|[A-F\d]{1,4}:(?::[A-F\d]{1,4}){1,6}|(?:[A-F\d]{1,4}:){1,7}:|:(?::[A-F\d]{1,4}){1,7})$/i)},date:function(a,b){if(10==a.value.length&&10==b.length){var c=b.match(/[^mdy]+/g);if(2==c.length&&1==c[0].length&&c[0]==c[1]){for(var d=a.value.split(c[0]),e=b.split(c[0]),f=0;3>f;f++)if("dd"==e[f])var g=d[f];else if("mm"==e[f])var h=d[f];else if("yyyy"==e[f])var i=d[f];var j=new Date(i,h-1,g);return j.getMonth()+1!=h||j.getDate()!=g||j.getFullYear()!=i?!1:!0}}return!1},extension:function(){var a=arguments[0],b="";if(!arguments[1])return!1;for(var c=1;c<arguments.length;c++)b+=arguments[c],c!=arguments.length-1&&(b+="|");return v.regex(a,"\\.("+b+")$","i")},ajax:function(a){return a==f.ajaxAnswerValid?!0:!1}},w={trim:function(b){return a.trim(b)}},x=this;window.bValidatorOptions&&a.extend(!0,f,window.bValidatorOptions),c&&a.extend(!0,f,c);var y=b.data("bValidators");if(y||(y={},b.data("bValidators",y)),b.data("bValidator")){if(!d)return b.data("bValidator");if(y[d])return y[d]}else d||(d="first"),b.data("bValidator",this);y[d]=this,b.is("form")&&(f.validateOnSubmit&&b.bind("submit.bV"+d,function(a){return x.validate(!1,void 0,1)?!0:f.stopSubmitPropagation?(a.stopImmediatePropagation(),!1):void 0}),b.bind("reset.bV"+d,function(){x.reset()})),f.validateOn&&i(h(b)),this.validate=function(c,m,t,w,y){var z,A=!0;if(m)z=m;else{if("true"==b.attr(f.forceValidAttr))return!0;z=h(b)}if(e=null,("undefined"!=typeof w||n("onBeforeAllValidations",z)!==!1)&&z.each(function(){var b,e=q(a(this).attr(f.validateActionsAttr)),h=q(a(this).attr(f.modifyActionsAttr)),m=-1,z=[],B=0;if(h)for(var C=0;C<h.length;C++)b=r(h[C]),b.name&&s(b,this);if(!e)return!0;for(var C=0;C<e.length;C++)if(b=r(e[C]),b.name){if(f.autoModifiers&&f.autoModifiers[b.name])for(var D=0;D<f.autoModifiers[b.name].length;D++)s(r(f.autoModifiers[b.name][D]),this);if("required"==b.name)var E=1;else if("ajax"==b.name)var F=1;if("valempty"==b.name)var G=1;else z[++m]=b}var H,I=p(a(this)),J=[];if(!t&&F&&"undefined"==typeof w){for(var K=0,C=0;C<z.length&&"ajax"!=z[C].name;C++)if(!u(z[C],this,I)){K=1;break}if(!K&&(w=g(a(this),d,b.params[0]),"undefined"==typeof w))return!0}if(f.noMsgIfExistsForInstance.length&&j(a(this),f.noMsgIfExistsForInstance)&&(c=1),(E||G||v.required(I))&&"true"!=a(this).attr(f.forceValidAttr)||(B=1),!B){var L=a(this).attr(f.errorMessageAttr),M=0;if(a(this).data("checked.bV"+d,1),n("onBeforeElementValidation",a(this))!==!1)for(var C=0;C<z.length;C++)if("valempty"!=z[C].name){if((f.validateTillInvalid||y)&&J.length)break;if(n("onBeforeValidate",a(this),z[C].name)!==!1){if("ajax"==z[C].name){if(K)continue;H=t||"undefined"==typeof w?J.length?!0:g(a(this),d,z[C].params[0],1):v.ajax.apply(this,[w])}else H=u(z[C],this,I);if(n("onAfterValidate",a(this),z[C].name,H)!==!1)if(H)n("onValidateSuccess",a(this),z[C].name);
else{if(c)J[J.length]="";else if(!M){if(L)M=1;else if(f.singleError&&J.length)M=1,L="";else if(f.errorMessages[f.lang]&&f.errorMessages[f.lang][z[C].name])L=f.errorMessages[f.lang][z[C].name];else if(f.errorMessages.en[z[C].name])L=f.errorMessages.en[z[C].name];else{var N=a(this).attr(f.errorMessageAttr+"-"+z[C].name);L=N?N:f.errorMessages[f.lang]&&f.errorMessages[f.lang]["default"]?f.errorMessages[f.lang]["default"]:f.errorMessages.en["default"]}if(L.indexOf("{"))for(var O=0;O<z[C].params.length;O++)L=L.replace(new RegExp("\\{"+O+"\\}","g"),z[C].params[O]);J.length&&"required"==z[C].name||(J[J.length]=L),L=null}A=!1,n("onValidateFail",a(this),z[C].name,J)}}}var P=n("onAfterElementValidation",a(this),J)}if(!c&&P!==!1&&a(this).data("checked.bV"+d)){var Q=a(this).is("input:checkbox,input:radio")?1:0;if(J.length){if(0!==P&&k(a(this),J),Q||(a(this).removeClass(f.classNamePrefix+f.validClass),f.errorClass&&a(this).addClass(f.classNamePrefix+f.errorClass)),f.errorValidateOn){f.validateOn&&a(this).unbind(f.validateOn+".bV"+d);var R=Q||a(this).is("select,input:file")?"change":f.errorValidateOn;if(Q){var S=a(this).is("input:checkbox")?o(a(this)):a('input:radio[name="'+a(this).attr("name")+'"]');a(S).unbind(".bVerror"+d),a(S).bind("change.bVerror"+d,{bVInstance:x,groupLeader:a(this)},function(a){a.data.bVInstance.validate(!1,a.data.groupLeader)})}else a(this).unbind(".bVerror"+d),a(this).bind(R+".bVerror"+d,{bVInstance:x},function(b){b.data.bVInstance.validate(!1,a(this))})}}else 0!==P&&l(a(this)),Q||(a(this).removeClass(f.classNamePrefix+f.errorClass),f.validClass&&a(this).addClass(f.classNamePrefix+f.validClass)),f.validateOn&&(a(this).unbind(f.validateOn+".bV"+d),i(a(this))),a(this).data("checked.bV"+d,0)}return(f.singleError||y)&&A===!1?!1:void 0}),n("onAfterAllValidations",z,A),e&&!m&&(a(window).scrollTop()>e||a(window).scrollTop()+a(window).height()<e)){var B=navigator.userAgent.toLowerCase();a(B.indexOf("chrome")>-1||B.indexOf("safari")>-1?"body":"html").animate({scrollTop:e-10},{duration:"slow"})}return A},this.getOptions=function(){return f},this.getValidators=this.getActions=function(){return v},this.getModifiers=function(){return w},this.isValid=function(a){return this.validate(!0,a,1,void 0,!0)},this.removeMsg=this.removeErrMsg=function(b){b.each(function(){l(a(this))})},this.showMsg=function(b,c){b.length&&("string"==typeof c&&(c=[c]),b.each(function(){k(a(this),c)}))},this.getInputs=function(){return h(b)},this.bindValidateOn=function(a){i(a)},this.reset=function(c){c&&c.length||(c=h(b)),f.validateOn&&i(c),c.each(function(){l(a(this)),a(this).unbind(".bVerror"+d),a(this).removeClass(f.classNamePrefix+f.errorClass),a(this).removeClass(f.classNamePrefix+f.validClass),a(this).removeData("ajaxData.bV"+d),a(this).removeData("errMsg.bV"+d),a(this).removeData("checked.bV"+d)})},this.destroy=function(){b.is("form")&&b.unbind(".bV"+d),this.reset(),b.removeData("bValidator"),b.removeData("bValidators")}}}(jQuery),function(){function a(a,b,c){for(var d=(c||0)-1,e=a?a.length:0;++d<e;)if(a[d]===b)return d;return-1}function b(b,c){var d=typeof c;if(b=b.cache,"boolean"==d||null==c)return b[c]?0:-1;"number"!=d&&"string"!=d&&(d="object");var e="number"==d?c:r+c;return b=(b=b[d])&&b[e],"object"==d?b&&a(b,c)>-1?0:-1:b?0:-1}function c(a){var b=this.cache,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:r+a,e=b[c]||(b[c]={});"object"==c?(e[d]||(e[d]=[])).push(a):e[d]=!0}}function d(a){return a.charCodeAt(0)}function e(a,b){for(var c=a.criteria,d=b.criteria,e=-1,f=c.length;++e<f;){var g=c[e],h=d[e];if(g!==h){if(g>h||"undefined"==typeof g)return 1;if(h>g||"undefined"==typeof h)return-1}}return a.index-b.index}function f(a){var b=-1,d=a.length,e=a[0],f=a[d/2|0],g=a[d-1];if(e&&"object"==typeof e&&f&&"object"==typeof f&&g&&"object"==typeof g)return!1;var h=i();h["false"]=h["null"]=h["true"]=h.undefined=!1;var j=i();for(j.array=a,j.cache=h,j.push=c;++b<d;)j.push(a[b]);return j}function g(a){return"\\"+V[a]}function h(){return o.pop()||[]}function i(){return p.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function j(a){a.length=0,o.length<t&&o.push(a)}function k(a){var b=a.cache;b&&k(b),a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null,p.length<t&&p.push(a)}function l(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(0>e?0:e);++d<e;)f[d]=a[b+d];return f}function m(c){function o(a){return a&&"object"==typeof a&&!Zd(a)&&Hd.call(a,"__wrapped__")?a:new p(a)}function p(a,b){this.__chain__=!!b,this.__wrapped__=a}function t(a){function b(){if(d){var a=l(d);Id.apply(a,arguments)}if(this instanceof b){var f=X(c.prototype),g=c.apply(f,a||arguments);return Eb(g)?g:f}return c.apply(e,a||arguments)}var c=a[0],d=a[2],e=a[4];return Yd(b,a),b}function V(a,b,c,d,e){if(c){var f=c(a);if("undefined"!=typeof f)return f}var g=Eb(a);if(!g)return a;var i=Ad.call(a);if(!R[i])return a;var k=Wd[i];switch(i){case K:case L:return new k(+a);case N:case Q:return new k(a);case P:return f=k(a.source,z.exec(a)),f.lastIndex=a.lastIndex,f}var m=Zd(a);if(b){var n=!d;d||(d=h()),e||(e=h());for(var o=d.length;o--;)if(d[o]==a)return e[o];f=m?k(a.length):{}}else f=m?l(a):ee({},a);return m&&(Hd.call(a,"index")&&(f.index=a.index),Hd.call(a,"input")&&(f.input=a.input)),b?(d.push(a),e.push(f),(m?Yb:he)(a,function(a,g){f[g]=V(a,b,c,d,e)}),n&&(j(d),j(e)),f):f}function X(a){return Eb(a)?Nd(a):{}}function Y(a,b,c){if("function"!=typeof a)return Zc;if("undefined"==typeof b||!("prototype"in a))return a;var d=a.__bindData__;if("undefined"==typeof d&&(Xd.funcNames&&(d=!a.name),d=d||!Xd.funcDecomp,!d)){var e=Fd.call(a);Xd.funcNames||(d=!A.test(e)),d||(d=E.test(e),Yd(a,d))}if(d===!1||d!==!0&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Ic(a,b)}function Z(a){function b(){var a=i?g:this;if(e){var o=l(e);Id.apply(o,arguments)}if((f||k)&&(o||(o=l(arguments)),f&&Id.apply(o,f),k&&o.length<h))return d|=16,Z([c,m?d:-4&d,o,null,g,h]);if(o||(o=arguments),j&&(c=a[n]),this instanceof b){a=X(c.prototype);var p=c.apply(a,o);return Eb(p)?p:a}return c.apply(a,o)}var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=1&d,j=2&d,k=4&d,m=8&d,n=c;return Yd(b,a),b}function $(c,d){var e=-1,g=ib(),h=c?c.length:0,i=h>=s&&g===a,j=[];if(i){var l=f(d);l?(g=b,d=l):i=!1}for(;++e<h;){var m=c[e];g(d,m)<0&&j.push(m)}return i&&k(d),j}function ab(a,b,c,d){for(var e=(d||0)-1,f=a?a.length:0,g=[];++e<f;){var h=a[e];if(h&&"object"==typeof h&&"number"==typeof h.length&&(Zd(h)||mb(h))){b||(h=ab(h,b,c));var i=-1,j=h.length,k=g.length;for(g.length+=j;++i<j;)g[k++]=h[i]}else c||g.push(h)}return g}function bb(a,b,c,d,e,f){if(c){var g=c(a,b);if("undefined"!=typeof g)return!!g}if(a===b)return 0!==a||1/a==1/b;var i=typeof a,k=typeof b;if(!(a!==a||a&&U[i]||b&&U[k]))return!1;if(null==a||null==b)return a===b;var l=Ad.call(a),m=Ad.call(b);if(l==I&&(l=O),m==I&&(m=O),l!=m)return!1;switch(l){case K:case L:return+a==+b;case N:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case P:case Q:return a==vd(b)}var n=l==J;if(!n){var o=Hd.call(a,"__wrapped__"),p=Hd.call(b,"__wrapped__");if(o||p)return bb(o?a.__wrapped__:a,p?b.__wrapped__:b,c,d,e,f);if(l!=O)return!1;var q=a.constructor,r=b.constructor;if(q!=r&&!(Db(q)&&q instanceof q&&Db(r)&&r instanceof r)&&"constructor"in a&&"constructor"in b)return!1}var s=!e;e||(e=h()),f||(f=h());for(var t=e.length;t--;)if(e[t]==a)return f[t]==b;var u=0;if(g=!0,e.push(a),f.push(b),n){if(t=a.length,u=b.length,g=u==t,g||d)for(;u--;){var v=t,w=b[u];if(d)for(;v--&&!(g=bb(a[v],w,c,d,e,f)););else if(!(g=bb(a[u],w,c,d,e,f)))break}}else ge(b,function(b,h,i){return Hd.call(i,h)?(u++,g=Hd.call(a,h)&&bb(a[h],b,c,d,e,f)):void 0}),g&&!d&&ge(a,function(a,b,c){return Hd.call(c,b)?g=--u>-1:void 0});return e.pop(),f.pop(),s&&(j(e),j(f)),g}function cb(a,b,c,d,e){(Zd(b)?Yb:he)(b,function(b,f){var g,h,i=b,j=a[f];if(b&&((h=Zd(b))||ie(b))){for(var k=d.length;k--;)if(g=d[k]==b){j=e[k];break}if(!g){var l;c&&(i=c(j,b),(l="undefined"!=typeof i)&&(j=i)),l||(j=h?Zd(j)?j:[]:ie(j)?j:{}),d.push(b),e.push(j),l||cb(j,b,c,d,e)}}else c&&(i=c(j,b),"undefined"==typeof i&&(i=b)),"undefined"!=typeof i&&(j=i);a[f]=j})}function db(a,b){return a+Ed(Vd()*(b-a+1))}function eb(c,d,e){var g=-1,i=ib(),l=c?c.length:0,m=[],n=!d&&l>=s&&i===a,o=e||n?h():m;if(n){var p=f(o);i=b,o=p}for(;++g<l;){var q=c[g],r=e?e(q,g,c):q;(d?!g||o[o.length-1]!==r:i(o,r)<0)&&((e||n)&&o.push(r),m.push(q))}return n?(j(o.array),k(o)):e&&j(o),m}function fb(a){return function(b,c,d){var e={};c=o.createCallback(c,d,3);var f=-1,g=b?b.length:0;if("number"==typeof g)for(;++f<g;){var h=b[f];a(e,h,c(h,f,b),b)}else he(b,function(b,d,f){a(e,b,c(b,d,f),f)});return e}}function gb(a,b,c,d,e,f){var g=1&b,h=2&b,i=4&b,j=16&b,k=32&b;if(!h&&!Db(a))throw new wd;j&&!c.length&&(b&=-17,j=c=!1),k&&!d.length&&(b&=-33,k=d=!1);var m=a&&a.__bindData__;if(m&&m!==!0)return m=l(m),m[2]&&(m[2]=l(m[2])),m[3]&&(m[3]=l(m[3])),!g||1&m[1]||(m[4]=e),!g&&1&m[1]&&(b|=8),!i||4&m[1]||(m[5]=f),j&&Id.apply(m[2]||(m[2]=[]),c),k&&Ld.apply(m[3]||(m[3]=[]),d),m[1]|=b,gb.apply(null,m);var n=1==b||17===b?t:Z;return n([a,b,c,d,e,f])}function hb(a){return ae[a]}function ib(){var b=(b=o.indexOf)===rc?a:b;return b}function jb(a){return"function"==typeof a&&Bd.test(a)}function kb(a){var b,c;return a&&Ad.call(a)==O&&(b=a.constructor,!Db(b)||b instanceof b)?(ge(a,function(a,b){c=b}),"undefined"==typeof c||Hd.call(a,c)):!1}function lb(a){return be[a]}function mb(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Ad.call(a)==I||!1}function nb(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1),V(a,b,"function"==typeof c&&Y(c,d,1))}function ob(a,b,c){return V(a,!0,"function"==typeof b&&Y(b,c,1))}function pb(a,b){var c=X(a);return b?ee(c,b):c}function qb(a,b,c){var d;return b=o.createCallback(b,c,3),he(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0}),d}function rb(a,b,c){var d;return b=o.createCallback(b,c,3),tb(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0}),d}function sb(a,b,c){var d=[];ge(a,function(a,b){d.push(b,a)});var e=d.length;for(b=Y(b,c,3);e--&&b(d[e--],d[e],a)!==!1;);return a}function tb(a,b,c){var d=_d(a),e=d.length;for(b=Y(b,c,3);e--;){var f=d[e];if(b(a[f],f,a)===!1)break}return a}function ub(a){var b=[];return ge(a,function(a,c){Db(a)&&b.push(c)}),b.sort()}function vb(a,b){return a?Hd.call(a,b):!1}function wb(a){for(var b=-1,c=_d(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function xb(a){return a===!0||a===!1||a&&"object"==typeof a&&Ad.call(a)==K||!1}function yb(a){return a&&"object"==typeof a&&Ad.call(a)==L||!1}function zb(a){return a&&1===a.nodeType||!1}function Ab(a){var b=!0;if(!a)return b;var c=Ad.call(a),d=a.length;return c==J||c==Q||c==I||c==O&&"number"==typeof d&&Db(a.splice)?!d:(he(a,function(){return b=!1}),b)}function Bb(a,b,c,d){return bb(a,b,"function"==typeof c&&Y(c,d,2))}function Cb(a){return Pd(a)&&!Qd(parseFloat(a))}function Db(a){return"function"==typeof a}function Eb(a){return!(!a||!U[typeof a])}function Fb(a){return Hb(a)&&a!=+a}function Gb(a){return null===a}function Hb(a){return"number"==typeof a||a&&"object"==typeof a&&Ad.call(a)==N||!1}function Ib(a){return a&&"object"==typeof a&&Ad.call(a)==P||!1}function Jb(a){return"string"==typeof a||a&&"object"==typeof a&&Ad.call(a)==Q||!1}function Kb(a){return"undefined"==typeof a}function Lb(a,b,c){var d={};return b=o.createCallback(b,c,3),he(a,function(a,c,e){d[c]=b(a,c,e)}),d}function Mb(a){var b=arguments,c=2;if(!Eb(a))return a;if("number"!=typeof b[2]&&(c=b.length),c>3&&"function"==typeof b[c-2])var d=Y(b[--c-1],b[c--],2);else c>2&&"function"==typeof b[c-1]&&(d=b[--c]);for(var e=l(arguments,1,c),f=-1,g=h(),i=h();++f<c;)cb(a,e[f],d,g,i);return j(g),j(i),a}function Nb(a,b,c){var d={};if("function"!=typeof b){var e=[];ge(a,function(a,b){e.push(b)}),e=$(e,ab(arguments,!0,!1,1));for(var f=-1,g=e.length;++f<g;){var h=e[f];d[h]=a[h]}}else b=o.createCallback(b,c,3),ge(a,function(a,c,e){b(a,c,e)||(d[c]=a)});return d}function Ob(a){for(var b=-1,c=_d(a),d=c.length,e=nd(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function Pb(a,b,c){var d={};if("function"!=typeof b)for(var e=-1,f=ab(arguments,!0,!1,1),g=Eb(a)?f.length:0;++e<g;){var h=f[e];h in a&&(d[h]=a[h])}else b=o.createCallback(b,c,3),ge(a,function(a,c,e){b(a,c,e)&&(d[c]=a)});return d}function Qb(a,b,c,d){var e=Zd(a);if(null==c)if(e)c=[];else{var f=a&&a.constructor,g=f&&f.prototype;c=X(g)}return b&&(b=o.createCallback(b,d,4),(e?Yb:he)(a,function(a,d,e){return b(c,a,d,e)})),c}function Rb(a){for(var b=-1,c=_d(a),d=c.length,e=nd(d);++b<d;)e[b]=a[c[b]];return e}function Sb(a){for(var b=arguments,c=-1,d=ab(b,!0,!1,1),e=b[2]&&b[2][b[1]]===a?1:d.length,f=nd(e);++c<e;)f[c]=a[d[c]];return f}function Tb(a,b,c){var d=-1,e=ib(),f=a?a.length:0,g=!1;return c=(0>c?Sd(0,f+c):c)||0,Zd(a)?g=e(a,b,c)>-1:"number"==typeof f?g=(Jb(a)?a.indexOf(b,c):e(a,b,c))>-1:he(a,function(a){return++d>=c?!(g=a===b):void 0}),g}function Ub(a,b,c){var d=!0;b=o.createCallback(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f&&(d=!!b(a[e],e,a)););else he(a,function(a,c,e){return d=!!b(a,c,e)});return d}function Vb(a,b,c){var d=[];b=o.createCallback(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f;){var g=a[e];b(g,e,a)&&d.push(g)}else he(a,function(a,c,e){b(a,c,e)&&d.push(a)});return d}function Wb(a,b,c){b=o.createCallback(b,c,3);var d=-1,e=a?a.length:0;if("number"!=typeof e){var f;return he(a,function(a,c,d){return b(a,c,d)?(f=a,!1):void 0}),f}for(;++d<e;){var g=a[d];if(b(g,d,a))return g}}function Xb(a,b,c){var d;return b=o.createCallback(b,c,3),Zb(a,function(a,c,e){return b(a,c,e)?(d=a,!1):void 0}),d}function Yb(a,b,c){var d=-1,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:Y(b,c,3),"number"==typeof e)for(;++d<e&&b(a[d],d,a)!==!1;);else he(a,b);return a}function Zb(a,b,c){var d=a?a.length:0;if(b=b&&"undefined"==typeof c?b:Y(b,c,3),"number"==typeof d)for(;d--&&b(a[d],d,a)!==!1;);else{var e=_d(a);d=e.length,he(a,function(a,c,f){return c=e?e[--d]:--d,b(f[c],c,f)})}return a}function $b(a,b){var c=l(arguments,2),d=-1,e="function"==typeof b,f=a?a.length:0,g=nd("number"==typeof f?f:0);return Yb(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g}function _b(a,b,c){var d=-1,e=a?a.length:0;if(b=o.createCallback(b,c,3),"number"==typeof e)for(var f=nd(e);++d<e;)f[d]=b(a[d],d,a);else f=[],he(a,function(a,c,e){f[++d]=b(a,c,e)});return f}function ac(a,b,c){var e=-1/0,f=e;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&Zd(a))for(var g=-1,h=a.length;++g<h;){var i=a[g];i>f&&(f=i)}else b=null==b&&Jb(a)?d:o.createCallback(b,c,3),Yb(a,function(a,c,d){var g=b(a,c,d);g>e&&(e=g,f=a)});return f}function bc(a,b,c){var e=1/0,f=e;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&Zd(a))for(var g=-1,h=a.length;++g<h;){var i=a[g];f>i&&(f=i)}else b=null==b&&Jb(a)?d:o.createCallback(b,c,3),Yb(a,function(a,c,d){var g=b(a,c,d);e>g&&(e=g,f=a)});return f}function cc(a,b,c,d){if(!a)return c;var e=arguments.length<3;b=o.createCallback(b,d,4);var f=-1,g=a.length;if("number"==typeof g)for(e&&(c=a[++f]);++f<g;)c=b(c,a[f],f,a);else he(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)});return c}function dc(a,b,c,d){var e=arguments.length<3;return b=o.createCallback(b,d,4),Zb(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)}),c}function ec(a,b,c){return b=o.createCallback(b,c,3),Vb(a,function(a,c,d){return!b(a,c,d)})}function fc(a,b,c){if(a&&"number"!=typeof a.length&&(a=Rb(a)),null==b||c)return a?a[db(0,a.length-1)]:n;var d=gc(a);return d.length=Td(Sd(0,b),d.length),d}function gc(a){var b=-1,c=a?a.length:0,d=nd("number"==typeof c?c:0);return Yb(a,function(a){var c=db(0,++b);d[b]=d[c],d[c]=a}),d}function hc(a){var b=a?a.length:0;return"number"==typeof b?b:_d(a).length}function ic(a,b,c){var d;b=o.createCallback(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f&&!(d=b(a[e],e,a)););else he(a,function(a,c,e){return!(d=b(a,c,e))});return!!d}function jc(a,b,c){var d=-1,f=Zd(b),g=a?a.length:0,l=nd("number"==typeof g?g:0);for(f||(b=o.createCallback(b,c,3)),Yb(a,function(a,c,e){var g=l[++d]=i();f?g.criteria=_b(b,function(b){return a[b]}):(g.criteria=h())[0]=b(a,c,e),g.index=d,g.value=a}),g=l.length,l.sort(e);g--;){var m=l[g];l[g]=m.value,f||j(m.criteria),k(m)}return l}function kc(a){return a&&"number"==typeof a.length?l(a):Rb(a)}function lc(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function mc(a){return $(a,ab(arguments,!0,!0,1))}function nc(a,b,c){var d=-1,e=a?a.length:0;for(b=o.createCallback(b,c,3);++d<e;)if(b(a[d],d,a))return d;return-1}function oc(a,b,c){var d=a?a.length:0;for(b=o.createCallback(b,c,3);d--;)if(b(a[d],d,a))return d;return-1}function pc(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=-1;for(b=o.createCallback(b,c,3);++f<e&&b(a[f],f,a);)d++}else if(d=b,null==d||c)return a?a[0]:n;return l(a,0,Td(Sd(0,d),e))}function qc(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(a=_b(a,c,d)),ab(a,b)}function rc(b,c,d){if("number"==typeof d){var e=b?b.length:0;d=0>d?Sd(0,e+d):d||0}else if(d){var f=Ac(b,c);return b[f]===c?f:-1}return a(b,c,d)}function sc(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=e;for(b=o.createCallback(b,c,3);f--&&b(a[f],f,a);)d++}else d=null==b||c?1:b||d;return l(a,0,Td(Sd(0,e-d),e))}function tc(){for(var c=[],d=-1,e=arguments.length,g=h(),i=ib(),l=i===a,m=h();++d<e;){var n=arguments[d];(Zd(n)||mb(n))&&(c.push(n),g.push(l&&n.length>=s&&f(d?c[d]:m)))}var o=c[0],p=-1,q=o?o.length:0,r=[];a:for(;++p<q;){var t=g[0];if(n=o[p],(t?b(t,n):i(m,n))<0){for(d=e,(t||m).push(n);--d;)if(t=g[d],(t?b(t,n):i(c[d],n))<0)continue a;r.push(n)}}for(;e--;)t=g[e],t&&k(t);return j(g),j(m),r}function uc(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=e;for(b=o.createCallback(b,c,3);f--&&b(a[f],f,a);)d++}else if(d=b,null==d||c)return a?a[e-1]:n;return l(a,Sd(0,e-d))}function vc(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?Sd(0,d+c):Td(c,d-1))+1);d--;)if(a[d]===b)return d;return-1}function wc(a){for(var b=arguments,c=0,d=b.length,e=a?a.length:0;++c<d;)for(var f=-1,g=b[c];++f<e;)a[f]===g&&(Kd.call(a,f--,1),e--);return a}function xc(a,b,c){a=+a||0,c="number"==typeof c?c:+c||1,null==b&&(b=a,a=0);for(var d=-1,e=Sd(0,Cd((b-a)/(c||1))),f=nd(e);++d<e;)f[d]=a,a+=c;return f}function yc(a,b,c){var d=-1,e=a?a.length:0,f=[];for(b=o.createCallback(b,c,3);++d<e;){var g=a[d];b(g,d,a)&&(f.push(g),Kd.call(a,d--,1),e--)}return f}function zc(a,b,c){if("number"!=typeof b&&null!=b){var d=0,e=-1,f=a?a.length:0;for(b=o.createCallback(b,c,3);++e<f&&b(a[e],e,a);)d++}else d=null==b||c?1:Sd(0,b);return l(a,d)}function Ac(a,b,c,d){var e=0,f=a?a.length:e;for(c=c?o.createCallback(c,d,1):Zc,b=c(b);f>e;){var g=e+f>>>1;c(a[g])<b?e=g+1:f=g}return e}function Bc(){return eb(ab(arguments,!0,!0))}function Cc(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(c=o.createCallback(c,d,3)),eb(a,b,c)}function Dc(a){return $(a,l(arguments,1))}function Ec(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Zd(c)||mb(c))var d=d?eb($(d,c).concat($(c,d))):c}return d||[]}function Fc(){for(var a=arguments.length>1?arguments:arguments[0],b=-1,c=a?ac(me(a,"length")):0,d=nd(0>c?0:c);++b<c;)d[b]=me(a,b);return d}function Gc(a,b){var c=-1,d=a?a.length:0,e={};for(b||!d||Zd(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Hc(a,b){if(!Db(b))throw new wd;return function(){return--a<1?b.apply(this,arguments):void 0}}function Ic(a,b){return arguments.length>2?gb(a,17,l(arguments,2),null,b):gb(a,1,null,null,b)}function Jc(a){for(var b=arguments.length>1?ab(arguments,!0,!1,1):ub(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=gb(a[e],1,null,null,a)}return a}function Kc(a,b){return arguments.length>2?gb(b,19,l(arguments,2),null,a):gb(b,3,null,null,a)}function Lc(){for(var a=arguments,b=a.length;b--;)if(!Db(a[b]))throw new wd;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function Mc(a,b){return b="number"==typeof b?b:+b||a.length,gb(a,4,null,null,null,b)}function Nc(a,b,c){var d,e,f,g,h,i,j,k=0,l=!1,m=!0;if(!Db(a))throw new wd;if(b=Sd(0,b)||0,c===!0){var o=!0;m=!1}else Eb(c)&&(o=c.leading,l="maxWait"in c&&(Sd(b,c.maxWait)||0),m="trailing"in c?c.trailing:m);var p=function(){var c=b-(oe()-g);if(0>=c){e&&Dd(e);var l=j;e=i=j=n,l&&(k=oe(),f=a.apply(h,d),i||e||(d=h=null))}else i=Jd(p,c)},q=function(){i&&Dd(i),e=i=j=n,(m||l!==b)&&(k=oe(),f=a.apply(h,d),i||e||(d=h=null))};return function(){if(d=arguments,g=oe(),h=this,j=m&&(i||!o),l===!1)var c=o&&!i;else{e||o||(k=g);var n=l-(g-k),r=0>=n;r?(e&&(e=Dd(e)),k=g,f=a.apply(h,d)):e||(e=Jd(q,n))}return r&&i?i=Dd(i):i||b===l||(i=Jd(p,b)),c&&(r=!0,f=a.apply(h,d)),!r||i||e||(d=h=null),f}}function Oc(a){if(!Db(a))throw new wd;var b=l(arguments,1);return Jd(function(){a.apply(n,b)},1)}function Pc(a,b){if(!Db(a))throw new wd;var c=l(arguments,2);return Jd(function(){a.apply(n,c)},b)}function Qc(a,b){if(!Db(a))throw new wd;var c=function(){var d=c.cache,e=b?b.apply(this,arguments):r+arguments[0];return Hd.call(d,e)?d[e]:d[e]=a.apply(this,arguments)};return c.cache={},c}function Rc(a){var b,c;if(!Db(a))throw new wd;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}function Sc(a){return gb(a,16,l(arguments,1))}function Tc(a){return gb(a,32,null,l(arguments,1))}function Uc(a,b,c){var d=!0,e=!0;if(!Db(a))throw new wd;return c===!1?d=!1:Eb(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),S.leading=d,S.maxWait=b,S.trailing=e,Nc(a,b,S)}function Vc(a,b){return gb(b,16,[a])}function Wc(a){return function(){return a}}function Xc(a,b,c){var d=typeof a;if(null==a||"function"==d)return Y(a,b,c);if("object"!=d)return bd(a);var e=_d(a),f=e[0],g=a[f];return 1!=e.length||g!==g||Eb(g)?function(b){for(var c=e.length,d=!1;c--&&(d=bb(b[e[c]],a[e[c]],null,!0)););return d}:function(a){var b=a[f];return g===b&&(0!==g||1/g==1/b)}}function Yc(a){return null==a?"":vd(a).replace(de,hb)}function Zc(a){return a}function $c(a,b,c){var d=!0,e=b&&ub(b);b&&(c||e.length)||(null==c&&(c=b),f=p,b=a,a=o,e=ub(b)),c===!1?d=!1:Eb(c)&&"chain"in c&&(d=c.chain);var f=a,g=Db(f);Yb(e,function(c){var e=a[c]=b[c];g&&(f.prototype[c]=function(){var b=this.__chain__,c=this.__wrapped__,g=[c];Id.apply(g,arguments);var h=e.apply(a,g);if(d||b){if(c===h&&Eb(h))return this;h=new f(h),h.__chain__=b}return h})})}function _c(){return c._=zd,this}function ad(){}function bd(a){return function(b){return b[a]}}function cd(a,b,c){var d=null==a,e=null==b;if(null==c&&("boolean"==typeof a&&e?(c=a,a=1):e||"boolean"!=typeof b||(c=b,e=!0)),d&&e&&(b=1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=Vd();return Td(a+f*(b-a+parseFloat("1e-"+((f+"").length-1))),b)}return db(a,b)}function dd(a,b){if(a){var c=a[b];return Db(c)?a[b]():c}}function ed(a,b,c){var d=o.templateSettings;a=vd(a||""),c=fe({},c,d);var e,f=fe({},c.imports,d.imports),h=_d(f),i=Rb(f),j=0,k=c.interpolate||D,l="__p += '",m=ud((c.escape||D).source+"|"+k.source+"|"+(k===B?y:D).source+"|"+(c.evaluate||D).source+"|$","g");a.replace(m,function(b,c,d,f,h,i){return d||(d=f),l+=a.slice(j,i).replace(F,g),c&&(l+="' +\n__e("+c+") +\n'"),h&&(e=!0,l+="';\n"+h+";\n__p += '"),d&&(l+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),j=i+b.length,b}),l+="';\n";var p=c.variable,q=p;q||(p="obj",l="with ("+p+") {\n"+l+"\n}\n"),l=(e?l.replace(v,""):l).replace(w,"$1").replace(x,"$1;"),l="function("+p+") {\n"+(q?"":p+" || ("+p+" = {});\n")+"var __t, __p = '', __e = _.escape"+(e?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+l+"return __p\n}";var r="\n/*\n//# sourceURL="+(c.sourceURL||"/lodash/template/source["+H++ +"]")+"\n*/";try{var s=qd(h,"return "+l+r).apply(n,i)}catch(t){throw t.source=l,t}return b?s(b):(s.source=l,s)}function fd(a,b,c){a=(a=+a)>-1?a:0;var d=-1,e=nd(a);for(b=Y(b,c,1);++d<a;)e[d]=b(d);return e}function gd(a){return null==a?"":vd(a).replace(ce,lb)}function hd(a){var b=++q;return vd(null==a?"":a)+b}function id(a){return a=new p(a),a.__chain__=!0,a}function jd(a,b){return b(a),a}function kd(){return this.__chain__=!0,this}function ld(){return vd(this.__wrapped__)}function md(){return this.__wrapped__}c=c?_.defaults(W.Object(),c,_.pick(W,G)):W;var nd=c.Array,od=c.Boolean,pd=c.Date,qd=c.Function,rd=c.Math,sd=c.Number,td=c.Object,ud=c.RegExp,vd=c.String,wd=c.TypeError,xd=[],yd=td.prototype,zd=c._,Ad=yd.toString,Bd=ud("^"+vd(Ad).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Cd=rd.ceil,Dd=c.clearTimeout,Ed=rd.floor,Fd=qd.prototype.toString,Gd=jb(Gd=td.getPrototypeOf)&&Gd,Hd=yd.hasOwnProperty,Id=xd.push,Jd=c.setTimeout,Kd=xd.splice,Ld=xd.unshift,Md=function(){try{var a={},b=jb(b=td.defineProperty)&&b,c=b(a,a,a)&&b}catch(d){}return c}(),Nd=jb(Nd=td.create)&&Nd,Od=jb(Od=nd.isArray)&&Od,Pd=c.isFinite,Qd=c.isNaN,Rd=jb(Rd=td.keys)&&Rd,Sd=rd.max,Td=rd.min,Ud=c.parseInt,Vd=rd.random,Wd={};Wd[J]=nd,Wd[K]=od,Wd[L]=pd,Wd[M]=qd,Wd[O]=td,Wd[N]=sd,Wd[P]=ud,Wd[Q]=vd,p.prototype=o.prototype;var Xd=o.support={};Xd.funcDecomp=!jb(c.WinRTError)&&E.test(m),Xd.funcNames="string"==typeof qd.name,o.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:B,variable:"",imports:{_:o}},Nd||(X=function(){function a(){}return function(b){if(Eb(b)){a.prototype=b;var d=new a;a.prototype=null}return d||c.Object()}}());var Yd=Md?function(a,b){T.value=b,Md(a,"__bindData__",T)}:ad,Zd=Od||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Ad.call(a)==J||!1},$d=function(a){var b,c=a,d=[];if(!c)return d;if(!U[typeof a])return d;for(b in c)Hd.call(c,b)&&d.push(b);return d},_d=Rd?function(a){return Eb(a)?Rd(a):[]}:$d,ae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},be=wb(ae),ce=ud("("+_d(be).join("|")+")","g"),de=ud("["+_d(ae).join("")+"]","g"),ee=function(a,b,c){var d,e=a,f=e;if(!e)return f;var g=arguments,h=0,i="number"==typeof c?2:g.length;if(i>3&&"function"==typeof g[i-2])var j=Y(g[--i-1],g[i--],2);else i>2&&"function"==typeof g[i-1]&&(j=g[--i]);for(;++h<i;)if(e=g[h],e&&U[typeof e])for(var k=-1,l=U[typeof e]&&_d(e),m=l?l.length:0;++k<m;)d=l[k],f[d]=j?j(f[d],e[d]):e[d];return f},fe=function(a,b,c){var d,e=a,f=e;if(!e)return f;for(var g=arguments,h=0,i="number"==typeof c?2:g.length;++h<i;)if(e=g[h],e&&U[typeof e])for(var j=-1,k=U[typeof e]&&_d(e),l=k?k.length:0;++j<l;)d=k[j],"undefined"==typeof f[d]&&(f[d]=e[d]);return f},ge=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!U[typeof e])return f;b=b&&"undefined"==typeof c?b:Y(b,c,3);for(d in e)if(b(e[d],d,a)===!1)return f;return f},he=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!U[typeof e])return f;b=b&&"undefined"==typeof c?b:Y(b,c,3);for(var g=-1,h=U[typeof e]&&_d(e),i=h?h.length:0;++g<i;)if(d=h[g],b(e[d],d,a)===!1)return f;return f},ie=Gd?function(a){if(!a||Ad.call(a)!=O)return!1;var b=a.valueOf,c=jb(b)&&(c=Gd(b))&&Gd(c);return c?a==c||Gd(a)==c:kb(a)}:kb,je=fb(function(a,b,c){Hd.call(a,c)?a[c]++:a[c]=1}),ke=fb(function(a,b,c){(Hd.call(a,c)?a[c]:a[c]=[]).push(b)}),le=fb(function(a,b,c){a[c]=b}),me=_b,ne=Vb,oe=jb(oe=pd.now)&&oe||function(){return(new pd).getTime()},pe=8==Ud(u+"08")?Ud:function(a,b){return Ud(Jb(a)?a.replace(C,""):a,b||0)};return o.after=Hc,o.assign=ee,o.at=Sb,o.bind=Ic,o.bindAll=Jc,o.bindKey=Kc,o.chain=id,o.compact=lc,o.compose=Lc,o.constant=Wc,o.countBy=je,o.create=pb,o.createCallback=Xc,o.curry=Mc,o.debounce=Nc,o.defaults=fe,o.defer=Oc,o.delay=Pc,o.difference=mc,o.filter=Vb,o.flatten=qc,o.forEach=Yb,o.forEachRight=Zb,o.forIn=ge,o.forInRight=sb,o.forOwn=he,o.forOwnRight=tb,o.functions=ub,o.groupBy=ke,o.indexBy=le,o.initial=sc,o.intersection=tc,o.invert=wb,o.invoke=$b,o.keys=_d,o.map=_b,o.mapValues=Lb,o.max=ac,o.memoize=Qc,o.merge=Mb,o.min=bc,o.omit=Nb,o.once=Rc,o.pairs=Ob,o.partial=Sc,o.partialRight=Tc,o.pick=Pb,o.pluck=me,o.property=bd,o.pull=wc,o.range=xc,o.reject=ec,o.remove=yc,o.rest=zc,o.shuffle=gc,o.sortBy=jc,o.tap=jd,o.throttle=Uc,o.times=fd,o.toArray=kc,o.transform=Qb,o.union=Bc,o.uniq=Cc,o.values=Rb,o.where=ne,o.without=Dc,o.wrap=Vc,o.xor=Ec,o.zip=Fc,o.zipObject=Gc,o.collect=_b,o.drop=zc,o.each=Yb,o.eachRight=Zb,o.extend=ee,o.methods=ub,o.object=Gc,o.select=Vb,o.tail=zc,o.unique=Cc,o.unzip=Fc,$c(o),o.clone=nb,o.cloneDeep=ob,o.contains=Tb,o.escape=Yc,o.every=Ub,o.find=Wb,o.findIndex=nc,o.findKey=qb,o.findLast=Xb,o.findLastIndex=oc,o.findLastKey=rb,o.has=vb,o.identity=Zc,o.indexOf=rc,o.isArguments=mb,o.isArray=Zd,o.isBoolean=xb,o.isDate=yb,o.isElement=zb,o.isEmpty=Ab,o.isEqual=Bb,o.isFinite=Cb,o.isFunction=Db,o.isNaN=Fb,o.isNull=Gb,o.isNumber=Hb,o.isObject=Eb,o.isPlainObject=ie,o.isRegExp=Ib,o.isString=Jb,o.isUndefined=Kb,o.lastIndexOf=vc,o.mixin=$c,o.noConflict=_c,o.noop=ad,o.now=oe,o.parseInt=pe,o.random=cd,o.reduce=cc,o.reduceRight=dc,o.result=dd,o.runInContext=m,o.size=hc,o.some=ic,o.sortedIndex=Ac,o.template=ed,o.unescape=gd,o.uniqueId=hd,o.all=Ub,o.any=ic,o.detect=Wb,o.findWhere=Wb,o.foldl=cc,o.foldr=dc,o.include=Tb,o.inject=cc,$c(function(){var a={};return he(o,function(b,c){o.prototype[c]||(a[c]=b)}),a}(),!1),o.first=pc,o.last=uc,o.sample=fc,o.take=pc,o.head=pc,he(o,function(a,b){var c="sample"!==b;o.prototype[b]||(o.prototype[b]=function(b,d){var e=this.__chain__,f=a(this.__wrapped__,b,d);return e||null!=b&&(!d||c&&"function"==typeof b)?new p(f,e):f})}),o.VERSION="2.4.1",o.prototype.chain=kd,o.prototype.toString=ld,o.prototype.value=md,o.prototype.valueOf=md,Yb(["join","pop","shift"],function(a){var b=xd[a];o.prototype[a]=function(){var a=this.__chain__,c=b.apply(this.__wrapped__,arguments);return a?new p(c,a):c}}),Yb(["push","reverse","sort","unshift"],function(a){var b=xd[a];o.prototype[a]=function(){return b.apply(this.__wrapped__,arguments),this}}),Yb(["concat","slice","splice"],function(a){var b=xd[a];o.prototype[a]=function(){return new p(b.apply(this.__wrapped__,arguments),this.__chain__)}}),o}var n,o=[],p=[],q=0,r=+new Date+"",s=75,t=40,u=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",v=/\b__p \+= '';/g,w=/\b(__p \+=) '' \+/g,x=/(__e\(.*?\)|\b__t\)) \+\n'';/g,y=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,z=/\w*$/,A=/^\s*function[ \n\r\t]+\w/,B=/<%=([\s\S]+?)%>/g,C=RegExp("^["+u+"]*0+(?=.$)"),D=/($^)/,E=/\bthis\b/,F=/['\n\r\t\u2028\u2029\\]/g,G=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],H=0,I="[object Arguments]",J="[object Array]",K="[object Boolean]",L="[object Date]",M="[object Function]",N="[object Number]",O="[object Object]",P="[object RegExp]",Q="[object String]",R={};R[M]=!1,R[I]=R[J]=R[K]=R[L]=R[N]=R[O]=R[P]=R[Q]=!0;var S={leading:!1,maxWait:0,trailing:!1},T={configurable:!1,enumerable:!1,value:null,writable:!1},U={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},V={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},W=U[typeof window]&&window||this,X=U[typeof exports]&&exports&&!exports.nodeType&&exports,Y=U[typeof module]&&module&&!module.nodeType&&module,Z=Y&&Y.exports===X&&X,$=U[typeof global]&&global;!$||$.global!==$&&$.window!==$||(W=$);var _=m();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(W._=_,define(function(){return _})):X&&Y?Z?(Y.exports=_)._=_:X._=_:W._=_}.call(this),function(a,b,c){"use strict";function d(a,b){return b=b||Error,function(){var c,d,e=arguments[0],f="["+(a?a+":":"")+e+"] ",g=arguments[1],h=arguments;for(c=f+g.replace(/\{\d+\}/g,function(a){var b=+a.slice(1,-1);return b+2<h.length?mb(h[b+2]):a}),c=c+"\nhttp://errors.angularjs.org/1.3.18/"+(a?a+"/":"")+e,d=2;d<arguments.length;d++)c=c+(2==d?"?":"&")+"p"+(d-2)+"="+encodeURIComponent(mb(arguments[d]));return new b(c)}}function e(a){if(null==a||z(a))return!1;var b="length"in Object(a)&&a.length;
return a.nodeType===se&&b?!0:u(a)||le(a)||0===b||"number"==typeof b&&b>0&&b-1 in a}function f(a,b,c){var d,g;if(a)if(x(a))for(d in a)"prototype"==d||"length"==d||"name"==d||a.hasOwnProperty&&!a.hasOwnProperty(d)||b.call(c,a[d],d,a);else if(le(a)||e(a)){var h="object"!=typeof a;for(d=0,g=a.length;g>d;d++)(h||d in a)&&b.call(c,a[d],d,a)}else if(a.forEach&&a.forEach!==f)a.forEach(b,c,a);else for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a);return a}function g(a){return Object.keys(a).sort()}function h(a,b,c){for(var d=g(a),e=0;e<d.length;e++)b.call(c,a[d[e]],d[e]);return d}function i(a){return function(b,c){a(c,b)}}function j(){return++je}function k(a,b){b?a.$$hashKey=b:delete a.$$hashKey}function l(a){for(var b=a.$$hashKey,c=1,d=arguments.length;d>c;c++){var e=arguments[c];if(e)for(var f=Object.keys(e),g=0,h=f.length;h>g;g++){var i=f[g];a[i]=e[i]}}return k(a,b),a}function m(a){return parseInt(a,10)}function n(a,b){return l(Object.create(a),b)}function o(){}function p(a){return a}function q(a){return function(){return a}}function r(a){return"undefined"==typeof a}function s(a){return"undefined"!=typeof a}function t(a){return null!==a&&"object"==typeof a}function u(a){return"string"==typeof a}function v(a){return"number"==typeof a}function w(a){return"[object Date]"===ge.call(a)}function x(a){return"function"==typeof a}function y(a){return"[object RegExp]"===ge.call(a)}function z(a){return a&&a.window===a}function A(a){return a&&a.$evalAsync&&a.$watch}function B(a){return"[object File]"===ge.call(a)}function C(a){return"[object FormData]"===ge.call(a)}function D(a){return"[object Blob]"===ge.call(a)}function E(a){return"boolean"==typeof a}function F(a){return a&&x(a.then)}function G(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function H(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function I(a){return Wd(a.nodeName||a[0]&&a[0].nodeName)}function J(a,b){var c=a.indexOf(b);return c>=0&&a.splice(c,1),b}function K(a,b,c,d){if(z(a)||A(a))throw he("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(b){if(a===b)throw he("cpi","Can't copy! Source and destination are identical.");if(c=c||[],d=d||[],t(a)){var e=c.indexOf(a);if(-1!==e)return d[e];c.push(a),d.push(b)}var g;if(le(a)){b.length=0;for(var h=0;h<a.length;h++)g=K(a[h],null,c,d),t(a[h])&&(c.push(a[h]),d.push(g)),b.push(g)}else{var i=b.$$hashKey;le(b)?b.length=0:f(b,function(a,c){delete b[c]});for(var j in a)a.hasOwnProperty(j)&&(g=K(a[j],null,c,d),t(a[j])&&(c.push(a[j]),d.push(g)),b[j]=g);k(b,i)}}else if(b=a,a)if(le(a))b=K(a,[],c,d);else if(w(a))b=new Date(a.getTime());else if(y(a))b=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]),b.lastIndex=a.lastIndex;else if(t(a)){var l=Object.create(Object.getPrototypeOf(a));b=K(a,l,c,d)}return b}function L(a,b){if(le(a)){b=b||[];for(var c=0,d=a.length;d>c;c++)b[c]=a[c]}else if(t(a)){b=b||{};for(var e in a)("$"!==e.charAt(0)||"$"!==e.charAt(1))&&(b[e]=a[e])}return b||a}function M(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d,e,f,g=typeof a,h=typeof b;if(g==h&&"object"==g){if(!le(a)){if(w(a))return w(b)?M(a.getTime(),b.getTime()):!1;if(y(a))return y(b)?a.toString()==b.toString():!1;if(A(a)||A(b)||z(a)||z(b)||le(b)||w(b)||y(b))return!1;f={};for(e in a)if("$"!==e.charAt(0)&&!x(a[e])){if(!M(a[e],b[e]))return!1;f[e]=!0}for(e in b)if(!f.hasOwnProperty(e)&&"$"!==e.charAt(0)&&b[e]!==c&&!x(b[e]))return!1;return!0}if(!le(b))return!1;if((d=a.length)==b.length){for(e=0;d>e;e++)if(!M(a[e],b[e]))return!1;return!0}}return!1}function N(a,b,c){return a.concat(de.call(b,c))}function O(a,b){return de.call(a,b||0)}function P(a,b){var c=arguments.length>2?O(arguments,2):[];return!x(b)||b instanceof RegExp?b:c.length?function(){return arguments.length?b.apply(a,N(c,arguments,0)):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function Q(a,d){var e=d;return"string"==typeof a&&"$"===a.charAt(0)&&"$"===a.charAt(1)?e=c:z(d)?e="$WINDOW":d&&b===d?e="$DOCUMENT":A(d)&&(e="$SCOPE"),e}function R(a,b){return"undefined"==typeof a?c:(v(b)||(b=b?2:null),JSON.stringify(a,Q,b))}function S(a){return u(a)?JSON.parse(a):a}function T(a){a=ae(a).clone();try{a.empty()}catch(b){}var c=ae("<div>").append(a).html();try{return a[0].nodeType===ue?Wd(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+Wd(b)})}catch(b){return Wd(c)}}function U(a){try{return decodeURIComponent(a)}catch(b){}}function V(a){var b,c,d={};return f((a||"").split("&"),function(a){if(a&&(b=a.replace(/\+/g,"%20").split("="),c=U(b[0]),s(c))){var e=s(b[1])?U(b[1]):!0;Xd.call(d,c)?le(d[c])?d[c].push(e):d[c]=[d[c],e]:d[c]=e}}),d}function W(a){var b=[];return f(a,function(a,c){le(a)?f(a,function(a){b.push(Y(c,!0)+(a===!0?"":"="+Y(a,!0)))}):b.push(Y(c,!0)+(a===!0?"":"="+Y(a,!0)))}),b.length?b.join("&"):""}function X(a){return Y(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Y(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function Z(a,b){var c,d,e=pe.length;for(a=ae(a),d=0;e>d;++d)if(c=pe[d]+b,u(c=a.attr(c)))return c;return null}function $(a,b){var c,d,e={};f(pe,function(b){var e=b+"app";!c&&a.hasAttribute&&a.hasAttribute(e)&&(c=a,d=a.getAttribute(e))}),f(pe,function(b){var e,f=b+"app";!c&&(e=a.querySelector("["+f.replace(":","\\:")+"]"))&&(c=e,d=e.getAttribute(f))}),c&&(e.strictDi=null!==Z(c,"strict-di"),b(c,d?[d]:[],e))}function _(c,d,e){t(e)||(e={});var g={strictDi:!1};e=l(g,e);var h=function(){if(c=ae(c),c.injector()){var a=c[0]===b?"document":T(c);throw he("btstrpd","App Already Bootstrapped with this Element '{0}'",a.replace(/</,"&lt;").replace(/>/,"&gt;"))}d=d||[],d.unshift(["$provide",function(a){a.value("$rootElement",c)}]),e.debugInfoEnabled&&d.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]),d.unshift("ng");var f=Sb(d,e.strictDi);return f.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d),c(b)(a)})}]),f},i=/^NG_ENABLE_DEBUG_INFO!/,j=/^NG_DEFER_BOOTSTRAP!/;return a&&i.test(a.name)&&(e.debugInfoEnabled=!0,a.name=a.name.replace(i,"")),a&&!j.test(a.name)?h():(a.name=a.name.replace(j,""),ie.resumeBootstrap=function(a){return f(a,function(a){d.push(a)}),h()},void(x(ie.resumeDeferredBootstrap)&&ie.resumeDeferredBootstrap()))}function ab(){a.name="NG_ENABLE_DEBUG_INFO!"+a.name,a.location.reload()}function bb(a){var b=ie.element(a).injector();if(!b)throw he("test","no injector found for element argument to getTestability");return b.get("$$testability")}function cb(a,b){return b=b||"_",a.replace(qe,function(a,c){return(c?b:"")+a.toLowerCase()})}function db(){var b;re||(be=a.jQuery,be&&be.fn.on?(ae=be,l(be.fn,{scope:Me.scope,isolateScope:Me.isolateScope,controller:Me.controller,injector:Me.injector,inheritedData:Me.inheritedData}),b=be.cleanData,be.cleanData=function(a){var c;if(ke)ke=!1;else for(var d,e=0;null!=(d=a[e]);e++)c=be._data(d,"events"),c&&c.$destroy&&be(d).triggerHandler("$destroy");b(a)}):ae=ub,ie.element=ae,re=!0)}function eb(a,b,c){if(!a)throw he("areq","Argument '{0}' is {1}",b||"?",c||"required");return a}function fb(a,b,c){return c&&le(a)&&(a=a[a.length-1]),eb(x(a),b,"not a function, got "+(a&&"object"==typeof a?a.constructor.name||"Object":typeof a)),a}function gb(a,b){if("hasOwnProperty"===a)throw he("badname","hasOwnProperty is not a valid {0} name",b)}function hb(a,b,c){if(!b)return a;for(var d,e=b.split("."),f=a,g=e.length,h=0;g>h;h++)d=e[h],a&&(a=(f=a)[d]);return!c&&x(a)?P(f,a):a}function ib(a){var b=a[0],c=a[a.length-1],d=[b];do{if(b=b.nextSibling,!b)break;d.push(b)}while(b!==c);return ae(d)}function jb(){return Object.create(null)}function kb(a){function b(a,b,c){return a[b]||(a[b]=c())}var c=d("$injector"),e=d("ng"),f=b(a,"angular",Object);return f.$$minErr=f.$$minErr||d,b(f,"module",function(){var a={};return function(d,f,g){var h=function(a,b){if("hasOwnProperty"===a)throw e("badname","hasOwnProperty is not a valid {0} name",b)};return h(d,"module"),f&&a.hasOwnProperty(d)&&(a[d]=null),b(a,d,function(){function a(a,c,d,e){return e||(e=b),function(){return e[d||"push"]([a,c,arguments]),j}}if(!f)throw c("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",d);var b=[],e=[],h=[],i=a("$injector","invoke","push",e),j={_invokeQueue:b,_configBlocks:e,_runBlocks:h,requires:f,name:d,provider:a("$provide","provider"),factory:a("$provide","factory"),service:a("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),animation:a("$animateProvider","register"),filter:a("$filterProvider","register"),controller:a("$controllerProvider","register"),directive:a("$compileProvider","directive"),config:i,run:function(a){return h.push(a),this}};return g&&i(g),j})}})}function lb(a){var b=[];return JSON.stringify(a,function(a,c){if(c=Q(a,c),t(c)){if(b.indexOf(c)>=0)return"<<already seen>>";b.push(c)}return c})}function mb(a){return"function"==typeof a?a.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof a?"undefined":"string"!=typeof a?lb(a):a}function nb(b){l(b,{bootstrap:_,copy:K,extend:l,equals:M,element:ae,forEach:f,injector:Sb,noop:o,bind:P,toJson:R,fromJson:S,identity:p,isUndefined:r,isDefined:s,isString:u,isFunction:x,isObject:t,isNumber:v,isElement:G,isArray:le,version:ye,isDate:w,lowercase:Wd,uppercase:Yd,callbacks:{counter:0},getTestability:bb,$$minErr:d,$$csp:oe,reloadWithDebugInfo:ab}),ce=kb(a);try{ce("ngLocale")}catch(c){ce("ngLocale",[]).provider("$locale",qc)}ce("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Wc}),a.provider("$compile",Zb).directive({a:Ff,input:Wf,textarea:Wf,form:Kf,script:Lg,select:Og,style:Qg,option:Pg,ngBind:Zf,ngBindHtml:_f,ngBindTemplate:$f,ngClass:bg,ngClassEven:dg,ngClassOdd:cg,ngCloak:eg,ngController:fg,ngForm:Lf,ngHide:Fg,ngIf:ig,ngInclude:jg,ngInit:lg,ngNonBindable:zg,ngPluralize:Ag,ngRepeat:Bg,ngShow:Eg,ngStyle:Gg,ngSwitch:Hg,ngSwitchWhen:Ig,ngSwitchDefault:Jg,ngOptions:Ng,ngTransclude:Kg,ngModel:wg,ngList:mg,ngChange:ag,pattern:Sg,ngPattern:Sg,required:Rg,ngRequired:Rg,minlength:Ug,ngMinlength:Ug,maxlength:Tg,ngMaxlength:Tg,ngValue:Yf,ngModelOptions:yg}).directive({ngInclude:kg}).directive(Gf).directive(gg),a.provider({$anchorScroll:Tb,$animate:We,$browser:Wb,$cacheFactory:Xb,$controller:bc,$document:cc,$exceptionHandler:dc,$filter:gd,$interpolate:oc,$interval:pc,$http:kc,$httpBackend:mc,$location:Ec,$log:Fc,$parse:Qc,$rootScope:Vc,$q:Rc,$$q:Sc,$sce:$c,$sceDelegate:Zc,$sniffer:_c,$templateCache:Yb,$templateRequest:ad,$$testability:bd,$timeout:cd,$window:fd,$$rAF:Uc,$$asyncCallback:Ub,$$jqLite:Nb})}])}function ob(){return++Ae}function pb(a){return a.replace(De,function(a,b,c,d){return d?c.toUpperCase():c}).replace(Ee,"Moz$1")}function qb(a){return!Ie.test(a)}function rb(a){var b=a.nodeType;return b===se||!b||b===we}function sb(a,b){var c,d,e,g,h=b.createDocumentFragment(),i=[];if(qb(a))i.push(b.createTextNode(a));else{for(c=c||h.appendChild(b.createElement("div")),d=(Je.exec(a)||["",""])[1].toLowerCase(),e=Le[d]||Le._default,c.innerHTML=e[1]+a.replace(Ke,"<$1></$2>")+e[2],g=e[0];g--;)c=c.lastChild;i=N(i,c.childNodes),c=h.firstChild,c.textContent=""}return h.textContent="",h.innerHTML="",f(i,function(a){h.appendChild(a)}),h}function tb(a,c){c=c||b;var d;return(d=He.exec(a))?[c.createElement(d[1])]:(d=sb(a,c))?d.childNodes:[]}function ub(a){if(a instanceof ub)return a;var b;if(u(a)&&(a=me(a),b=!0),!(this instanceof ub)){if(b&&"<"!=a.charAt(0))throw Ge("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new ub(a)}b?Eb(this,tb(a)):Eb(this,a)}function vb(a){return a.cloneNode(!0)}function wb(a,b){if(b||yb(a),a.querySelectorAll)for(var c=a.querySelectorAll("*"),d=0,e=c.length;e>d;d++)yb(c[d])}function xb(a,b,c,d){if(s(d))throw Ge("offargs","jqLite#off() does not support the `selector` argument");var e=zb(a),g=e&&e.events,h=e&&e.handle;if(h)if(b)f(b.split(" "),function(b){if(s(c)){var d=g[b];if(J(d||[],c),d&&d.length>0)return}Ce(a,b,h),delete g[b]});else for(b in g)"$destroy"!==b&&Ce(a,b,h),delete g[b]}function yb(a,b){var d=a.ng339,e=d&&ze[d];if(e){if(b)return void delete e.data[b];e.handle&&(e.events.$destroy&&e.handle({},"$destroy"),xb(a)),delete ze[d],a.ng339=c}}function zb(a,b){var d=a.ng339,e=d&&ze[d];return b&&!e&&(a.ng339=d=ob(),e=ze[d]={events:{},data:{},handle:c}),e}function Ab(a,b,c){if(rb(a)){var d=s(c),e=!d&&b&&!t(b),f=!b,g=zb(a,!e),h=g&&g.data;if(d)h[b]=c;else{if(f)return h;if(e)return h&&h[b];l(h,b)}}}function Bb(a,b){return a.getAttribute?(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" ")>-1:!1}function Cb(a,b){b&&a.setAttribute&&f(b.split(" "),function(b){a.setAttribute("class",me((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+me(b)+" "," ")))})}function Db(a,b){if(b&&a.setAttribute){var c=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");f(b.split(" "),function(a){a=me(a),-1===c.indexOf(" "+a+" ")&&(c+=a+" ")}),a.setAttribute("class",me(c))}}function Eb(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var c=b.length;if("number"==typeof c&&b.window!==b){if(c)for(var d=0;c>d;d++)a[a.length++]=b[d]}else a[a.length++]=b}}function Fb(a,b){return Gb(a,"$"+(b||"ngController")+"Controller")}function Gb(a,b,d){a.nodeType==we&&(a=a.documentElement);for(var e=le(b)?b:[b];a;){for(var f=0,g=e.length;g>f;f++)if((d=ae.data(a,e[f]))!==c)return d;a=a.parentNode||a.nodeType===xe&&a.host}}function Hb(a){for(wb(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Ib(a,b){b||wb(a);var c=a.parentNode;c&&c.removeChild(a)}function Jb(b,c){c=c||a,"complete"===c.document.readyState?c.setTimeout(b):ae(c).on("load",b)}function Kb(a,b){var c=Ne[b.toLowerCase()];return c&&Oe[I(a)]&&c}function Lb(a,b){var c=a.nodeName;return("INPUT"===c||"TEXTAREA"===c)&&Pe[b]}function Mb(a,b){var c=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var e=b[d||c.type],f=e?e.length:0;if(f){if(r(c.immediatePropagationStopped)){var g=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0,c.stopPropagation&&c.stopPropagation(),g&&g.call(c)}}c.isImmediatePropagationStopped=function(){return c.immediatePropagationStopped===!0},f>1&&(e=L(e));for(var h=0;f>h;h++)c.isImmediatePropagationStopped()||e[h].call(a,c)}};return c.elem=a,c}function Nb(){this.$get=function(){return l(ub,{hasClass:function(a,b){return a.attr&&(a=a[0]),Bb(a,b)},addClass:function(a,b){return a.attr&&(a=a[0]),Db(a,b)},removeClass:function(a,b){return a.attr&&(a=a[0]),Cb(a,b)}})}}function Ob(a,b){var c=a&&a.$$hashKey;if(c)return"function"==typeof c&&(c=a.$$hashKey()),c;var d=typeof a;return c="function"==d||"object"==d&&null!==a?a.$$hashKey=d+":"+(b||j)():d+":"+a}function Pb(a,b){if(b){var c=0;this.nextUid=function(){return++c}}f(a,this.put,this)}function Qb(a){var b=a.toString().replace(Te,""),c=b.match(Qe);return c?"function("+(c[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Rb(a,b,c){var d,e,g,h;if("function"==typeof a){if(!(d=a.$inject)){if(d=[],a.length){if(b)throw u(c)&&c||(c=a.name||Qb(a)),Ue("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",c);e=a.toString().replace(Te,""),g=e.match(Qe),f(g[1].split(Re),function(a){a.replace(Se,function(a,b,c){d.push(c)})})}a.$inject=d}}else le(a)?(h=a.length-1,fb(a[h],"fn"),d=a.slice(0,h)):fb(a,"fn",!0);return d}function Sb(a,b){function d(a){return function(b,c){return t(b)?void f(b,i(a)):a(b,c)}}function e(a,b){if(gb(a,"service"),(x(b)||le(b))&&(b=A.instantiate(b)),!b.$get)throw Ue("pget","Provider '{0}' must define $get factory method.",a);return z[a+v]=b}function g(a,b){return function(){var c=C.invoke(b,this);if(r(c))throw Ue("undef","Provider '{0}' must return a value from $get factory method.",a);return c}}function h(a,b,c){return e(a,{$get:c!==!1?g(a,b):b})}function j(a,b){return h(a,["$injector",function(a){return a.instantiate(b)}])}function k(a,b){return h(a,q(b),!1)}function l(a,b){gb(a,"constant"),z[a]=b,B[a]=b}function m(a,b){var c=A.get(a+v),d=c.$get;c.$get=function(){var a=C.invoke(d,c);return C.invoke(b,null,{$delegate:a})}}function n(a){var b,c=[];return f(a,function(a){function d(a){var b,c;for(b=0,c=a.length;c>b;b++){var d=a[b],e=A.get(d[0]);e[d[1]].apply(e,d[2])}}if(!y.get(a)){y.put(a,!0);try{u(a)?(b=ce(a),c=c.concat(n(b.requires)).concat(b._runBlocks),d(b._invokeQueue),d(b._configBlocks)):x(a)?c.push(A.invoke(a)):le(a)?c.push(A.invoke(a)):fb(a,"module")}catch(e){throw le(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ue("modulerr","Failed to instantiate module {0} due to:\n{1}",a,e.stack||e.message||e)}}}),c}function p(a,c){function d(b,d){if(a.hasOwnProperty(b)){if(a[b]===s)throw Ue("cdep","Circular dependency found: {0}",b+" <- "+w.join(" <- "));return a[b]}try{return w.unshift(b),a[b]=s,a[b]=c(b,d)}catch(e){throw a[b]===s&&delete a[b],e}finally{w.shift()}}function e(a,c,e,f){"string"==typeof e&&(f=e,e=null);var g,h,i,j=[],k=Sb.$$annotate(a,b,f);for(h=0,g=k.length;g>h;h++){if(i=k[h],"string"!=typeof i)throw Ue("itkn","Incorrect injection token! Expected service name as string, got {0}",i);j.push(e&&e.hasOwnProperty(i)?e[i]:d(i,f))}return le(a)&&(a=a[g]),a.apply(c,j)}function f(a,b,c){var d=Object.create((le(a)?a[a.length-1]:a).prototype||null),f=e(a,d,b,c);return t(f)||x(f)?f:d}return{invoke:e,instantiate:f,get:d,annotate:Sb.$$annotate,has:function(b){return z.hasOwnProperty(b+v)||a.hasOwnProperty(b)}}}b=b===!0;var s={},v="Provider",w=[],y=new Pb([],!0),z={$provide:{provider:d(e),factory:d(h),service:d(j),value:d(k),constant:d(l),decorator:m}},A=z.$injector=p(z,function(a,b){throw ie.isString(b)&&w.push(b),Ue("unpr","Unknown provider: {0}",w.join(" <- "))}),B={},C=B.$injector=p(B,function(a,b){var d=A.get(a+v,b);return C.invoke(d.$get,d,c,a)});return f(n(a),function(a){C.invoke(a||o)}),C}function Tb(){var a=!0;this.disableAutoScrolling=function(){a=!1},this.$get=["$window","$location","$rootScope",function(b,c,d){function e(a){var b=null;return Array.prototype.some.call(a,function(a){return"a"===I(a)?(b=a,!0):void 0}),b}function f(){var a=h.yOffset;if(x(a))a=a();else if(G(a)){var c=a[0],d=b.getComputedStyle(c);a="fixed"!==d.position?0:c.getBoundingClientRect().bottom}else v(a)||(a=0);return a}function g(a){if(a){a.scrollIntoView();var c=f();if(c){var d=a.getBoundingClientRect().top;b.scrollBy(0,d-c)}}else b.scrollTo(0,0)}function h(){var a,b=c.hash();b?(a=i.getElementById(b))?g(a):(a=e(i.getElementsByName(b)))?g(a):"top"===b&&g(null):g(null)}var i=b.document;return a&&d.$watch(function(){return c.hash()},function(a,b){(a!==b||""!==a)&&Jb(function(){d.$evalAsync(h)})}),h}]}function Ub(){this.$get=["$$rAF","$timeout",function(a,b){return a.supported?function(b){return a(b)}:function(a){return b(a,0,!1)}}]}function Vb(a,b,d,e){function g(a){try{a.apply(null,O(arguments,1))}finally{if(y--,0===y)for(;z.length;)try{z.pop()()}catch(b){d.error(b)}}}function h(a){var b=a.indexOf("#");return-1===b?"":a.substr(b)}function i(a,b){!function c(){f(B,function(a){a()}),A=b(c,a)}()}function j(){l(),m()}function k(){try{return t.state}catch(a){}}function l(){C=k(),C=r(C)?null:C,M(C,J)&&(C=J),J=C}function m(){(E!==p.url()||D!==C)&&(E=p.url(),D=C,f(H,function(a){a(p.url(),C)}))}function n(a){try{return decodeURIComponent(a)}catch(b){return a}}var p=this,q=b[0],s=a.location,t=a.history,v=a.setTimeout,w=a.clearTimeout,x={};p.isMock=!1;var y=0,z=[];p.$$completeOutstandingRequest=g,p.$$incOutstandingRequestCount=function(){y++},p.notifyWhenNoOutstandingRequests=function(a){f(B,function(a){a()}),0===y?a():z.push(a)};var A,B=[];p.addPollFn=function(a){return r(A)&&i(100,v),B.push(a),a};var C,D,E=s.href,F=b.find("base"),G=null;l(),D=C,p.url=function(b,c,d){if(r(d)&&(d=null),s!==a.location&&(s=a.location),t!==a.history&&(t=a.history),b){var f=D===d;if(E===b&&(!e.history||f))return p;var g=E&&vc(E)===vc(b);return E=b,D=d,!e.history||g&&f?((!g||G)&&(G=b),c?s.replace(b):g?s.hash=h(b):s.href=b):(t[c?"replaceState":"pushState"](d,"",b),l(),D=C),p}return G||s.href.replace(/%27/g,"'")},p.state=function(){return C};var H=[],I=!1,J=null;p.onUrlChange=function(b){return I||(e.history&&ae(a).on("popstate",j),ae(a).on("hashchange",j),I=!0),H.push(b),b},p.$$checkUrlChange=m,p.baseHref=function(){var a=F.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var K={},L="",N=p.baseHref();p.cookies=function(a,b){var e,f,g,h,i;if(!a){if(q.cookie!==L)for(L=q.cookie,f=L.split("; "),K={},h=0;h<f.length;h++)g=f[h],i=g.indexOf("="),i>0&&(a=n(g.substring(0,i)),K[a]===c&&(K[a]=n(g.substring(i+1))));return K}b===c?q.cookie=encodeURIComponent(a)+"=;path="+N+";expires=Thu, 01 Jan 1970 00:00:00 GMT":u(b)&&(e=(q.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+";path="+N).length+1,e>4096&&d.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+e+" > 4096 bytes)!"))},p.defer=function(a,b){var c;return y++,c=v(function(){delete x[c],g(a)},b||0),x[c]=!0,c},p.defer.cancel=function(a){return x[a]?(delete x[a],w(a),g(o),!0):!1}}function Wb(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new Vb(a,d,b,c)}]}function Xb(){this.$get=function(){function a(a,c){function e(a){a!=m&&(n?n==a&&(n=a.n):n=a,f(a.n,a.p),f(a,m),m=a,m.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw d("$cacheFactory")("iid","CacheId '{0}' is already taken!",a);var g=0,h=l({},c,{id:a}),i={},j=c&&c.capacity||Number.MAX_VALUE,k={},m=null,n=null;return b[a]={put:function(a,b){if(j<Number.MAX_VALUE){var c=k[a]||(k[a]={key:a});e(c)}if(!r(b))return a in i||g++,i[a]=b,g>j&&this.remove(n.key),b},get:function(a){if(j<Number.MAX_VALUE){var b=k[a];if(!b)return;e(b)}return i[a]},remove:function(a){if(j<Number.MAX_VALUE){var b=k[a];if(!b)return;b==m&&(m=b.p),b==n&&(n=b.n),f(b.n,b.p),delete k[a]}delete i[a],g--},removeAll:function(){i={},g=0,k={},m=n=null},destroy:function(){i=null,h=null,k=null,delete b[a]},info:function(){return l({},h,{size:g})}}}var b={};return a.info=function(){var a={};return f(b,function(b,c){a[c]=b.info()}),a},a.get=function(a){return b[a]},a}}function Yb(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function Zb(a,d){function e(a,b){var c=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,d={};return f(a,function(a,e){var f=a.match(c);if(!f)throw Xe("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",b,e,a);d[e]={mode:f[1][0],collection:"*"===f[2],optional:"?"===f[3],attrName:f[4]||e}}),d}function g(a){var b=a.charAt(0);if(!b||b!==Wd(b))throw Xe("baddir","Directive name '{0}' is invalid. The first character must be a lowercase letter",a);return a}var h={},j="Directive",k=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,m=/(([\w\-]+)(?:\:([^;]+))?;?)/,r=H("ngSrc,ngSrcset,src,srcset"),v=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,w=/^(on[a-z]+|formaction)$/;this.directive=function z(b,c){return gb(b,"directive"),u(b)?(g(b),eb(c,"directiveFactory"),h.hasOwnProperty(b)||(h[b]=[],a.factory(b+j,["$injector","$exceptionHandler",function(a,c){var d=[];return f(h[b],function(f,g){try{var h=a.invoke(f);x(h)?h={compile:q(h)}:!h.compile&&h.link&&(h.compile=q(h.link)),h.priority=h.priority||0,h.index=g,h.name=h.name||b,h.require=h.require||h.controller&&h.name,h.restrict=h.restrict||"EA",t(h.scope)&&(h.$$isolateBindings=e(h.scope,h.name)),d.push(h)}catch(i){c(i)}}),d}])),h[b].push(c)):f(b,i(z)),this},this.aHrefSanitizationWhitelist=function(a){return s(a)?(d.aHrefSanitizationWhitelist(a),this):d.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(d.imgSrcSanitizationWhitelist(a),this):d.imgSrcSanitizationWhitelist()};var y=!0;this.debugInfoEnabled=function(a){return s(a)?(y=a,this):y},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,d,e,g,i,q,s,z,B,C,D){function E(a,b){try{a.addClass(b)}catch(c){}}function F(a,b,c,d,e){a instanceof ae||(a=ae(a)),f(a,function(b,c){b.nodeType==ue&&b.nodeValue.match(/\S+/)&&(a[c]=ae(b).wrap("<span></span>").parent()[0])});var g=H(a,b,a,c,d,e);F.$$addScopeClass(a);var h=null;return function(b,c,d){eb(b,"scope"),d=d||{};var e=d.parentBoundTranscludeFn,f=d.transcludeControllers,i=d.futureParentElement;e&&e.$$boundTransclude&&(e=e.$$boundTransclude),h||(h=G(i));var j;if(j="html"!==h?ae($(h,ae("<div>").append(a).html())):c?Me.clone.call(a):a,f)for(var k in f)j.data("$"+k+"Controller",f[k].instance);return F.$$addScopeInfo(j,b),c&&c(j,b),g&&g(b,j,j,e),j}}function G(a){var b=a&&a[0];return b&&"foreignobject"!==I(b)&&b.toString().match(/SVG/)?"svg":"html"}function H(a,b,d,e,f,g){function h(a,d,e,f){var g,h,i,j,k,l,m,n,q;if(o){var r=d.length;for(q=new Array(r),k=0;k<p.length;k+=3)m=p[k],q[m]=d[m]}else q=d;for(k=0,l=p.length;l>k;)i=q[p[k++]],g=p[k++],h=p[k++],g?(g.scope?(j=a.$new(),F.$$addScopeInfo(ae(i),j)):j=a,n=g.transcludeOnThisElement?K(a,g.transclude,f,g.elementTranscludeOnThisElement):!g.templateOnThisElement&&f?f:!f&&b?K(a,b):null,g(h,j,i,e,n)):h&&h(a,i.childNodes,c,f)}for(var i,j,k,l,m,n,o,p=[],q=0;q<a.length;q++)i=new gb,j=L(a[q],[],i,0===q?e:c,f),k=j.length?Q(j,a[q],i,b,d,null,[],[],g):null,k&&k.scope&&F.$$addScopeClass(i.$$element),m=k&&k.terminal||!(l=a[q].childNodes)||!l.length?null:H(l,k?(k.transcludeOnThisElement||!k.templateOnThisElement)&&k.transclude:b),(k||m)&&(p.push(q,k,m),n=!0,o=o||k),g=null;return n?h:null}function K(a,b,c){var d=function(d,e,f,g,h){return d||(d=a.$new(!1,h),d.$$transcluded=!0),b(d,e,{parentBoundTranscludeFn:c,transcludeControllers:f,futureParentElement:g})};return d}function L(a,b,c,d,e){var f,g,h=a.nodeType,i=c.$attr;switch(h){case se:S(b,$b(I(a)),"E",d,e);for(var j,l,n,o,p,q,r=a.attributes,s=0,v=r&&r.length;v>s;s++){var w=!1,x=!1;j=r[s],l=j.name,p=me(j.value),o=$b(l),(q=lb.test(o))&&(l=l.replace(Ye,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()}));var y=o.replace(/(Start|End)$/,"");U(y)&&o===y+"Start"&&(w=l,x=l.substr(0,l.length-5)+"end",l=l.substr(0,l.length-6)),n=$b(l.toLowerCase()),i[n]=l,(q||!c.hasOwnProperty(n))&&(c[n]=p,Kb(a,n)&&(c[n]=!0)),ab(a,b,p,n,q),S(b,n,"A",d,e,w,x)}if(g=a.className,t(g)&&(g=g.animVal),u(g)&&""!==g)for(;f=m.exec(g);)n=$b(f[2]),S(b,n,"C",d,e)&&(c[n]=me(f[3])),g=g.substr(f.index+f[0].length);break;case ue:Z(b,a.nodeValue);break;case ve:try{f=k.exec(a.nodeValue),f&&(n=$b(f[1]),S(b,n,"M",d,e)&&(c[n]=me(f[2])))}catch(z){}}return b.sort(X),b}function N(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw Xe("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",b,c);a.nodeType==se&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--),d.push(a),a=a.nextSibling}while(e>0)}else d.push(a);return ae(d)}function P(a,b,c){return function(d,e,f,g,h){return e=N(e[0],b,c),a(d,e,f,g,h)}}function Q(a,g,h,j,k,l,m,n,o){function p(a,b,c,d){a&&(c&&(a=P(a,c,d)),a.require=z.require,a.directiveName=B,(I===z||z.$$isolateScope)&&(a=db(a,{isolateScope:!0})),m.push(a)),b&&(c&&(b=P(b,c,d)),b.require=z.require,b.directiveName=B,(I===z||z.$$isolateScope)&&(b=db(b,{isolateScope:!0})),n.push(b))}function r(a,b,c,d){var e,g,h="data",i=!1,j=c;if(u(b)){if(g=b.match(v),b=b.substring(g[0].length),g[3]&&(g[1]?g[3]=null:g[1]=g[3]),"^"===g[1]?h="inheritedData":"^^"===g[1]&&(h="inheritedData",j=c.parent()),"?"===g[2]&&(i=!0),e=null,d&&"data"===h&&(e=d[b])&&(e=e.instance),e=e||j[h]("$"+b+"Controller"),!e&&!i)throw Xe("ctreq","Controller '{0}', required by directive '{1}', can't be found!",b,a);return e||null}return le(b)&&(e=[],f(b,function(b){e.push(r(a,b,c,d))})),e}function s(a,b,e,j,k){function l(a,b,d){var e;return A(a)||(d=b,b=a,a=c),U&&(e=v),d||(d=U?x.parent():x),k(a,b,e,d,D)}var o,p,s,t,u,v,w,x,z;if(g===e?(z=h,x=h.$$element):(x=ae(e),z=new gb(x,h)),I&&(u=b.$new(!0)),k&&(w=l,w.$$boundTransclude=k),H&&(y={},v={},f(H,function(a){var c,d={$scope:a===I||a.$$isolateScope?u:b,$element:x,$attrs:z,$transclude:w};t=a.controller,"@"==t&&(t=z[a.name]),c=q(t,d,!0,a.controllerAs),v[a.name]=c,U||x.data("$"+a.name+"Controller",c.instance),y[a.name]=c})),I){F.$$addScopeInfo(x,u,!0,!(J&&(J===I||J===I.$$originalDirective))),F.$$addScopeClass(x,!0);var B=y&&y[I.name],C=u;B&&B.identifier&&I.bindToController===!0&&(C=B.instance),f(u.$$isolateBindings=I.$$isolateBindings,function(a,c){var e,f,g,h,j=a.attrName,k=a.optional,l=a.mode;switch(l){case"@":z.$observe(j,function(a){C[c]=a}),z.$$observers[j].$$scope=b,z[j]&&(C[c]=d(z[j])(b));break;case"=":if(k&&!z[j])return;f=i(z[j]),h=f.literal?M:function(a,b){return a===b||a!==a&&b!==b},g=f.assign||function(){throw e=C[c]=f(b),Xe("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",z[j],I.name)},e=C[c]=f(b);var m=function(a){return h(a,C[c])||(h(a,e)?g(b,a=C[c]):C[c]=a),e=a};m.$stateful=!0;var n;n=a.collection?b.$watchCollection(z[j],m):b.$watch(i(z[j],m),null,f.literal),u.$on("$destroy",n);break;case"&":f=i(z[j]),C[c]=function(a){return f(b,a)}}})}for(y&&(f(y,function(a){a()}),y=null),o=0,p=m.length;p>o;o++)s=m[o],fb(s,s.isolateScope?u:b,x,z,s.require&&r(s.directiveName,s.require,x,v),w);var D=b;for(I&&(I.template||null===I.templateUrl)&&(D=u),a&&a(D,e.childNodes,c,k),o=n.length-1;o>=0;o--)s=n[o],fb(s,s.isolateScope?u:b,x,z,s.require&&r(s.directiveName,s.require,x,v),w)}o=o||{};for(var w,y,z,B,C,D,E,G=-Number.MAX_VALUE,H=o.controllerDirectives,I=o.newIsolateScopeDirective,J=o.templateDirective,K=o.nonTlbTranscludeDirective,Q=!1,S=!1,U=o.hasElementTranscludeDirective,X=h.$$element=ae(g),Z=l,_=j,ab=0,cb=a.length;cb>ab;ab++){z=a[ab];var eb=z.$$start,hb=z.$$end;if(eb&&(X=N(g,eb,hb)),C=c,G>z.priority)break;if((E=z.scope)&&(z.templateUrl||(t(E)?(Y("new/isolated scope",I||w,z,X),I=z):Y("new/isolated scope",I,z,X)),w=w||z),B=z.name,!z.templateUrl&&z.controller&&(E=z.controller,H=H||{},Y("'"+B+"' controller",H[B],z,X),H[B]=z),(E=z.transclude)&&(Q=!0,z.$$tlb||(Y("transclusion",K,z,X),K=z),"element"==E?(U=!0,G=z.priority,C=X,X=h.$$element=ae(b.createComment(" "+B+": "+h[B]+" ")),g=X[0],bb(k,O(C),g),_=F(C,j,G,Z&&Z.name,{nonTlbTranscludeDirective:K})):(C=ae(vb(g)).contents(),X.empty(),_=F(C,j))),z.template)if(S=!0,Y("template",J,z,X),J=z,E=x(z.template)?z.template(X,h):z.template,E=kb(E),z.replace){if(Z=z,C=qb(E)?[]:ac($(z.templateNamespace,me(E))),g=C[0],1!=C.length||g.nodeType!==se)throw Xe("tplrt","Template for directive '{0}' must have exactly one root element. {1}",B,"");bb(k,X,g);var ib={$attr:{}},jb=L(g,[],ib),lb=a.splice(ab+1,a.length-(ab+1));I&&R(jb),a=a.concat(jb).concat(lb),V(h,ib),cb=a.length}else X.html(E);if(z.templateUrl)S=!0,Y("template",J,z,X),J=z,z.replace&&(Z=z),s=W(a.splice(ab,a.length-ab),X,h,k,Q&&_,m,n,{controllerDirectives:H,newIsolateScopeDirective:I,templateDirective:J,nonTlbTranscludeDirective:K}),cb=a.length;else if(z.compile)try{D=z.compile(X,h,_),x(D)?p(null,D,eb,hb):D&&p(D.pre,D.post,eb,hb)}catch(mb){e(mb,T(X))}z.terminal&&(s.terminal=!0,G=Math.max(G,z.priority))}return s.scope=w&&w.scope===!0,s.transcludeOnThisElement=Q,s.elementTranscludeOnThisElement=U,s.templateOnThisElement=S,s.transclude=_,o.hasElementTranscludeDirective=U,s}function R(a){for(var b=0,c=a.length;c>b;b++)a[b]=n(a[b],{$$isolateScope:!0})}function S(b,d,f,g,i,k,l){if(d===i)return null;var m=null;if(h.hasOwnProperty(d))for(var o,p=a.get(d+j),q=0,r=p.length;r>q;q++)try{o=p[q],(g===c||g>o.priority)&&-1!=o.restrict.indexOf(f)&&(k&&(o=n(o,{$$start:k,$$end:l})),b.push(o),m=o)}catch(s){e(s)}return m}function U(b){if(h.hasOwnProperty(b))for(var c,d=a.get(b+j),e=0,f=d.length;f>e;e++)if(c=d[e],c.multiElement)return!0;return!1}function V(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;f(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))
}),f(b,function(b,f){"class"==f?(E(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function W(a,b,c,d,e,h,i,j){var k,l,m=[],o=b[0],p=a.shift(),q=n(p,{templateUrl:null,transclude:null,replace:null,$$originalDirective:p}),r=x(p.templateUrl)?p.templateUrl(b,c):p.templateUrl,s=p.templateNamespace;return b.empty(),g(r).then(function(g){var n,u,v,w;if(g=kb(g),p.replace){if(v=qb(g)?[]:ac($(s,me(g))),n=v[0],1!=v.length||n.nodeType!==se)throw Xe("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p.name,r);u={$attr:{}},bb(d,b,n);var x=L(n,[],u);t(p.scope)&&R(x),a=x.concat(a),V(c,u)}else n=o,b.html(g);for(a.unshift(q),k=Q(a,n,c,e,b,p,h,i,j),f(d,function(a,c){a==n&&(d[c]=b[0])}),l=H(b[0].childNodes,e);m.length;){var y=m.shift(),z=m.shift(),A=m.shift(),B=m.shift(),C=b[0];if(!y.$$destroyed){if(z!==o){var D=z.className;j.hasElementTranscludeDirective&&p.replace||(C=vb(n)),bb(A,ae(z),C),E(ae(C),D)}w=k.transcludeOnThisElement?K(y,k.transclude,B):B,k(l,y,C,d,w)}}m=null}),function(a,b,c,d,e){var f=e;b.$$destroyed||(m?m.push(b,c,d,f):(k.transcludeOnThisElement&&(f=K(b,k.transclude,e)),k(l,b,c,d,f)))}}function X(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function Y(a,b,c,d){if(b)throw Xe("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",b.name,c.name,a,T(d))}function Z(a,b){var c=d(b,!0);c&&a.push({priority:0,compile:function(a){var b=a.parent(),d=!!b.length;return d&&F.$$addBindingClass(b),function(a,b){var e=b.parent();d||F.$$addBindingClass(e),F.$$addBindingInfo(e,c.expressions),a.$watch(c,function(a){b[0].nodeValue=a})}}})}function $(a,c){switch(a=Wd(a||"html")){case"svg":case"math":var d=b.createElement("div");return d.innerHTML="<"+a+">"+c+"</"+a+">",d.childNodes[0].childNodes;default:return c}}function _(a,b){if("srcdoc"==b)return B.HTML;var c=I(a);return"xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b)?B.RESOURCE_URL:void 0}function ab(a,b,c,e,f){var g=_(a,e);f=r[e]||f;var h=d(c,!0,g,f);if(h){if("multiple"===e&&"select"===I(a))throw Xe("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",T(a));b.push({priority:100,compile:function(){return{pre:function(a,b,i){var j=i.$$observers||(i.$$observers={});if(w.test(e))throw Xe("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var k=i[e];k!==c&&(h=k&&d(k,!0,g,f),c=k),h&&(i[e]=h(a),(j[e]||(j[e]=[])).$$inter=!0,(i.$$observers&&i.$$observers[e].$$scope||a).$watch(h,function(a,b){"class"===e&&a!=b?i.$updateClass(a,b):i.$set(e,a)}))}}}})}}function bb(a,c,d){var e,f,g=c[0],h=c.length,i=g.parentNode;if(a)for(e=0,f=a.length;f>e;e++)if(a[e]==g){a[e++]=d;for(var j=e,k=j+h-1,l=a.length;l>j;j++,k++)l>k?a[j]=a[k]:delete a[j];a.length-=h-1,a.context===g&&(a.context=d);break}i&&i.replaceChild(d,g);var m=b.createDocumentFragment();m.appendChild(g),ae(d).data(ae(g).data()),be?(ke=!0,be.cleanData([g])):delete ae.cache[g[ae.expando]];for(var n=1,o=c.length;o>n;n++){var p=c[n];ae(p).remove(),m.appendChild(p),delete c[n]}c[0]=d,c.length=1}function db(a,b){return l(function(){return a.apply(null,arguments)},a,b)}function fb(a,b,c,d,f,g){try{a(b,c,d,f,g)}catch(h){e(h,T(c))}}var gb=function(a,b){if(b){var c,d,e,f=Object.keys(b);for(c=0,d=f.length;d>c;c++)e=f[c],this[e]=b[e]}else this.$attr={};this.$$element=a};gb.prototype={$normalize:$b,$addClass:function(a){a&&a.length>0&&C.addClass(this.$$element,a)},$removeClass:function(a){a&&a.length>0&&C.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=_b(a,b);c&&c.length&&C.addClass(this.$$element,c);var d=_b(b,a);d&&d.length&&C.removeClass(this.$$element,d)},$set:function(a,b,d,g){var h,i=this.$$element[0],j=Kb(i,a),k=Lb(i,a),l=a;if(j?(this.$$element.prop(a,b),g=j):k&&(this[k]=b,l=k),this[a]=b,g?this.$attr[a]=g:(g=this.$attr[a],g||(this.$attr[a]=g=cb(a,"-"))),h=I(this.$$element),"a"===h&&"href"===a||"img"===h&&"src"===a)this[a]=b=D(b,"src"===a);else if("img"===h&&"srcset"===a){for(var m="",n=me(b),o=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,p=/\s/.test(n)?o:/(,)/,q=n.split(p),r=Math.floor(q.length/2),s=0;r>s;s++){var t=2*s;m+=D(me(q[t]),!0),m+=" "+me(q[t+1])}var u=me(q[2*s]).split(/\s/);m+=D(me(u[0]),!0),2===u.length&&(m+=" "+me(u[1])),this[a]=b=m}d!==!1&&(null===b||b===c?this.$$element.removeAttr(g):this.$$element.attr(g,b));var v=this.$$observers;v&&f(v[l],function(a){try{a(b)}catch(c){e(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=jb()),e=d[a]||(d[a]=[]);return e.push(b),s.$evalAsync(function(){!e.$$inter&&c.hasOwnProperty(a)&&b(c[a])}),function(){J(e,b)}}};var hb=d.startSymbol(),ib=d.endSymbol(),kb="{{"==hb||"}}"==ib?p:function(a){return a.replace(/\{\{/g,hb).replace(/}}/g,ib)},lb=/^ngAttr[A-Z]/;return F.$$addBindingInfo=y?function(a,b){var c=a.data("$binding")||[];le(b)?c=c.concat(b):c.push(b),a.data("$binding",c)}:o,F.$$addBindingClass=y?function(a){E(a,"ng-binding")}:o,F.$$addScopeInfo=y?function(a,b,c,d){var e=c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope";a.data(e,b)}:o,F.$$addScopeClass=y?function(a,b){E(a,b?"ng-isolate-scope":"ng-scope")}:o,F}]}function $b(a){return pb(a.replace(Ye,""))}function _b(a,b){var c="",d=a.split(/\s+/),e=b.split(/\s+/);a:for(var f=0;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g==e[h])continue a;c+=(c.length>0?" ":"")+g}return c}function ac(a){a=ae(a);var b=a.length;if(1>=b)return a;for(;b--;){var c=a[b];c.nodeType===ve&&ee.call(a,b,1)}return a}function bc(){var a={},b=!1,e=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(b,c){gb(b,"controller"),t(b)?l(a,b):a[b]=c},this.allowGlobals=function(){b=!0},this.$get=["$injector","$window",function(f,g){function h(a,b,c,e){if(!a||!t(a.$scope))throw d("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",e,b);a.$scope[b]=c}return function(d,i,j,k){var m,n,o,p;if(j=j===!0,k&&u(k)&&(p=k),u(d)){if(n=d.match(e),!n)throw Ze("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",d);o=n[1],p=p||n[3],d=a.hasOwnProperty(o)?a[o]:hb(i.$scope,o,!0)||(b?hb(g,o,!0):c),fb(d,o,!0)}if(j){var q=(le(d)?d[d.length-1]:d).prototype;return m=Object.create(q||null),p&&h(i,p,m,o||d.name),l(function(){return f.invoke(d,m,i,o),m},{instance:m,identifier:p})}return m=f.instantiate(d,i,o),p&&h(i,p,m,o||d.name),m}}]}function cc(){this.$get=["$window",function(a){return ae(a.document)}]}function dc(){this.$get=["$log",function(a){return function(){a.error.apply(a,arguments)}}]}function ec(a,b){if(u(a)){var c=a.replace(cf,"").trim();if(c){var d=b("Content-Type");(d&&0===d.indexOf($e)||fc(c))&&(a=S(c))}}return a}function fc(a){var b=a.match(af);return b&&bf[b[0]].test(a)}function gc(a){var b,c,d,e=jb();return a?(f(a.split("\n"),function(a){d=a.indexOf(":"),b=Wd(me(a.substr(0,d))),c=me(a.substr(d+1)),b&&(e[b]=e[b]?e[b]+", "+c:c)}),e):e}function hc(a){var b=t(a)?a:c;return function(c){if(b||(b=gc(a)),c){var d=b[Wd(c)];return void 0===d&&(d=null),d}return b}}function ic(a,b,c,d){return x(d)?d(a,b,c):(f(d,function(d){a=d(a,b,c)}),a)}function jc(a){return a>=200&&300>a}function kc(){var a=this.defaults={transformResponse:[ec],transformRequest:[function(a){return!t(a)||B(a)||D(a)||C(a)?a:R(a)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:L(_e),put:L(_e),patch:L(_e)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},b=!1;this.useApplyAsync=function(a){return s(a)?(b=!!a,this):b};var e=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(g,i,j,k,m,n){function o(b){function e(a){var b=l({},a);return b.data=a.data?ic(a.data,a.headers,a.status,i.transformResponse):a.data,jc(a.status)?b:m.reject(b)}function g(a){var b,c={};return f(a,function(a,d){x(a)?(b=a(),null!=b&&(c[d]=b)):c[d]=a}),c}function h(b){var c,d,e,f=a.headers,h=l({},b.headers);f=l({},f.common,f[Wd(b.method)]);a:for(c in f){d=Wd(c);for(e in h)if(Wd(e)===d)continue a;h[c]=f[c]}return g(h)}if(!ie.isObject(b))throw d("$http")("badreq","Http request configuration must be an object.  Received: {0}",b);var i=l({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse},b);i.headers=h(b),i.method=Yd(i.method);var j=function(b){var d=b.headers,g=ic(b.data,hc(d),c,b.transformRequest);return r(g)&&f(d,function(a,b){"content-type"===Wd(b)&&delete d[b]}),r(b.withCredentials)&&!r(a.withCredentials)&&(b.withCredentials=a.withCredentials),v(b,g).then(e,e)},k=[j,c],n=m.when(i);for(f(A,function(a){(a.request||a.requestError)&&k.unshift(a.request,a.requestError),(a.response||a.responseError)&&k.push(a.response,a.responseError)});k.length;){var o=k.shift(),p=k.shift();n=n.then(o,p)}return n.success=function(a){return fb(a,"fn"),n.then(function(b){a(b.data,b.status,b.headers,i)}),n},n.error=function(a){return fb(a,"fn"),n.then(null,function(b){a(b.data,b.status,b.headers,i)}),n},n}function p(){f(arguments,function(a){o[a]=function(b,c){return o(l(c||{},{method:a,url:b}))}})}function q(){f(arguments,function(a){o[a]=function(b,c,d){return o(l(d||{},{method:a,url:b,data:c}))}})}function v(d,e){function f(a,c,d,e){function f(){h(c,a,d,e)}n&&(jc(a)?n.put(w,[a,c,gc(d),e]):n.remove(w)),b?k.$applyAsync(f):(f(),k.$$phase||k.$apply())}function h(a,b,c,e){b=Math.max(b,0),(jc(b)?q.resolve:q.reject)({data:a,status:b,headers:hc(c),config:d,statusText:e})}function j(a){h(a.data,a.status,L(a.headers()),a.statusText)}function l(){var a=o.pendingRequests.indexOf(d);-1!==a&&o.pendingRequests.splice(a,1)}var n,p,q=m.defer(),u=q.promise,v=d.headers,w=y(d.url,d.params);if(o.pendingRequests.push(d),u.then(l,l),!d.cache&&!a.cache||d.cache===!1||"GET"!==d.method&&"JSONP"!==d.method||(n=t(d.cache)?d.cache:t(a.cache)?a.cache:z),n&&(p=n.get(w),s(p)?F(p)?p.then(j,j):le(p)?h(p[1],p[0],L(p[2]),p[3]):h(p,200,{},"OK"):n.put(w,u)),r(p)){var x=ed(d.url)?i.cookies()[d.xsrfCookieName||a.xsrfCookieName]:c;x&&(v[d.xsrfHeaderName||a.xsrfHeaderName]=x),g(d.method,w,e,f,v,d.timeout,d.withCredentials,d.responseType)}return u}function y(a,b){if(!b)return a;var c=[];return h(b,function(a,b){null===a||r(a)||(le(a)||(a=[a]),f(a,function(a){t(a)&&(a=w(a)?a.toISOString():R(a)),c.push(Y(b)+"="+Y(a))}))}),c.length>0&&(a+=(-1==a.indexOf("?")?"?":"&")+c.join("&")),a}var z=j("$http"),A=[];return f(e,function(a){A.unshift(u(a)?n.get(a):n.invoke(a))}),o.pendingRequests=[],p("get","delete","head","jsonp"),q("post","put","patch"),o.defaults=a,o}]}function lc(){return new a.XMLHttpRequest}function mc(){this.$get=["$browser","$window","$document",function(a,b,c){return nc(a,lc,a.defer,b.angular.callbacks,c[0])}]}function nc(a,b,d,e,g){function h(a,b,c){var d=g.createElement("script"),f=null;return d.type="text/javascript",d.src=a,d.async=!0,f=function(a){Ce(d,"load",f),Ce(d,"error",f),g.body.removeChild(d),d=null;var h=-1,i="unknown";a&&("load"!==a.type||e[b].called||(a={type:"error"}),i=a.type,h="error"===a.type?404:200),c&&c(h,i)},Be(d,"load",f),Be(d,"error",f),g.body.appendChild(d),f}return function(g,i,j,k,l,m,n,p){function q(){u&&u(),v&&v.abort()}function r(b,e,f,g,h){y!==c&&d.cancel(y),u=v=null,b(e,f,g,h),a.$$completeOutstandingRequest(o)}if(a.$$incOutstandingRequestCount(),i=i||a.url(),"jsonp"==Wd(g)){var t="_"+(e.counter++).toString(36);e[t]=function(a){e[t].data=a,e[t].called=!0};var u=h(i.replace("JSON_CALLBACK","angular.callbacks."+t),t,function(a,b){r(k,a,e[t].data,"",b),e[t]=o})}else{var v=b();v.open(g,i,!0),f(l,function(a,b){s(a)&&v.setRequestHeader(b,a)}),v.onload=function(){var a=v.statusText||"",b="response"in v?v.response:v.responseText,c=1223===v.status?204:v.status;0===c&&(c=b?200:"file"==dd(i).protocol?404:0),r(k,c,b,v.getAllResponseHeaders(),a)};var w=function(){r(k,-1,null,null,"")};if(v.onerror=w,v.onabort=w,n&&(v.withCredentials=!0),p)try{v.responseType=p}catch(x){if("json"!==p)throw x}v.send(j||null)}if(m>0)var y=d(q,m);else F(m)&&m.then(q)}}function oc(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a},this.endSymbol=function(a){return a?(b=a,this):b},this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a}function g(f,g,m,n){function o(c){return c.replace(j,a).replace(k,b)}function p(a){try{return a=D(a),n&&!s(a)?a:E(a)}catch(b){var c=df("interr","Can't interpolate: {0}\n{1}",f,b.toString());d(c)}}n=!!n;for(var q,t,u,v=0,w=[],y=[],z=f.length,A=[],B=[];z>v;){if(-1==(q=f.indexOf(a,v))||-1==(t=f.indexOf(b,q+h))){v!==z&&A.push(o(f.substring(v)));break}v!==q&&A.push(o(f.substring(v,q))),u=f.substring(q+h,t),w.push(u),y.push(c(u,p)),v=t+i,B.push(A.length),A.push("")}if(m&&A.length>1)throw df("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",f);if(!g||w.length){var C=function(a){for(var b=0,c=w.length;c>b;b++){if(n&&r(a[b]))return;A[B[b]]=a[b]}return A.join("")},D=function(a){return m?e.getTrusted(m,a):e.valueOf(a)},E=function(a){if(null==a)return"";switch(typeof a){case"string":break;case"number":a=""+a;break;default:a=R(a)}return a};return l(function(a){var b=0,c=w.length,e=new Array(c);try{for(;c>b;b++)e[b]=y[b](a);return C(e)}catch(g){var h=df("interr","Can't interpolate: {0}\n{1}",f,g.toString());d(h)}},{exp:f,expressions:w,$$watchDelegate:function(a,b,c){var d;return a.$watchGroup(y,function(c,e){var f=C(c);x(b)&&b.call(this,f,c!==e?d:f,a),d=f},c)}})}}var h=a.length,i=b.length,j=new RegExp(a.replace(/./g,f),"g"),k=new RegExp(b.replace(/./g,f),"g");return g.startSymbol=function(){return a},g.endSymbol=function(){return b},g}]}function pc(){this.$get=["$rootScope","$window","$q","$$q",function(a,b,c,d){function e(e,g,h,i){var j=b.setInterval,k=b.clearInterval,l=0,m=s(i)&&!i,n=(m?d:c).defer(),o=n.promise;return h=s(h)?h:0,o.then(null,null,e),o.$$intervalId=j(function(){n.notify(l++),h>0&&l>=h&&(n.resolve(l),k(o.$$intervalId),delete f[o.$$intervalId]),m||a.$apply()},g),f[o.$$intervalId]=n,o}var f={};return e.cancel=function(a){return a&&a.$$intervalId in f?(f[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete f[a.$$intervalId],!0):!1},e}]}function qc(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a",ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"]},pluralCat:function(a){return 1===a?"one":"other"}}}}function rc(a){for(var b=a.split("/"),c=b.length;c--;)b[c]=X(b[c]);return b.join("/")}function sc(a,b){var c=dd(a);b.$$protocol=c.protocol,b.$$host=c.hostname,b.$$port=m(c.port)||ff[c.protocol]||null}function tc(a,b){var c="/"!==a.charAt(0);c&&(a="/"+a);var d=dd(a);b.$$path=decodeURIComponent(c&&"/"===d.pathname.charAt(0)?d.pathname.substring(1):d.pathname),b.$$search=V(d.search),b.$$hash=decodeURIComponent(d.hash),b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function uc(a,b){return 0===b.indexOf(a)?b.substr(a.length):void 0}function vc(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function wc(a){return a.replace(/(#.+)|#$/,"$1")}function xc(a){return a.substr(0,vc(a).lastIndexOf("/")+1)}function yc(a){return a.substring(0,a.indexOf("/",a.indexOf("//")+2))}function zc(a,b){this.$$html5=!0,b=b||"";var d=xc(a);sc(a,this),this.$$parse=function(a){var b=uc(d,a);if(!u(b))throw gf("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',a,d);tc(b,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var a=W(this.$$search),b=this.$$hash?"#"+X(this.$$hash):"";this.$$url=rc(this.$$path)+(a?"?"+a:"")+b,this.$$absUrl=d+this.$$url.substr(1)},this.$$parseLinkUrl=function(e,f){if(f&&"#"===f[0])return this.hash(f.slice(1)),!0;var g,h,i;return(g=uc(a,e))!==c?(h=g,i=(g=uc(b,g))!==c?d+(uc("/",g)||g):a+h):(g=uc(d,e))!==c?i=d+g:d==e+"/"&&(i=d),i&&this.$$parse(i),!!i}}function Ac(a,b){var c=xc(a);sc(a,this),this.$$parse=function(d){function e(a,b,c){var d,e=/^\/[A-Z]:(\/.*)/;return 0===b.indexOf(c)&&(b=b.replace(c,"")),e.exec(b)?a:(d=e.exec(a),d?d[1]:a)}var f,g=uc(a,d)||uc(c,d);r(g)||"#"!==g.charAt(0)?this.$$html5?f=g:(f="",r(g)&&(a=d,this.replace())):(f=uc(b,g),r(f)&&(f=g)),tc(f,this),this.$$path=e(this.$$path,f,a),this.$$compose()},this.$$compose=function(){var c=W(this.$$search),d=this.$$hash?"#"+X(this.$$hash):"";this.$$url=rc(this.$$path)+(c?"?"+c:"")+d,this.$$absUrl=a+(this.$$url?b+this.$$url:"")},this.$$parseLinkUrl=function(b){return vc(a)==vc(b)?(this.$$parse(b),!0):!1}}function Bc(a,b){this.$$html5=!0,Ac.apply(this,arguments);var c=xc(a);this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;return a==vc(d)?f=d:(g=uc(c,d))?f=a+b+g:c===d+"/"&&(f=c),f&&this.$$parse(f),!!f},this.$$compose=function(){var c=W(this.$$search),d=this.$$hash?"#"+X(this.$$hash):"";this.$$url=rc(this.$$path)+(c?"?"+c:"")+d,this.$$absUrl=a+b+this.$$url}}function Cc(a){return function(){return this[a]}}function Dc(a,b){return function(c){return r(c)?this[a]:(this[a]=b(c),this.$$compose(),this)}}function Ec(){var a="",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return s(b)?(a=b,this):a},this.html5Mode=function(a){return E(a)?(b.enabled=a,this):t(a)?(E(a.enabled)&&(b.enabled=a.enabled),E(a.requireBase)&&(b.requireBase=a.requireBase),E(a.rewriteLinks)&&(b.rewriteLinks=a.rewriteLinks),this):b},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(c,d,e,f,g){function h(a,b,c){var e=j.url(),f=j.$$state;try{d.url(a,b,c),j.$$state=d.state()}catch(g){throw j.url(e),j.$$state=f,g}}function i(a,b){c.$broadcast("$locationChangeSuccess",j.absUrl(),a,j.$$state,b)}var j,k,l,m=d.baseHref(),n=d.url();if(b.enabled){if(!m&&b.requireBase)throw gf("nobase","$location in HTML5 mode requires a <base> tag to be present!");l=yc(n)+(m||"/"),k=e.history?zc:Bc}else l=vc(n),k=Ac;j=new k(l,"#"+a),j.$$parseLinkUrl(n,n),j.$$state=d.state();var o=/^\s*(javascript|mailto):/i;f.on("click",function(a){if(b.rewriteLinks&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!=a.which&&2!=a.button){for(var e=ae(a.target);"a"!==I(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;var h=e.prop("href"),i=e.attr("href")||e.attr("xlink:href");t(h)&&"[object SVGAnimatedString]"===h.toString()&&(h=dd(h.animVal).href),o.test(h)||!h||e.attr("target")||a.isDefaultPrevented()||j.$$parseLinkUrl(h,i)&&(a.preventDefault(),j.absUrl()!=d.url()&&(c.$apply(),g.angular["ff-684208-preventDefault"]=!0))}}),wc(j.absUrl())!=wc(n)&&d.url(j.absUrl(),!0);var p=!0;return d.onUrlChange(function(a,b){c.$evalAsync(function(){var d,e=j.absUrl(),f=j.$$state;j.$$parse(a),j.$$state=b,d=c.$broadcast("$locationChangeStart",a,e,b,f).defaultPrevented,j.absUrl()===a&&(d?(j.$$parse(e),j.$$state=f,h(e,!1,f)):(p=!1,i(e,f)))}),c.$$phase||c.$digest()}),c.$watch(function(){var a=wc(d.url()),b=wc(j.absUrl()),f=d.state(),g=j.$$replace,k=a!==b||j.$$html5&&e.history&&f!==j.$$state;(p||k)&&(p=!1,c.$evalAsync(function(){var b=j.absUrl(),d=c.$broadcast("$locationChangeStart",b,a,j.$$state,f).defaultPrevented;j.absUrl()===b&&(d?(j.$$parse(a),j.$$state=f):(k&&h(b,g,f===j.$$state?null:j.$$state),i(a,f)))})),j.$$replace=!1}),j}]}function Fc(){var a=!0,b=this;this.debugEnabled=function(b){return s(b)?(a=b,this):a},this.$get=["$window",function(c){function d(a){return a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function e(a){var b=c.console||{},e=b[a]||b.log||o,g=!1;try{g=!!e.apply}catch(h){}return g?function(){var a=[];return f(arguments,function(b){a.push(d(b))}),e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function Gc(a,b){if("__defineGetter__"===a||"__defineSetter__"===a||"__lookupGetter__"===a||"__lookupSetter__"===a||"__proto__"===a)throw jf("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",b);return a}function Hc(a,b){if(a){if(a.constructor===a)throw jf("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a.window===a)throw jf("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw jf("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",b);if(a===Object)throw jf("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",b)}return a}function Ic(a,b){if(a){if(a.constructor===a)throw jf("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a===kf||a===lf||a===mf)throw jf("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",b)}}function Jc(a){return a.constant}function Kc(a,b,c,d,e){Hc(a,e),Hc(b,e);for(var f,g=c.split("."),h=0;g.length>1;h++){f=Gc(g.shift(),e);var i=0===h&&b&&b[f]||a[f];i||(i={},a[f]=i),a=Hc(i,e)}return f=Gc(g.shift(),e),Hc(a[f],e),a[f]=d,d}function Lc(a){return"constructor"==a}function Mc(a,b,d,e,f,g,h){Gc(a,g),Gc(b,g),Gc(d,g),Gc(e,g),Gc(f,g);var i=function(a){return Hc(a,g)},j=h||Lc(a)?i:p,k=h||Lc(b)?i:p,l=h||Lc(d)?i:p,m=h||Lc(e)?i:p,n=h||Lc(f)?i:p;return function(g,h){var i=h&&h.hasOwnProperty(a)?h:g;return null==i?i:(i=j(i[a]),b?null==i?c:(i=k(i[b]),d?null==i?c:(i=l(i[d]),e?null==i?c:(i=m(i[e]),f?null==i?c:i=n(i[f]):i):i):i):i)}}function Nc(a,b){return function(c,d){return a(c,d,Hc,b)}}function Oc(a,b,d){var e=b.expensiveChecks,g=e?tf:sf,h=g[a];if(h)return h;var i=a.split("."),j=i.length;if(b.csp)h=6>j?Mc(i[0],i[1],i[2],i[3],i[4],d,e):function(a,b){var f,g=0;do f=Mc(i[g++],i[g++],i[g++],i[g++],i[g++],d,e)(a,b),b=c,a=f;while(j>g);return f};else{var k="";e&&(k+="s = eso(s, fe);\nl = eso(l, fe);\n");var l=e;f(i,function(a,b){Gc(a,d);var c=(b?"s":'((l&&l.hasOwnProperty("'+a+'"))?l:s)')+"."+a;(e||Lc(a))&&(c="eso("+c+", fe)",l=!0),k+="if(s == null) return undefined;\ns="+c+";\n"}),k+="return s;";var m=new Function("s","l","eso","fe",k);m.toString=q(k),l&&(m=Nc(m,d)),h=m}return h.sharedGetter=!0,h.assign=function(b,c,d){return Kc(b,d,a,c,a)},g[a]=h,h}function Pc(a){return x(a.valueOf)?a.valueOf():uf.call(a)}function Qc(){var a=jb(),b=jb();this.$get=["$filter","$sniffer",function(c,d){function e(a){var b=a;return a.sharedGetter&&(b=function(b,c){return a(b,c)},b.literal=a.literal,b.constant=a.constant,b.assign=a.assign),b}function g(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c];e.constant||(e.inputs?g(e.inputs,b):-1===b.indexOf(e)&&b.push(e))}return b}function h(a,b){return null==a||null==b?a===b:"object"==typeof a&&(a=Pc(a),"object"==typeof a)?!1:a===b||a!==a&&b!==b}function i(a,b,c,d){var e,f=d.$$inputs||(d.$$inputs=g(d.inputs,[]));if(1===f.length){var i=h;return f=f[0],a.$watch(function(a){var b=f(a);return h(b,i)||(e=d(a),i=b&&Pc(b)),e},b,c)}for(var j=[],k=0,l=f.length;l>k;k++)j[k]=h;return a.$watch(function(a){for(var b=!1,c=0,g=f.length;g>c;c++){var i=f[c](a);(b||(b=!h(i,j[c])))&&(j[c]=i&&Pc(i))}return b&&(e=d(a)),e},b,c)}function j(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a)},function(a,c,d){f=a,x(b)&&b.apply(this,arguments),s(a)&&d.$$postDigest(function(){s(f)&&e()})},c)}function k(a,b,c,d){function e(a){var b=!0;return f(a,function(a){s(a)||(b=!1)}),b}var g,h;return g=a.$watch(function(a){return d(a)},function(a,c,d){h=a,x(b)&&b.call(this,a,c,d),e(a)&&d.$$postDigest(function(){e(h)&&g()})},c)}function l(a,b,c,d){var e;return e=a.$watch(function(a){return d(a)},function(){x(b)&&b.apply(this,arguments),e()},c)}function m(a,b){if(!b)return a;var c=a.$$watchDelegate,d=c!==k&&c!==j,e=d?function(c,d){var e=a(c,d);return b(e,c,d)}:function(c,d){var e=a(c,d),f=b(e,c,d);return s(e)?f:e};return a.$$watchDelegate&&a.$$watchDelegate!==i?e.$$watchDelegate=a.$$watchDelegate:b.$stateful||(e.$$watchDelegate=i,e.inputs=[a]),e}var n={csp:d.csp,expensiveChecks:!1},p={csp:d.csp,expensiveChecks:!0};return function(d,f,g){var h,q,r;switch(typeof d){case"string":r=d=d.trim();var s=g?b:a;if(h=s[r],!h){":"===d.charAt(0)&&":"===d.charAt(1)&&(q=!0,d=d.substring(2));var t=g?p:n,u=new qf(t),v=new rf(u,c,t);h=v.parse(d),h.constant?h.$$watchDelegate=l:q?(h=e(h),h.$$watchDelegate=h.literal?k:j):h.inputs&&(h.$$watchDelegate=i),s[r]=h}return m(h,f);case"function":return m(d,f);default:return m(o,f)}}}]}function Rc(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return Tc(function(b){a.$evalAsync(b)},b)}]}function Sc(){this.$get=["$browser","$exceptionHandler",function(a,b){return Tc(function(b){a.defer(b)},b)}]}function Tc(a,b){function e(a,b,c){function d(b){return function(c){e||(e=!0,b.call(a,c))}}var e=!1;return[d(b),d(c)]}function g(){this.$$state={status:0}}function h(a,b){return function(c){b.call(a,c)}}function i(a){var d,e,f;f=a.pending,a.processScheduled=!1,a.pending=c;for(var g=0,h=f.length;h>g;++g){e=f[g][0],d=f[g][a.status];try{x(d)?e.resolve(d(a.value)):1===a.status?e.resolve(a.value):e.reject(a.value)}catch(i){e.reject(i),b(i)}}}function j(b){!b.processScheduled&&b.pending&&(b.processScheduled=!0,a(function(){i(b)}))}function k(){this.promise=new g,this.resolve=h(this,this.resolve),this.reject=h(this,this.reject),this.notify=h(this,this.notify)}function l(a){var b=new k,c=0,d=le(a)?[]:{};return f(a,function(a,e){c++,r(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})}),0===c&&b.resolve(d),b.promise}var m=d("$q",TypeError),n=function(){return new k};g.prototype={then:function(a,b,c){var d=new k;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([d,a,b,c]),this.$$state.status>0&&j(this.$$state),d.promise},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return q(b,!0,a)},function(b){return q(b,!1,a)},b)}},k.prototype={resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(m("qcycle","Expected promise to be resolved with value other than itself '{0}'",a)):this.$$resolve(a))},$$resolve:function(a){var c,d;d=e(this,this.$$resolve,this.$$reject);try{(t(a)||x(a))&&(c=a&&a.then),x(c)?(this.promise.$$state.status=-1,c.call(a,d[0],d[1],this.notify)):(this.promise.$$state.value=a,this.promise.$$state.status=1,j(this.promise.$$state))}catch(f){d[1](f),b(f)}},reject:function(a){this.promise.$$state.status||this.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a,this.promise.$$state.status=2,j(this.promise.$$state)},notify:function(c){var d=this.promise.$$state.pending;this.promise.$$state.status<=0&&d&&d.length&&a(function(){for(var a,e,f=0,g=d.length;g>f;f++){e=d[f][0],a=d[f][3];try{e.notify(x(a)?a(c):c)}catch(h){b(h)}}})}};var o=function(a){var b=new k;return b.reject(a),b.promise},p=function(a,b){var c=new k;return b?c.resolve(a):c.reject(a),c.promise},q=function(a,b,c){var d=null;try{x(c)&&(d=c())}catch(e){return p(e,!1)}return F(d)?d.then(function(){return p(a,b)},function(a){return p(a,!1)}):p(a,b)},r=function(a,b,c,d){var e=new k;return e.resolve(a),e.promise.then(b,c,d)},s=function u(a){function b(a){d.resolve(a)}function c(a){d.reject(a)}if(!x(a))throw m("norslvr","Expected resolverFn, got '{0}'",a);if(!(this instanceof u))return new u(a);var d=new k;return a(b,c),d.promise};return s.defer=n,s.reject=o,s.when=r,s.all=l,s}function Uc(){this.$get=["$window","$timeout",function(a,b){function c(){for(var a=0;a<k.length;a++){var b=k[a];b&&(k[a]=null,b())}j=k.length=0}function d(a){var b=k.length;return j++,k.push(a),0===b&&(i=h(c)),function(){b>=0&&(k[b]=null,b=null,0===--j&&i&&(i(),i=null,k.length=0))}}var e=a.requestAnimationFrame||a.webkitRequestAnimationFrame,f=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,g=!!e,h=g?function(a){var b=e(a);return function(){f(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};d.supported=g;var i,j=0,k=[];return d}]}function Vc(){function a(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=j(),this.$$ChildScope=null}return b.prototype=a,b}var b=10,c=d("$rootScope"),g=null,h=null;this.digestTtl=function(a){return arguments.length&&(b=a),b},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(d,i,k,l){function m(a){a.currentScope.$$destroyed=!0}function n(){this.$id=j(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings=null}function p(a){if(y.$$phase)throw c("inprog","{0} already in progress",y.$$phase);y.$$phase=a}function q(){y.$$phase=null}function s(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function u(){}function v(){for(;B.length;)try{B.shift()()}catch(a){i(a)}h=null}function w(){null===h&&(h=l.defer(function(){y.$apply(v)}))}n.prototype={constructor:n,$new:function(b,c){var d;return c=c||this,b?(d=new n,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope),d.$parent=c,d.$$prevSibling=c.$$childTail,c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d,(b||c!=this)&&d.$on("$destroy",m),d},$watch:function(a,b,c){var d=k(a);if(d.$$watchDelegate)return d.$$watchDelegate(this,b,c,d);var e=this,f=e.$$watchers,h={fn:b,last:u,get:d,exp:a,eq:!!c};return g=null,x(b)||(h.fn=o),f||(f=e.$$watchers=[]),f.unshift(h),function(){J(f,h),g=null}},$watchGroup:function(a,b){function c(){i=!1,j?(j=!1,b(e,e,h)):b(e,d,h)}var d=new Array(a.length),e=new Array(a.length),g=[],h=this,i=!1,j=!0;if(!a.length){var k=!0;return h.$evalAsync(function(){k&&b(e,e,h)}),function(){k=!1}}return 1===a.length?this.$watch(a[0],function(a,c,f){e[0]=a,d[0]=c,b(e,a===c?e:d,f)}):(f(a,function(a,b){var f=h.$watch(a,function(a,f){e[b]=a,d[b]=f,i||(i=!0,h.$evalAsync(c))});g.push(f)}),function(){for(;g.length;)g.shift()()})},$watchCollection:function(a,b){function c(a){f=a;var b,c,d,h,i;if(!r(f)){if(t(f))if(e(f)){g!==n&&(g=n,q=g.length=0,l++),b=f.length,q!==b&&(l++,g.length=q=b);for(var j=0;b>j;j++)i=g[j],h=f[j],d=i!==i&&h!==h,d||i===h||(l++,g[j]=h)}else{g!==o&&(g=o={},q=0,l++),b=0;for(c in f)f.hasOwnProperty(c)&&(b++,h=f[c],i=g[c],c in g?(d=i!==i&&h!==h,d||i===h||(l++,g[c]=h)):(q++,g[c]=h,l++));if(q>b){l++;for(c in g)f.hasOwnProperty(c)||(q--,delete g[c])}}else g!==f&&(g=f,l++);return l}}function d(){if(p?(p=!1,b(f,f,i)):b(f,h,i),j)if(t(f))if(e(f)){h=new Array(f.length);for(var a=0;a<f.length;a++)h[a]=f[a]}else{h={};for(var c in f)Xd.call(f,c)&&(h[c]=f[c])}else h=f}c.$stateful=!0;var f,g,h,i=this,j=b.length>1,l=0,m=k(a,c),n=[],o={},p=!0,q=0;return this.$watch(m,d)},$digest:function(){var a,d,e,f,j,k,m,n,o,r,s=b,t=this,w=[];p("$digest"),l.$$checkUrlChange(),this===y&&null!==h&&(l.defer.cancel(h),v()),g=null;do{for(k=!1,n=t;z.length;){try{r=z.shift(),r.scope.$eval(r.expression,r.locals)}catch(B){i(B)
}g=null}a:do{if(f=n.$$watchers)for(j=f.length;j--;)try{if(a=f[j])if((d=a.get(n))===(e=a.last)||(a.eq?M(d,e):"number"==typeof d&&"number"==typeof e&&isNaN(d)&&isNaN(e))){if(a===g){k=!1;break a}}else k=!0,g=a,a.last=a.eq?K(d,null):d,a.fn(d,e===u?d:e,n),5>s&&(o=4-s,w[o]||(w[o]=[]),w[o].push({msg:x(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:d,oldVal:e}))}catch(B){i(B)}if(!(m=n.$$childHead||n!==t&&n.$$nextSibling))for(;n!==t&&!(m=n.$$nextSibling);)n=n.$parent}while(n=m);if((k||z.length)&&!s--)throw q(),c("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",b,w)}while(k||z.length);for(q();A.length;)try{A.shift()()}catch(B){i(B)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;if(this.$broadcast("$destroy"),this.$$destroyed=!0,this!==y){for(var b in this.$$listenerCount)s(this,this.$$listenerCount[b],b);a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=o,this.$on=this.$watch=this.$watchGroup=function(){return o},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}}},$eval:function(a,b){return k(a)(this,b)},$evalAsync:function(a,b){y.$$phase||z.length||l.defer(function(){z.length&&y.$digest()}),z.push({scope:this,expression:a,locals:b})},$$postDigest:function(a){A.push(a)},$apply:function(a){try{return p("$apply"),this.$eval(a)}catch(b){i(b)}finally{q();try{y.$digest()}catch(b){throw i(b),b}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&B.push(b),w()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]),c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,s(e,1,a))}},$emit:function(a){var b,c,d,e=[],f=this,g=!1,h={name:a,targetScope:f,stopPropagation:function(){g=!0},preventDefault:function(){h.defaultPrevented=!0},defaultPrevented:!1},j=N([h],arguments,1);do{for(b=f.$$listeners[a]||e,h.currentScope=f,c=0,d=b.length;d>c;c++)if(b[c])try{b[c].apply(null,j)}catch(k){i(k)}else b.splice(c,1),c--,d--;if(g)return h.currentScope=null,h;f=f.$parent}while(f);return h.currentScope=null,h},$broadcast:function(a){var b=this,c=b,d=b,e={name:a,targetScope:b,preventDefault:function(){e.defaultPrevented=!0},defaultPrevented:!1};if(!b.$$listenerCount[a])return e;for(var f,g,h,j=N([e],arguments,1);c=d;){for(e.currentScope=c,f=c.$$listeners[a]||[],g=0,h=f.length;h>g;g++)if(f[g])try{f[g].apply(null,j)}catch(k){i(k)}else f.splice(g,1),g--,h--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==b&&c.$$nextSibling))for(;c!==b&&!(d=c.$$nextSibling);)c=c.$parent}return e.currentScope=null,e}};var y=new n,z=y.$$asyncQueue=[],A=y.$$postDigestQueue=[],B=y.$$applyAsyncQueue=[];return y}]}function Wc(){var a=/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return s(b)?(a=b,this):a},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(b=a,this):b},this.$get=function(){return function(c,d){var e,f=d?b:a;return e=dd(c).href,""===e||e.match(f)?c:"unsafe:"+e}}}function Xc(a){if("self"===a)return a;if(u(a)){if(a.indexOf("***")>-1)throw vf("iwcard","Illegal sequence *** in string matcher.  String: {0}",a);return a=ne(a).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+a+"$")}if(y(a))return new RegExp("^"+a.source+"$");throw vf("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Yc(a){var b=[];return s(a)&&f(a,function(a){b.push(Xc(a))}),b}function Zc(){this.SCE_CONTEXTS=wf;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){return arguments.length&&(a=Yc(b)),a},this.resourceUrlBlacklist=function(a){return arguments.length&&(b=Yc(a)),b},this.$get=["$injector",function(d){function e(a,b){return"self"===a?ed(b):!!a.exec(b.href)}function f(c){var d,f,g=dd(c.toString()),h=!1;for(d=0,f=a.length;f>d;d++)if(e(a[d],g)){h=!0;break}if(h)for(d=0,f=b.length;f>d;d++)if(e(b[d],g)){h=!1;break}return h}function g(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};return a&&(b.prototype=new a),b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},b}function h(a,b){var d=m.hasOwnProperty(a)?m[a]:null;if(!d)throw vf("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",a,b);if(null===b||b===c||""===b)return b;if("string"!=typeof b)throw vf("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",a);return new d(b)}function i(a){return a instanceof l?a.$$unwrapTrustedValue():a}function j(a,b){if(null===b||b===c||""===b)return b;var d=m.hasOwnProperty(a)?m[a]:null;if(d&&b instanceof d)return b.$$unwrapTrustedValue();if(a===wf.RESOURCE_URL){if(f(b))return b;throw vf("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",b.toString())}if(a===wf.HTML)return k(b);throw vf("unsafe","Attempting to use an unsafe value in a safe context.")}var k=function(){throw vf("unsafe","Attempting to use an unsafe value in a safe context.")};d.has("$sanitize")&&(k=d.get("$sanitize"));var l=g(),m={};return m[wf.HTML]=g(l),m[wf.CSS]=g(l),m[wf.URL]=g(l),m[wf.JS]=g(l),m[wf.RESOURCE_URL]=g(m[wf.URL]),{trustAs:h,getTrusted:j,valueOf:i}}]}function $c(){var a=!0;this.enabled=function(b){return arguments.length&&(a=!!b),a},this.$get=["$parse","$sceDelegate",function(b,c){if(a&&8>_d)throw vf("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var d=L(wf);d.isEnabled=function(){return a},d.trustAs=c.trustAs,d.getTrusted=c.getTrusted,d.valueOf=c.valueOf,a||(d.trustAs=d.getTrusted=function(a,b){return b},d.valueOf=p),d.parseAs=function(a,c){var e=b(c);return e.literal&&e.constant?e:b(c,function(b){return d.getTrusted(a,b)})};var e=d.parseAs,g=d.getTrusted,h=d.trustAs;return f(wf,function(a,b){var c=Wd(b);d[pb("parse_as_"+c)]=function(b){return e(a,b)},d[pb("get_trusted_"+c)]=function(b){return g(a,b)},d[pb("trust_as_"+c)]=function(b){return h(a,b)}}),d}]}function _c(){this.$get=["$window","$document",function(a,b){var c,d,e={},f=m((/android (\d+)/.exec(Wd((a.navigator||{}).userAgent))||[])[1]),g=/Boxee/i.test((a.navigator||{}).userAgent),h=b[0]||{},i=/^(Moz|webkit|ms)(?=[A-Z])/,j=h.body&&h.body.style,k=!1,l=!1;if(j){for(var n in j)if(d=i.exec(n)){c=d[0],c=c.substr(0,1).toUpperCase()+c.substr(1);break}c||(c="WebkitOpacity"in j&&"webkit"),k=!!("transition"in j||c+"Transition"in j),l=!!("animation"in j||c+"Animation"in j),!f||k&&l||(k=u(h.body.style.webkitTransition),l=u(h.body.style.webkitAnimation))}return{history:!(!a.history||!a.history.pushState||4>f||g),hasEvent:function(a){if("input"===a&&11>=_d)return!1;if(r(e[a])){var b=h.createElement("div");e[a]="on"+a in b}return e[a]},csp:oe(),vendorPrefix:c,transitions:k,animations:l,android:f}}]}function ad(){this.$get=["$templateCache","$http","$q","$sce",function(a,b,c,d){function e(f,g){function h(a){if(!g)throw Xe("tpload","Failed to load template: {0}",f);return c.reject(a)}e.totalPendingRequests++,u(f)&&a.get(f)||(f=d.getTrustedResourceUrl(f));var i=b.defaults&&b.defaults.transformResponse;le(i)?i=i.filter(function(a){return a!==ec}):i===ec&&(i=null);var j={cache:a,transformResponse:i};return b.get(f,j)["finally"](function(){e.totalPendingRequests--}).then(function(a){return a.data},h)}return e.totalPendingRequests=0,e}]}function bd(){this.$get=["$rootScope","$browser","$location",function(a,b,c){var d={};return d.findBindings=function(a,b,c){var d=a.getElementsByClassName("ng-binding"),e=[];return f(d,function(a){var d=ie.element(a).data("$binding");d&&f(d,function(d){if(c){var f=new RegExp("(^|\\s)"+ne(b)+"(\\s|\\||$)");f.test(d)&&e.push(a)}else-1!=d.indexOf(b)&&e.push(a)})}),e},d.findModels=function(a,b,c){for(var d=["ng-","data-ng-","ng\\:"],e=0;e<d.length;++e){var f=c?"=":"*=",g="["+d[e]+"model"+f+'"'+b+'"]',h=a.querySelectorAll(g);if(h.length)return h}},d.getLocation=function(){return c.url()},d.setLocation=function(b){b!==c.url()&&(c.url(b),a.$digest())},d.whenStable=function(a){b.notifyWhenNoOutstandingRequests(a)},d}]}function cd(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,c,d,e){function f(f,h,i){var j,k=s(i)&&!i,l=(k?d:c).defer(),m=l.promise;return j=b.defer(function(){try{l.resolve(f())}catch(b){l.reject(b),e(b)}finally{delete g[m.$$timeoutId]}k||a.$apply()},h),m.$$timeoutId=j,g[j]=l,m}var g={};return f.cancel=function(a){return a&&a.$$timeoutId in g?(g[a.$$timeoutId].reject("canceled"),delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1},f}]}function dd(a){var b=a;return _d&&(xf.setAttribute("href",b),b=xf.href),xf.setAttribute("href",b),{href:xf.href,protocol:xf.protocol?xf.protocol.replace(/:$/,""):"",host:xf.host,search:xf.search?xf.search.replace(/^\?/,""):"",hash:xf.hash?xf.hash.replace(/^#/,""):"",hostname:xf.hostname,port:xf.port,pathname:"/"===xf.pathname.charAt(0)?xf.pathname:"/"+xf.pathname}}function ed(a){var b=u(a)?dd(a):a;return b.protocol===yf.protocol&&b.host===yf.host}function fd(){this.$get=q(a)}function gd(a){function b(d,e){if(t(d)){var g={};return f(d,function(a,c){g[c]=b(c,a)}),g}return a.factory(d+c,e)}var c="Filter";this.register=b,this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}],b("currency",kd),b("date",xd),b("filter",hd),b("json",yd),b("limitTo",zd),b("lowercase",Df),b("number",ld),b("orderBy",Ad),b("uppercase",Ef)}function hd(){return function(a,b,c){if(!le(a))return a;var d,e,f=null!==b?typeof b:"null";switch(f){case"function":d=b;break;case"boolean":case"null":case"number":case"string":e=!0;case"object":d=id(b,c,e);break;default:return a}return a.filter(d)}}function id(a,b,c){var d,e=t(a)&&"$"in a;return b===!0?b=M:x(b)||(b=function(a,b){return r(a)?!1:null===a||null===b?a===b:t(a)||t(b)?!1:(a=Wd(""+a),b=Wd(""+b),-1!==a.indexOf(b))}),d=function(d){return e&&!t(d)?jd(d,a.$,b,!1):jd(d,a,b,c)}}function jd(a,b,c,d,e){var f=null!==a?typeof a:"null",g=null!==b?typeof b:"null";if("string"===g&&"!"===b.charAt(0))return!jd(a,b.substring(1),c,d);if(le(a))return a.some(function(a){return jd(a,b,c,d)});switch(f){case"object":var h;if(d){for(h in a)if("$"!==h.charAt(0)&&jd(a[h],b,c,!0))return!0;return e?!1:jd(a,b,c,!1)}if("object"===g){for(h in b){var i=b[h];if(!x(i)&&!r(i)){var j="$"===h,k=j?a:a[h];if(!jd(k,i,c,j,j))return!1}}return!0}return c(a,b);case"function":return!1;default:return c(a,b)}}function kd(a){var b=a.NUMBER_FORMATS;return function(a,c,d){return r(c)&&(c=b.CURRENCY_SYM),r(d)&&(d=b.PATTERNS[1].maxFrac),null==a?a:md(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,d).replace(/\u00A4/g,c)}}function ld(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:md(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function md(a,b,c,d,e){if(!isFinite(a)||t(a))return"";var f=0>a;a=Math.abs(a);var g=a+"",h="",i=[],j=!1;if(-1!==g.indexOf("e")){var k=g.match(/([\d\.]+)e(-?)(\d+)/);k&&"-"==k[2]&&k[3]>e+1?a=0:(h=g,j=!0)}if(j)e>0&&1>a&&(h=a.toFixed(e),a=parseFloat(h));else{var l=(g.split(zf)[1]||"").length;r(e)&&(e=Math.min(Math.max(b.minFrac,l),b.maxFrac)),a=+(Math.round(+(a.toString()+"e"+e)).toString()+"e"+-e);var m=(""+a).split(zf),n=m[0];m=m[1]||"";var o,p=0,q=b.lgSize,s=b.gSize;if(n.length>=q+s)for(p=n.length-q,o=0;p>o;o++)(p-o)%s===0&&0!==o&&(h+=c),h+=n.charAt(o);for(o=p;o<n.length;o++)(n.length-o)%q===0&&0!==o&&(h+=c),h+=n.charAt(o);for(;m.length<e;)m+="0";e&&"0"!==e&&(h+=d+m.substr(0,e))}return 0===a&&(f=!1),i.push(f?b.negPre:b.posPre,h,f?b.negSuf:b.posSuf),i.join("")}function nd(a,b,c){var d="";for(0>a&&(d="-",a=-a),a=""+a;a.length<b;)a="0"+a;return c&&(a=a.substr(a.length-b)),d+a}function od(a,b,c,d){return c=c||0,function(e){var f=e["get"+a]();return(c>0||f>-c)&&(f+=c),0===f&&-12==c&&(f=12),nd(f,b,d)}}function pd(a,b){return function(c,d){var e=c["get"+a](),f=Yd(b?"SHORT"+a:a);return d[f][e]}}function qd(a){var b=-1*a.getTimezoneOffset(),c=b>=0?"+":"";return c+=nd(Math[b>0?"floor":"ceil"](b/60),2)+nd(Math.abs(b%60),2)}function rd(a){var b=new Date(a,0,1).getDay();return new Date(a,0,(4>=b?5:12)-b)}function sd(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate()+(4-a.getDay()))}function td(a){return function(b){var c=rd(b.getFullYear()),d=sd(b),e=+d-+c,f=1+Math.round(e/6048e5);return nd(f,a)}}function ud(a,b){return a.getHours()<12?b.AMPMS[0]:b.AMPMS[1]}function vd(a,b){return a.getFullYear()<=0?b.ERAS[0]:b.ERAS[1]}function wd(a,b){return a.getFullYear()<=0?b.ERANAMES[0]:b.ERANAMES[1]}function xd(a){function b(a){var b;if(b=a.match(c)){var d=new Date(0),e=0,f=0,g=b[8]?d.setUTCFullYear:d.setFullYear,h=b[8]?d.setUTCHours:d.setHours;b[9]&&(e=m(b[9]+b[10]),f=m(b[9]+b[11])),g.call(d,m(b[1]),m(b[2])-1,m(b[3]));var i=m(b[4]||0)-e,j=m(b[5]||0)-f,k=m(b[6]||0),l=Math.round(1e3*parseFloat("0."+(b[7]||0)));return h.call(d,i,j,k,l),d}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,d,e){var g,h,i="",j=[];if(d=d||"mediumDate",d=a.DATETIME_FORMATS[d]||d,u(c)&&(c=Cf.test(c)?m(c):b(c)),v(c)&&(c=new Date(c)),!w(c))return c;for(;d;)h=Bf.exec(d),h?(j=N(j,h,1),d=j.pop()):(j.push(d),d=null);return e&&"UTC"===e&&(c=new Date(c.getTime()),c.setMinutes(c.getMinutes()+c.getTimezoneOffset())),f(j,function(b){g=Af[b],i+=g?g(c,a.DATETIME_FORMATS):b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),i}}function yd(){return function(a,b){return r(b)&&(b=2),R(a,b)}}function zd(){return function(a,b){return v(a)&&(a=a.toString()),le(a)||u(a)?(b=1/0===Math.abs(Number(b))?Number(b):m(b),b?b>0?a.slice(0,b):a.slice(b):u(a)?"":[]):a}}function Ad(a){return function(b,c,d){function f(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0}function g(a,b){return b?function(b,c){return a(c,b)}:a}function h(a){switch(typeof a){case"number":case"boolean":case"string":return!0;default:return!1}}function i(a){return null===a?"null":"function"==typeof a.valueOf&&(a=a.valueOf(),h(a))?a:"function"==typeof a.toString&&(a=a.toString(),h(a))?a:""}function j(a,b){var c=typeof a,d=typeof b;return c===d&&"object"===c&&(a=i(a),b=i(b)),c===d?("string"===c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:b>a?-1:1):d>c?-1:1}return e(b)?(c=le(c)?c:[c],0===c.length&&(c=["+"]),c=c.map(function(b){var c=!1,d=b||p;if(u(b)){if(("+"==b.charAt(0)||"-"==b.charAt(0))&&(c="-"==b.charAt(0),b=b.substring(1)),""===b)return g(j,c);if(d=a(b),d.constant){var e=d();return g(function(a,b){return j(a[e],b[e])},c)}}return g(function(a,b){return j(d(a),d(b))},c)}),de.call(b).sort(g(f,d))):b}}function Bd(a){return x(a)&&(a={link:a}),a.restrict=a.restrict||"AC",q(a)}function Cd(a,b){a.$name=b}function Dd(a,b,d,e,g){var h=this,i=[],j=h.$$parentForm=a.parent().controller("form")||Hf;h.$error={},h.$$success={},h.$pending=c,h.$name=g(b.name||b.ngForm||"")(d),h.$dirty=!1,h.$pristine=!0,h.$valid=!0,h.$invalid=!1,h.$submitted=!1,j.$addControl(h),h.$rollbackViewValue=function(){f(i,function(a){a.$rollbackViewValue()})},h.$commitViewValue=function(){f(i,function(a){a.$commitViewValue()})},h.$addControl=function(a){gb(a.$name,"input"),i.push(a),a.$name&&(h[a.$name]=a)},h.$$renameControl=function(a,b){var c=a.$name;h[c]===a&&delete h[c],h[b]=a,a.$name=b},h.$removeControl=function(a){a.$name&&h[a.$name]===a&&delete h[a.$name],f(h.$pending,function(b,c){h.$setValidity(c,null,a)}),f(h.$error,function(b,c){h.$setValidity(c,null,a)}),f(h.$$success,function(b,c){h.$setValidity(c,null,a)}),J(i,a)},Sd({ctrl:this,$element:a,set:function(a,b,c){var d=a[b];if(d){var e=d.indexOf(c);-1===e&&d.push(c)}else a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(J(d,c),0===d.length&&delete a[b])},parentForm:j,$animate:e}),h.$setDirty=function(){e.removeClass(a,pg),e.addClass(a,qg),h.$dirty=!0,h.$pristine=!1,j.$setDirty()},h.$setPristine=function(){e.setClass(a,pg,qg+" "+If),h.$dirty=!1,h.$pristine=!0,h.$submitted=!1,f(i,function(a){a.$setPristine()})},h.$setUntouched=function(){f(i,function(a){a.$setUntouched()})},h.$setSubmitted=function(){e.addClass(a,If),h.$submitted=!0,j.$setSubmitted()}}function Ed(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function Fd(a,b,c,d,e,f){Gd(a,b,c,d,e,f),Ed(d)}function Gd(a,b,c,d,e,f){var g=Wd(b[0].type);if(!e.android){var h=!1;b.on("compositionstart",function(){h=!0}),b.on("compositionend",function(){h=!1,i()})}var i=function(a){if(j&&(f.defer.cancel(j),j=null),!h){var e=b.val(),i=a&&a.type;"password"===g||c.ngTrim&&"false"===c.ngTrim||(e=me(e)),(d.$viewValue!==e||""===e&&d.$$hasNativeValidators)&&d.$setViewValue(e,i)}};if(e.hasEvent("input"))b.on("input",i);else{var j,k=function(a,b,c){j||(j=f.defer(function(){j=null,b&&b.value===c||i(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||b>15&&19>b||b>=37&&40>=b||k(a,this,this.value)}),e.hasEvent("paste")&&b.on("paste cut",k)}b.on("change",i),d.$render=function(){b.val(d.$isEmpty(d.$viewValue)?"":d.$viewValue)}}function Hd(a,b){if(w(a))return a;if(u(a)){Sf.lastIndex=0;var c=Sf.exec(a);if(c){var d=+c[1],e=+c[2],f=0,g=0,h=0,i=0,j=rd(d),k=7*(e-1);return b&&(f=b.getHours(),g=b.getMinutes(),h=b.getSeconds(),i=b.getMilliseconds()),new Date(d,0,j.getDate()+k,f,g,h,i)}}return 0/0}function Id(a,b){return function(c,d){var e,g;if(w(c))return c;if(u(c)){if('"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substring(1,c.length-1)),Mf.test(c))return new Date(c);if(a.lastIndex=0,e=a.exec(c))return e.shift(),g=d?{yyyy:d.getFullYear(),MM:d.getMonth()+1,dd:d.getDate(),HH:d.getHours(),mm:d.getMinutes(),ss:d.getSeconds(),sss:d.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},f(e,function(a,c){c<b.length&&(g[b[c]]=+a)}),new Date(g.yyyy,g.MM-1,g.dd,g.HH,g.mm,g.ss||0,1e3*g.sss||0)}return 0/0}}function Jd(a,b,d,e){return function(f,g,h,i,j,k,l){function m(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function n(a){return s(a)?w(a)?a:d(a):c}Kd(f,g,h,i),Gd(f,g,h,i,j,k);var o,p=i&&i.$options&&i.$options.timezone;if(i.$$parserName=a,i.$parsers.push(function(a){if(i.$isEmpty(a))return null;if(b.test(a)){var e=d(a,o);return"UTC"===p&&e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e}return c}),i.$formatters.push(function(a){if(a&&!w(a))throw ug("datefmt","Expected `{0}` to be a date",a);if(m(a)){if(o=a,o&&"UTC"===p){var b=6e4*o.getTimezoneOffset();o=new Date(o.getTime()+b)}return l("date")(a,e,p)}return o=null,""}),s(h.min)||h.ngMin){var q;i.$validators.min=function(a){return!m(a)||r(q)||d(a)>=q},h.$observe("min",function(a){q=n(a),i.$validate()})}if(s(h.max)||h.ngMax){var t;i.$validators.max=function(a){return!m(a)||r(t)||d(a)<=t},h.$observe("max",function(a){t=n(a),i.$validate()})}}}function Kd(a,b,d,e){var f=b[0],g=e.$$hasNativeValidators=t(f.validity);g&&e.$parsers.push(function(a){var d=b.prop(Vd)||{};return d.badInput&&!d.typeMismatch?c:a})}function Ld(a,b,d,e,f,g){if(Kd(a,b,d,e),Gd(a,b,d,e,f,g),e.$$parserName="number",e.$parsers.push(function(a){return e.$isEmpty(a)?null:Pf.test(a)?parseFloat(a):c}),e.$formatters.push(function(a){if(!e.$isEmpty(a)){if(!v(a))throw ug("numfmt","Expected `{0}` to be a number",a);a=a.toString()}return a}),s(d.min)||d.ngMin){var h;e.$validators.min=function(a){return e.$isEmpty(a)||r(h)||a>=h},d.$observe("min",function(a){s(a)&&!v(a)&&(a=parseFloat(a,10)),h=v(a)&&!isNaN(a)?a:c,e.$validate()})}if(s(d.max)||d.ngMax){var i;e.$validators.max=function(a){return e.$isEmpty(a)||r(i)||i>=a},d.$observe("max",function(a){s(a)&&!v(a)&&(a=parseFloat(a,10)),i=v(a)&&!isNaN(a)?a:c,e.$validate()})}}function Md(a,b,c,d,e,f){Gd(a,b,c,d,e,f),Ed(d),d.$$parserName="url",d.$validators.url=function(a,b){var c=a||b;return d.$isEmpty(c)||Nf.test(c)}}function Nd(a,b,c,d,e,f){Gd(a,b,c,d,e,f),Ed(d),d.$$parserName="email",d.$validators.email=function(a,b){var c=a||b;return d.$isEmpty(c)||Of.test(c)}}function Od(a,b,c,d){r(c.name)&&b.attr("name",j());var e=function(a){b[0].checked&&d.$setViewValue(c.value,a&&a.type)};b.on("click",e),d.$render=function(){var a=c.value;b[0].checked=a==d.$viewValue},c.$observe("value",d.$render)}function Pd(a,b,c,d,e){var f;if(s(d)){if(f=a(d),!f.constant)throw ug("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",c,d);return f(b)}return e}function Qd(a,b,c,d,e,f,g,h){var i=Pd(h,a,"ngTrueValue",c.ngTrueValue,!0),j=Pd(h,a,"ngFalseValue",c.ngFalseValue,!1),k=function(a){d.$setViewValue(b[0].checked,a&&a.type)};b.on("click",k),d.$render=function(){b[0].checked=d.$viewValue},d.$isEmpty=function(a){return a===!1},d.$formatters.push(function(a){return M(a,i)}),d.$parsers.push(function(a){return a?i:j})}function Rd(a,b){return a="ngClass"+a,["$animate",function(c){function d(a,b){var c=[];a:for(var d=0;d<a.length;d++){for(var e=a[d],f=0;f<b.length;f++)if(e==b[f])continue a;c.push(e)}return c}function e(a){if(le(a))return a;if(u(a))return a.split(" ");if(t(a)){var b=[];return f(a,function(a,c){a&&(b=b.concat(c.split(" ")))}),b}return a}return{restrict:"AC",link:function(g,h,i){function j(a){var b=l(a,1);i.$addClass(b)}function k(a){var b=l(a,-1);i.$removeClass(b)}function l(a,b){var c=h.data("$classCounts")||{},d=[];return f(a,function(a){(b>0||c[a])&&(c[a]=(c[a]||0)+b,c[a]===+(b>0)&&d.push(a))}),h.data("$classCounts",c),d.join(" ")}function m(a,b){var e=d(b,a),f=d(a,b);e=l(e,1),f=l(f,-1),e&&e.length&&c.addClass(h,e),f&&f.length&&c.removeClass(h,f)}function n(a){if(b===!0||g.$index%2===b){var c=e(a||[]);if(o){if(!M(a,o)){var d=e(o);m(d,c)}}else j(c)}o=L(a)}var o;g.$watch(i[a],n,!0),i.$observe("class",function(){n(g.$eval(i[a]))}),"ngClass"!==a&&g.$watch("$index",function(c,d){var f=1&c;if(f!==(1&d)){var h=e(g.$eval(i[a]));f===b?j(h):k(h)}})}}}]}function Sd(a){function b(a,b,i){b===c?d("$pending",a,i):e("$pending",a,i),E(b)?b?(l(h.$error,a,i),k(h.$$success,a,i)):(k(h.$error,a,i),l(h.$$success,a,i)):(l(h.$error,a,i),l(h.$$success,a,i)),h.$pending?(f(tg,!0),h.$valid=h.$invalid=c,g("",null)):(f(tg,!1),h.$valid=Td(h.$error),h.$invalid=!h.$valid,g("",h.$valid));var j;j=h.$pending&&h.$pending[a]?c:h.$error[a]?!1:h.$$success[a]?!0:null,g(a,j),m.$setValidity(a,j,h)}function d(a,b,c){h[a]||(h[a]={}),k(h[a],b,c)}function e(a,b,d){h[a]&&l(h[a],b,d),Td(h[a])&&(h[a]=c)}function f(a,b){b&&!j[a]?(n.addClass(i,a),j[a]=!0):!b&&j[a]&&(n.removeClass(i,a),j[a]=!1)}function g(a,b){a=a?"-"+cb(a,"-"):"",f(ng+a,b===!0),f(og+a,b===!1)}var h=a.ctrl,i=a.$element,j={},k=a.set,l=a.unset,m=a.parentForm,n=a.$animate;j[og]=!(j[ng]=i.hasClass(ng)),h.$setValidity=b}function Td(a){if(a)for(var b in a)return!1;return!0}var Ud=/^\/(.+)\/([a-z]*)$/,Vd="validity",Wd=function(a){return u(a)?a.toLowerCase():a},Xd=Object.prototype.hasOwnProperty,Yd=function(a){return u(a)?a.toUpperCase():a},Zd=function(a){return u(a)?a.replace(/[A-Z]/g,function(a){return String.fromCharCode(32|a.charCodeAt(0))}):a},$d=function(a){return u(a)?a.replace(/[a-z]/g,function(a){return String.fromCharCode(-33&a.charCodeAt(0))}):a};"i"!=="I".toLowerCase()&&(Wd=Zd,Yd=$d);var _d,ae,be,ce,de=[].slice,ee=[].splice,fe=[].push,ge=Object.prototype.toString,he=d("ng"),ie=a.angular||(a.angular={}),je=0;_d=b.documentMode,o.$inject=[],p.$inject=[];var ke,le=Array.isArray,me=function(a){return u(a)?a.trim():a},ne=function(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},oe=function(){if(s(oe.isActive_))return oe.isActive_;var a=!(!b.querySelector("[ng-csp]")&&!b.querySelector("[data-ng-csp]"));if(!a)try{new Function("")}catch(c){a=!0}return oe.isActive_=a},pe=["ng-","data-ng-","ng:","x-ng-"],qe=/[A-Z]/g,re=!1,se=1,te=2,ue=3,ve=8,we=9,xe=11,ye={full:"1.3.18",major:1,minor:3,dot:18,codeName:"collective-penmanship"};ub.expando="ng339";var ze=ub.cache={},Ae=1,Be=function(a,b,c){a.addEventListener(b,c,!1)},Ce=function(a,b,c){a.removeEventListener(b,c,!1)};ub._data=function(a){return this.cache[a[this.expando]]||{}};var De=/([\:\-\_]+(.))/g,Ee=/^moz([A-Z])/,Fe={mouseleave:"mouseout",mouseenter:"mouseover"},Ge=d("jqLite"),He=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Ie=/<|&#?\w+;/,Je=/<([\w:]+)/,Ke=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Le={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Le.optgroup=Le.option,Le.tbody=Le.tfoot=Le.colgroup=Le.caption=Le.thead,Le.th=Le.td;var Me=ub.prototype={ready:function(c){function d(){e||(e=!0,c())}var e=!1;"complete"===b.readyState?setTimeout(d):(this.on("DOMContentLoaded",d),ub(a).on("load",d))},toString:function(){var a=[];return f(this,function(b){a.push(""+b)}),"["+a.join(", ")+"]"},eq:function(a){return ae(a>=0?this[a]:this[this.length+a])},length:0,push:fe,sort:[].sort,splice:[].splice},Ne={};f("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(a){Ne[Wd(a)]=a});var Oe={};f("input,select,option,textarea,button,form,details".split(","),function(a){Oe[a]=!0});var Pe={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};f({data:Ab,removeData:yb},function(a,b){ub[b]=a}),f({data:Ab,inheritedData:Gb,scope:function(a){return ae.data(a,"$scope")||Gb(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return ae.data(a,"$isolateScope")||ae.data(a,"$isolateScopeNoTemplate")},controller:Fb,injector:function(a){return Gb(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:Bb,css:function(a,b,c){return b=pb(b),s(c)?void(a.style[b]=c):a.style[b]},attr:function(a,b,d){var e=a.nodeType;if(e!==ue&&e!==te&&e!==ve){var f=Wd(b);if(Ne[f]){if(!s(d))return a[b]||(a.attributes.getNamedItem(b)||o).specified?f:c;d?(a[b]=!0,a.setAttribute(b,f)):(a[b]=!1,a.removeAttribute(f))}else if(s(d))a.setAttribute(b,d);else if(a.getAttribute){var g=a.getAttribute(b,2);return null===g?c:g}}},prop:function(a,b,c){return s(c)?void(a[b]=c):a[b]},text:function(){function a(a,b){if(r(b)){var c=a.nodeType;return c===se||c===ue?a.textContent:""}a.textContent=b}return a.$dv="",a}(),val:function(a,b){if(r(b)){if(a.multiple&&"select"===I(a)){var c=[];return f(a.options,function(a){a.selected&&c.push(a.value||a.text)}),0===c.length?null:c}return a.value}a.value=b},html:function(a,b){return r(b)?a.innerHTML:(wb(a,!0),void(a.innerHTML=b))},empty:Hb},function(a,b){ub.prototype[b]=function(b,d){var e,f,g=this.length;if(a!==Hb&&(2==a.length&&a!==Bb&&a!==Fb?b:d)===c){if(t(b)){for(e=0;g>e;e++)if(a===Ab)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this}for(var h=a.$dv,i=h===c?Math.min(g,1):g,j=0;i>j;j++){var k=a(this[j],b,d);h=h?h+k:k}return h}for(e=0;g>e;e++)a(this[e],b,d);return this}}),f({removeData:yb,on:function Vg(a,b,c,d){if(s(d))throw Ge("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(rb(a)){var e=zb(a,!0),f=e.events,g=e.handle;g||(g=e.handle=Mb(a,f));for(var h=b.indexOf(" ")>=0?b.split(" "):[b],i=h.length;i--;){b=h[i];var j=f[b];j||(f[b]=[],"mouseenter"===b||"mouseleave"===b?Vg(a,Fe[b],function(a){var c=this,d=a.relatedTarget;(!d||d!==c&&!c.contains(d))&&g(a,b)}):"$destroy"!==b&&Be(a,b,g),j=f[b]),j.push(c)}}},off:xb,one:function(a,b,c){a=ae(a),a.on(b,function d(){a.off(b,c),a.off(b,d)}),a.on(b,c)},replaceWith:function(a,b){var c,d=a.parentNode;wb(a),f(new ub(b),function(b){c?d.insertBefore(b,c.nextSibling):d.replaceChild(b,a),c=b})},children:function(a){var b=[];return f(a.childNodes,function(a){a.nodeType===se&&b.push(a)}),b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var c=a.nodeType;if(c===se||c===xe){b=new ub(b);for(var d=0,e=b.length;e>d;d++){var f=b[d];a.appendChild(f)}}},prepend:function(a,b){if(a.nodeType===se){var c=a.firstChild;f(new ub(b),function(b){a.insertBefore(b,c)})}},wrap:function(a,b){b=ae(b).eq(0).clone()[0];var c=a.parentNode;c&&c.replaceChild(b,a),b.appendChild(a)},remove:Ib,detach:function(a){Ib(a,!0)},after:function(a,b){var c=a,d=a.parentNode;b=new ub(b);for(var e=0,f=b.length;f>e;e++){var g=b[e];d.insertBefore(g,c.nextSibling),c=g}},addClass:Db,removeClass:Cb,toggleClass:function(a,b,c){b&&f(b.split(" "),function(b){var d=c;r(d)&&(d=!Bb(a,b)),(d?Db:Cb)(a,b)})},parent:function(a){var b=a.parentNode;return b&&b.nodeType!==xe?b:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:vb,triggerHandler:function(a,b,c){var d,e,g,h=b.type||b,i=zb(a),j=i&&i.events,k=j&&j[h];k&&(d={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:o,type:h,target:a},b.type&&(d=l(d,b)),e=L(k),g=c?[d].concat(c):[d],f(e,function(b){d.isImmediatePropagationStopped()||b.apply(a,g)}))}},function(a,b){ub.prototype[b]=function(b,c,d){for(var e,f=0,g=this.length;g>f;f++)r(e)?(e=a(this[f],b,c,d),s(e)&&(e=ae(e))):Eb(e,a(this[f],b,c,d));return s(e)?e:this},ub.prototype.bind=ub.prototype.on,ub.prototype.unbind=ub.prototype.off}),Pb.prototype={put:function(a,b){this[Ob(a,this.nextUid)]=b},get:function(a){return this[Ob(a,this.nextUid)]},remove:function(a){var b=this[a=Ob(a,this.nextUid)];return delete this[a],b}};var Qe=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Re=/,/,Se=/^\s*(_?)(\S+?)\1\s*$/,Te=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ue=d("$injector");Sb.$$annotate=Rb;var Ve=d("$animate"),We=["$provide",function(a){this.$$selectors={},this.register=function(b,c){var d=b+"-animation";if(b&&"."!=b.charAt(0))throw Ve("notcsel","Expecting class selector starting with '.' got '{0}'.",b);this.$$selectors[b.substr(1)]=d,a.factory(d,c)},this.classNameFilter=function(a){return 1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null),this.$$classNameFilter},this.$get=["$$q","$$asyncCallback","$rootScope",function(a,b,c){function d(b){var d,e=a.defer();return e.promise.$$cancelFn=function(){d&&d()},c.$$postDigest(function(){d=b(function(){e.resolve()})}),e.promise}function e(a,b){var c=[],d=[],e=jb();return f((a.attr("class")||"").split(/\s+/),function(a){e[a]=!0}),f(b,function(a,b){var f=e[b];a===!1&&f?d.push(b):a!==!0||f||c.push(b)}),c.length+d.length>0&&[c.length?c:null,d.length?d:null]}function g(a,b,c){for(var d=0,e=b.length;e>d;++d){var f=b[d];a[f]=c}}function h(){return j||(j=a.defer(),b(function(){j.resolve(),j=null})),j.promise}function i(a,b){if(ie.isObject(b)){var c=l(b.from||{},b.to||{});a.css(c)}}var j;return{animate:function(a,b,c){return i(a,{from:b,to:c}),h()},enter:function(a,b,c,d){return i(a,d),c?c.after(a):b.prepend(a),h()},leave:function(a,b){return i(a,b),a.remove(),h()},move:function(a,b,c,d){return this.enter(a,b,c,d)},addClass:function(a,b,c){return this.setClass(a,b,[],c)},$$addClassImmediately:function(a,b,c){return a=ae(a),b=u(b)?b:le(b)?b.join(" "):"",f(a,function(a){Db(a,b)}),i(a,c),h()},removeClass:function(a,b,c){return this.setClass(a,[],b,c)},$$removeClassImmediately:function(a,b,c){return a=ae(a),b=u(b)?b:le(b)?b.join(" "):"",f(a,function(a){Cb(a,b)}),i(a,c),h()},setClass:function(a,b,c,f){var h=this,i="$$animateClasses",j=!1;a=ae(a);var k=a.data(i);k?f&&k.options&&(k.options=ie.extend(k.options||{},f)):(k={classes:{},options:f},j=!0);var l=k.classes;return b=le(b)?b:b.split(" "),c=le(c)?c:c.split(" "),g(l,b,!0),g(l,c,!1),j&&(k.promise=d(function(b){var c=a.data(i);if(a.removeData(i),c){var d=e(a,c.classes);d&&h.$$setClassImmediately(a,d[0],d[1],c.options)
}b()}),a.data(i,k)),k.promise},$$setClassImmediately:function(a,b,c,d){return b&&this.$$addClassImmediately(a,b),c&&this.$$removeClassImmediately(a,c),i(a,d),h()},enabled:o,cancel:o}}]}],Xe=d("$compile");Zb.$inject=["$provide","$$sanitizeUriProvider"];var Ye=/^((?:x|data)[\:\-_])/i,Ze=d("$controller"),$e="application/json",_e={"Content-Type":$e+";charset=utf-8"},af=/^\[|^\{(?!\{)/,bf={"[":/]$/,"{":/}$/},cf=/^\)\]\}',?\n/,df=d("$interpolate"),ef=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,ff={http:80,https:443,ftp:21},gf=d("$location"),hf={$$html5:!1,$$replace:!1,absUrl:Cc("$$absUrl"),url:function(a){if(r(a))return this.$$url;var b=ef.exec(a);return(b[1]||""===a)&&this.path(decodeURIComponent(b[1])),(b[2]||b[1]||""===a)&&this.search(b[3]||""),this.hash(b[5]||""),this},protocol:Cc("$$protocol"),host:Cc("$$host"),port:Cc("$$port"),path:Dc("$$path",function(a){return a=null!==a?a.toString():"","/"==a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(u(a)||v(a))a=a.toString(),this.$$search=V(a);else{if(!t(a))throw gf("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");a=K(a,{}),f(a,function(b,c){null==b&&delete a[c]}),this.$$search=a}break;default:r(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}return this.$$compose(),this},hash:Dc("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){return this.$$replace=!0,this}};f([Bc,Ac,zc],function(a){a.prototype=Object.create(hf),a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==zc||!this.$$html5)throw gf("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=r(b)?null:b,this}});var jf=d("$parse"),kf=Function.prototype.call,lf=Function.prototype.apply,mf=Function.prototype.bind,nf=jb();f({"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:function(){}},function(a,b){a.constant=a.literal=a.sharedGetter=!0,nf[b]=a}),nf["this"]=function(a){return a},nf["this"].sharedGetter=!0;var of=l(jb(),{"+":function(a,b,d,e){return d=d(a,b),e=e(a,b),s(d)?s(e)?d+e:d:s(e)?e:c},"-":function(a,b,c,d){return c=c(a,b),d=d(a,b),(s(c)?c:0)-(s(d)?d:0)},"*":function(a,b,c,d){return c(a,b)*d(a,b)},"/":function(a,b,c,d){return c(a,b)/d(a,b)},"%":function(a,b,c,d){return c(a,b)%d(a,b)},"===":function(a,b,c,d){return c(a,b)===d(a,b)},"!==":function(a,b,c,d){return c(a,b)!==d(a,b)},"==":function(a,b,c,d){return c(a,b)==d(a,b)},"!=":function(a,b,c,d){return c(a,b)!=d(a,b)},"<":function(a,b,c,d){return c(a,b)<d(a,b)},">":function(a,b,c,d){return c(a,b)>d(a,b)},"<=":function(a,b,c,d){return c(a,b)<=d(a,b)},">=":function(a,b,c,d){return c(a,b)>=d(a,b)},"&&":function(a,b,c,d){return c(a,b)&&d(a,b)},"||":function(a,b,c,d){return c(a,b)||d(a,b)},"!":function(a,b,c){return!c(a,b)},"=":!0,"|":!0}),pf={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},qf=function(a){this.options=a};qf.prototype={constructor:qf,lex:function(a){for(this.text=a,this.index=0,this.tokens=[];this.index<this.text.length;){var b=this.text.charAt(this.index);if('"'===b||"'"===b)this.readString(b);else if(this.isNumber(b)||"."===b&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(b))this.readIdent();else if(this.is(b,"(){}[].,;:?"))this.tokens.push({index:this.index,text:b}),this.index++;else if(this.isWhitespace(b))this.index++;else{var c=b+this.peek(),d=c+this.peek(2),e=of[b],f=of[c],g=of[d];if(e||f||g){var h=g?d:f?c:b;this.tokens.push({index:this.index,text:h,operator:!0}),this.index+=h.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){var b=a||1;return this.index+b<this.text.length?this.text.charAt(this.index+b):!1},isNumber:function(a){return a>="0"&&"9">=a&&"string"==typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"	"===a||"\n"===a||""===a||" "===a},isIdent:function(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){c=c||this.index;var d=s(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw jf("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,d,this.text)},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var c=Wd(this.text.charAt(this.index));if("."==c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"==c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"==a.charAt(a.length-1))a+=c;else{if(!this.isExpOperator(c)||d&&this.isNumber(d)||"e"!=a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){for(var a=this.index;this.index<this.text.length;){var b=this.text.charAt(this.index);if(!this.isIdent(b)&&!this.isNumber(b))break;this.index++}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index);if(d+=f,e){if("u"===f){var g=this.text.substring(this.index+1,this.index+5);g.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+g+"]"),this.index+=4,c+=String.fromCharCode(parseInt(g,16))}else{var h=pf[f];c+=h||f}e=!1}else if("\\"===f)e=!0;else{if(f===a)return this.index++,void this.tokens.push({index:b,text:d,constant:!0,value:c});c+=f}this.index++}this.throwError("Unterminated quote",b)}};var rf=function(a,b,c){this.lexer=a,this.$filter=b,this.options=c};rf.ZERO=l(function(){return 0},{sharedGetter:!0,constant:!0}),rf.prototype={constructor:rf,parse:function(a){this.text=a,this.tokens=this.lexer.lex(a);var b=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),b.literal=!!b.literal,b.constant=!!b.constant,b},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.peek().identifier&&this.peek().text in nf?a=nf[this.consume().text]:this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b,c;b=this.expect("(","[",".");)"("===b.text?(a=this.functionCall(a,c),c=null):"["===b.text?(c=a,a=this.objectIndex(a)):"."===b.text?(c=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,b){throw jf("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index))},peekToken:function(){if(0===this.tokens.length)throw jf("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(a,b,c,d){return this.peekAhead(0,a,b,c,d)},peekAhead:function(a,b,c,d,e){if(this.tokens.length>a){var f=this.tokens[a],g=f.text;if(g===b||g===c||g===d||g===e||!b&&!c&&!d&&!e)return f}return!1},expect:function(a,b,c,d){var e=this.peek(a,b,c,d);return e?(this.tokens.shift(),e):!1},consume:function(a){if(0===this.tokens.length)throw jf("ueoe","Unexpected end of expression: {0}",this.text);var b=this.expect(a);return b||this.throwError("is unexpected, expecting ["+a+"]",this.peek()),b},unaryFn:function(a,b){var c=of[a];return l(function(a,d){return c(a,d,b)},{constant:b.constant,inputs:[b]})},binaryFn:function(a,b,c,d){var e=of[b];return l(function(b,d){return e(b,d,a,c)},{constant:a.constant&&c.constant,inputs:!d&&[a,c]})},identifier:function(){for(var a=this.consume().text;this.peek(".")&&this.peekAhead(1).identifier&&!this.peekAhead(2,"(");)a+=this.consume().text+this.consume().text;return Oc(a,this.options,this.text)},constant:function(){var a=this.consume().value;return l(function(){return a},{constant:!0,literal:!0})},statements:function(){for(var a=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(b,c){for(var d,e=0,f=a.length;f>e;e++)d=a[e](b,c);return d}},filterChain:function(){for(var a,b=this.expression();a=this.expect("|");)b=this.filter(b);return b},filter:function(a){var b,d,e=this.$filter(this.consume().text);if(this.peek(":"))for(b=[],d=[];this.expect(":");)b.push(this.expression());var f=[a].concat(b||[]);return l(function(f,g){var h=a(f,g);if(d){d[0]=h;for(var i=b.length;i--;)d[i+1]=b[i](f,g);return e.apply(c,d)}return e(h)},{constant:!e.$stateful&&f.every(Jc),inputs:!e.$stateful&&f})},expression:function(){return this.assignment()},assignment:function(){var a,b,c=this.ternary();return(b=this.expect("="))?(c.assign||this.throwError("implies assignment but ["+this.text.substring(0,b.index)+"] can not be assigned to",b),a=this.ternary(),l(function(b,d){return c.assign(b,a(b,d),d)},{inputs:[c,a]})):c},ternary:function(){var a,b,c=this.logicalOR();if((b=this.expect("?"))&&(a=this.assignment(),this.consume(":"))){var d=this.assignment();return l(function(b,e){return c(b,e)?a(b,e):d(b,e)},{constant:c.constant&&a.constant&&d.constant})}return c},logicalOR:function(){for(var a,b=this.logicalAND();a=this.expect("||");)b=this.binaryFn(b,a.text,this.logicalAND(),!0);return b},logicalAND:function(){for(var a,b=this.equality();a=this.expect("&&");)b=this.binaryFn(b,a.text,this.equality(),!0);return b},equality:function(){for(var a,b=this.relational();a=this.expect("==","!=","===","!==");)b=this.binaryFn(b,a.text,this.relational());return b},relational:function(){for(var a,b=this.additive();a=this.expect("<",">","<=",">=");)b=this.binaryFn(b,a.text,this.additive());return b},additive:function(){for(var a,b=this.multiplicative();a=this.expect("+","-");)b=this.binaryFn(b,a.text,this.multiplicative());return b},multiplicative:function(){for(var a,b=this.unary();a=this.expect("*","/","%");)b=this.binaryFn(b,a.text,this.unary());return b},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(rf.ZERO,a.text,this.unary()):(a=this.expect("!"))?this.unaryFn(a.text,this.unary()):this.primary()},fieldAccess:function(a){var b=this.identifier();return l(function(d,e,f){var g=f||a(d,e);return null==g?c:b(g)},{assign:function(c,d,e){var f=a(c,e);return f||a.assign(c,f={},e),b.assign(f,d)}})},objectIndex:function(a){var b=this.text,d=this.expression();return this.consume("]"),l(function(e,f){var g,h=a(e,f),i=d(e,f);return Gc(i,b),h?g=Hc(h[i],b):c},{assign:function(c,e,f){var g=Gc(d(c,f),b),h=Hc(a(c,f),b);return h||a.assign(c,h={},f),h[g]=e}})},functionCall:function(a,b){var d=[];if(")"!==this.peekToken().text)do d.push(this.expression());while(this.expect(","));this.consume(")");var e=this.text,f=d.length?[]:null;return function(g,h){var i=b?b(g,h):s(b)?c:g,j=a(g,h,i)||o;if(f)for(var k=d.length;k--;)f[k]=Hc(d[k](g,h),e);Hc(i,e),Ic(j,e);var l=j.apply?j.apply(i,f):j(f[0],f[1],f[2],f[3],f[4]);return f&&(f.length=0),Hc(l,e)}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","));return this.consume("]"),l(function(b,c){for(var d=[],e=0,f=a.length;f>e;e++)d.push(a[e](b,c));return d},{literal:!0,constant:a.every(Jc),inputs:a})},object:function(){var a=[],b=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var c=this.consume();c.constant?a.push(c.value):c.identifier?a.push(c.text):this.throwError("invalid key",c),this.consume(":"),b.push(this.expression())}while(this.expect(","));return this.consume("}"),l(function(c,d){for(var e={},f=0,g=b.length;g>f;f++)e[a[f]]=b[f](c,d);return e},{literal:!0,constant:b.every(Jc),inputs:b})}};var sf=jb(),tf=jb(),uf=Object.prototype.valueOf,vf=d("$sce"),wf={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Xe=d("$compile"),xf=b.createElement("a"),yf=dd(a.location.href);gd.$inject=["$provide"],kd.$inject=["$locale"],ld.$inject=["$locale"];var zf=".",Af={yyyy:od("FullYear",4),yy:od("FullYear",2,0,!0),y:od("FullYear",1),MMMM:pd("Month"),MMM:pd("Month",!0),MM:od("Month",2,1),M:od("Month",1,1),dd:od("Date",2),d:od("Date",1),HH:od("Hours",2),H:od("Hours",1),hh:od("Hours",2,-12),h:od("Hours",1,-12),mm:od("Minutes",2),m:od("Minutes",1),ss:od("Seconds",2),s:od("Seconds",1),sss:od("Milliseconds",3),EEEE:pd("Day"),EEE:pd("Day",!0),a:ud,Z:qd,ww:td(2),w:td(1),G:vd,GG:vd,GGG:vd,GGGG:wd},Bf=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Cf=/^\-?\d+$/;xd.$inject=["$locale"];var Df=q(Wd),Ef=q(Yd);Ad.$inject=["$parse"];var Ff=q({restrict:"E",compile:function(a,b){return b.href||b.xlinkHref||b.name?void 0:function(a,b){if("a"===b[0].nodeName.toLowerCase()){var c="[object SVGAnimatedString]"===ge.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(c)||a.preventDefault()})}}}}),Gf={};f(Ne,function(a,b){if("multiple"!=a){var c=$b("ng-"+b);Gf[c]=function(){return{restrict:"A",priority:100,link:function(a,d,e){a.$watch(e[c],function(a){e.$set(b,!!a)})}}}}}),f(Pe,function(a,b){Gf[b]=function(){return{priority:100,link:function(a,c,d){if("ngPattern"===b&&"/"==d.ngPattern.charAt(0)){var e=d.ngPattern.match(Ud);if(e)return void d.$set("ngPattern",new RegExp(e[1],e[2]))}a.$watch(d[b],function(a){d.$set(b,a)})}}}}),f(["src","srcset","href"],function(a){var b=$b("ng-"+a);Gf[b]=function(){return{priority:99,link:function(c,d,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===ge.call(d.prop("href"))&&(g="xlinkHref",e.$attr[g]="xlink:href",f=null),e.$observe(b,function(b){return b?(e.$set(g,b),void(_d&&f&&d.prop(f,e[g]))):void("href"===a&&e.$set(g,null))})}}}});var Hf={$addControl:o,$$renameControl:Cd,$removeControl:o,$setValidity:o,$setDirty:o,$setPristine:o,$setSubmitted:o},If="ng-submitted";Dd.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Jf=function(a){return["$timeout",function(b){var d={name:"form",restrict:a?"EAC":"E",controller:Dd,compile:function(d,e){d.addClass(pg).addClass(ng);var f=e.name?"name":a&&e.ngForm?"ngForm":!1;return{pre:function(a,d,e,g){if(!("action"in e)){var h=function(b){a.$apply(function(){g.$commitViewValue(),g.$setSubmitted()}),b.preventDefault()};Be(d[0],"submit",h),d.on("$destroy",function(){b(function(){Ce(d[0],"submit",h)},0,!1)})}var i=g.$$parentForm;f&&(Kc(a,null,g.$name,g,g.$name),e.$observe(f,function(b){g.$name!==b&&(Kc(a,null,g.$name,c,g.$name),i.$$renameControl(g,b),Kc(a,null,g.$name,g,g.$name))})),d.on("$destroy",function(){i.$removeControl(g),f&&Kc(a,null,e[f],c,g.$name),l(g,Hf)})}}}};return d}]},Kf=Jf(),Lf=Jf(!0),Mf=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,Nf=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Of=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Pf=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Qf=/^(\d{4})-(\d{2})-(\d{2})$/,Rf=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Sf=/^(\d{4})-W(\d\d)$/,Tf=/^(\d{4})-(\d\d)$/,Uf=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Vf={text:Fd,date:Jd("date",Qf,Id(Qf,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Jd("datetimelocal",Rf,Id(Rf,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:Jd("time",Uf,Id(Uf,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Jd("week",Sf,Hd,"yyyy-Www"),month:Jd("month",Tf,Id(Tf,["yyyy","MM"]),"yyyy-MM"),number:Ld,url:Md,email:Nd,radio:Od,checkbox:Qd,hidden:o,button:o,submit:o,reset:o,file:o},Wf=["$browser","$sniffer","$filter","$parse",function(a,b,c,d){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,h){h[0]&&(Vf[Wd(g.type)]||Vf.text)(e,f,g,h[0],b,a,c,d)}}}}],Xf=/^(true|false|\d+)$/,Yf=function(){return{restrict:"A",priority:100,compile:function(a,b){return Xf.test(b.ngValue)?function(a,b,c){c.$set("value",a.$eval(c.ngValue))}:function(a,b,c){a.$watch(c.ngValue,function(a){c.$set("value",a)})}}}},Zf=["$compile",function(a){return{restrict:"AC",compile:function(b){return a.$$addBindingClass(b),function(b,d,e){a.$$addBindingInfo(d,e.ngBind),d=d[0],b.$watch(e.ngBind,function(a){d.textContent=a===c?"":a})}}}}],$f=["$interpolate","$compile",function(a,b){return{compile:function(d){return b.$$addBindingClass(d),function(d,e,f){var g=a(e.attr(f.$attr.ngBindTemplate));b.$$addBindingInfo(e,g.expressions),e=e[0],f.$observe("ngBindTemplate",function(a){e.textContent=a===c?"":a})}}}}],_f=["$sce","$parse","$compile",function(a,b,c){return{restrict:"A",compile:function(d,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(a){return(a||"").toString()});return c.$$addBindingClass(d),function(b,d,e){c.$$addBindingInfo(d,e.ngBindHtml),b.$watch(g,function(){d.html(a.getTrustedHtml(f(b))||"")})}}}}],ag=q({restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),bg=Rd("",!0),cg=Rd("Odd",0),dg=Rd("Even",1),eg=Bd({compile:function(a,b){b.$set("ngCloak",c),a.removeClass("ng-cloak")}}),fg=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],gg={},hg={blur:!0,focus:!0};f("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=$b("ng-"+a);gg[b]=["$parse","$rootScope",function(c,d){return{restrict:"A",compile:function(e,f){var g=c(f[b],null,!0);return function(b,c){c.on(a,function(c){var e=function(){g(b,{$event:c})};hg[a]&&d.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var ig=["$animate",function(a){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i,j;c.$watch(e.ngIf,function(c){c?i||g(function(c,f){i=f,c[c.length++]=b.createComment(" end ngIf: "+e.ngIf+" "),h={clone:c},a.enter(c,d.parent(),d)}):(j&&(j.remove(),j=null),i&&(i.$destroy(),i=null),h&&(j=ib(h.clone),a.leave(j).then(function(){j=null}),h=null))})}}}],jg=["$templateRequest","$anchorScroll","$animate",function(a,b,c){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ie.noop,compile:function(d,e){var f=e.ngInclude||e.src,g=e.onload||"",h=e.autoscroll;return function(d,e,i,j,k){var l,m,n,o=0,p=function(){m&&(m.remove(),m=null),l&&(l.$destroy(),l=null),n&&(c.leave(n).then(function(){m=null}),m=n,n=null)};d.$watch(f,function(f){var i=function(){!s(h)||h&&!d.$eval(h)||b()},m=++o;f?(a(f,!0).then(function(a){if(m===o){var b=d.$new();j.template=a;var h=k(b,function(a){p(),c.enter(a,null,e).then(i)});l=b,n=h,l.$emit("$includeContentLoaded",f),d.$eval(g)}},function(){m===o&&(p(),d.$emit("$includeContentError",f))}),d.$emit("$includeContentRequested",f)):(p(),j.template=null)})}}}}],kg=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){return/SVG/.test(d[0].toString())?(d.empty(),void a(sb(f.template,b).childNodes)(c,function(a){d.append(a)},{futureParentElement:d})):(d.html(f.template),void a(d.contents())(c))}}}],lg=Bd({priority:450,compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}}),mg=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,d,e){var g=b.attr(d.$attr.ngList)||", ",h="false"!==d.ngTrim,i=h?me(g):g,j=function(a){if(!r(a)){var b=[];return a&&f(a.split(i),function(a){a&&b.push(h?me(a):a)}),b}};e.$parsers.push(j),e.$formatters.push(function(a){return le(a)?a.join(g):c}),e.$isEmpty=function(a){return!a||!a.length}}}},ng="ng-valid",og="ng-invalid",pg="ng-pristine",qg="ng-dirty",rg="ng-untouched",sg="ng-touched",tg="ng-pending",ug=d("ngModel"),vg=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,b,d,e,g,h,i,j,k,l){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=c,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=c,this.$name=l(d.name||"",!1)(a);var m,n=g(d.ngModel),p=n.assign,q=n,t=p,u=null,w=this;this.$$setOptions=function(a){if(w.$options=a,a&&a.getterSetter){var b=g(d.ngModel+"()"),c=g(d.ngModel+"($$$p)");q=function(a){var c=n(a);return x(c)&&(c=b(a)),c},t=function(a){x(n(a))?c(a,{$$$p:w.$modelValue}):p(a,w.$modelValue)}}else if(!n.assign)throw ug("nonassign","Expression '{0}' is non-assignable. Element: {1}",d.ngModel,T(e))},this.$render=o,this.$isEmpty=function(a){return r(a)||""===a||null===a||a!==a};var y=e.inheritedData("$formController")||Hf,z=0;Sd({ctrl:this,$element:e,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]},parentForm:y,$animate:h}),this.$setPristine=function(){w.$dirty=!1,w.$pristine=!0,h.removeClass(e,qg),h.addClass(e,pg)},this.$setDirty=function(){w.$dirty=!0,w.$pristine=!1,h.removeClass(e,pg),h.addClass(e,qg),y.$setDirty()},this.$setUntouched=function(){w.$touched=!1,w.$untouched=!0,h.setClass(e,rg,sg)},this.$setTouched=function(){w.$touched=!0,w.$untouched=!1,h.setClass(e,sg,rg)},this.$rollbackViewValue=function(){i.cancel(u),w.$viewValue=w.$$lastCommittedViewValue,w.$render()},this.$validate=function(){if(!v(w.$modelValue)||!isNaN(w.$modelValue)){var a=w.$$lastCommittedViewValue,b=w.$$rawModelValue,d=w.$valid,e=w.$modelValue,f=w.$options&&w.$options.allowInvalid;w.$$runValidators(b,a,function(a){f||d===a||(w.$modelValue=a?b:c,w.$modelValue!==e&&w.$$writeModelToScope())})}},this.$$runValidators=function(a,b,d){function e(){var a=w.$$parserName||"parse";return m!==c?(m||(f(w.$validators,function(a,b){i(b,null)}),f(w.$asyncValidators,function(a,b){i(b,null)})),i(a,m),m):(i(a,null),!0)}function g(){var c=!0;return f(w.$validators,function(d,e){var f=d(a,b);c=c&&f,i(e,f)}),c?!0:(f(w.$asyncValidators,function(a,b){i(b,null)}),!1)}function h(){var d=[],e=!0;f(w.$asyncValidators,function(f,g){var h=f(a,b);if(!F(h))throw ug("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",h);i(g,c),d.push(h.then(function(){i(g,!0)},function(){e=!1,i(g,!1)}))}),d.length?k.all(d).then(function(){j(e)},o):j(!0)}function i(a,b){l===z&&w.$setValidity(a,b)}function j(a){l===z&&d(a)}z++;var l=z;return e()&&g()?void h():void j(!1)},this.$commitViewValue=function(){var a=w.$viewValue;i.cancel(u),(w.$$lastCommittedViewValue!==a||""===a&&w.$$hasNativeValidators)&&(w.$$lastCommittedViewValue=a,w.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function b(){w.$modelValue!==g&&w.$$writeModelToScope()}var d=w.$$lastCommittedViewValue,e=d;if(m=r(e)?c:!0)for(var f=0;f<w.$parsers.length;f++)if(e=w.$parsers[f](e),r(e)){m=!1;break}v(w.$modelValue)&&isNaN(w.$modelValue)&&(w.$modelValue=q(a));var g=w.$modelValue,h=w.$options&&w.$options.allowInvalid;w.$$rawModelValue=e,h&&(w.$modelValue=e,b()),w.$$runValidators(e,w.$$lastCommittedViewValue,function(a){h||(w.$modelValue=a?e:c,b())})},this.$$writeModelToScope=function(){t(a,w.$modelValue),f(w.$viewChangeListeners,function(a){try{a()}catch(c){b(c)}})},this.$setViewValue=function(a,b){w.$viewValue=a,(!w.$options||w.$options.updateOnDefault)&&w.$$debounceViewValueCommit(b)},this.$$debounceViewValueCommit=function(b){var c,d=0,e=w.$options;e&&s(e.debounce)&&(c=e.debounce,v(c)?d=c:v(c[b])?d=c[b]:v(c["default"])&&(d=c["default"])),i.cancel(u),d?u=i(function(){w.$commitViewValue()},d):j.$$phase?w.$commitViewValue():a.$apply(function(){w.$commitViewValue()})},a.$watch(function(){var b=q(a);if(b!==w.$modelValue&&(w.$modelValue===w.$modelValue||b===b)){w.$modelValue=w.$$rawModelValue=b,m=c;for(var d=w.$formatters,e=d.length,f=b;e--;)f=d[e](f);w.$viewValue!==f&&(w.$viewValue=w.$$lastCommittedViewValue=f,w.$render(),w.$$runValidators(b,f,o))}return b})}],wg=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:vg,priority:1,compile:function(b){return b.addClass(pg).addClass(rg).addClass(ng),{pre:function(a,b,c,d){var e=d[0],f=d[1]||Hf;e.$$setOptions(d[2]&&d[2].$options),f.$addControl(e),c.$observe("name",function(a){e.$name!==a&&f.$$renameControl(e,a)}),a.$on("$destroy",function(){f.$removeControl(e)})},post:function(b,c,d,e){var f=e[0];f.$options&&f.$options.updateOn&&c.on(f.$options.updateOn,function(a){f.$$debounceViewValueCommit(a&&a.type)}),c.on("blur",function(){f.$touched||(a.$$phase?b.$evalAsync(f.$setTouched):b.$apply(f.$setTouched))})}}}}}],xg=/(\s+|^)default(\s+|$)/,yg=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,b){var d=this;this.$options=a.$eval(b.ngModelOptions),this.$options.updateOn!==c?(this.$options.updateOnDefault=!1,this.$options.updateOn=me(this.$options.updateOn.replace(xg,function(){return d.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},zg=Bd({terminal:!0,priority:1e3}),Ag=["$locale","$interpolate",function(a,b){var c=/{}/g,d=/^when(Minus)?(.+)$/;return{restrict:"EA",link:function(e,g,h){function i(a){g.text(a||"")}var j,k=h.count,l=h.$attr.when&&g.attr(h.$attr.when),m=h.offset||0,n=e.$eval(l)||{},o={},p=b.startSymbol(),q=b.endSymbol(),r=p+k+"-"+m+q,s=ie.noop;f(h,function(a,b){var c=d.exec(b);if(c){var e=(c[1]?"-":"")+Wd(c[2]);n[e]=g.attr(h.$attr[b])}}),f(n,function(a,d){o[d]=b(a.replace(c,r))}),e.$watch(k,function(b){var c=parseFloat(b),d=isNaN(c);d||c in n||(c=a.pluralCat(c-m)),c===j||d&&isNaN(j)||(s(),s=e.$watch(o[c],i),j=c)})}}}],Bg=["$parse","$animate",function(a,g){var h="$$NG_REMOVED",i=d("ngRepeat"),j=function(a,b,c,d,e,f,g){a[c]=d,e&&(a[e]=f),a.$index=b,a.$first=0===b,a.$last=b===g-1,a.$middle=!(a.$first||a.$last),a.$odd=!(a.$even=0===(1&b))},k=function(a){return a.clone[0]},l=function(a){return a.clone[a.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(d,m){var n=m.ngRepeat,o=b.createComment(" end ngRepeat: "+n+" "),p=n.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p)throw i("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",n);var q=p[1],r=p[2],s=p[3],t=p[4];if(p=q.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!p)throw i("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",q);var u=p[3]||p[1],v=p[2];if(s&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(s)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(s)))throw i("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",s);var w,x,y,z,A={$id:Ob};return t?w=a(t):(y=function(a,b){return Ob(b)},z=function(a){return a}),function(a,b,d,m,p){w&&(x=function(b,c,d){return v&&(A[v]=b),A[u]=c,A.$index=d,w(a,A)});var q=jb();a.$watchCollection(r,function(d){var m,r,t,w,A,B,C,D,E,F,G,H,I=b[0],J=jb();if(s&&(a[s]=d),e(d))E=d,D=x||y;else{D=x||z,E=[];for(var K in d)d.hasOwnProperty(K)&&"$"!=K.charAt(0)&&E.push(K);E.sort()}for(w=E.length,G=new Array(w),m=0;w>m;m++)if(A=d===E?m:E[m],B=d[A],C=D(A,B,m),q[C])F=q[C],delete q[C],J[C]=F,G[m]=F;else{if(J[C])throw f(G,function(a){a&&a.scope&&(q[a.id]=a)}),i("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",n,C,B);G[m]={id:C,scope:c,clone:c},J[C]=!0}for(var L in q){if(F=q[L],H=ib(F.clone),g.leave(H),H[0].parentNode)for(m=0,r=H.length;r>m;m++)H[m][h]=!0;F.scope.$destroy()}for(m=0;w>m;m++)if(A=d===E?m:E[m],B=d[A],F=G[m],F.scope){t=I;do t=t.nextSibling;while(t&&t[h]);k(F)!=t&&g.move(ib(F.clone),null,ae(I)),I=l(F),j(F.scope,m,u,B,v,A,w)}else p(function(a,b){F.scope=b;var c=o.cloneNode(!1);a[a.length++]=c,g.enter(a,null,ae(I)),I=c,F.clone=a,J[F.id]=F,j(F.scope,m,u,B,v,A,w)});q=J})}}}}],Cg="ng-hide",Dg="ng-hide-animate",Eg=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngShow,function(b){a[b?"removeClass":"addClass"](c,Cg,{tempClasses:Dg})})}}}],Fg=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngHide,function(b){a[b?"addClass":"removeClass"](c,Cg,{tempClasses:Dg})})}}}],Gg=Bd(function(a,b,c){a.$watch(c.ngStyle,function(a,c){c&&a!==c&&f(c,function(a,c){b.css(c,"")}),a&&b.css(a)},!0)}),Hg=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,g){var h=e.ngSwitch||e.on,i=[],j=[],k=[],l=[],m=function(a,b){return function(){a.splice(b,1)}};c.$watch(h,function(c){var d,e;for(d=0,e=k.length;e>d;++d)a.cancel(k[d]);for(k.length=0,d=0,e=l.length;e>d;++d){var h=ib(j[d].clone);l[d].$destroy();var n=k[d]=a.leave(h);n.then(m(k,d))}j.length=0,l.length=0,(i=g.cases["!"+c]||g.cases["?"])&&f(i,function(c){c.transclude(function(d,e){l.push(e);var f=c.element;d[d.length++]=b.createComment(" end ngSwitchWhen: ");var g={clone:d};j.push(g),a.enter(d,f.parent(),f)})})})}}}],Ig=Bd({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["!"+c.ngSwitchWhen]=d.cases["!"+c.ngSwitchWhen]||[],d.cases["!"+c.ngSwitchWhen].push({transclude:e,element:b})}}),Jg=Bd({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["?"]=d.cases["?"]||[],d.cases["?"].push({transclude:e,element:b})}}),Kg=Bd({restrict:"EAC",link:function(a,b,c,e,f){if(!f)throw d("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",T(b));f(function(a){b.empty(),b.append(a)})}}),Lg=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){if("text/ng-template"==c.type){var d=c.id,e=b[0].text;a.put(d,e)}}}}],Mg=d("ngOptions"),Ng=q({restrict:"A",terminal:!0}),Og=["$compile","$parse",function(a,d){var e=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,h={$setViewValue:o};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,b,c){var d,e,f=this,g={},i=h;f.databound=c.ngModel,f.init=function(a,b,c){i=a,d=b,e=c},f.addOption=function(b,c){gb(b,'"option value"'),g[b]=!0,i.$viewValue==b&&(a.val(b),e.parent()&&e.remove()),c&&c[0].hasAttribute("selected")&&(c[0].selected=!0)},f.removeOption=function(a){this.hasOption(a)&&(delete g[a],i.$viewValue===a&&this.renderUnknownOption(a))},f.renderUnknownOption=function(b){var c="? "+Ob(b)+" ?";e.val(c),a.prepend(e),a.val(c),e.prop("selected",!0)},f.hasOption=function(a){return g.hasOwnProperty(a)},b.$on("$destroy",function(){f.renderUnknownOption=o})}],link:function(h,i,j,k){function l(a,b,c,d){c.$render=function(){var a=c.$viewValue;d.hasOption(a)?(y.parent()&&y.remove(),b.val(a),""===a&&o.prop("selected",!0)):null==a&&o?b.val(""):d.renderUnknownOption(a)},b.on("change",function(){a.$apply(function(){y.parent()&&y.remove(),c.$setViewValue(b.val())})})}function m(a,b,c){var d;c.$render=function(){var a=new Pb(c.$viewValue);f(b.find("option"),function(b){b.selected=s(a.get(b.value))})},a.$watch(function(){M(d,c.$viewValue)||(d=L(c.$viewValue),c.$render())}),b.on("change",function(){a.$apply(function(){var a=[];f(b.find("option"),function(b){b.selected&&a.push(b.value)}),c.$setViewValue(a)})})}function n(b,h,i){function j(a,c,d){return M[B]=d,E&&(M[E]=c),a(b,M)}function k(){b.$apply(function(){var a,c=H(b)||[];if(r)a=[],f(h.val(),function(b){b=J?K[b]:b,a.push(l(b,c[b]))});else{var d=J?K[h.val()]:h.val();a=l(d,c[d])}i.$setViewValue(a),y()})}function l(a,b){if("?"===a)return c;if(""===a)return null;var d=D?D:G;return j(d,a,b)}function m(){var a,c=H(b);if(c&&le(c)){a=new Array(c.length);for(var d=0,e=c.length;e>d;d++)a[d]=j(A,d,c[d]);return a}if(c){a={};for(var f in c)c.hasOwnProperty(f)&&(a[f]=j(A,f,c[f]))
}return a}function n(a){var b;if(r)if(J&&le(a)){b=new Pb([]);for(var c=0;c<a.length;c++)b.put(j(J,null,a[c]),!0)}else b=new Pb(a);else J&&(a=j(J,null,a));return function(c,d){var e;return e=J?J:D?D:G,r?s(b.remove(j(e,c,d))):a===j(e,c,d)}}function o(){v||(b.$$postDigest(y),v=!0)}function q(a,b,c){a[b]=a[b]||0,a[b]+=c?1:-1}function y(){v=!1;var a,c,d,e,k,l,m,o,t,y,z,B,C,D,G,I,N,O={"":[]},P=[""],Q=i.$viewValue,R=H(b)||[],S=E?g(R):R,T={},U=n(Q),V=!1;for(K={},B=0;y=S.length,y>B;B++)m=B,E&&(m=S[B],"$"===m.charAt(0))||(o=R[m],a=j(F,m,o)||"",(c=O[a])||(c=O[a]=[],P.push(a)),C=U(m,o),V=V||C,I=j(A,m,o),I=s(I)?I:"",N=J?J(b,M):E?S[B]:B,J&&(K[N]=m),c.push({id:N,label:I,selected:C}));for(r||(u||null===Q?O[""].unshift({id:"",label:"",selected:!V}):V||O[""].unshift({id:"?",label:"",selected:!0})),z=0,t=P.length;t>z;z++){for(a=P[z],c=O[a],L.length<=z?(e={element:x.clone().attr("label",a),label:c.label},k=[e],L.push(k),h.append(e.element)):(k=L[z],e=k[0],e.label!=a&&e.element.attr("label",e.label=a)),D=null,B=0,y=c.length;y>B;B++)d=c[B],(l=k[B+1])?(D=l.element,l.label!==d.label&&(q(T,l.label,!1),q(T,d.label,!0),D.text(l.label=d.label),D.prop("label",l.label)),l.id!==d.id&&D.val(l.id=d.id),D[0].selected!==d.selected&&(D.prop("selected",l.selected=d.selected),_d&&D.prop("selected",l.selected))):(""===d.id&&u?G=u:(G=w.clone()).val(d.id).prop("selected",d.selected).attr("selected",d.selected).prop("label",d.label).text(d.label),k.push(l={element:G,label:d.label,id:d.id,selected:d.selected}),q(T,d.label,!0),D?D.after(G):e.element.append(G),D=G);for(B++;k.length>B;)d=k.pop(),q(T,d.label,!1),d.element.remove()}for(;L.length>z;){for(c=L.pop(),B=1;B<c.length;++B)q(T,c[B].label,!1);c[0].element.remove()}f(T,function(a,b){a>0?p.addOption(b):0>a&&p.removeOption(b)})}var z;if(!(z=t.match(e)))throw Mg("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,T(h));var A=d(z[2]||z[1]),B=z[4]||z[6],C=/ as /.test(z[0])&&z[1],D=C?d(C):null,E=z[5],F=d(z[3]||""),G=d(z[2]?z[1]:B),H=d(z[7]),I=z[8],J=I?d(z[8]):null,K={},L=[[{element:h,label:""}]],M={};u&&(a(u)(b),u.removeClass("ng-scope"),u.remove()),h.empty(),h.on("change",k),i.$render=y,b.$watchCollection(H,o),b.$watchCollection(m,o),r&&b.$watchCollection(function(){return i.$modelValue},o)}if(k[1]){for(var o,p=k[0],q=k[1],r=j.multiple,t=j.ngOptions,u=!1,v=!1,w=ae(b.createElement("option")),x=ae(b.createElement("optgroup")),y=w.clone(),z=0,A=i.children(),B=A.length;B>z;z++)if(""===A[z].value){o=u=A.eq(z);break}p.init(q,u,y),r&&(q.$isEmpty=function(a){return!a||0===a.length}),t?n(h,i,q):r?m(h,i,q):l(h,i,q,p)}}}}],Pg=["$interpolate",function(a){var b={addOption:o,removeOption:o};return{restrict:"E",priority:100,compile:function(c,d){if(r(d.value)){var e=a(c.text(),!0);e||d.$set("value",c.text())}return function(a,c,d){var f="$selectController",g=c.parent(),h=g.data(f)||g.parent().data(f);h&&h.databound||(h=b),e?a.$watch(e,function(a,b){d.$set("value",a),b!==a&&h.removeOption(b),h.addOption(a,c)}):h.addOption(d.value,c),c.on("$destroy",function(){h.removeOption(d.value)})}}}}],Qg=q({restrict:"E",terminal:!1}),Rg=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){d&&(c.required=!0,d.$validators.required=function(a,b){return!c.required||!d.$isEmpty(b)},c.$observe("required",function(){d.$validate()}))}}},Sg=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,e,f){if(f){var g,h=e.ngPattern||e.pattern;e.$observe("pattern",function(a){if(u(a)&&a.length>0&&(a=new RegExp("^"+a+"$")),a&&!a.test)throw d("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",h,a,T(b));g=a||c,f.$validate()}),f.$validators.pattern=function(a){return f.$isEmpty(a)||r(g)||g.test(a)}}}}},Tg=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=-1;c.$observe("maxlength",function(a){var b=m(a);e=isNaN(b)?-1:b,d.$validate()}),d.$validators.maxlength=function(a,b){return 0>e||d.$isEmpty(b)||b.length<=e}}}}},Ug=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=0;c.$observe("minlength",function(a){e=m(a)||0,d.$validate()}),d.$validators.minlength=function(a,b){return d.$isEmpty(b)||b.length>=e}}}}};return a.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(db(),nb(ie),void ae(b).ready(function(){$(b,_)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>'),d3=function(){function a(a){return null!=a&&!isNaN(a)}function b(a){return a.length}function c(a){for(var b=1;a*b%1;)b*=10;return b}function d(a,b){try{for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}catch(d){a.prototype=b}}function e(){}function f(){}function g(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function h(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.substring(1);for(var c=0,d=lh.length;d>c;++c){var e=lh[c]+b;if(e in a)return e}}function i(){}function j(){}function k(a){function b(){for(var b,d=c,e=-1,f=d.length;++e<f;)(b=d[e].on)&&b.apply(this,arguments);return a}var c=[],d=new e;return b.on=function(b,e){var f,g=d.get(b);return arguments.length<2?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),d.remove(b)),e&&c.push(d.set(b,{on:e})),a)},b}function l(){Wg.event.preventDefault()}function m(){for(var a,b=Wg.event;a=b.sourceEvent;)b=a;return b}function n(a){for(var b=new j,c=0,d=arguments.length;++c<d;)b[arguments[c]]=k(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=Wg.event;e.target=a,Wg.event=e,b[e.type].apply(c,d)}finally{Wg.event=f}}},b}function o(a){return nh(a,sh),a}function p(a){return"function"==typeof a?a:function(){return oh(a,this)}}function q(a){return"function"==typeof a?a:function(){return ph(a,this)}}function r(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=Wg.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?h:g:a.local?f:e}function s(a){return a.trim().replace(/\s+/g," ")}function t(a){return new RegExp("(?:^|\\s+)"+Wg.requote(a)+"(?:\\s+|$)","g")}function u(a){return a.trim().split(/^|\s+/)}function v(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<e;)a[c](this,d)}a=u(a).map(w);var e=a.length;return"function"==typeof b?d:c}function w(a){var b=t(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",s(e+" "+a))):c.setAttribute("class",s(e.replace(b," ")))}}function x(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function y(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function z(a){return"function"==typeof a?a:(a=Wg.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function A(a){return{__data__:a}}function B(a){return function(){return rh(this,a)}}function C(a){return arguments.length||(a=Wg.ascending),function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function D(a,b){for(var c=0,d=a.length;d>c;c++)for(var e,f=a[c],g=0,h=f.length;h>g;g++)(e=f[g])&&b(e,g,c);return a}function E(a){return nh(a,uh),a}function F(a){var b,c;return function(d,e,f){var g,h=a[f].update,i=h.length;for(f!=c&&(c=f,b=0),e>=b&&(b=e+1);!(g=h[b])&&++b<i;);return g}}function G(){var a=this.__transition__;a&&++a.active}function H(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function e(){var e=j(b,Yg(arguments));d.call(this),this.addEventListener(a,this[g]=e,e.$=c),e._=b}function f(){var b,c=new RegExp("^__on([^.]+)"+Wg.requote(a)+"$");for(var d in this)if(b=d.match(c)){var e=this[d];this.removeEventListener(b[1],e,e.$),delete this[d]}}var g="__on"+a,h=a.indexOf("."),j=I;h>0&&(a=a.substring(0,h));var k=wh.get(a);return k&&(a=k,j=J),h?b?e:d:b?i:f}function I(a,b){return function(c){var d=Wg.event;Wg.event=c,b[0]=this.__data__;try{a.apply(this,b)}finally{Wg.event=d}}}function J(a,b){var c=I(a,b);return function(a){var b=this,d=a.relatedTarget;d&&(d===b||8&d.compareDocumentPosition(b))||c.call(b,a)}}function K(){var a=".dragsuppress-"+ ++yh,b="click"+a,c=Wg.select(_g).on("touchmove"+a,l).on("dragstart"+a,l).on("selectstart"+a,l);if(xh){var d=$g.style,e=d[xh];d[xh]="none"}return function(f){function g(){c.on(b,null)}c.on(a,null),xh&&(d[xh]=e),f&&(c.on(b,function(){l(),g()},!0),setTimeout(g,0))}}function L(a,b){b.changedTouches&&(b=b.changedTouches[0]);var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(0>zh&&(_g.scrollX||_g.scrollY)){c=Wg.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var e=c[0][0].getScreenCTM();zh=!(e.f||e.e),c.remove()}return zh?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY),d=d.matrixTransform(a.getScreenCTM().inverse()),[d.x,d.y]}var f=a.getBoundingClientRect();return[b.clientX-f.left-a.clientLeft,b.clientY-f.top-a.clientTop]}function M(a){return a>0?1:0>a?-1:0}function N(a){return a>1?0:-1>a?Ah:Math.acos(a)}function O(a){return a>1?Ch:-1>a?-Ch:Math.asin(a)}function P(a){return((a=Math.exp(a))-1/a)/2}function Q(a){return((a=Math.exp(a))+1/a)/2}function R(a){return((a=Math.exp(2*a))-1)/(a+1)}function S(a){return(a=Math.sin(a/2))*a}function T(){}function U(a,b,c){return new V(a,b,c)}function V(a,b,c){this.h=a,this.s=b,this.l=c}function W(a,b,c){function d(a){return a>360?a-=360:0>a&&(a+=360),60>a?f+(g-f)*a/60:180>a?g:240>a?f+(g-f)*(240-a)/60:f}function e(a){return Math.round(255*d(a))}var f,g;return a=isNaN(a)?0:(a%=360)<0?a+360:a,b=isNaN(b)?0:0>b?0:b>1?1:b,c=0>c?0:c>1?1:c,g=.5>=c?c*(1+b):c+b-c*b,f=2*c-g,hb(e(a+120),e(a),e(a-120))}function X(a,b,c){return new Y(a,b,c)}function Y(a,b,c){this.h=a,this.c=b,this.l=c}function Z(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),$(c,Math.cos(a*=Fh)*b,Math.sin(a)*b)}function $(a,b,c){return new _(a,b,c)}function _(a,b,c){this.l=a,this.a=b,this.b=c}function ab(a,b,c){var d=(a+16)/116,e=d+b/500,f=d-c/200;return e=cb(e)*Qh,d=cb(d)*Rh,f=cb(f)*Sh,hb(eb(3.2404542*e-1.5371385*d-.4985314*f),eb(-.969266*e+1.8760108*d+.041556*f),eb(.0556434*e-.2040259*d+1.0572252*f))}function bb(a,b,c){return a>0?X(Math.atan2(c,b)*Gh,Math.sqrt(b*b+c*c),a):X(0/0,0/0,a)}function cb(a){return a>.206893034?a*a*a:(a-4/29)/7.787037}function db(a){return a>.008856?Math.pow(a,1/3):7.787037*a+4/29}function eb(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function fb(a){return hb(a>>16,a>>8&255,255&a)}function gb(a){return fb(a)+""}function hb(a,b,c){return new ib(a,b,c)}function ib(a,b,c){this.r=a,this.g=b,this.b=c}function jb(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function kb(a,b,c){var d,e,f,g=0,h=0,i=0;if(d=/([a-z]+)\((.*)\)/i.exec(a))switch(e=d[2].split(","),d[1]){case"hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case"rgb":return b(ob(e[0]),ob(e[1]),ob(e[2]))}return(f=Vh.get(a))?b(f.r,f.g,f.b):(null!=a&&"#"===a.charAt(0)&&(4===a.length?(g=a.charAt(1),g+=g,h=a.charAt(2),h+=h,i=a.charAt(3),i+=i):7===a.length&&(g=a.substring(1,3),h=a.substring(3,5),i=a.substring(5,7)),g=parseInt(g,16),h=parseInt(h,16),i=parseInt(i,16)),b(g,h,i))}function lb(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),h=g-f,i=(g+f)/2;return h?(e=.5>i?h/(g+f):h/(2-g-f),d=a==g?(b-c)/h+(c>b?6:0):b==g?(c-a)/h+2:(a-b)/h+4,d*=60):(d=0/0,e=i>0&&1>i?0:d),U(d,e,i)}function mb(a,b,c){a=nb(a),b=nb(b),c=nb(c);var d=db((.4124564*a+.3575761*b+.1804375*c)/Qh),e=db((.2126729*a+.7151522*b+.072175*c)/Rh),f=db((.0193339*a+.119192*b+.9503041*c)/Sh);return $(116*e-16,500*(d-e),200*(e-f))}function nb(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function ob(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function pb(a){return"function"==typeof a?a:function(){return a}}function qb(a){return a}function rb(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),sb(b,c,a,d)}}function sb(a,b,c,d){function e(){var a,b=i.status;if(!b&&i.responseText||b>=200&&300>b||304===b){try{a=c.call(f,i)}catch(d){return void g.error.call(f,d)}g.load.call(f,a)}else g.error.call(f,i)}var f={},g=Wg.dispatch("beforesend","progress","load","error"),h={},i=new XMLHttpRequest,j=null;return!_g.XDomainRequest||"withCredentials"in i||!/^(http(s)?:)?\/\//.test(a)||(i=new XDomainRequest),"onload"in i?i.onload=i.onerror=e:i.onreadystatechange=function(){i.readyState>3&&e()},i.onprogress=function(a){var b=Wg.event;Wg.event=a;try{g.progress.call(f,i)}finally{Wg.event=b}},f.header=function(a,b){return a=(a+"").toLowerCase(),arguments.length<2?h[a]:(null==b?delete h[a]:h[a]=b+"",f)},f.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",f):b},f.responseType=function(a){return arguments.length?(j=a,f):j},f.response=function(a){return c=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(Yg(arguments)))}}),f.send=function(c,d,e){if(2===arguments.length&&"function"==typeof d&&(e=d,d=null),i.open(c,a,!0),null==b||"accept"in h||(h.accept=b+",*/*"),i.setRequestHeader)for(var k in h)i.setRequestHeader(k,h[k]);return null!=b&&i.overrideMimeType&&i.overrideMimeType(b),null!=j&&(i.responseType=j),null!=e&&f.on("error",e).on("load",function(a){e(null,a)}),g.beforesend.call(f,i),i.send(null==d?null:d),f},f.abort=function(){return i.abort(),f},Wg.rebind(f,g,"on"),null==d?f:f.get(tb(d))}function tb(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function ub(){var a=vb(),b=wb()-a;b>24?(isFinite(b)&&(clearTimeout(Zh),Zh=setTimeout(ub,b)),Yh=0):(Yh=1,_h(ub))}function vb(){var a=Date.now();for($h=Wh;$h;)a>=$h.t&&($h.f=$h.c(a-$h.t)),$h=$h.n;return a}function wb(){for(var a,b=Wh,c=1/0;b;)b.f?b=a?a.n=b.n:Wh=b.n:(b.t<c&&(c=b.t),b=(a=b).n);return Xh=a,c}function xb(a,b){var c=Math.pow(10,3*ih(8-b));return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}}function yb(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function zb(a){return a+""}function Ab(){}function Bb(a,b,c){var d=c.s=a+b,e=d-a,f=d-e;c.t=a-f+(b-e)}function Cb(a,b){a&&li.hasOwnProperty(a.type)&&li[a.type](a,b)}function Db(a,b,c){var d,e=-1,f=a.length-c;for(b.lineStart();++e<f;)d=a[e],b.point(d[0],d[1],d[2]);b.lineEnd()}function Eb(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)Db(a[c],b,1);b.polygonEnd()}function Fb(){function a(a,b){a*=Fh,b=b*Fh/2+Ah/4;var c=a-d,g=Math.cos(b),h=Math.sin(b),i=f*h,j=e*g+i*Math.cos(c),k=i*Math.sin(c);ni.add(Math.atan2(k,j)),d=a,e=g,f=h}var b,c,d,e,f;oi.point=function(g,h){oi.point=a,d=(b=g)*Fh,e=Math.cos(h=(c=h)*Fh/2+Ah/4),f=Math.sin(h)},oi.lineEnd=function(){a(b,c)}}function Gb(a){var b=a[0],c=a[1],d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function Hb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function Ib(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function Jb(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function Kb(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function Lb(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function Mb(a){return[Math.atan2(a[1],a[0]),O(a[2])]}function Nb(a,b){return ih(a[0]-b[0])<Dh&&ih(a[1]-b[1])<Dh}function Ob(a,b){a*=Fh;var c=Math.cos(b*=Fh);Pb(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function Pb(a,b,c){++pi,ri+=(a-ri)/pi,si+=(b-si)/pi,ti+=(c-ti)/pi}function Qb(){function a(a,e){a*=Fh;var f=Math.cos(e*=Fh),g=f*Math.cos(a),h=f*Math.sin(a),i=Math.sin(e),j=Math.atan2(Math.sqrt((j=c*i-d*h)*j+(j=d*g-b*i)*j+(j=b*h-c*g)*j),b*g+c*h+d*i);qi+=j,ui+=j*(b+(b=g)),vi+=j*(c+(c=h)),wi+=j*(d+(d=i)),Pb(b,c,d)}var b,c,d;Ai.point=function(e,f){e*=Fh;var g=Math.cos(f*=Fh);b=g*Math.cos(e),c=g*Math.sin(e),d=Math.sin(f),Ai.point=a,Pb(b,c,d)}}function Rb(){Ai.point=Ob}function Sb(){function a(a,b){a*=Fh;var c=Math.cos(b*=Fh),g=c*Math.cos(a),h=c*Math.sin(a),i=Math.sin(b),j=e*i-f*h,k=f*g-d*i,l=d*h-e*g,m=Math.sqrt(j*j+k*k+l*l),n=d*g+e*h+f*i,o=m&&-N(n)/m,p=Math.atan2(m,n);xi+=o*j,yi+=o*k,zi+=o*l,qi+=p,ui+=p*(d+(d=g)),vi+=p*(e+(e=h)),wi+=p*(f+(f=i)),Pb(d,e,f)}var b,c,d,e,f;Ai.point=function(g,h){b=g,c=h,Ai.point=a,g*=Fh;var i=Math.cos(h*=Fh);d=i*Math.cos(g),e=i*Math.sin(g),f=Math.sin(h),Pb(d,e,f)},Ai.lineEnd=function(){a(b,c),Ai.lineEnd=Rb,Ai.point=Ob}}function Tb(){return!0}function Ub(a,b,c,d,e){var f=[],g=[];if(a.forEach(function(a){if(!((b=a.length-1)<=0)){var b,c=a[0],d=a[b];if(Nb(c,d)){e.lineStart();for(var h=0;b>h;++h)e.point((c=a[h])[0],c[1]);return void e.lineEnd()}var i=new Wb(c,a,null,!0),j=new Wb(c,null,i,!1);i.o=j,f.push(i),g.push(j),i=new Wb(d,a,null,!1),j=new Wb(d,null,i,!0),i.o=j,f.push(i),g.push(j)}}),g.sort(b),Vb(f),Vb(g),f.length){for(var h=0,i=c,j=g.length;j>h;++h)g[h].e=i=!i;for(var k,l,m=f[0];;){for(var n=m,o=!0;n.v;)if((n=n.n)===m)return;k=n.z,e.lineStart();do{if(n.v=n.o.v=!0,n.e){if(o)for(var h=0,j=k.length;j>h;++h)e.point((l=k[h])[0],l[1]);else d(n.x,n.n.x,1,e);n=n.n}else{if(o){k=n.p.z;for(var h=k.length-1;h>=0;--h)e.point((l=k[h])[0],l[1])}else d(n.x,n.p.x,-1,e);n=n.p}n=n.o,k=n.z,o=!o}while(!n.v);e.lineEnd()}}}function Vb(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.n=c=a[d],c.p=e,e=c;e.n=c=a[0],c.p=e}}function Wb(a,b,c,d){this.x=a,this.z=b,this.o=c,this.e=d,this.v=!1,this.n=this.p=null}function Xb(a,b,c,d){return function(e,f){function g(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function h(a,b){var c=e(a,b);q.point(c[0],c[1])}function i(){s.point=h,q.lineStart()}function j(){s.point=g,q.lineEnd()}function k(a,b){p.push([a,b]);var c=e(a,b);u.point(c[0],c[1])}function l(){u.lineStart(),p=[]}function m(){k(p[0][0],p[0][1]),u.lineEnd();var a,b=u.clean(),c=t.buffer(),d=c.length;if(p.pop(),o.push(p),p=null,d){if(1&b){a=c[0];var e,d=a.length-1,g=-1;for(f.lineStart();++g<d;)f.point((e=a[g])[0],e[1]);return void f.lineEnd()}d>1&&2&b&&c.push(c.pop().concat(c.shift())),n.push(c.filter(Yb))}}var n,o,p,q=b(f),r=e.invert(d[0],d[1]),s={point:g,lineStart:i,lineEnd:j,polygonStart:function(){s.point=k,s.lineStart=l,s.lineEnd=m,n=[],o=[],f.polygonStart()},polygonEnd:function(){s.point=g,s.lineStart=i,s.lineEnd=j,n=Wg.merge(n);var a=_b(r,o);n.length?Ub(n,$b,a,c,f):a&&(f.lineStart(),c(null,null,1,f),f.lineEnd()),f.polygonEnd(),n=o=null},sphere:function(){f.polygonStart(),f.lineStart(),c(null,null,1,f),f.lineEnd(),f.polygonEnd()}},t=Zb(),u=b(t);return s}}function Yb(a){return a.length>1}function Zb(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:i,buffer:function(){var c=b;return b=[],a=null,c},rejoin:function(){b.length>1&&b.push(b.pop().concat(b.shift()))}}}function $b(a,b){return((a=a.x)[0]<0?a[1]-Ch-Dh:Ch-a[1])-((b=b.x)[0]<0?b[1]-Ch-Dh:Ch-b[1])}function _b(a,b){var c=a[0],d=a[1],e=[Math.sin(c),-Math.cos(c),0],f=0,g=0;ni.reset();for(var h=0,i=b.length;i>h;++h){var j=b[h],k=j.length;if(k)for(var l=j[0],m=l[0],n=l[1]/2+Ah/4,o=Math.sin(n),p=Math.cos(n),q=1;;){q===k&&(q=0),a=j[q];var r=a[0],s=a[1]/2+Ah/4,t=Math.sin(s),u=Math.cos(s),v=r-m,w=ih(v)>Ah,x=o*t;if(ni.add(Math.atan2(x*Math.sin(v),p*u+x*Math.cos(v))),f+=w?v+(v>=0?Bh:-Bh):v,w^m>=c^r>=c){var y=Ib(Gb(l),Gb(a));Lb(y);var z=Ib(e,y);Lb(z);var A=(w^v>=0?-1:1)*O(z[2]);(d>A||d===A&&(y[0]||y[1]))&&(g+=w^v>=0?1:-1)}if(!q++)break;m=r,o=t,p=u,l=a}}return(-Dh>f||Dh>f&&0>ni)^1&g}function ac(a){var b,c=0/0,d=0/0,e=0/0;return{lineStart:function(){a.lineStart(),b=1},point:function(f,g){var h=f>0?Ah:-Ah,i=ih(f-c);ih(i-Ah)<Dh?(a.point(c,d=(d+g)/2>0?Ch:-Ch),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0):e!==h&&i>=Ah&&(ih(c-e)<Dh&&(c-=e*Dh),ih(f-h)<Dh&&(f-=h*Dh),d=bc(c,d,f,g),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),b=0),a.point(c=f,d=g),e=h},lineEnd:function(){a.lineEnd(),c=d=0/0},clean:function(){return 2-b}}}function bc(a,b,c,d){var e,f,g=Math.sin(a-c);return ih(g)>Dh?Math.atan((Math.sin(b)*(f=Math.cos(d))*Math.sin(c)-Math.sin(d)*(e=Math.cos(b))*Math.sin(a))/(e*f*g)):(b+d)/2}function cc(a,b,c,d){var e;if(null==a)e=c*Ch,d.point(-Ah,e),d.point(0,e),d.point(Ah,e),d.point(Ah,0),d.point(Ah,-e),d.point(0,-e),d.point(-Ah,-e),d.point(-Ah,0),d.point(-Ah,e);else if(ih(a[0]-b[0])>Dh){var f=a[0]<b[0]?Ah:-Ah;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])}function dc(a){function b(a,b){return Math.cos(a)*Math.cos(b)>f}function c(a){var c,f,i,j,k;return{lineStart:function(){j=i=!1,k=1},point:function(l,m){var n,o=[l,m],p=b(l,m),q=g?p?0:e(l,m):p?e(l+(0>l?Ah:-Ah),m):0;if(!c&&(j=i=p)&&a.lineStart(),p!==i&&(n=d(c,o),(Nb(c,n)||Nb(o,n))&&(o[0]+=Dh,o[1]+=Dh,p=b(o[0],o[1]))),p!==i)k=0,p?(a.lineStart(),n=d(o,c),a.point(n[0],n[1])):(n=d(c,o),a.point(n[0],n[1]),a.lineEnd()),c=n;else if(h&&c&&g^p){var r;q&f||!(r=d(o,c,!0))||(k=0,g?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!p||c&&Nb(c,o)||a.point(o[0],o[1]),c=o,i=p,f=q},lineEnd:function(){i&&a.lineEnd(),c=null},clean:function(){return k|(j&&i)<<1}}}function d(a,b,c){var d=Gb(a),e=Gb(b),g=[1,0,0],h=Ib(d,e),i=Hb(h,h),j=h[0],k=i-j*j;if(!k)return!c&&a;var l=f*i/k,m=-f*j/k,n=Ib(g,h),o=Kb(g,l),p=Kb(h,m);Jb(o,p);var q=n,r=Hb(o,q),s=Hb(q,q),t=r*r-s*(Hb(o,o)-1);if(!(0>t)){var u=Math.sqrt(t),v=Kb(q,(-r-u)/s);if(Jb(v,o),v=Mb(v),!c)return v;var w,x=a[0],y=b[0],z=a[1],A=b[1];x>y&&(w=x,x=y,y=w);var B=y-x,C=ih(B-Ah)<Dh,D=C||Dh>B;if(!C&&z>A&&(w=z,z=A,A=w),D?C?z+A>0^v[1]<(ih(v[0]-x)<Dh?z:A):z<=v[1]&&v[1]<=A:B>Ah^(x<=v[0]&&v[0]<=y)){var E=Kb(q,(-r+u)/s);return Jb(E,o),[v,Mb(E)]}}}function e(b,c){var d=g?a:Ah-a,e=0;return-d>b?e|=1:b>d&&(e|=2),-d>c?e|=4:c>d&&(e|=8),e}var f=Math.cos(a),g=f>0,h=ih(f)>Dh,i=Fc(a,6*Fh);return Xb(b,c,i,g?[0,-a]:[-Ah,a-Ah])}function ec(a,b,c,d){return function(e){var f,g=e.a,h=e.b,i=g.x,j=g.y,k=h.x,l=h.y,m=0,n=1,o=k-i,p=l-j;if(f=a-i,o||!(f>0)){if(f/=o,0>o){if(m>f)return;n>f&&(n=f)}else if(o>0){if(f>n)return;f>m&&(m=f)}if(f=c-i,o||!(0>f)){if(f/=o,0>o){if(f>n)return;f>m&&(m=f)}else if(o>0){if(m>f)return;n>f&&(n=f)}if(f=b-j,p||!(f>0)){if(f/=p,0>p){if(m>f)return;n>f&&(n=f)}else if(p>0){if(f>n)return;f>m&&(m=f)}if(f=d-j,p||!(0>f)){if(f/=p,0>p){if(f>n)return;f>m&&(m=f)}else if(p>0){if(m>f)return;n>f&&(n=f)}return m>0&&(e.a={x:i+m*o,y:j+m*p}),1>n&&(e.b={x:i+n*o,y:j+n*p}),e}}}}}}function fc(a,b,c,d){function e(d,e){return ih(d[0]-a)<Dh?e>0?0:3:ih(d[0]-c)<Dh?e>0?2:1:ih(d[1]-b)<Dh?e>0?1:0:e>0?3:2}function f(a,b){return g(a.x,b.x)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(h){function i(a){for(var b=0,c=r.length,d=a[1],e=0;c>e;++e)for(var f,g=1,h=r[e],i=h.length,k=h[0];i>g;++g)f=h[g],k[1]<=d?f[1]>d&&j(k,f,a)>0&&++b:f[1]<=d&&j(k,f,a)<0&&--b,k=f;return 0!==b}function j(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(c[0]-a[0])*(b[1]-a[1])}function k(f,h,i,j){var k=0,l=0;if(null==f||(k=e(f,i))!==(l=e(h,i))||g(f,h)<0^i>0){do j.point(0===k||3===k?a:c,k>1?d:b);while((k=(k+i+4)%4)!==l)}else j.point(h[0],h[1])}function l(e,f){return e>=a&&c>=e&&f>=b&&d>=f}function m(a,b){l(a,b)&&h.point(a,b)}function n(){E.point=p,r&&r.push(s=[]),z=!0,y=!1,w=x=0/0}function o(){q&&(p(t,u),v&&y&&C.rejoin(),q.push(C.buffer())),E.point=m,y&&h.lineEnd()}function p(a,b){a=Math.max(-Ci,Math.min(Ci,a)),b=Math.max(-Ci,Math.min(Ci,b));var c=l(a,b);if(r&&s.push([a,b]),z)t=a,u=b,v=c,z=!1,c&&(h.lineStart(),h.point(a,b));else if(c&&y)h.point(a,b);else{var d={a:{x:w,y:x},b:{x:a,y:b}};D(d)?(y||(h.lineStart(),h.point(d.a.x,d.a.y)),h.point(d.b.x,d.b.y),c||h.lineEnd(),A=!1):c&&(h.lineStart(),h.point(a,b),A=!1)}w=a,x=b,y=c}var q,r,s,t,u,v,w,x,y,z,A,B=h,C=Zb(),D=ec(a,b,c,d),E={point:m,lineStart:n,lineEnd:o,polygonStart:function(){h=C,q=[],r=[],A=!0},polygonEnd:function(){h=B,q=Wg.merge(q);var b=i([a,d]),c=A&&b,e=q.length;(c||e)&&(h.polygonStart(),c&&(h.lineStart(),k(null,null,1,h),h.lineEnd()),e&&Ub(q,f,b,k,h),h.polygonEnd()),q=r=s=null}};return E}}function gc(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])}),c}function hc(a){var b=0,c=Ah/3,d=xc(a),e=d(b,c);return e.parallels=function(a){return arguments.length?d(b=a[0]*Ah/180,c=a[1]*Ah/180):[b/Ah*180,c/Ah*180]},e}function ic(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),g-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;return c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,O((f-(a*a+c*c)*e*e)/(2*e))]},c}function jc(){function a(a,b){Ei+=e*a-d*b,d=a,e=b}var b,c,d,e;Ji.point=function(f,g){Ji.point=a,b=d=f,c=e=g},Ji.lineEnd=function(){a(b,c)}}function kc(a,b){Fi>a&&(Fi=a),a>Hi&&(Hi=a),Gi>b&&(Gi=b),b>Ii&&(Ii=b)}function lc(){function a(a,b){g.push("M",a,",",b,f)}function b(a,b){g.push("M",a,",",b),h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}var f=mc(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d,h.point=a},pointRadius:function(a){return f=mc(a),h},result:function(){if(g.length){var a=g.join("");return g=[],a}}};return h}function mc(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function nc(a,b){ri+=a,si+=b,++ti}function oc(){function a(a,d){var e=a-b,f=d-c,g=Math.sqrt(e*e+f*f);ui+=g*(b+a)/2,vi+=g*(c+d)/2,wi+=g,nc(b=a,c=d)}var b,c;Li.point=function(d,e){Li.point=a,nc(b=d,c=e)}}function pc(){Li.point=nc}function qc(){function a(a,b){var c=a-d,f=b-e,g=Math.sqrt(c*c+f*f);ui+=g*(d+a)/2,vi+=g*(e+b)/2,wi+=g,g=e*a-d*b,xi+=g*(d+a),yi+=g*(e+b),zi+=3*g,nc(d=a,e=b)}var b,c,d,e;Li.point=function(f,g){Li.point=a,nc(b=d=f,c=e=g)},Li.lineEnd=function(){a(b,c)}}function rc(a){function b(b,c){a.moveTo(b,c),a.arc(b,c,g,0,Bh)}function c(b,c){a.moveTo(b,c),h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function f(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e,h.point=b},pointRadius:function(a){return g=a,h},result:i};return h}function sc(a){function b(a){return(h?d:c)(a)}function c(b){return vc(b,function(c,d){c=a(c,d),b.point(c[0],c[1])})}function d(b){function c(c,d){c=a(c,d),b.point(c[0],c[1])}function d(){t=0/0,y.point=f,b.lineStart()}function f(c,d){var f=Gb([c,d]),g=a(c,d);e(t,u,s,v,w,x,t=g[0],u=g[1],s=c,v=f[0],w=f[1],x=f[2],h,b),b.point(t,u)}function g(){y.point=c,b.lineEnd()}function i(){d(),y.point=j,y.lineEnd=k}function j(a,b){f(l=a,m=b),n=t,o=u,p=v,q=w,r=x,y.point=f}function k(){e(t,u,s,v,w,x,n,o,l,p,q,r,h,b),y.lineEnd=g,g()}var l,m,n,o,p,q,r,s,t,u,v,w,x,y={point:c,lineStart:d,lineEnd:g,polygonStart:function(){b.polygonStart(),y.lineStart=i},polygonEnd:function(){b.polygonEnd(),y.lineStart=d}};return y}function e(b,c,d,h,i,j,k,l,m,n,o,p,q,r){var s=k-b,t=l-c,u=s*s+t*t;if(u>4*f&&q--){var v=h+n,w=i+o,x=j+p,y=Math.sqrt(v*v+w*w+x*x),z=Math.asin(x/=y),A=ih(ih(x)-1)<Dh||ih(d-m)<Dh?(d+m)/2:Math.atan2(w,v),B=a(A,z),C=B[0],D=B[1],E=C-b,F=D-c,G=t*E-s*F;(G*G/u>f||ih((s*E+t*F)/u-.5)>.3||g>h*n+i*o+j*p)&&(e(b,c,d,h,i,j,C,D,A,v/=y,w/=y,x,q,r),r.point(C,D),e(C,D,A,v,w,x,k,l,m,n,o,p,q,r))}}var f=.5,g=Math.cos(30*Fh),h=16;return b.precision=function(a){return arguments.length?(h=(f=a*a)>0&&16,b):Math.sqrt(f)},b}function tc(a){var b=sc(function(b,c){return a([b*Gh,c*Gh])});return function(a){return yc(b(a))}}function uc(a){this.stream=a}function vc(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function wc(a){return xc(function(){return a})()}function xc(a){function b(a){return a=h(a[0]*Fh,a[1]*Fh),[a[0]*m+i,j-a[1]*m]}function c(a){return a=h.invert((a[0]-i)/m,(j-a[1])/m),a&&[a[0]*Gh,a[1]*Gh]}function d(){h=gc(g=Bc(r,s,t),f);var a=f(p,q);return i=n-a[0]*m,j=o+a[1]*m,e()}function e(){return k&&(k.valid=!1,k=null),b}var f,g,h,i,j,k,l=sc(function(a,b){return a=f(a,b),[a[0]*m+i,j-a[1]*m]}),m=150,n=480,o=250,p=0,q=0,r=0,s=0,t=0,u=Bi,v=qb,w=null,x=null;return b.stream=function(a){return k&&(k.valid=!1),k=yc(u(g,l(v(a)))),k.valid=!0,k},b.clipAngle=function(a){return arguments.length?(u=null==a?(w=a,Bi):dc((w=+a)*Fh),e()):w},b.clipExtent=function(a){return arguments.length?(x=a,v=a?fc(a[0][0],a[0][1],a[1][0],a[1][1]):qb,e()):x},b.scale=function(a){return arguments.length?(m=+a,d()):m},b.translate=function(a){return arguments.length?(n=+a[0],o=+a[1],d()):[n,o]},b.center=function(a){return arguments.length?(p=a[0]%360*Fh,q=a[1]%360*Fh,d()):[p*Gh,q*Gh]},b.rotate=function(a){return arguments.length?(r=a[0]%360*Fh,s=a[1]%360*Fh,t=a.length>2?a[2]%360*Fh:0,d()):[r*Gh,s*Gh,t*Gh]},Wg.rebind(b,l,"precision"),function(){return f=a.apply(this,arguments),b.invert=f.invert&&c,d()}}function yc(a){return vc(a,function(b,c){a.point(b*Fh,c*Fh)})}function zc(a,b){return[a,b]}function Ac(a,b){return[a>Ah?a-Bh:-Ah>a?a+Bh:a,b]}function Bc(a,b,c){return a?b||c?gc(Dc(a),Ec(b,c)):Dc(a):b||c?Ec(b,c):Ac}function Cc(a){return function(b,c){return b+=a,[b>Ah?b-Bh:-Ah>b?b+Bh:b,c]}}function Dc(a){var b=Cc(a);return b.invert=Cc(-a),b}function Ec(a,b){function c(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*d+h*e;return[Math.atan2(i*f-k*g,h*d-j*e),O(k*f+i*g)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*f-i*g;return[Math.atan2(i*f+j*g,h*d+k*e),O(k*d-h*e)]},c}function Fc(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){var i=g*b;null!=e?(e=Gc(c,e),f=Gc(c,f),(g>0?f>e:e>f)&&(e+=g*Bh)):(e=a+g*Bh,f=a-.5*i);for(var j,k=e;g>0?k>f:f>k;k-=i)h.point((j=Mb([c,-d*Math.cos(k),-d*Math.sin(k)]))[0],j[1])}}function Gc(a,b){var c=Gb(b);c[0]-=a,Lb(c);var d=N(-c[1]);return((-c[2]<0?-d:d)+2*Math.PI-Dh)%(2*Math.PI)}function Hc(a,b,c){var d=Wg.range(a,b-Dh,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function Ic(a,b,c){var d=Wg.range(a,b-Dh,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function Jc(a){return a.source}function Kc(a){return a.target}function Lc(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),h=Math.sin(d),i=e*Math.cos(a),j=e*Math.sin(a),k=g*Math.cos(c),l=g*Math.sin(c),m=2*Math.asin(Math.sqrt(S(d-b)+e*g*S(c-a))),n=1/Math.sin(m),o=m?function(a){var b=Math.sin(a*=m)*n,c=Math.sin(m-a)*n,d=c*i+b*k,e=c*j+b*l,g=c*f+b*h;return[Math.atan2(e,d)*Gh,Math.atan2(g,Math.sqrt(d*d+e*e))*Gh]}:function(){return[a*Gh,b*Gh]};return o.distance=m,o}function Mc(){function a(a,e){var f=Math.sin(e*=Fh),g=Math.cos(e),h=ih((a*=Fh)-b),i=Math.cos(h);Mi+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=d*f-c*g*i)*h),c*f+d*g*i),b=a,c=f,d=g}var b,c,d;Ni.point=function(e,f){b=e*Fh,c=Math.sin(f*=Fh),d=Math.cos(f),Ni.point=a},Ni.lineEnd=function(){Ni.point=Ni.lineEnd=i}}function Nc(a,b){function c(b,c){var d=Math.cos(b),e=Math.cos(c),f=a(d*e);return[f*e*Math.sin(b),f*Math.sin(c)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),g=Math.cos(e);
return[Math.atan2(a*f,d*g),Math.asin(d&&c*f/d)]},c}function Oc(a,b){function c(a,b){var c=ih(ih(b)-Ch)<Dh?0:g/Math.pow(e(b),f);return[c*Math.sin(f*a),g-c*Math.cos(f*a)]}var d=Math.cos(a),e=function(a){return Math.tan(Ah/4+a/2)},f=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(e(b)/e(a)),g=d*Math.pow(e(a),f)/f;return f?(c.invert=function(a,b){var c=g-b,d=M(f)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/f,2*Math.atan(Math.pow(g/d,1/f))-Ch]},c):Qc}function Pc(a,b){function c(a,b){var c=f-b;return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;return ih(e)<Dh?zc:(c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-M(e)*Math.sqrt(a*a+c*c)]},c)}function Qc(a,b){return[a,Math.log(Math.tan(Ah/4+b/2))]}function Rc(a){var b,c=wc(a),d=c.scale,e=c.translate,f=c.clipExtent;return c.scale=function(){var a=d.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.translate=function(){var a=e.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.clipExtent=function(a){var g=f.apply(c,arguments);if(g===c){if(b=null==a){var h=Ah*d(),i=e();f([[i[0]-h,i[1]-h],[i[0]+h,i[1]+h]])}}else b&&(g=null);return g},c.clipExtent(null)}function Sc(a,b){return[Math.log(Math.tan(Ah/4+b/2)),-a]}function Tc(a){return a[0]}function Uc(a){return a[1]}function Vc(a,b,c,d){var e,f,g,h,i,j,k;return e=d[a],f=e[0],g=e[1],e=d[b],h=e[0],i=e[1],e=d[c],j=e[0],k=e[1],(k-g)*(h-f)-(i-g)*(j-f)>0}function Wc(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Xc(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f,i=a[1],j=c[1],k=b[1]-i,l=d[1]-j,m=(h*(i-j)-l*(e-f))/(l*g-h*k);return[e+m*g,i+m*k]}function Yc(a){var b=a[0],c=a[a.length-1];return!(b[0]-c[0]||b[1]-c[1])}function Zc(){sd(this),this.edge=this.site=this.circle=null}function $c(a){var b=Zi.pop()||new Zc;return b.site=a,b}function _c(a){jd(a),Wi.remove(a),Zi.push(a),sd(a)}function ad(a){var b=a.circle,c=b.x,d=b.cy,e={x:c,y:d},f=a.P,g=a.N,h=[a];_c(a);for(var i=f;i.circle&&ih(c-i.circle.x)<Dh&&ih(d-i.circle.cy)<Dh;)f=i.P,h.unshift(i),_c(i),i=f;h.unshift(i),jd(i);for(var j=g;j.circle&&ih(c-j.circle.x)<Dh&&ih(d-j.circle.cy)<Dh;)g=j.N,h.push(j),_c(j),j=g;h.push(j),jd(j);var k,l=h.length;for(k=1;l>k;++k)j=h[k],i=h[k-1],pd(j.edge,i.site,j.site,e);i=h[0],j=h[l-1],j.edge=nd(i.site,j.site,null,e),id(i),id(j)}function bd(a){for(var b,c,d,e,f=a.x,g=a.y,h=Wi._;h;)if(d=cd(h,g)-f,d>Dh)h=h.L;else{if(e=f-dd(h,g),!(e>Dh)){d>-Dh?(b=h.P,c=h):e>-Dh?(b=h,c=h.N):b=c=h;break}if(!h.R){b=h;break}h=h.R}var i=$c(a);if(Wi.insert(b,i),b||c){if(b===c)return jd(b),c=$c(b.site),Wi.insert(i,c),i.edge=c.edge=nd(b.site,i.site),id(b),void id(c);if(!c)return void(i.edge=nd(b.site,i.site));jd(b),jd(c);var j=b.site,k=j.x,l=j.y,m=a.x-k,n=a.y-l,o=c.site,p=o.x-k,q=o.y-l,r=2*(m*q-n*p),s=m*m+n*n,t=p*p+q*q,u={x:(q*s-n*t)/r+k,y:(m*t-p*s)/r+l};pd(c.edge,j,o,u),i.edge=nd(j,a,null,u),c.edge=nd(a,o,null,u),id(b),id(c)}}function cd(a,b){var c=a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var g=a.P;if(!g)return-1/0;c=g.site;var h=c.x,i=c.y,j=i-b;if(!j)return h;var k=h-d,l=1/f-1/j,m=k/j;return l?(-m+Math.sqrt(m*m-2*l*(k*k/(-2*j)-i+j/2+e-f/2)))/l+d:(d+h)/2}function dd(a,b){var c=a.N;if(c)return cd(c,b);var d=a.site;return d.y===b?d.x:1/0}function ed(a){this.site=a,this.edges=[]}function fd(a){for(var b,c,d,e,f,g,h,i,j,k,l=a[0][0],m=a[1][0],n=a[0][1],o=a[1][1],p=Vi,q=p.length;q--;)if(f=p[q],f&&f.prepare())for(h=f.edges,i=h.length,g=0;i>g;)k=h[g].end(),d=k.x,e=k.y,j=h[++g%i].start(),b=j.x,c=j.y,(ih(d-b)>Dh||ih(e-c)>Dh)&&(h.splice(g,0,new qd(od(f.site,k,ih(d-l)<Dh&&o-e>Dh?{x:l,y:ih(b-l)<Dh?c:o}:ih(e-o)<Dh&&m-d>Dh?{x:ih(c-o)<Dh?b:m,y:o}:ih(d-m)<Dh&&e-n>Dh?{x:m,y:ih(b-m)<Dh?c:n}:ih(e-n)<Dh&&d-l>Dh?{x:ih(c-n)<Dh?b:l,y:n}:null),f.site,null)),++i)}function gd(a,b){return b.angle-a.angle}function hd(){sd(this),this.x=this.y=this.arc=this.site=this.cy=null}function id(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,e=a.site,f=c.site;if(d!==f){var g=e.x,h=e.y,i=d.x-g,j=d.y-h,k=f.x-g,l=f.y-h,m=2*(i*l-j*k);if(!(m>=-Eh)){var n=i*i+j*j,o=k*k+l*l,p=(l*n-j*o)/m,q=(i*o-k*n)/m,l=q+h,r=$i.pop()||new hd;r.arc=a,r.site=e,r.x=p+g,r.y=l+Math.sqrt(p*p+q*q),r.cy=l,a.circle=r;for(var s=null,t=Yi._;t;)if(r.y<t.y||r.y===t.y&&r.x<=t.x){if(!t.L){s=t.P;break}t=t.L}else{if(!t.R){s=t;break}t=t.R}Yi.insert(s,r),s||(Xi=r)}}}}function jd(a){var b=a.circle;b&&(b.P||(Xi=b.N),Yi.remove(b),$i.push(b),sd(b),a.circle=null)}function kd(a){for(var b,c=Ui,d=ec(a[0][0],a[0][1],a[1][0],a[1][1]),e=c.length;e--;)b=c[e],(!ld(b,a)||!d(b)||ih(b.a.x-b.b.x)<Dh&&ih(b.a.y-b.b.y)<Dh)&&(b.a=b.b=null,c.splice(e,1))}function ld(a,b){var c=a.b;if(c)return!0;var d,e,f=a.a,g=b[0][0],h=b[1][0],i=b[0][1],j=b[1][1],k=a.l,l=a.r,m=k.x,n=k.y,o=l.x,p=l.y,q=(m+o)/2,r=(n+p)/2;if(p===n){if(g>q||q>=h)return;if(m>o){if(f){if(f.y>=j)return}else f={x:q,y:i};c={x:q,y:j}}else{if(f){if(f.y<i)return}else f={x:q,y:j};c={x:q,y:i}}}else if(d=(m-o)/(p-n),e=r-d*q,-1>d||d>1)if(m>o){if(f){if(f.y>=j)return}else f={x:(i-e)/d,y:i};c={x:(j-e)/d,y:j}}else{if(f){if(f.y<i)return}else f={x:(j-e)/d,y:j};c={x:(i-e)/d,y:i}}else if(p>n){if(f){if(f.x>=h)return}else f={x:g,y:d*g+e};c={x:h,y:d*h+e}}else{if(f){if(f.x<g)return}else f={x:h,y:d*h+e};c={x:g,y:d*g+e}}return a.a=f,a.b=c,!0}function md(a,b){this.l=a,this.r=b,this.a=this.b=null}function nd(a,b,c,d){var e=new md(a,b);return Ui.push(e),c&&pd(e,a,b,c),d&&pd(e,b,a,d),Vi[a.i].edges.push(new qd(e,a,b)),Vi[b.i].edges.push(new qd(e,b,a)),e}function od(a,b,c){var d=new md(a,null);return d.a=b,d.b=c,Ui.push(d),d}function pd(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function qd(a,b,c){var d=a.a,e=a.b;this.edge=a,this.site=b,this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function rd(){this._=null}function sd(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function td(a,b){var c=b,d=b.R,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.R=d.L,c.R&&(c.R.U=c),d.L=c}function ud(a,b){var c=b,d=b.L,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.L=d.R,c.L&&(c.L.U=c),d.R=c}function vd(a){for(;a.L;)a=a.L;return a}function wd(a,b){var c,d,e,f=a.sort(xd).pop();for(Ui=[],Vi=new Array(a.length),Wi=new rd,Yi=new rd;;)if(e=Xi,f&&(!e||f.y<e.y||f.y===e.y&&f.x<e.x))(f.x!==c||f.y!==d)&&(Vi[f.i]=new ed(f),bd(f),c=f.x,d=f.y),f=a.pop();else{if(!e)break;ad(e.arc)}b&&(kd(b),fd(b));var g={cells:Vi,edges:Ui};return Wi=Yi=Ui=Vi=null,g}function xd(a,b){return b.y-a.y||b.x-a.x}function yd(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}function zd(a){return a.x}function Ad(a){return a.y}function Bd(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Cd(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f),i=b.nodes;i[0]&&Cd(a,i[0],c,d,g,h),i[1]&&Cd(a,i[1],g,d,e,h),i[2]&&Cd(a,i[2],c,h,g,f),i[3]&&Cd(a,i[3],g,h,e,f)}}function Dd(a,b){a=Wg.rgb(a),b=Wg.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+jb(Math.round(c+f*a))+jb(Math.round(d+g*a))+jb(Math.round(e+h*a))}}function Ed(a,b){var c,d={},e={};for(c in a)c in b?d[c]=Hd(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}}function Fd(a,b){return b-=a=+a,function(c){return a+b*c}}function Gd(a,b){var c,d,e,f,g,h=0,i=0,j=[],k=[];for(a+="",b+="",aj.lastIndex=0,d=0;c=aj.exec(b);++d)c.index&&j.push(b.substring(h,i=c.index)),k.push({i:j.length,x:c[0]}),j.push(null),h=aj.lastIndex;for(h<b.length&&j.push(b.substring(h)),d=0,f=k.length;(c=aj.exec(a))&&f>d;++d)if(g=k[d],g.x==c[0]){if(g.i)if(null==j[g.i+1])for(j[g.i-1]+=g.x,j.splice(g.i,1),e=d+1;f>e;++e)k[e].i--;else for(j[g.i-1]+=g.x+j[g.i+1],j.splice(g.i,2),e=d+1;f>e;++e)k[e].i-=2;else if(null==j[g.i+1])j[g.i]=g.x;else for(j[g.i]=g.x+j[g.i+1],j.splice(g.i+1,1),e=d+1;f>e;++e)k[e].i--;k.splice(d,1),f--,d--}else g.x=Fd(parseFloat(c[0]),parseFloat(g.x));for(;f>d;)g=k.pop(),null==j[g.i+1]?j[g.i]=g.x:(j[g.i]=g.x+j[g.i+1],j.splice(g.i+1,1)),f--;return 1===j.length?null==j[0]?(g=k[0].x,function(a){return g(a)+""}):function(){return b}:function(a){for(d=0;f>d;++d)j[(g=k[d]).i]=g.x(a);return j.join("")}}function Hd(a,b){for(var c,d=Wg.interpolators.length;--d>=0&&!(c=Wg.interpolators[d](a,b)););return c}function Id(a,b){var c,d=[],e=[],f=a.length,g=b.length,h=Math.min(a.length,b.length);for(c=0;h>c;++c)d.push(Hd(a[c],b[c]));for(;f>c;++c)e[c]=a[c];for(;g>c;++c)e[c]=b[c];return function(a){for(c=0;h>c;++c)e[c]=d[c](a);return e}}function Jd(a){return function(b){return 0>=b?0:b>=1?1:a(b)}}function Kd(a){return function(b){return 1-a(1-b)}}function Ld(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function Md(a){return a*a}function Nd(a){return a*a*a}function Od(a){if(0>=a)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(.5>a?c:3*(a-b)+c-.75)}function Pd(a){return function(b){return Math.pow(b,a)}}function Qd(a){return 1-Math.cos(a*Ch)}function Rd(a){return Math.pow(2,10*(a-1))}function Sd(a){return 1-Math.sqrt(1-a*a)}function Td(a,b){var c;return arguments.length<2&&(b=.45),arguments.length?c=b/Bh*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*Bh/b)}}function Ud(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function Vd(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function Wd(a,b){a=Wg.hcl(a),b=Wg.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.c:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:-180>f&&(f+=360),function(a){return Z(c+f*a,d+g*a,e+h*a)+""}}function Xd(a,b){a=Wg.hsl(a),b=Wg.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.s:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:-180>f&&(f+=360),function(a){return W(c+f*a,d+g*a,e+h*a)+""}}function Yd(a,b){a=Wg.lab(a),b=Wg.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return ab(c+f*a,d+g*a,e+h*a)+""}}function Zd(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function $d(a){var b=[a.a,a.b],c=[a.c,a.d],d=ae(b),e=_d(b,c),f=ae(be(c,b,-e))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1),this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Gh,this.translate=[a.e,a.f],this.scale=[d,f],this.skew=f?Math.atan2(e,f)*Gh:0}function _d(a,b){return a[0]*b[0]+a[1]*b[1]}function ae(a){var b=Math.sqrt(_d(a,a));return b&&(a[0]/=b,a[1]/=b),b}function be(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function ce(a,b){var c,d=[],e=[],f=Wg.transform(a),g=Wg.transform(b),h=f.translate,i=g.translate,j=f.rotate,k=g.rotate,l=f.skew,m=g.skew,n=f.scale,o=g.scale;return h[0]!=i[0]||h[1]!=i[1]?(d.push("translate(",null,",",null,")"),e.push({i:1,x:Fd(h[0],i[0])},{i:3,x:Fd(h[1],i[1])})):d.push(i[0]||i[1]?"translate("+i+")":""),j!=k?(j-k>180?k+=360:k-j>180&&(j+=360),e.push({i:d.push(d.pop()+"rotate(",null,")")-2,x:Fd(j,k)})):k&&d.push(d.pop()+"rotate("+k+")"),l!=m?e.push({i:d.push(d.pop()+"skewX(",null,")")-2,x:Fd(l,m)}):m&&d.push(d.pop()+"skewX("+m+")"),n[0]!=o[0]||n[1]!=o[1]?(c=d.push(d.pop()+"scale(",null,",",null,")"),e.push({i:c-4,x:Fd(n[0],o[0])},{i:c-2,x:Fd(n[1],o[1])})):(1!=o[0]||1!=o[1])&&d.push(d.pop()+"scale("+o+")"),c=e.length,function(a){for(var b,f=-1;++f<c;)d[(b=e[f]).i]=b.x(a);return d.join("")}}function de(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return(c-a)*b}}function ee(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return Math.max(0,Math.min(1,(c-a)*b))}}function fe(a){for(var b=a.source,c=a.target,d=he(b,c),e=[b];b!==d;)b=b.parent,e.push(b);for(var f=e.length;c!==d;)e.splice(f,0,c),c=c.parent;return e}function ge(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function he(a,b){if(a===b)return a;for(var c=ge(a),d=ge(b),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();return g}function ie(a){a.fixed|=2}function je(a){a.fixed&=-7}function ke(a){a.fixed|=4,a.px=a.x,a.py=a.y}function le(a){a.fixed&=-5}function me(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,g=a.nodes,h=g.length,i=-1;++i<h;)f=g[i],null!=f&&(me(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);if(a.point){a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5);var j=b*c[a.point.index];a.charge+=a.pointCharge=j,d+=j*a.point.x,e+=j*a.point.y}a.cx=d/a.charge,a.cy=e/a.charge}function ne(a,b){return Wg.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=re,a}function oe(a){return a.children}function pe(a){return a.value}function qe(a,b){return b.value-a.value}function re(a){return Wg.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function se(a){return a.x}function te(a){return a.y}function ue(a,b,c){a.y0=b,a.y=c}function ve(a){return Wg.range(a.length)}function we(a){for(var b=-1,c=a[0].length,d=[];++b<c;)d[b]=0;return d}function xe(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;f>c;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function ye(a){return a.reduce(ze,0)}function ze(a,b){return a+b[1]}function Ae(a,b){return Be(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function Be(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function Ce(a){return[Wg.min(a),Wg.max(a)]}function De(a,b){return a.parent==b.parent?1:2}function Ee(a){var b=a.children;return b&&b.length?b[0]:a._tree.thread}function Fe(a){var b,c=a.children;return c&&(b=c.length)?c[b-1]:a._tree.thread}function Ge(a,b){var c=a.children;if(c&&(e=c.length))for(var d,e,f=-1;++f<e;)b(d=Ge(c[f],b),a)>0&&(a=d);return a}function He(a,b){return a.x-b.x}function Ie(a,b){return b.x-a.x}function Je(a,b){return a.depth-b.depth}function Ke(a,b){function c(a,d){var e=a.children;if(e&&(g=e.length))for(var f,g,h=null,i=-1;++i<g;)f=e[i],c(f,h),h=f;b(a,d)}c(a,null)}function Le(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)b=e[f]._tree,b.prelim+=c,b.mod+=c,c+=b.shift+(d+=b.change)}function Me(a,b,c){a=a._tree,b=b._tree;var d=c/(b.number-a.number);a.change+=d,b.change-=d,b.shift+=c,b.prelim+=c,b.mod+=c}function Ne(a,b,c){return a._tree.ancestor.parent==b.parent?a._tree.ancestor:c}function Oe(a,b){return a.value-b.value}function Pe(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function Qe(a,b){a._pack_next=b,b._pack_prev=a}function Re(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function Se(a){function b(a){k=Math.min(a.x-a.r,k),l=Math.max(a.x+a.r,l),m=Math.min(a.y-a.r,m),n=Math.max(a.y+a.r,n)}if((c=a.children)&&(j=c.length)){var c,d,e,f,g,h,i,j,k=1/0,l=-1/0,m=1/0,n=-1/0;if(c.forEach(Te),d=c[0],d.x=-d.r,d.y=0,b(d),j>1&&(e=c[1],e.x=e.r,e.y=0,b(e),j>2))for(f=c[2],We(d,e,f),b(f),Pe(d,f),d._pack_prev=f,Pe(f,e),e=d._pack_next,g=3;j>g;g++){We(d,e,f=c[g]);var o=0,p=1,q=1;for(h=e._pack_next;h!==e;h=h._pack_next,p++)if(Re(h,f)){o=1;break}if(1==o)for(i=d._pack_prev;i!==h._pack_prev&&!Re(i,f);i=i._pack_prev,q++);o?(q>p||p==q&&e.r<d.r?Qe(d,e=h):Qe(d=i,e),g--):(Pe(d,f),e=f,b(f))}var r=(k+l)/2,s=(m+n)/2,t=0;for(g=0;j>g;g++)f=c[g],f.x-=r,f.y-=s,t=Math.max(t,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=t,c.forEach(Ue)}}function Te(a){a._pack_next=a._pack_prev=a}function Ue(a){delete a._pack_next,delete a._pack_prev}function Ve(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e)for(var f=-1,g=e.length;++f<g;)Ve(e[f],b,c,d)}function We(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f;g*=g,d*=d;var i=.5+(d-g)/(2*h),j=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+i*e+j*f,c.y=a.y+i*f-j*e}else c.x=a.x+d,c.y=a.y}function Xe(a){return 1+Wg.max(a,function(a){return a.y})}function Ye(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Ze(a){var b=a.children;return b&&b.length?Ze(b[0]):a}function $e(a){var b,c=a.children;return c&&(b=c.length)?$e(c[b-1]):a}function _e(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function af(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return 0>e&&(c+=e/2,e=0),0>f&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function bf(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function cf(a){return a.rangeExtent?a.rangeExtent():bf(a.range())}function df(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function ef(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return f>g&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a}function ff(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:kj}function gf(a,b,c,d){var e=[],f=[],g=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<=h;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=Wg.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function hf(a,b,c,d){function e(){var e=Math.min(a.length,b.length)>2?gf:df,i=d?ee:de;return g=e(a,b,i,c),h=e(b,a,i,Hd),f}function f(a){return g(a)}var g,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(Zd)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return mf(a,b)},f.tickFormat=function(b,c){return nf(a,b,c)},f.nice=function(b){return kf(a,b),e()},f.copy=function(){return hf(a,b,c,d)},e()}function jf(a,b){return Wg.rebind(a,b,"range","rangeRound","interpolate","clamp")}function kf(a,b){return ef(a,ff(lf(a,b)[2]))}function lf(a,b){null==b&&(b=10);var c=bf(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return.15>=f?e*=10:.35>=f?e*=5:.75>=f&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function mf(a,b){return Wg.range.apply(Wg,lf(a,b))}function nf(a,b,c){var d=lf(a,b);return Wg.format(c?c.replace(fi,function(a,b,c,e,f,g,h,i,j,k){return[b,c,e,f,g,h,i,j||"."+pf(k,d),k].join("")}):",."+of(d[2])+"f")}function of(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function pf(a,b){var c=of(b[2]);return a in lj?Math.abs(c-of(Math.max(Math.abs(b[0]),Math.abs(b[1]))))+ +("e"!==a):c-2*("%"===a)}function qf(a,b,c,d){function e(a){return(c?Math.log(0>a?0:a):-Math.log(a>0?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}return g.invert=function(b){return f(a.invert(b))},g.domain=function(b){return arguments.length?(c=b[0]>=0,a.domain((d=b.map(Number)).map(e)),g):d},g.base=function(c){return arguments.length?(b=+c,a.domain(d.map(e)),g):b},g.nice=function(){var b=ef(d.map(e),c?Math:nj);return a.domain(b),d=b.map(f),g},g.ticks=function(){var a=bf(d),g=[],h=a[0],i=a[1],j=Math.floor(e(h)),k=Math.ceil(e(i)),l=b%1?2:b;if(isFinite(k-j)){if(c){for(;k>j;j++)for(var m=1;l>m;m++)g.push(f(j)*m);g.push(f(j))}else for(g.push(f(j));j++<k;)for(var m=l-1;m>0;m--)g.push(f(j)*m);for(j=0;g[j]<h;j++);for(k=g.length;g[k-1]>i;k--);g=g.slice(j,k)}return g},g.tickFormat=function(a,b){if(!arguments.length)return mj;arguments.length<2?b=mj:"function"!=typeof b&&(b=Wg.format(b));var d,h=Math.max(.1,a/g.ticks().length),i=c?(d=1e-12,Math.ceil):(d=-1e-12,Math.floor);return function(a){return a/f(i(e(a)+d))<=h?b(a):""}},g.copy=function(){return qf(a.copy(),b,c,d)},jf(g,a)}function rf(a,b,c){function d(b){return a(e(b))}var e=sf(b),f=sf(1/b);return d.invert=function(b){return f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(e)),d):c},d.ticks=function(a){return mf(c,a)},d.tickFormat=function(a,b){return nf(c,a,b)},d.nice=function(a){return d.domain(kf(c,a))},d.exponent=function(g){return arguments.length?(e=sf(b=g),f=sf(1/b),a.domain(c.map(e)),d):b},d.copy=function(){return rf(a.copy(),b,c)},jf(d,a)}function sf(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function tf(a,b){function c(c){return g[((f.get(c)||"range"===b.t&&f.set(c,a.push(c)))-1)%g.length]}function d(b,c){return Wg.range(a.length).map(function(a){return b+c*a})}var f,g,h;return c.domain=function(d){if(!arguments.length)return a;a=[],f=new e;for(var g,h=-1,i=d.length;++h<i;)f.has(g=d[h])||f.set(g,a.push(g));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(g=a,h=0,b={t:"range",a:arguments},c):g},c.rangePoints=function(e,f){arguments.length<2&&(f=0);var i=e[0],j=e[1],k=(j-i)/(Math.max(1,a.length-1)+f);return g=d(a.length<2?(i+j)/2:i+k*f/2,k),h=0,b={t:"rangePoints",a:arguments},c},c.rangeBands=function(e,f,i){arguments.length<2&&(f=0),arguments.length<3&&(i=f);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=(l-k)/(a.length-f+2*i);return g=d(k+m*i,m),j&&g.reverse(),h=m*(1-f),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(e,f,i){arguments.length<2&&(f=0),arguments.length<3&&(i=f);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=Math.floor((l-k)/(a.length-f+2*i)),n=l-k-(a.length-f)*m;return g=d(k+Math.round(n/2),m),j&&g.reverse(),h=Math.round(m*(1-f)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return h},c.rangeExtent=function(){return bf(b.a[0])},c.copy=function(){return tf(a,b)},c.domain(a)}function uf(a,b){function c(){var c=0,f=b.length;for(e=[];++c<f;)e[c-1]=Wg.quantile(a,c/f);return d}function d(a){return isNaN(a=+a)?void 0:b[Wg.bisect(e,a)]}var e;return d.domain=function(b){return arguments.length?(a=b.filter(function(a){return!isNaN(a)}).sort(Wg.ascending),c()):a},d.range=function(a){return arguments.length?(b=a,c()):b},d.quantiles=function(){return e},d.invertExtent=function(c){return c=b.indexOf(c),0>c?[0/0,0/0]:[c>0?e[c-1]:a[0],c<e.length?e[c]:a[a.length-1]]},d.copy=function(){return uf(a,b)},c()}function vf(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.invertExtent=function(b){return b=c.indexOf(b),b=0>b?0/0:b/f+a,[b,b+1/f]},d.copy=function(){return vf(a,b,c)},e()}function wf(a,b){function c(c){return c>=c?b[Wg.bisect(a,c)]:void 0}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.invertExtent=function(c){return c=b.indexOf(c),[a[c-1],a[c]]},c.copy=function(){return wf(a,b)},c}function xf(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return mf(a,b)},b.tickFormat=function(b,c){return nf(a,b,c)},b.copy=function(){return xf(a)},b}function yf(a){return a.innerRadius}function zf(a){return a.outerRadius}function Af(a){return a.startAngle}function Bf(a){return a.endAngle}function Cf(a){function b(b){function g(){j.push("M",f(a(k),h))}for(var i,j=[],k=[],l=-1,m=b.length,n=pb(c),o=pb(d);++l<m;)e.call(this,i=b[l],l)?k.push([+n.call(this,i,l),+o.call(this,i,l)]):k.length&&(g(),k=[]);return k.length&&g(),j.length?j.join(""):null}var c=Tc,d=Uc,e=Tb,f=Df,g=f.key,h=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(g="function"==typeof a?f=a:(f=uj.get(a)||Df).key,b):g},b.tension=function(a){return arguments.length?(h=a,b):h},b}function Df(a){return a.join("L")}function Ef(a){return Df(a)+"Z"}function Ff(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return c>1&&e.push("H",d[0]),e.join("")}function Gf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function Hf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function If(a,b){return a.length<4?Df(a):a[1]+Lf(a.slice(1,a.length-1),Mf(a,b))}function Jf(a,b){return a.length<3?Df(a):a[0]+Lf((a.push(a[0]),a),Mf([a[a.length-2]].concat(a,[a[1]]),b))}function Kf(a,b){return a.length<3?Df(a):a[0]+Lf(a,Mf(a,b))}function Lf(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return Df(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],i=2),b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+k[0]+","+k[1]}return d}function Mf(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,i=a.length;++h<i;)c=f,f=g,g=a[h],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])]);return d}function Nf(a){if(a.length<3)return Df(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f,"L",Rf(xj,g),",",Rf(xj,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),Sf(i,g,h);return a.pop(),i.push("L",d),i.join("")}function Of(a){if(a.length<4)return Df(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];++d<3;)b=a[d],f.push(b[0]),g.push(b[1]);for(c.push(Rf(xj,f)+","+Rf(xj,g)),--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),Sf(c,f,g);return c.join("")}function Pf(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];++d<4;)c=a[d%e],g.push(c[0]),h.push(c[1]);for(b=[Rf(xj,g),",",Rf(xj,h)],--d;++d<f;)c=a[d%e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),Sf(b,g,h);return b.join("")}function Qf(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,i=a[c][1]-g,j=-1;++j<=c;)d=a[j],e=j/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*i);return Nf(a)}function Rf(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Sf(a,b,c){a.push("C",Rf(vj,b),",",Rf(vj,c),",",Rf(wj,b),",",Rf(wj,c),",",Rf(xj,b),",",Rf(xj,c))}function Tf(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Uf(a){for(var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=Tf(e,f);++b<c;)d[b]=(g+(g=Tf(e=f,f=a[b+1])))/2;return d[b]=g,d}function Vf(a){for(var b,c,d,e,f=[],g=Uf(a),h=-1,i=a.length-1;++h<i;)b=Tf(a[h],a[h+1]),ih(b)<Dh?g[h]=g[h+1]=0:(c=g[h]/b,d=g[h+1]/b,e=c*c+d*d,e>9&&(e=3*b/Math.sqrt(e),g[h]=e*c,g[h+1]=e*d));for(h=-1;++h<=i;)e=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),f.push([e||0,g[h]*e||0]);return f}function Wf(a){return a.length<3?Df(a):a[0]+Lf(a,Vf(a))}function Xf(a){for(var b,c,d,e=-1,f=a.length;++e<f;)b=a[e],c=b[0],d=b[1]+sj,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function Yf(a){function b(b){function i(){p.push("M",h(a(r),l),k,j(a(q.reverse()),l),"Z")}for(var m,n,o,p=[],q=[],r=[],s=-1,t=b.length,u=pb(c),v=pb(e),w=c===d?function(){return n}:pb(d),x=e===f?function(){return o}:pb(f);++s<t;)g.call(this,m=b[s],s)?(q.push([n=+u.call(this,m,s),o=+v.call(this,m,s)]),r.push([+w.call(this,m,s),+x.call(this,m,s)])):q.length&&(i(),q=[],r=[]);return q.length&&i(),p.length?p.join(""):null}var c=Tc,d=Tc,e=0,f=Uc,g=Tb,h=Df,i=h.key,j=h,k="L",l=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(i="function"==typeof a?h=a:(h=uj.get(a)||Df).key,j=h.reverse||h,k=h.closed?"M":"L",b):i},b.tension=function(a){return arguments.length?(l=a,b):l},b}function Zf(a){return a.radius}function $f(a){return[a.x,a.y]}function _f(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]+sj;return[c*Math.cos(d),c*Math.sin(d)]}}function ag(){return 64}function bg(){return"circle"}function cg(a){var b=Math.sqrt(a/Ah);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function dg(a,b){return nh(a,Dj),a.id=b,a}function eg(a,b,c,d){var e=a.id;return D(a,"function"==typeof c?function(a,f,g){a.__transition__[e].tween.set(b,d(c.call(a,a.__data__,f,g)))}:(c=d(c),function(a){a.__transition__[e].tween.set(b,c)}))}function fg(a){return null==a&&(a=""),function(){this.textContent=a}}function gg(a,b,c,d){var f=a.__transition__||(a.__transition__={active:0,count:0}),g=f[c];if(!g){var h=d.time;g=f[c]={tween:new e,time:h,ease:d.ease,delay:d.delay,duration:d.duration},++f.count,Wg.timer(function(d){function e(d){return f.active>c?j():(f.active=c,g.event&&g.event.start.call(a,k,b),g.tween.forEach(function(c,d){(d=d.call(a,k,b))&&p.push(d)}),void Wg.timer(function(){return o.c=i(d||1)?Tb:i,1},0,h))}function i(d){if(f.active!==c)return j();for(var e=d/n,h=l(e),i=p.length;i>0;)p[--i].call(a,h);return e>=1?(g.event&&g.event.end.call(a,k,b),j()):void 0}function j(){return--f.count?delete f[c]:delete a.__transition__,1}var k=a.__data__,l=g.ease,m=g.delay,n=g.duration,o=$h,p=[];return o.t=m+h,d>=m?e(d-m):void(o.c=e)},0,h)}}function hg(a,b){a.attr("transform",function(a){return"translate("+b(a)+",0)"})}function ig(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+")"})}function jg(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function kg(a,b,c){function d(b){var c=a(b),d=f(c,1);return d-b>b-c?c:d}function e(c){return b(c=a(new Kj(c-1)),1),c}function f(a,c){return b(a=new Kj(+a),c),a}function g(a,d,f){var g=e(a),h=[];if(f>1)for(;d>g;)c(g)%f||h.push(new Date(+g)),b(g,1);else for(;d>g;)h.push(new Date(+g)),b(g,1);return h}function h(a,b,c){try{Kj=jg;var d=new jg;return d._=a,g(d,b,c)}finally{Kj=Date}}a.floor=a,a.round=d,a.ceil=e,a.offset=f,a.range=g;var i=a.utc=lg(a);return i.floor=i,i.round=lg(d),i.ceil=lg(e),i.offset=lg(f),i.range=h,a}function lg(a){return function(b,c){try{Kj=jg;var d=new jg;return d._=b,a(d,c)._}finally{Kj=Date}}}function mg(a){function b(b){for(var d,e,f,g=[],h=-1,i=0;++h<c;)37===a.charCodeAt(h)&&(g.push(a.substring(i,h)),null!=(e=bk[d=a.charAt(++h)])&&(d=a.charAt(++h)),(f=ck[d])&&(d=f(b,null==e?"e"===d?" ":"0":e)),g.push(d),i=h+1);return g.push(a.substring(i,h)),g.join("")}var c=a.length;return b.parse=function(b){var c={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},d=ng(c,a,b,0);if(d!=b.length)return null;"p"in c&&(c.H=c.H%12+12*c.p);var e=null!=c.Z&&Kj!==jg,f=new(e?jg:Kj);return"j"in c?f.setFullYear(c.y,0,c.j):"w"in c&&("W"in c||"U"in c)?(f.setFullYear(c.y,0,1),f.setFullYear(c.y,0,"W"in c?(c.w+6)%7+7*c.W-(f.getDay()+5)%7:c.w+7*c.U-(f.getDay()+6)%7)):f.setFullYear(c.y,c.m,c.d),f.setHours(c.H+Math.floor(c.Z/100),c.M+c.Z%100,c.S,c.L),e?f._:f},b.toString=function(){return a},b}function ng(a,b,c,d){for(var e,f,g,h=0,i=b.length,j=c.length;i>h;){if(d>=j)return-1;if(e=b.charCodeAt(h++),37===e){if(g=b.charAt(h++),f=dk[g in bk?b.charAt(h++):g],!f||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function og(a){return new RegExp("^(?:"+a.map(Wg.requote).join("|")+")","i")}function pg(a){for(var b=new e,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function qg(a,b,c){var d=0>a?"-":"",e=(d?-a:a)+"",f=e.length;return d+(c>f?new Array(c-f+1).join(b)+e:e)}function rg(a,b,c){Wj.lastIndex=0;var d=Wj.exec(b.substring(c));return d?(a.w=Xj.get(d[0].toLowerCase()),c+d[0].length):-1}function sg(a,b,c){Uj.lastIndex=0;var d=Uj.exec(b.substring(c));return d?(a.w=Vj.get(d[0].toLowerCase()),c+d[0].length):-1}function tg(a,b,c){ek.lastIndex=0;var d=ek.exec(b.substring(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function ug(a,b,c){ek.lastIndex=0;var d=ek.exec(b.substring(c));return d?(a.U=+d[0],c+d[0].length):-1}function vg(a,b,c){ek.lastIndex=0;var d=ek.exec(b.substring(c));return d?(a.W=+d[0],c+d[0].length):-1}function wg(a,b,c){$j.lastIndex=0;var d=$j.exec(b.substring(c));return d?(a.m=_j.get(d[0].toLowerCase()),c+d[0].length):-1}function xg(a,b,c){Yj.lastIndex=0;var d=Yj.exec(b.substring(c));return d?(a.m=Zj.get(d[0].toLowerCase()),c+d[0].length):-1}function yg(a,b,c){return ng(a,ck.c.toString(),b,c)}function zg(a,b,c){return ng(a,ck.x.toString(),b,c)}function Ag(a,b,c){return ng(a,ck.X.toString(),b,c)}function Bg(a,b,c){ek.lastIndex=0;var d=ek.exec(b.substring(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function Cg(a,b,c){ek.lastIndex=0;var d=ek.exec(b.substring(c,c+2));
return d?(a.y=Eg(+d[0]),c+d[0].length):-1}function Dg(a,b,c){return/^[+-]\d{4}$/.test(b=b.substring(c,c+5))?(a.Z=+b,c+5):-1}function Eg(a){return a+(a>68?1900:2e3)}function Fg(a,b,c){ek.lastIndex=0;var d=ek.exec(b.substring(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function Gg(a,b,c){ek.lastIndex=0;var d=ek.exec(b.substring(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function Hg(a,b,c){ek.lastIndex=0;var d=ek.exec(b.substring(c,c+3));return d?(a.j=+d[0],c+d[0].length):-1}function Ig(a,b,c){ek.lastIndex=0;var d=ek.exec(b.substring(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function Jg(a,b,c){ek.lastIndex=0;var d=ek.exec(b.substring(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function Kg(a,b,c){ek.lastIndex=0;var d=ek.exec(b.substring(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function Lg(a,b,c){ek.lastIndex=0;var d=ek.exec(b.substring(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function Mg(a,b,c){var d=fk.get(b.substring(c,c+=2).toLowerCase());return null==d?-1:(a.p=d,c)}function Ng(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=~~(ih(b)/60),e=ih(b)%60;return c+qg(d,"0",2)+qg(e,"0",2)}function Og(a,b,c){ak.lastIndex=0;var d=ak.exec(b.substring(c,c+1));return d?c+d[0].length:-1}function Pg(a){function b(a){try{Kj=jg;var b=new Kj;return b._=a,c(b)}finally{Kj=Date}}var c=mg(a);return b.parse=function(a){try{Kj=jg;var b=c.parse(a);return b&&b._}finally{Kj=Date}},b.toString=c.toString,b}function Qg(a){return a.toISOString()}function Rg(a,b,c){function d(b){return a(b)}function e(a,c){var d=a[1]-a[0],e=d/c,f=Wg.bisect(hk,e);return f==hk.length?[b.year,lf(a.map(function(a){return a/31536e6}),c)[2]]:f?b[e/hk[f-1]<hk[f]/e?f-1:f]:[lk,lf(a,c)[2]]}return d.invert=function(b){return Sg(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(Sg)},d.nice=function(a,b){function c(c){return!isNaN(c)&&!a.range(c,Sg(+c+1),b).length}var f=d.domain(),g=bf(f),h=null==a?e(g,10):"number"==typeof a&&e(g,a);return h&&(a=h[0],b=h[1]),d.domain(ef(f,b>1?{floor:function(b){for(;c(b=a.floor(b));)b=Sg(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=Sg(+b+1);return b}}:a))},d.ticks=function(a,b){var c=bf(d.domain()),f=null==a?e(c,10):"number"==typeof a?e(c,a):!a.range&&[{range:a},b];return f&&(a=f[0],b=f[1]),a.range(c[0],Sg(+c[1]+1),1>b?1:b)},d.tickFormat=function(){return c},d.copy=function(){return Rg(a.copy(),b,c)},jf(d,a)}function Sg(a){return new Date(a)}function Tg(a){return function(b){for(var c=a.length-1,d=a[c];!d[1](b);)d=a[--c];return d[0](b)}}function Ug(a){return JSON.parse(a.responseText)}function Vg(a){var b=Zg.createRange();return b.selectNode(Zg.body),b.createContextualFragment(a.responseText)}var Wg={version:"3.3.13"};Date.now||(Date.now=function(){return+new Date});var Xg=[].slice,Yg=function(a){return Xg.call(a)},Zg=document,$g=Zg.documentElement,_g=window;try{Yg($g.childNodes)[0].nodeType}catch(ah){Yg=function(a){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c}}try{Zg.createElement("div").style.setProperty("opacity",0,"")}catch(bh){var ch=_g.Element.prototype,dh=ch.setAttribute,eh=ch.setAttributeNS,fh=_g.CSSStyleDeclaration.prototype,gh=fh.setProperty;ch.setAttribute=function(a,b){dh.call(this,a,b+"")},ch.setAttributeNS=function(a,b,c){eh.call(this,a,b,c+"")},fh.setProperty=function(a,b,c){gh.call(this,a,b+"",c)}}Wg.ascending=function(a,b){return b>a?-1:a>b?1:a>=b?0:0/0},Wg.descending=function(a,b){return a>b?-1:b>a?1:b>=a?0:0/0},Wg.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(c=a[e])&&c>=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c>=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c},Wg.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(c=a[e])&&c>=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c>=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c},Wg.extent=function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g&&!(null!=(c=e=a[f])&&c>=c);)c=e=void 0;for(;++f<g;)null!=(d=a[f])&&(c>d&&(c=d),d>e&&(e=d))}else{for(;++f<g&&!(null!=(c=e=b.call(a,a[f],f))&&c>=c);)c=void 0;for(;++f<g;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),d>e&&(e=d))}return[c,e]},Wg.sum=function(a,b){var c,d=0,e=a.length,f=-1;if(1===arguments.length)for(;++f<e;)isNaN(c=+a[f])||(d+=c);else for(;++f<e;)isNaN(c=+b.call(a,a[f],f))||(d+=c);return d},Wg.mean=function(b,c){var d,e=b.length,f=0,g=-1,h=0;if(1===arguments.length)for(;++g<e;)a(d=b[g])&&(f+=(d-f)/++h);else for(;++g<e;)a(d=c.call(b,b[g],g))&&(f+=(d-f)/++h);return h?f:void 0},Wg.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1],f=c-d;return f?e+f*(a[d]-e):e},Wg.median=function(b,c){return arguments.length>1&&(b=b.map(c)),b=b.filter(a),b.length?Wg.quantile(b.sort(Wg.ascending),.5):void 0},Wg.bisector=function(a){return{left:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;a.call(b,b[f],f)<c?d=f+1:e=f}return d},right:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;c<a.call(b,b[f],f)?e=f:d=f+1}return d}}};var hh=Wg.bisector(function(a){return a});Wg.bisectLeft=hh.left,Wg.bisect=Wg.bisectRight=hh.right,Wg.shuffle=function(a){for(var b,c,d=a.length;d;)c=Math.random()*d--|0,b=a[d],a[d]=a[c],a[c]=b;return a},Wg.permute=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},Wg.pairs=function(a){for(var b,c=0,d=a.length-1,e=a[0],f=new Array(0>d?0:d);d>c;)f[c]=[b=e,e=a[++c]];return f},Wg.zip=function(){if(!(e=arguments.length))return[];for(var a=-1,c=Wg.min(arguments,b),d=new Array(c);++a<c;)for(var e,f=-1,g=d[a]=new Array(e);++f<e;)g[f]=arguments[f][a];return d},Wg.transpose=function(a){return Wg.zip.apply(Wg,a)},Wg.keys=function(a){var b=[];for(var c in a)b.push(c);return b},Wg.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},Wg.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},Wg.merge=function(a){for(var b,c,d,e=a.length,f=-1,g=0;++f<e;)g+=a[f].length;for(c=new Array(g);--e>=0;)for(d=a[e],b=d.length;--b>=0;)c[--g]=d[b];return c};var ih=Math.abs;Wg.range=function(a,b,d){if(arguments.length<3&&(d=1,arguments.length<2&&(b=a,a=0)),(b-a)/d===1/0)throw new Error("infinite range");var e,f=[],g=c(ih(d)),h=-1;if(a*=g,b*=g,d*=g,0>d)for(;(e=a+d*++h)>b;)f.push(e/g);else for(;(e=a+d*++h)<b;)f.push(e/g);return f},Wg.map=function(a){var b=new e;if(a instanceof e)a.forEach(function(a,c){b.set(a,c)});else for(var c in a)b.set(c,a[c]);return b},d(e,{has:function(a){return jh+a in this},get:function(a){return this[jh+a]},set:function(a,b){return this[jh+a]=b},remove:function(a){return a=jh+a,a in this&&delete this[a]},keys:function(){var a=[];return this.forEach(function(b){a.push(b)}),a},values:function(){var a=[];return this.forEach(function(b,c){a.push(c)}),a},entries:function(){var a=[];return this.forEach(function(b,c){a.push({key:b,value:c})}),a},forEach:function(a){for(var b in this)b.charCodeAt(0)===kh&&a.call(this,b.substring(1),this[b])}});var jh="\x00",kh=jh.charCodeAt(0);Wg.nest=function(){function a(b,h,i){if(i>=g.length)return d?d.call(f,h):c?h.sort(c):h;for(var j,k,l,m,n=-1,o=h.length,p=g[i++],q=new e;++n<o;)(m=q.get(j=p(k=h[n])))?m.push(k):q.set(j,[k]);return b?(k=b(),l=function(c,d){k.set(c,a(b,d,i))}):(k={},l=function(c,d){k[c]=a(b,d,i)}),q.forEach(l),k}function b(a,c){if(c>=g.length)return a;var d=[],e=h[c++];return a.forEach(function(a,e){d.push({key:a,values:b(e,c)})}),e?d.sort(function(a,b){return e(a.key,b.key)}):d}var c,d,f={},g=[],h=[];return f.map=function(b,c){return a(c,b,0)},f.entries=function(c){return b(a(Wg.map,c,0),0)},f.key=function(a){return g.push(a),f},f.sortKeys=function(a){return h[g.length-1]=a,f},f.sortValues=function(a){return c=a,f},f.rollup=function(a){return d=a,f},f},Wg.set=function(a){var b=new f;if(a)for(var c=0,d=a.length;d>c;++c)b.add(a[c]);return b},d(f,{has:function(a){return jh+a in this},add:function(a){return this[jh+a]=!0,a},remove:function(a){return a=jh+a,a in this&&delete this[a]},values:function(){var a=[];return this.forEach(function(b){a.push(b)}),a},forEach:function(a){for(var b in this)b.charCodeAt(0)===kh&&a.call(this,b.substring(1))}}),Wg.behavior={},Wg.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;)a[c=arguments[d]]=g(a,b,b[c]);return a};var lh=["webkit","ms","moz","Moz","o","O"];Wg.dispatch=function(){for(var a=new j,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=k(a);return a},j.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(c>=0&&(d=a.substring(c+1),a=a.substring(0,c)),a)return arguments.length<2?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}},Wg.event=null,Wg.requote=function(a){return a.replace(mh,"\\$&")};var mh=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,nh={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},oh=function(a,b){return b.querySelector(a)},ph=function(a,b){return b.querySelectorAll(a)},qh=$g[h($g,"matchesSelector")],rh=function(a,b){return qh.call(a,b)};"function"==typeof Sizzle&&(oh=function(a,b){return Sizzle(a,b)[0]||null},ph=function(a,b){return Sizzle.uniqueSort(Sizzle(a,b))},rh=Sizzle.matchesSelector),Wg.selection=function(){return vh};var sh=Wg.selection.prototype=[];sh.select=function(a){var b,c,d,e,f=[];a=p(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]),b.parentNode=(d=this[g]).parentNode;for(var i=-1,j=d.length;++i<j;)(e=d[i])?(b.push(c=a.call(e,e.__data__,i,g)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return o(f)},sh.selectAll=function(a){var b,c,d=[];a=q(a);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,i=g.length;++h<i;)(c=g[h])&&(d.push(b=Yg(a.call(c,c.__data__,h,e))),b.parentNode=c);return o(d)};var th={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Wg.ns={prefix:th,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&(c=a.substring(0,b),a=a.substring(b+1)),th.hasOwnProperty(c)?{space:th[c],local:a}:a}},sh.attr=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node();return a=Wg.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(r(b,a[b]));return this}return this.each(r(a,b))},sh.classed=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node(),d=(a=u(a)).length,e=-1;if(b=c.classList){for(;++e<d;)if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!t(a[e]).test(b))return!1;return!0}for(b in a)this.each(v(b,a[b]));return this}return this.each(v(a,b))},sh.style=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b="");for(c in a)this.each(x(c,a[c],b));return this}if(2>d)return _g.getComputedStyle(this.node(),null).getPropertyValue(a);c=""}return this.each(x(a,b,c))},sh.property=function(a,b){if(arguments.length<2){if("string"==typeof a)return this.node()[a];for(b in a)this.each(y(b,a[b]));return this}return this.each(y(a,b))},sh.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},sh.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},sh.append=function(a){return a=z(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})},sh.insert=function(a,b){return a=z(a),b=p(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})},sh.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})},sh.data=function(a,b){function c(a,c){var d,f,g,h=a.length,l=c.length,m=Math.min(h,l),n=new Array(l),o=new Array(l),p=new Array(h);if(b){var q,r=new e,s=new e,t=[];for(d=-1;++d<h;)q=b.call(f=a[d],f.__data__,d),r.has(q)?p[d]=f:r.set(q,f),t.push(q);for(d=-1;++d<l;)q=b.call(c,g=c[d],d),(f=r.get(q))?(n[d]=f,f.__data__=g):s.has(q)||(o[d]=A(g)),s.set(q,g),r.remove(q);for(d=-1;++d<h;)r.has(t[d])&&(p[d]=a[d])}else{for(d=-1;++d<m;)f=a[d],g=c[d],f?(f.__data__=g,n[d]=f):o[d]=A(g);for(;l>d;++d)o[d]=A(c[d]);for(;h>d;++d)p[d]=a[d]}o.update=n,o.parentNode=n.parentNode=p.parentNode=a.parentNode,i.push(o),j.push(n),k.push(p)}var d,f,g=-1,h=this.length;if(!arguments.length){for(a=new Array(h=(d=this[0]).length);++g<h;)(f=d[g])&&(a[g]=f.__data__);return a}var i=E([]),j=o([]),k=o([]);if("function"==typeof a)for(;++g<h;)c(d=this[g],a.call(d,d.parentNode.__data__,g));else for(;++g<h;)c(d=this[g],a);return j.enter=function(){return i},j.exit=function(){return k},j},sh.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},sh.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=B(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]),b.parentNode=(c=this[f]).parentNode;for(var h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return o(e)},sh.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];--e>=0;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this},sh.sort=function(a){a=C.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()},sh.each=function(a){return D(this,function(b,c,d){a.call(b,b.__data__,c,d)})},sh.call=function(a){var b=Yg(arguments);return a.apply(b[0]=this,b),this},sh.empty=function(){return!this.node()},sh.node=function(){for(var a=0,b=this.length;b>a;a++)for(var c=this[a],d=0,e=c.length;e>d;d++){var f=c[d];if(f)return f}return null},sh.size=function(){var a=0;return this.each(function(){++a}),a};var uh=[];Wg.selection.enter=E,Wg.selection.enter.prototype=uh,uh.append=sh.append,uh.empty=sh.empty,uh.node=sh.node,uh.call=sh.call,uh.size=sh.size,uh.select=function(a){for(var b,c,d,e,f,g=[],h=-1,i=this.length;++h<i;){d=(e=this[h]).update,g.push(b=[]),b.parentNode=e.parentNode;for(var j=-1,k=e.length;++j<k;)(f=e[j])?(b.push(d[j]=c=a.call(e.parentNode,f.__data__,j,h)),c.__data__=f.__data__):b.push(null)}return o(g)},uh.insert=function(a,b){return arguments.length<2&&(b=F(this)),sh.insert.call(this,a,b)},sh.transition=function(){for(var a,b,c=zj||++Ej,d=[],e=Aj||{time:Date.now(),ease:Od,delay:0,duration:250},f=-1,g=this.length;++f<g;){d.push(a=[]);for(var h=this[f],i=-1,j=h.length;++i<j;)(b=h[i])&&gg(b,i,c,e),a.push(b)}return dg(d,c)},sh.interrupt=function(){return this.each(G)},Wg.select=function(a){var b=["string"==typeof a?oh(a,Zg):a];return b.parentNode=$g,o([b])},Wg.selectAll=function(a){var b=Yg("string"==typeof a?ph(a,Zg):a);return b.parentNode=$g,o([b])};var vh=Wg.select($g);sh.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b=!1);for(c in a)this.each(H(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(H(a,b,c))};var wh=Wg.map({mouseenter:"mouseover",mouseleave:"mouseout"});wh.forEach(function(a){"on"+a in Zg&&wh.remove(a)});var xh="onselectstart"in Zg?null:h($g.style,"userSelect"),yh=0;Wg.mouse=function(a){return L(a,m())};var zh=/WebKit/.test(_g.navigator.userAgent)?-1:0;Wg.touches=function(a,b){return arguments.length<2&&(b=m().touches),b?Yg(b).map(function(b){var c=L(a,b);return c.identifier=b.identifier,c}):[]},Wg.behavior.drag=function(){function a(){this.on("mousedown.drag",g).on("touchstart.drag",h)}function b(){return Wg.event.changedTouches[0].identifier}function c(a,b){return Wg.touches(a).filter(function(a){return a.identifier===b})[0]}function d(a,b,c,d){return function(){function g(){var a=b(k,n),c=a[0]-p[0],d=a[1]-p[1];q|=c|d,p=a,l({type:"drag",x:a[0]+i[0],y:a[1]+i[1],dx:c,dy:d})}function h(){r.on(c+"."+o,null).on(d+"."+o,null),s(q&&Wg.event.target===m),l({type:"dragend"})}var i,j=this,k=j.parentNode,l=e.of(j,arguments),m=Wg.event.target,n=a(),o=null==n?"drag":"drag-"+n,p=b(k,n),q=0,r=Wg.select(_g).on(c+"."+o,g).on(d+"."+o,h),s=K();f?(i=f.apply(j,arguments),i=[i.x-p[0],i.y-p[1]]):i=[0,0],l({type:"dragstart"})}}var e=n(a,"drag","dragstart","dragend"),f=null,g=d(i,Wg.mouse,"mousemove","mouseup"),h=d(b,c,"touchmove","touchend");return a.origin=function(b){return arguments.length?(f=b,a):f},Wg.rebind(a,e,"on")};var Ah=Math.PI,Bh=2*Ah,Ch=Ah/2,Dh=1e-6,Eh=Dh*Dh,Fh=Ah/180,Gh=180/Ah,Hh=Math.SQRT2,Ih=2,Jh=4;Wg.interpolateZoom=function(a,b){function c(a){var b=a*s;if(r){var c=Q(p),g=f/(Ih*m)*(c*R(Hh*b+p)-P(p));return[d+g*j,e+g*k,f*c/Q(Hh*b+p)]}return[d+a*j,e+a*k,f*Math.exp(Hh*b)]}var d=a[0],e=a[1],f=a[2],g=b[0],h=b[1],i=b[2],j=g-d,k=h-e,l=j*j+k*k,m=Math.sqrt(l),n=(i*i-f*f+Jh*l)/(2*f*Ih*m),o=(i*i-f*f-Jh*l)/(2*i*Ih*m),p=Math.log(Math.sqrt(n*n+1)-n),q=Math.log(Math.sqrt(o*o+1)-o),r=q-p,s=(r||Math.log(i/f))/Hh;return c.duration=1e3*s,c},Wg.behavior.zoom=function(){function a(a){a.on(B,j).on(Mh+".zoom",m).on(C,o).on("dblclick.zoom",p).on(E,k)}function b(a){return[(a[0]-y.x)/y.k,(a[1]-y.y)/y.k]}function c(a){return[a[0]*y.k+y.x,a[1]*y.k+y.y]}function d(a){y.k=Math.max(A[0],Math.min(A[1],a))}function e(a,b){b=c(b),y.x+=a[0]-b[0],y.y+=a[1]-b[1]}function f(){v&&v.domain(u.range().map(function(a){return(a-y.x)/y.k}).map(u.invert)),x&&x.domain(w.range().map(function(a){return(a-y.y)/y.k}).map(w.invert))}function g(a){a({type:"zoomstart"})}function h(a){f(),a({type:"zoom",scale:y.k,translate:[y.x,y.y]})}function i(a){a({type:"zoomend"})}function j(){function a(){k=1,e(Wg.mouse(d),m),h(f)}function c(){l.on(C,_g===d?o:null).on(D,null),n(k&&Wg.event.target===j),i(f)}var d=this,f=F.of(d,arguments),j=Wg.event.target,k=0,l=Wg.select(_g).on(C,a).on(D,c),m=b(Wg.mouse(d)),n=K();G.call(d),g(f)}function k(){function a(){var a=Wg.touches(o);return n=y.k,a.forEach(function(a){a.identifier in q&&(q[a.identifier]=b(a))}),a}function c(){for(var b=Wg.event.changedTouches,c=0,f=b.length;f>c;++c)q[b[c].identifier]=null;var g=a(),i=Date.now();if(1===g.length){if(500>i-t){var j=g[0],k=q[j.identifier];d(2*y.k),e(j,k),l(),h(p)}t=i}else if(g.length>1){var j=g[0],m=g[1],n=j[0]-m[0],o=j[1]-m[1];r=n*n+o*o}}function f(){for(var a,b,c,f,g=Wg.touches(o),i=0,j=g.length;j>i;++i,f=null)if(c=g[i],f=q[c.identifier]){if(b)break;a=c,b=f}if(f){var k=(k=c[0]-a[0])*k+(k=c[1]-a[1])*k,l=r&&Math.sqrt(k/r);a=[(a[0]+c[0])/2,(a[1]+c[1])/2],b=[(b[0]+f[0])/2,(b[1]+f[1])/2],d(l*n)}t=null,e(a,b),h(p)}function m(){if(Wg.event.touches.length){for(var b=Wg.event.changedTouches,c=0,d=b.length;d>c;++c)delete q[b[c].identifier];for(var e in q)return void a()}w.on(u,null).on(v,null),x.on(B,j).on(E,k),z(),i(p)}var n,o=this,p=F.of(o,arguments),q={},r=0,s=Wg.event.changedTouches[0].identifier,u="touchmove.zoom-"+s,v="touchend.zoom-"+s,w=Wg.select(_g).on(u,f).on(v,m),x=Wg.select(o).on(B,null).on(E,c),z=K();G.call(o),c(),g(p)}function m(){var a=F.of(this,arguments);s?clearTimeout(s):(G.call(this),g(a)),s=setTimeout(function(){s=null,i(a)},50),l();var c=r||Wg.mouse(this);q||(q=b(c)),d(Math.pow(2,.002*Kh())*y.k),e(c,q),h(a)}function o(){q=null}function p(){var a=F.of(this,arguments),c=Wg.mouse(this),f=b(c),j=Math.log(y.k)/Math.LN2;g(a),d(Math.pow(2,Wg.event.shiftKey?Math.ceil(j)-1:Math.floor(j)+1)),e(c,f),h(a),i(a)}var q,r,s,t,u,v,w,x,y={x:0,y:0,k:1},z=[960,500],A=Lh,B="mousedown.zoom",C="mousemove.zoom",D="mouseup.zoom",E="touchstart.zoom",F=n(a,"zoomstart","zoom","zoomend");return a.event=function(a){a.each(function(){var a=F.of(this,arguments),b=y;zj?Wg.select(this).transition().each("start.zoom",function(){y=this.__chart__||{x:0,y:0,k:1},g(a)}).tween("zoom:zoom",function(){var c=z[0],d=z[1],e=c/2,f=d/2,g=Wg.interpolateZoom([(e-y.x)/y.k,(f-y.y)/y.k,c/y.k],[(e-b.x)/b.k,(f-b.y)/b.k,c/b.k]);return function(b){var d=g(b),i=c/d[2];this.__chart__=y={x:e-d[0]*i,y:f-d[1]*i,k:i},h(a)}}).each("end.zoom",function(){i(a)}):(this.__chart__=y,g(a),h(a),i(a))})},a.translate=function(b){return arguments.length?(y={x:+b[0],y:+b[1],k:y.k},f(),a):[y.x,y.y]},a.scale=function(b){return arguments.length?(y={x:y.x,y:y.y,k:+b},f(),a):y.k},a.scaleExtent=function(b){return arguments.length?(A=null==b?Lh:[+b[0],+b[1]],a):A},a.center=function(b){return arguments.length?(r=b&&[+b[0],+b[1]],a):r},a.size=function(b){return arguments.length?(z=b&&[+b[0],+b[1]],a):z},a.x=function(b){return arguments.length?(v=b,u=b.copy(),y={x:0,y:0,k:1},a):v},a.y=function(b){return arguments.length?(x=b,w=b.copy(),y={x:0,y:0,k:1},a):x},Wg.rebind(a,F,"on")};var Kh,Lh=[0,1/0],Mh="onwheel"in Zg?(Kh=function(){return-Wg.event.deltaY*(Wg.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Zg?(Kh=function(){return Wg.event.wheelDelta},"mousewheel"):(Kh=function(){return-Wg.event.detail},"MozMousePixelScroll");T.prototype.toString=function(){return this.rgb()+""},Wg.hsl=function(a,b,c){return 1===arguments.length?a instanceof V?U(a.h,a.s,a.l):kb(""+a,lb,U):U(+a,+b,+c)};var Nh=V.prototype=new T;Nh.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),U(this.h,this.s,this.l/a)},Nh.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),U(this.h,this.s,a*this.l)},Nh.rgb=function(){return W(this.h,this.s,this.l)},Wg.hcl=function(a,b,c){return 1===arguments.length?a instanceof Y?X(a.h,a.c,a.l):a instanceof _?bb(a.l,a.a,a.b):bb((a=mb((a=Wg.rgb(a)).r,a.g,a.b)).l,a.a,a.b):X(+a,+b,+c)};var Oh=Y.prototype=new T;Oh.brighter=function(a){return X(this.h,this.c,Math.min(100,this.l+Ph*(arguments.length?a:1)))},Oh.darker=function(a){return X(this.h,this.c,Math.max(0,this.l-Ph*(arguments.length?a:1)))},Oh.rgb=function(){return Z(this.h,this.c,this.l).rgb()},Wg.lab=function(a,b,c){return 1===arguments.length?a instanceof _?$(a.l,a.a,a.b):a instanceof Y?Z(a.l,a.c,a.h):mb((a=Wg.rgb(a)).r,a.g,a.b):$(+a,+b,+c)};var Ph=18,Qh=.95047,Rh=1,Sh=1.08883,Th=_.prototype=new T;Th.brighter=function(a){return $(Math.min(100,this.l+Ph*(arguments.length?a:1)),this.a,this.b)},Th.darker=function(a){return $(Math.max(0,this.l-Ph*(arguments.length?a:1)),this.a,this.b)},Th.rgb=function(){return ab(this.l,this.a,this.b)},Wg.rgb=function(a,b,c){return 1===arguments.length?a instanceof ib?hb(a.r,a.g,a.b):kb(""+a,hb,W):hb(~~a,~~b,~~c)};var Uh=ib.prototype=new T;Uh.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return b||c||d?(b&&e>b&&(b=e),c&&e>c&&(c=e),d&&e>d&&(d=e),hb(Math.min(255,~~(b/a)),Math.min(255,~~(c/a)),Math.min(255,~~(d/a)))):hb(e,e,e)},Uh.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),hb(~~(a*this.r),~~(a*this.g),~~(a*this.b))},Uh.hsl=function(){return lb(this.r,this.g,this.b)},Uh.toString=function(){return"#"+jb(this.r)+jb(this.g)+jb(this.b)};var Vh=Wg.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Vh.forEach(function(a,b){Vh.set(a,fb(b))}),Wg.functor=pb,Wg.xhr=rb(qb),Wg.dsv=function(a,b){function c(a,c,f){arguments.length<3&&(f=c,c=null);var g=sb(a,b,null==c?d:e(c),f);return g.row=function(a){return arguments.length?g.response(null==(c=a)?d:e(a)):c},g}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function g(b){return b.map(h).join(a)}function h(a){return i.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var i=new RegExp('["'+a+"\n]"),j=a.charCodeAt(0);return c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})},c.parseRows=function(a,b){function c(){if(k>=i)return g;if(e)return e=!1,f;var b=k;if(34===a.charCodeAt(b)){for(var c=b;c++<i;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}k=c+2;var d=a.charCodeAt(c+1);return 13===d?(e=!0,10===a.charCodeAt(c+2)&&++k):10===d&&(e=!0),a.substring(b+1,c).replace(/""/g,'"')}for(;i>k;){var d=a.charCodeAt(k++),h=1;if(10===d)e=!0;else if(13===d)e=!0,10===a.charCodeAt(k)&&(++k,++h);else if(d!==j)continue;return a.substring(b,k-h)}return a.substring(b)}for(var d,e,f={},g={},h=[],i=a.length,k=0,l=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();(!b||(m=b(m,l++)))&&h.push(m)}return h},c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new f,e=[];return b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))}),[e.map(h).join(a)].concat(b.map(function(b){return e.map(function(a){return h(b[a])}).join(a)})).join("\n")},c.formatRows=function(a){return a.map(g).join("\n")},c},Wg.csv=Wg.dsv(",","text/csv"),Wg.tsv=Wg.dsv("	","text/tab-separated-values");var Wh,Xh,Yh,Zh,$h,_h=_g[h(_g,"requestAnimationFrame")]||function(a){setTimeout(a,17)};Wg.timer=function(a,b,c){var d=arguments.length;2>d&&(b=0),3>d&&(c=Date.now());var e=c+b,f={c:a,t:e,f:!1,n:null};Xh?Xh.n=f:Wh=f,Xh=f,Yh||(Zh=clearTimeout(Zh),Yh=1,_h(ub))},Wg.timer.flush=function(){vb(),wb()};var ai=".",bi=",",ci=[3,3],di="$",ei=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(xb);Wg.formatPrefix=function(a,b){var c=0;return a&&(0>a&&(a*=-1),b&&(a=Wg.round(a,yb(a,b))),c=1+Math.floor(1e-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((0>=c?c+1:c-1)/3)))),ei[8+c/3]},Wg.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)},Wg.format=function(a){var b=fi.exec(a),c=b[1]||" ",d=b[2]||">",e=b[3]||"",f=b[4]||"",g=b[5],h=+b[6],i=b[7],j=b[8],k=b[9],l=1,m="",n=!1;switch(j&&(j=+j.substring(1)),(g||"0"===c&&"="===d)&&(g=c="0",d="=",i&&(h-=Math.floor((h-1)/4))),k){case"n":i=!0,k="g";break;case"%":l=100,m="%",k="f";break;case"p":l=100,m="%",k="r";break;case"b":case"o":case"x":case"X":"#"===f&&(f="0"+k.toLowerCase());case"c":case"d":n=!0,j=0;break;case"s":l=-1,k="r"}"#"===f?f="":"$"===f&&(f=di),"r"!=k||j||(k="g"),null!=j&&("g"==k?j=Math.max(1,Math.min(21,j)):("e"==k||"f"==k)&&(j=Math.max(0,Math.min(20,j)))),k=gi.get(k)||zb;var o=g&&i;return function(a){if(n&&a%1)return"";var b=0>a||0===a&&0>1/a?(a=-a,"-"):e;if(0>l){var p=Wg.formatPrefix(a,j);a=p.scale(a),m=p.symbol}else a*=l;a=k(a,j);var q=a.lastIndexOf("."),r=0>q?a:a.substring(0,q),s=0>q?"":ai+a.substring(q+1);!g&&i&&(r=hi(r));var t=f.length+r.length+s.length+(o?0:b.length),u=h>t?new Array(t=h-t+1).join(c):"";return o&&(r=hi(u+r)),b+=f,a=r+s,("<"===d?b+a+u:">"===d?u+b+a:"^"===d?u.substring(0,t>>=1)+b+a+u.substring(t):b+(o?a:u+a))+m}};var fi=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,gi=Wg.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=Wg.round(a,yb(a,b))).toFixed(Math.max(0,Math.min(20,yb(a*(1+1e-15),b))))}}),hi=qb;if(ci){var ii=ci.length;hi=function(a){for(var b=a.length,c=[],d=0,e=ci[0];b>0&&e>0;)c.push(a.substring(b-=e,b+e)),e=ci[d=(d+1)%ii];return c.reverse().join(bi)}}Wg.geo={},Ab.prototype={s:0,t:0,add:function(a){Bb(a,this.t,ji),Bb(ji.s,this.s,this),this.s?this.t+=ji.t:this.s=ji.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ji=new Ab;Wg.geo.stream=function(a,b){a&&ki.hasOwnProperty(a.type)?ki[a.type](a,b):Cb(a,b)};var ki={Feature:function(a,b){Cb(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)Cb(c[d].geometry,b)}},li={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates,b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){Db(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)Db(c[d],b,0)},Polygon:function(a,b){Eb(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)Eb(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)Cb(c[d],b)}};Wg.geo.area=function(a){return mi=0,Wg.geo.stream(a,oi),mi};var mi,ni=new Ab,oi={sphere:function(){mi+=4*Ah},point:i,lineStart:i,lineEnd:i,polygonStart:function(){ni.reset(),oi.lineStart=Fb},polygonEnd:function(){var a=2*ni;mi+=0>a?4*Ah+a:a,oi.lineStart=oi.lineEnd=oi.point=i}};Wg.geo.bounds=function(){function a(a,b){t.push(u=[k=a,m=a]),l>b&&(l=b),b>n&&(n=b)}function b(b,c){var d=Gb([b*Fh,c*Fh]);if(r){var e=Ib(r,d),f=[e[1],-e[0],0],g=Ib(f,e);Lb(g),g=Mb(g);var i=b-o,j=i>0?1:-1,p=g[0]*Gh*j,q=ih(i)>180;if(q^(p>j*o&&j*b>p)){var s=g[1]*Gh;s>n&&(n=s)}else if(p=(p+360)%360-180,q^(p>j*o&&j*b>p)){var s=-g[1]*Gh;l>s&&(l=s)}else l>c&&(l=c),c>n&&(n=c);q?o>b?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b):m>=k?(k>b&&(k=b),b>m&&(m=b)):b>o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b)}else a(b,c);r=d,o=b}function c(){v.point=b}function d(){u[0]=k,u[1]=m,v.point=a,r=null}function e(a,c){if(r){var d=a-o;s+=ih(d)>180?d+(d>0?360:-360):d}else p=a,q=c;oi.point(a,c),b(a,c)}function f(){oi.lineStart()}function g(){e(p,q),oi.lineEnd(),ih(s)>Dh&&(k=-(m=180)),u[0]=k,u[1]=m,r=null}function h(a,b){return(b-=a)<0?b+360:b}function i(a,b){return a[0]-b[0]}function j(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a
}var k,l,m,n,o,p,q,r,s,t,u,v={point:a,lineStart:c,lineEnd:d,polygonStart:function(){v.point=e,v.lineStart=f,v.lineEnd=g,s=0,oi.polygonStart()},polygonEnd:function(){oi.polygonEnd(),v.point=a,v.lineStart=c,v.lineEnd=d,0>ni?(k=-(m=180),l=-(n=90)):s>Dh?n=90:-Dh>s&&(l=-90),u[0]=k,u[1]=m}};return function(a){n=m=-(k=l=1/0),t=[],Wg.geo.stream(a,v);var b=t.length;if(b){t.sort(i);for(var c,d=1,e=t[0],f=[e];b>d;++d)c=t[d],j(c[0],e)||j(c[1],e)?(h(e[0],c[1])>h(e[0],e[1])&&(e[1]=c[1]),h(c[0],e[1])>h(e[0],e[1])&&(e[0]=c[0])):f.push(e=c);for(var g,c,o=-1/0,b=f.length-1,d=0,e=f[b];b>=d;e=c,++d)c=f[d],(g=h(e[1],c[0]))>o&&(o=g,k=c[0],m=e[1])}return t=u=null,1/0===k||1/0===l?[[0/0,0/0],[0/0,0/0]]:[[k,l],[m,n]]}}(),Wg.geo.centroid=function(a){pi=qi=ri=si=ti=ui=vi=wi=xi=yi=zi=0,Wg.geo.stream(a,Ai);var b=xi,c=yi,d=zi,e=b*b+c*c+d*d;return Eh>e&&(b=ui,c=vi,d=wi,Dh>qi&&(b=ri,c=si,d=ti),e=b*b+c*c+d*d,Eh>e)?[0/0,0/0]:[Math.atan2(c,b)*Gh,O(d/Math.sqrt(e))*Gh]};var pi,qi,ri,si,ti,ui,vi,wi,xi,yi,zi,Ai={sphere:i,point:Ob,lineStart:Qb,lineEnd:Rb,polygonStart:function(){Ai.lineStart=Sb},polygonEnd:function(){Ai.lineStart=Qb}},Bi=Xb(Tb,ac,cc,[-Ah,-Ah/2]),Ci=1e9;Wg.geo.clipExtent=function(){var a,b,c,d,e,f,g={stream:function(a){return e&&(e.valid=!1),e=f(a),e.valid=!0,e},extent:function(h){return arguments.length?(f=fc(a=+h[0][0],b=+h[0][1],c=+h[1][0],d=+h[1][1]),e&&(e.valid=!1,e=null),g):[[a,b],[c,d]]}};return g.extent([[0,0],[960,500]])},(Wg.geo.conicEqualArea=function(){return hc(ic)}).raw=ic,Wg.geo.albers=function(){return Wg.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Wg.geo.albersUsa=function(){function a(a){var f=a[0],g=a[1];return b=null,c(f,g),b||(d(f,g),b)||e(f,g),b}var b,c,d,e,f=Wg.geo.albers(),g=Wg.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=Wg.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i={point:function(a,c){b=[a,c]}};return a.invert=function(a){var b=f.scale(),c=f.translate(),d=(a[0]-c[0])/b,e=(a[1]-c[1])/b;return(e>=.12&&.234>e&&d>=-.425&&-.214>d?g:e>=.166&&.234>e&&d>=-.214&&-.115>d?h:f).invert(a)},a.stream=function(a){var b=f.stream(a),c=g.stream(a),d=h.stream(a);return{point:function(a,e){b.point(a,e),c.point(a,e),d.point(a,e)},sphere:function(){b.sphere(),c.sphere(),d.sphere()},lineStart:function(){b.lineStart(),c.lineStart(),d.lineStart()},lineEnd:function(){b.lineEnd(),c.lineEnd(),d.lineEnd()},polygonStart:function(){b.polygonStart(),c.polygonStart(),d.polygonStart()},polygonEnd:function(){b.polygonEnd(),c.polygonEnd(),d.polygonEnd()}}},a.precision=function(b){return arguments.length?(f.precision(b),g.precision(b),h.precision(b),a):f.precision()},a.scale=function(b){return arguments.length?(f.scale(b),g.scale(.35*b),h.scale(b),a.translate(f.translate())):f.scale()},a.translate=function(b){if(!arguments.length)return f.translate();var j=f.scale(),k=+b[0],l=+b[1];return c=f.translate(b).clipExtent([[k-.455*j,l-.238*j],[k+.455*j,l+.238*j]]).stream(i).point,d=g.translate([k-.307*j,l+.201*j]).clipExtent([[k-.425*j+Dh,l+.12*j+Dh],[k-.214*j-Dh,l+.234*j-Dh]]).stream(i).point,e=h.translate([k-.205*j,l+.212*j]).clipExtent([[k-.214*j+Dh,l+.166*j+Dh],[k-.115*j-Dh,l+.234*j-Dh]]).stream(i).point,a},a.scale(1070)};var Di,Ei,Fi,Gi,Hi,Ii,Ji={point:i,lineStart:i,lineEnd:i,polygonStart:function(){Ei=0,Ji.lineStart=jc},polygonEnd:function(){Ji.lineStart=Ji.lineEnd=Ji.point=i,Di+=ih(Ei/2)}},Ki={point:kc,lineStart:i,lineEnd:i,polygonStart:i,polygonEnd:i},Li={point:nc,lineStart:oc,lineEnd:pc,polygonStart:function(){Li.lineStart=qc},polygonEnd:function(){Li.point=nc,Li.lineStart=oc,Li.lineEnd=pc}};Wg.geo.path=function(){function a(a){return a&&("function"==typeof h&&f.pointRadius(+h.apply(this,arguments)),g&&g.valid||(g=e(f)),Wg.geo.stream(a,g)),f.result()}function b(){return g=null,a}var c,d,e,f,g,h=4.5;return a.area=function(a){return Di=0,Wg.geo.stream(a,e(Ji)),Di},a.centroid=function(a){return ri=si=ti=ui=vi=wi=xi=yi=zi=0,Wg.geo.stream(a,e(Li)),zi?[xi/zi,yi/zi]:wi?[ui/wi,vi/wi]:ti?[ri/ti,si/ti]:[0/0,0/0]},a.bounds=function(a){return Hi=Ii=-(Fi=Gi=1/0),Wg.geo.stream(a,e(Ki)),[[Fi,Gi],[Hi,Ii]]},a.projection=function(a){return arguments.length?(e=(c=a)?a.stream||tc(a):qb,b()):c},a.context=function(a){return arguments.length?(f=null==(d=a)?new lc:new rc(a),"function"!=typeof h&&f.pointRadius(h),b()):d},a.pointRadius=function(b){return arguments.length?(h="function"==typeof b?b:(f.pointRadius(+b),+b),a):h},a.projection(Wg.geo.albersUsa()).context(null)},Wg.geo.transform=function(a){return{stream:function(b){var c=new uc(b);for(var d in a)c[d]=a[d];return c}}},uc.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Wg.geo.projection=wc,Wg.geo.projectionMutator=xc,(Wg.geo.equirectangular=function(){return wc(zc)}).raw=zc.invert=zc,Wg.geo.rotation=function(a){function b(b){return b=a(b[0]*Fh,b[1]*Fh),b[0]*=Gh,b[1]*=Gh,b}return a=Bc(a[0]%360*Fh,a[1]*Fh,a.length>2?a[2]*Fh:0),b.invert=function(b){return b=a.invert(b[0]*Fh,b[1]*Fh),b[0]*=Gh,b[1]*=Gh,b},b},Ac.invert=zc,Wg.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,b=Bc(-a[0]*Fh,-a[1]*Fh,0).invert,e=[];return c(null,null,1,{point:function(a,c){e.push(a=b(a,c)),a[0]*=Gh,a[1]*=Gh}}),{type:"Polygon",coordinates:[e]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=Fc((b=+d)*Fh,e*Fh),a):b},a.precision=function(d){return arguments.length?(c=Fc(b*Fh,(e=+d)*Fh),a):e},a.angle(90)},Wg.geo.distance=function(a,b){var c,d=(b[0]-a[0])*Fh,e=a[1]*Fh,f=b[1]*Fh,g=Math.sin(d),h=Math.cos(d),i=Math.sin(e),j=Math.cos(e),k=Math.sin(f),l=Math.cos(f);return Math.atan2(Math.sqrt((c=l*g)*c+(c=j*k-i*l*h)*c),i*k+j*l*h)},Wg.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return Wg.range(Math.ceil(f/q)*q,e,q).map(m).concat(Wg.range(Math.ceil(j/r)*r,i,r).map(n)).concat(Wg.range(Math.ceil(d/o)*o,c,o).filter(function(a){return ih(a%q)>Dh}).map(k)).concat(Wg.range(Math.ceil(h/p)*p,g,p).filter(function(a){return ih(a%r)>Dh}).map(l))}var c,d,e,f,g,h,i,j,k,l,m,n,o=10,p=o,q=90,r=360,s=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[m(f).concat(n(i).slice(1),m(e).reverse().slice(1),n(j).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],j=+b[0][1],i=+b[1][1],f>e&&(b=f,f=e,e=b),j>i&&(b=j,j=i,i=b),a.precision(s)):[[f,j],[e,i]]},a.minorExtent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],h=+b[0][1],g=+b[1][1],d>c&&(b=d,d=c,c=b),h>g&&(b=h,h=g,g=b),a.precision(s)):[[d,h],[c,g]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(q=+b[0],r=+b[1],a):[q,r]},a.minorStep=function(b){return arguments.length?(o=+b[0],p=+b[1],a):[o,p]},a.precision=function(b){return arguments.length?(s=+b,k=Hc(h,g,90),l=Ic(d,c,s),m=Hc(j,i,90),n=Ic(f,e,s),a):s},a.majorExtent([[-180,-90+Dh],[180,90-Dh]]).minorExtent([[-180,-80-Dh],[180,80+Dh]])},Wg.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||d.apply(this,arguments),c||e.apply(this,arguments)]}}var b,c,d=Jc,e=Kc;return a.distance=function(){return Wg.geo.distance(b||d.apply(this,arguments),c||e.apply(this,arguments))},a.source=function(c){return arguments.length?(d=c,b="function"==typeof c?null:c,a):d},a.target=function(b){return arguments.length?(e=b,c="function"==typeof b?null:b,a):e},a.precision=function(){return arguments.length?a:0},a},Wg.geo.interpolate=function(a,b){return Lc(a[0]*Fh,a[1]*Fh,b[0]*Fh,b[1]*Fh)},Wg.geo.length=function(a){return Mi=0,Wg.geo.stream(a,Ni),Mi};var Mi,Ni={sphere:i,point:i,lineStart:Mc,lineEnd:i,polygonStart:i,polygonEnd:i},Oi=Nc(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(Wg.geo.azimuthalEqualArea=function(){return wc(Oi)}).raw=Oi;var Pi=Nc(function(a){var b=Math.acos(a);return b&&b/Math.sin(b)},qb);(Wg.geo.azimuthalEquidistant=function(){return wc(Pi)}).raw=Pi,(Wg.geo.conicConformal=function(){return hc(Oc)}).raw=Oc,(Wg.geo.conicEquidistant=function(){return hc(Pc)}).raw=Pc;var Qi=Nc(function(a){return 1/a},Math.atan);(Wg.geo.gnomonic=function(){return wc(Qi)}).raw=Qi,Qc.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Ch]},(Wg.geo.mercator=function(){return Rc(Qc)}).raw=Qc;var Ri=Nc(function(){return 1},Math.asin);(Wg.geo.orthographic=function(){return wc(Ri)}).raw=Ri;var Si=Nc(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(Wg.geo.stereographic=function(){return wc(Si)}).raw=Si,Sc.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-Ch]},(Wg.geo.transverseMercator=function(){var a=Rc(Sc),b=a.center,c=a.rotate;return a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[-a[1],a[0]])},a.rotate=function(a){return a?c([a[0],a[1],a.length>2?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])},a.rotate([0,0])}).raw=Sc,Wg.geom={},Wg.geom.hull=function(a){function b(a){if(a.length<3)return[];var b,e,f,g,h,i,j,k,l,m,n,o,p=pb(c),q=pb(d),r=a.length,s=r-1,t=[],u=[],v=0;if(p===Tc&&d===Uc)b=a;else for(f=0,b=[];r>f;++f)b.push([+p.call(this,e=a[f],f),+q.call(this,e,f)]);for(f=1;r>f;++f)(b[f][1]<b[v][1]||b[f][1]==b[v][1]&&b[f][0]<b[v][0])&&(v=f);for(f=0;r>f;++f)f!==v&&(i=b[f][1]-b[v][1],h=b[f][0]-b[v][0],t.push({angle:Math.atan2(i,h),index:f}));for(t.sort(function(a,b){return a.angle-b.angle}),n=t[0].angle,m=t[0].index,l=0,f=1;s>f;++f){if(g=t[f].index,n==t[f].angle){if(h=b[m][0]-b[v][0],i=b[m][1]-b[v][1],j=b[g][0]-b[v][0],k=b[g][1]-b[v][1],h*h+i*i>=j*j+k*k){t[f].index=-1;continue}t[l].index=-1}n=t[f].angle,l=f,m=g}for(u.push(v),f=0,g=0;2>f;++g)t[g].index>-1&&(u.push(t[g].index),f++);for(o=u.length;s>g;++g)if(!(t[g].index<0)){for(;!Vc(u[o-2],u[o-1],t[g].index,b);)--o;u[o++]=t[g].index}var w=[];for(f=o-1;f>=0;--f)w.push(a[u[f]]);return w}var c=Tc,d=Uc;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b)},Wg.geom.polygon=function(a){return nh(a,Ti),a};var Ti=Wg.geom.polygon.prototype=[];Ti.area=function(){for(var a,b=-1,c=this.length,d=this[c-1],e=0;++b<c;)a=d,d=this[b],e+=a[1]*d[0]-a[0]*d[1];return.5*e},Ti.centroid=function(a){var b,c,d=-1,e=this.length,f=0,g=0,h=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;)b=h,h=this[d],c=b[0]*h[1]-h[0]*b[1],f+=(b[0]+h[0])*c,g+=(b[1]+h[1])*c;return[f*a,g*a]},Ti.clip=function(a){for(var b,c,d,e,f,g,h=Yc(a),i=-1,j=this.length-Yc(this),k=this[j-1];++i<j;){for(b=a.slice(),a.length=0,e=this[i],f=b[(d=b.length-h)-1],c=-1;++c<d;)g=b[c],Wc(g,k,e)?(Wc(f,k,e)||a.push(Xc(f,g,k,e)),a.push(g)):Wc(f,k,e)&&a.push(Xc(f,g,k,e)),f=g;h&&a.push(a[0]),k=e}return a};var Ui,Vi,Wi,Xi,Yi,Zi=[],$i=[];ed.prototype.prepare=function(){for(var a,b=this.edges,c=b.length;c--;)a=b[c].edge,a.b&&a.a||b.splice(c,1);return b.sort(gd),b.length},qd.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},rd.prototype={insert:function(a,b){var c,d,e;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=vd(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);for(b.L=b.R=null,b.U=c,b.C=!0,a=b;c&&c.C;)d=c.U,c===d.L?(e=d.R,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(td(this,c),a=c,c=a.U),c.C=!1,d.C=!0,ud(this,d))):(e=d.L,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(ud(this,c),a=c,c=a.U),c.C=!1,d.C=!0,td(this,d))),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P),a.P&&(a.P.N=a.N),a.N=a.P=null;var b,c,d,e=a.U,f=a.L,g=a.R;if(c=f?g?vd(g):f:g,e?e.L===a?e.L=c:e.R=c:this._=c,f&&g?(d=c.C,c.C=a.C,c.L=f,f.U=c,c!==g?(e=c.U,c.U=a.U,a=c.R,e.L=a,c.R=g,g.U=c):(c.U=e,e=c,a=c.R)):(d=a.C,a=c),a&&(a.U=e),!d){if(a&&a.C)return void(a.C=!1);do{if(a===this._)break;if(a===e.L){if(b=e.R,b.C&&(b.C=!1,e.C=!0,td(this,e),b=e.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,ud(this,b),b=e.R),b.C=e.C,e.C=b.R.C=!1,td(this,e),a=this._;break}}else if(b=e.L,b.C&&(b.C=!1,e.C=!0,ud(this,e),b=e.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,td(this,b),b=e.L),b.C=e.C,e.C=b.L.C=!1,ud(this,e),a=this._;break}b.C=!0,a=e,e=e.U}while(!a.C);a&&(a.C=!1)}}},Wg.geom.voronoi=function(a){function b(a){var b=new Array(a.length),d=h[0][0],e=h[0][1],f=h[1][0],g=h[1][1];return wd(c(a),h).cells.forEach(function(c,h){var i=c.edges,j=c.site,k=b[h]=i.length?i.map(function(a){var b=a.start();return[b.x,b.y]}):j.x>=d&&j.x<=f&&j.y>=e&&j.y<=g?[[d,g],[f,g],[f,e],[d,e]]:[];k.point=a[h]}),b}function c(a){return a.map(function(a,b){return{x:Math.round(f(a,b)/Dh)*Dh,y:Math.round(g(a,b)/Dh)*Dh,i:b}})}var d=Tc,e=Uc,f=d,g=e,h=_i;return a?b(a):(b.links=function(a){return wd(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},b.triangles=function(a){var b=[];return wd(c(a)).cells.forEach(function(c,d){for(var e,f,g=c.site,h=c.edges.sort(gd),i=-1,j=h.length,k=h[j-1].edge,l=k.l===g?k.r:k.l;++i<j;)e=k,f=l,k=h[i].edge,l=k.l===g?k.r:k.l,d<f.i&&d<l.i&&yd(g,f,l)<0&&b.push([a[d],a[f.i],a[l.i]])}),b},b.x=function(a){return arguments.length?(f=pb(d=a),b):d},b.y=function(a){return arguments.length?(g=pb(e=a),b):e},b.clipExtent=function(a){return arguments.length?(h=null==a?_i:a,b):h===_i?null:h},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):h===_i?null:h&&h[1]},b)};var _i=[[-1e6,-1e6],[1e6,1e6]];Wg.geom.delaunay=function(a){return Wg.geom.voronoi().triangles(a)},Wg.geom.quadtree=function(a,b,c,d,e){function f(a){function f(a,b,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var i=a.x,k=a.y;if(null!=i)if(ih(i-c)+ih(k-d)<.01)j(a,b,c,d,e,f,g,h);else{var l=a.point;a.x=a.y=a.point=null,j(a,l,i,k,e,f,g,h),j(a,b,c,d,e,f,g,h)}else a.x=c,a.y=d,a.point=b}else j(a,b,c,d,e,f,g,h)}function j(a,b,c,d,e,g,h,i){var j=.5*(e+h),k=.5*(g+i),l=c>=j,m=d>=k,n=(m<<1)+l;a.leaf=!1,a=a.nodes[n]||(a.nodes[n]=Bd()),l?e=j:h=j,m?g=k:i=k,f(a,b,c,d,e,g,h,i)}var k,l,m,n,o,p,q,r,s,t=pb(h),u=pb(i);if(null!=b)p=b,q=c,r=d,s=e;else if(r=s=-(p=q=1/0),l=[],m=[],o=a.length,g)for(n=0;o>n;++n)k=a[n],k.x<p&&(p=k.x),k.y<q&&(q=k.y),k.x>r&&(r=k.x),k.y>s&&(s=k.y),l.push(k.x),m.push(k.y);else for(n=0;o>n;++n){var v=+t(k=a[n],n),w=+u(k,n);p>v&&(p=v),q>w&&(q=w),v>r&&(r=v),w>s&&(s=w),l.push(v),m.push(w)}var x=r-p,y=s-q;x>y?s=q+x:r=p+y;var z=Bd();if(z.add=function(a){f(z,a,+t(a,++n),+u(a,n),p,q,r,s)},z.visit=function(a){Cd(a,z,p,q,r,s)},n=-1,null==b){for(;++n<o;)f(z,a[n],l[n],m[n],p,q,r,s);--n}else a.forEach(z.add);return l=m=a=k=null,z}var g,h=Tc,i=Uc;return(g=arguments.length)?(h=zd,i=Ad,3===g&&(e=c,d=b,c=b=0),f(a)):(f.x=function(a){return arguments.length?(h=a,f):h},f.y=function(a){return arguments.length?(i=a,f):i},f.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),f):null==b?null:[[b,c],[d,e]]},f.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),f):null==b?null:[d-b,e-c]},f)},Wg.interpolateRgb=Dd,Wg.interpolateObject=Ed,Wg.interpolateNumber=Fd,Wg.interpolateString=Gd;var aj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;Wg.interpolate=Hd,Wg.interpolators=[function(a,b){var c=typeof b;return("string"===c?Vh.has(b)||/^(#|rgb\(|hsl\()/.test(b)?Dd:Gd:b instanceof T?Dd:"object"===c?Array.isArray(b)?Id:Ed:Fd)(a,b)}],Wg.interpolateArray=Id;var bj=function(){return qb},cj=Wg.map({linear:bj,poly:Pd,quad:function(){return Md},cubic:function(){return Nd},sin:function(){return Qd},exp:function(){return Rd},circle:function(){return Sd},elastic:Td,back:Ud,bounce:function(){return Vd}}),dj=Wg.map({"in":qb,out:Kd,"in-out":Ld,"out-in":function(a){return Ld(Kd(a))}});Wg.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.substring(0,b):a,d=b>=0?a.substring(b+1):"in";return c=cj.get(c)||bj,d=dj.get(d)||qb,Jd(d(c.apply(null,Xg.call(arguments,1))))},Wg.interpolateHcl=Wd,Wg.interpolateHsl=Xd,Wg.interpolateLab=Yd,Wg.interpolateRound=Zd,Wg.transform=function(a){var b=Zg.createElementNS(Wg.ns.prefix.svg,"g");return(Wg.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new $d(c?c.matrix:ej)})(a)},$d.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ej={a:1,b:0,c:0,d:1,e:0,f:0};Wg.interpolateTransform=ce,Wg.layout={},Wg.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(fe(a[c]));return b}},Wg.layout.chord=function(){function a(){var a,j,l,m,n,o={},p=[],q=Wg.range(f),r=[];for(c=[],d=[],a=0,m=-1;++m<f;){for(j=0,n=-1;++n<f;)j+=e[m][n];p.push(j),r.push(Wg.range(f)),a+=j}for(g&&q.sort(function(a,b){return g(p[a],p[b])}),h&&r.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})}),a=(Bh-k*f)/a,j=0,m=-1;++m<f;){for(l=j,n=-1;++n<f;){var s=q[m],t=r[s][n],u=e[s][t],v=j,w=j+=u*a;o[s+"-"+t]={index:s,subindex:t,startAngle:v,endAngle:w,value:u}}d[s]={index:s,startAngle:l,endAngle:j,value:(j-l)/a},j+=k}for(m=-1;++m<f;)for(n=m-1;++n<f;){var x=o[m+"-"+n],y=o[n+"-"+m];(x.value||y.value)&&c.push(x.value<y.value?{source:y,target:x}:{source:x,target:y})}i&&b()}function b(){c.sort(function(a,b){return i((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,h,i,j={},k=0;return j.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,j):e},j.padding=function(a){return arguments.length?(k=a,c=d=null,j):k},j.sortGroups=function(a){return arguments.length?(g=a,c=d=null,j):g},j.sortSubgroups=function(a){return arguments.length?(h=a,c=null,j):h},j.sortChords=function(a){return arguments.length?(i=a,c&&b(),j):i},j.chords=function(){return c||a(),c},j.groups=function(){return d||a(),d},j},Wg.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==a){var f=b.cx-a.x,g=b.cy-a.y,h=1/Math.sqrt(f*f+g*g);if(p>(e-c)*h){var i=b.charge*h*h;return a.px-=f*i,a.py-=g*i,!0}if(b.point&&isFinite(h)){var i=b.pointCharge*h*h;a.px-=f*i,a.py-=g*i}}return!b.charge}}function b(a){a.px=Wg.event.x,a.py=Wg.event.y,h.resume()}var c,d,e,f,g,h={},i=Wg.dispatch("start","tick","end"),j=[1,1],k=.9,l=fj,m=gj,n=-30,o=.1,p=.8,q=[],r=[];return h.tick=function(){if((d*=.99)<.005)return i.end({type:"end",alpha:d=0}),!0;var b,c,h,l,m,p,s,t,u,v=q.length,w=r.length;for(c=0;w>c;++c)h=r[c],l=h.source,m=h.target,t=m.x-l.x,u=m.y-l.y,(p=t*t+u*u)&&(p=d*f[c]*((p=Math.sqrt(p))-e[c])/p,t*=p,u*=p,m.x-=t*(s=l.weight/(m.weight+l.weight)),m.y-=u*s,l.x+=t*(s=1-s),l.y+=u*s);if((s=d*o)&&(t=j[0]/2,u=j[1]/2,c=-1,s))for(;++c<v;)h=q[c],h.x+=(t-h.x)*s,h.y+=(u-h.y)*s;if(n)for(me(b=Wg.geom.quadtree(q),d,g),c=-1;++c<v;)(h=q[c]).fixed||b.visit(a(h));for(c=-1;++c<v;)h=q[c],h.fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*k,h.y-=(h.py-(h.py=h.y))*k);i.tick({type:"tick",alpha:d})},h.nodes=function(a){return arguments.length?(q=a,h):q},h.links=function(a){return arguments.length?(r=a,h):r},h.size=function(a){return arguments.length?(j=a,h):j},h.linkDistance=function(a){return arguments.length?(l="function"==typeof a?a:+a,h):l},h.distance=h.linkDistance,h.linkStrength=function(a){return arguments.length?(m="function"==typeof a?a:+a,h):m},h.friction=function(a){return arguments.length?(k=+a,h):k},h.charge=function(a){return arguments.length?(n="function"==typeof a?a:+a,h):n},h.gravity=function(a){return arguments.length?(o=+a,h):o},h.theta=function(a){return arguments.length?(p=+a,h):p},h.alpha=function(a){return arguments.length?(a=+a,d?d=a>0?a:0:a>0&&(i.start({type:"start",alpha:d=a}),Wg.timer(h.tick)),h):d},h.start=function(){function a(a,d){if(!c){for(c=new Array(i),h=0;i>h;++h)c[h]=[];for(h=0;j>h;++h){var e=r[h];c[e.source.index].push(e.target),c[e.target.index].push(e.source)}}for(var f,g=c[b],h=-1,j=g.length;++h<j;)if(!isNaN(f=g[h][a]))return f;return Math.random()*d}var b,c,d,i=q.length,k=r.length,o=j[0],p=j[1];for(b=0;i>b;++b)(d=q[b]).index=b,d.weight=0;for(b=0;k>b;++b)d=r[b],"number"==typeof d.source&&(d.source=q[d.source]),"number"==typeof d.target&&(d.target=q[d.target]),++d.source.weight,++d.target.weight;for(b=0;i>b;++b)d=q[b],isNaN(d.x)&&(d.x=a("x",o)),isNaN(d.y)&&(d.y=a("y",p)),isNaN(d.px)&&(d.px=d.x),isNaN(d.py)&&(d.py=d.y);if(e=[],"function"==typeof l)for(b=0;k>b;++b)e[b]=+l.call(this,r[b],b);else for(b=0;k>b;++b)e[b]=l;if(f=[],"function"==typeof m)for(b=0;k>b;++b)f[b]=+m.call(this,r[b],b);else for(b=0;k>b;++b)f[b]=m;if(g=[],"function"==typeof n)for(b=0;i>b;++b)g[b]=+n.call(this,q[b],b);else for(b=0;i>b;++b)g[b]=n;return h.resume()},h.resume=function(){return h.alpha(.1)},h.stop=function(){return h.alpha(0)},h.drag=function(){return c||(c=Wg.behavior.drag().origin(qb).on("dragstart.force",ie).on("drag.force",b).on("dragend.force",je)),arguments.length?void this.on("mouseover.force",ke).on("mouseout.force",le).call(c):c},Wg.rebind(h,i,"on")};var fj=20,gj=1;Wg.layout.hierarchy=function(){function a(b,g,h){var i=e.call(c,b,g);if(b.depth=g,h.push(b),i&&(j=i.length)){for(var j,k,l=-1,m=b.children=new Array(j),n=0,o=g+1;++l<j;)k=m[l]=a(i[l],o,h),k.parent=b,n+=k.value;d&&m.sort(d),f&&(b.value=n)}else delete b.children,f&&(b.value=+f.call(c,b,g)||0);return b}function b(a,d){var e=a.children,g=0;if(e&&(h=e.length))for(var h,i=-1,j=d+1;++i<h;)g+=b(e[i],j);else f&&(g=+f.call(c,a,d)||0);return f&&(a.value=g),g}function c(b){var c=[];return a(b,0,c),c}var d=qe,e=oe,f=pe;return c.sort=function(a){return arguments.length?(d=a,c):d},c.children=function(a){return arguments.length?(e=a,c):e},c.value=function(a){return arguments.length?(f=a,c):f},c.revalue=function(a){return b(a,0),a},c},Wg.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,h,i,j=-1;for(d=b.value?d/b.value:0;++j<g;)a(h=f[j],c,i=h.value*d,e),c+=i}}function b(a){var c=a.children,d=0;if(c&&(e=c.length))for(var e,f=-1;++f<e;)d=Math.max(d,b(c[f]));return 1+d}function c(c,f){var g=d.call(this,c,f);return a(g[0],0,e[0],e[1]/b(g[0])),g}var d=Wg.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},ne(c,d)},Wg.layout.pie=function(){function a(f){var g=f.map(function(c,d){return+b.call(a,c,d)}),h=+("function"==typeof d?d.apply(this,arguments):d),i=(("function"==typeof e?e.apply(this,arguments):e)-h)/Wg.sum(g),j=Wg.range(f.length);null!=c&&j.sort(c===hj?function(a,b){return g[b]-g[a]}:function(a,b){return c(f[a],f[b])});var k=[];return j.forEach(function(a){var b;k[a]={data:f[a],value:b=g[a],startAngle:h,endAngle:h+=b*i}}),k}var b=Number,c=hj,d=0,e=Bh;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a};var hj={};Wg.layout.stack=function(){function a(h,i){var j=h.map(function(c,d){return b.call(a,c,d)}),k=j.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,b,c)]})}),l=c.call(a,k,i);j=Wg.permute(j,l),k=Wg.permute(k,l);var m,n,o,p=d.call(a,k,i),q=j.length,r=j[0].length;for(n=0;r>n;++n)for(e.call(a,j[0][n],o=p[n],k[0][n][1]),m=1;q>m;++m)e.call(a,j[m][n],o+=k[m-1][n][1],k[m][n][1]);return h}var b=qb,c=ve,d=we,e=ue,f=se,g=te;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:ij.get(b)||ve,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:jj.get(b)||we,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(g=b,a):g},a.out=function(b){return arguments.length?(e=b,a):e},a};var ij=Wg.map({"inside-out":function(a){var b,c,d=a.length,e=a.map(xe),f=a.map(ye),g=Wg.range(d).sort(function(a,b){return e[a]-e[b]}),h=0,i=0,j=[],k=[];for(b=0;d>b;++b)c=g[b],i>h?(h+=f[c],j.push(c)):(i+=f[c],k.push(c));return k.reverse().concat(j)},reverse:function(a){return Wg.range(a.length).reverse()},"default":ve}),jj=Wg.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,g=[],h=0,i=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];d>h&&(h=d),g.push(d)}for(c=0;f>c;++c)i[c]=(h-g[c])/2;return i},wiggle:function(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=a[0],m=l.length,n=[];for(n[0]=i=j=0,c=1;m>c;++c){for(b=0,e=0;k>b;++b)e+=a[b][c][1];for(b=0,f=0,h=l[c][0]-l[c-1][0];k>b;++b){for(d=0,g=(a[b][c][1]-a[b][c-1][1])/(2*h);b>d;++d)g+=(a[d][c][1]-a[d][c-1][1])/h;f+=g*a[b][c][1]}n[c]=i-=e?f/e*h:0,j>i&&(j=i)}for(c=0;m>c;++c)n[c]-=j;return n},expand:function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];if(d)for(b=0;e>b;b++)a[b][c][1]/=d;else for(b=0;e>b;b++)a[b][c][1]=g}for(c=0;f>c;++c)h[c]=0;return h},zero:we});Wg.layout.histogram=function(){function a(a,f){for(var g,h,i=[],j=a.map(c,this),k=d.call(this,j,f),l=e.call(this,k,j,f),f=-1,m=j.length,n=l.length-1,o=b?1:1/m;++f<n;)g=i[f]=[],g.dx=l[f+1]-(g.x=l[f]),g.y=0;if(n>0)for(f=-1;++f<m;)h=j[f],h>=k[0]&&h<=k[1]&&(g=i[Wg.bisect(l,h,1,n)-1],g.y+=o,g.push(a[f]));return i}var b=!0,c=Number,d=Ce,e=Ae;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=pb(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return Be(a,b)}:pb(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a},Wg.layout.tree=function(){function a(a,f){function g(a,b){var d=a.children,e=a._tree;if(d&&(f=d.length)){for(var f,h,j,k=d[0],l=k,m=-1;++m<f;)j=d[m],g(j,h),l=i(j,h,l),h=j;Le(a);var n=.5*(k._tree.prelim+j._tree.prelim);b?(e.prelim=b._tree.prelim+c(a,b),e.mod=e.prelim-n):e.prelim=n}else b&&(e.prelim=b._tree.prelim+c(a,b))}function h(a,b){a.x=a._tree.prelim+b;var c=a.children;if(c&&(d=c.length)){var d,e=-1;for(b+=a._tree.mod;++e<d;)h(c[e],b)}}function i(a,b,d){if(b){for(var e,f=a,g=a,h=b,i=a.parent.children[0],j=f._tree.mod,k=g._tree.mod,l=h._tree.mod,m=i._tree.mod;h=Fe(h),f=Ee(f),h&&f;)i=Ee(i),g=Fe(g),g._tree.ancestor=a,e=h._tree.prelim+l-f._tree.prelim-j+c(h,f),e>0&&(Me(Ne(h,a,d),a,e),j+=e,k+=e),l+=h._tree.mod,j+=f._tree.mod,m+=i._tree.mod,k+=g._tree.mod;h&&!Fe(g)&&(g._tree.thread=h,g._tree.mod+=l-k),f&&!Ee(i)&&(i._tree.thread=f,i._tree.mod+=j-m,d=a)}return d}var j=b.call(this,a,f),k=j[0];Ke(k,function(a,b){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:b?b._tree.number+1:0}}),g(k),h(k,-k._tree.prelim);var l=Ge(k,Ie),m=Ge(k,He),n=Ge(k,Je),o=l.x-c(l,m)/2,p=m.x+c(m,l)/2,q=n.depth||1;return Ke(k,e?function(a){a.x*=d[0],a.y=a.depth*d[1],delete a._tree}:function(a){a.x=(a.x-o)/(p-o)*d[0],a.y=a.depth/q*d[1],delete a._tree}),j}var b=Wg.layout.hierarchy().sort(null).value(null),c=De,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},ne(a,b)},Wg.layout.pack=function(){function a(a,f){var g=c.call(this,a,f),h=g[0],i=e[0],j=e[1],k=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(h.x=h.y=0,Ke(h,function(a){a.r=+k(a.value)}),Ke(h,Se),d){var l=d*(b?1:Math.max(2*h.r/i,2*h.r/j))/2;Ke(h,function(a){a.r+=l}),Ke(h,Se),Ke(h,function(a){a.r-=l})}return Ve(h,i/2,j/2,b?1:1/Math.max(2*h.r/i,2*h.r/j)),g}var b,c=Wg.layout.hierarchy().sort(Oe),d=0,e=[1,1];return a.size=function(b){return arguments.length?(e=b,a):e},a.radius=function(c){return arguments.length?(b=null==c||"function"==typeof c?c:+c,a):b},a.padding=function(b){return arguments.length?(d=+b,a):d},ne(a,c)},Wg.layout.cluster=function(){function a(a,f){var g,h=b.call(this,a,f),i=h[0],j=0;Ke(i,function(a){var b=a.children;b&&b.length?(a.x=Ye(b),a.y=Xe(b)):(a.x=g?j+=c(a,g):0,a.y=0,g=a)});var k=Ze(i),l=$e(i),m=k.x-c(k,l)/2,n=l.x+c(l,k)/2;return Ke(i,e?function(a){a.x=(a.x-i.x)*d[0],a.y=(i.y-a.y)*d[1]}:function(a){a.x=(a.x-m)/(n-m)*d[0],a.y=(1-(i.y?a.y/i.y:1))*d[1]}),h}var b=Wg.layout.hierarchy().sort(null).value(null),c=De,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},ne(a,b)},Wg.layout.treemap=function(){function a(a,b){for(var c,d,e=-1,f=a.length;++e<f;)d=(c=a[e]).value*(0>b?0:b),c.area=isNaN(d)||0>=d?0:d}function b(c){var f=c.children;if(f&&f.length){var g,h,i,j=l(c),k=[],m=f.slice(),o=1/0,p="slice"===n?j.dx:"dice"===n?j.dy:"slice-dice"===n?1&c.depth?j.dy:j.dx:Math.min(j.dx,j.dy);for(a(m,j.dx*j.dy/c.value),k.area=0;(i=m.length)>0;)k.push(g=m[i-1]),k.area+=g.area,"squarify"!==n||(h=d(k,p))<=o?(m.pop(),o=h):(k.area-=k.pop().area,e(k,p,j,!1),p=Math.min(j.dx,j.dy),k.length=k.area=0,o=1/0);k.length&&(e(k,p,j,!0),k.length=k.area=0),f.forEach(b)}}function c(b){var d=b.children;if(d&&d.length){var f,g=l(b),h=d.slice(),i=[];for(a(h,g.dx*g.dy/b.value),i.area=0;f=h.pop();)i.push(f),i.area+=f.area,null!=f.z&&(e(i,f.z?g.dx:g.dy,g,!h.length),i.length=i.area=0);d.forEach(c)}}function d(a,b){for(var c,d=a.area,e=0,f=1/0,g=-1,h=a.length;++g<h;)(c=a[g].area)&&(f>c&&(f=c),c>e&&(e=c));return d*=d,b*=b,d?Math.max(b*e*o/d,d/(b*f*o)):1/0}function e(a,b,c,d){var e,f=-1,g=a.length,h=c.x,j=c.y,k=b?i(a.area/b):0;if(b==c.dx){for((d||k>c.dy)&&(k=c.dy);++f<g;)e=a[f],e.x=h,e.y=j,e.dy=k,h+=e.dx=Math.min(c.x+c.dx-h,k?i(e.area/k):0);e.z=!0,e.dx+=c.x+c.dx-h,c.y+=k,c.dy-=k}else{for((d||k>c.dx)&&(k=c.dx);++f<g;)e=a[f],e.x=h,e.y=j,e.dx=k,j+=e.dy=Math.min(c.y+c.dy-j,k?i(e.area/k):0);e.z=!1,e.dy+=c.y+c.dy-j,c.x+=k,c.dx-=k}}function f(d){var e=g||h(d),f=e[0];return f.x=0,f.y=0,f.dx=j[0],f.dy=j[1],g&&h.revalue(f),a([f],f.dx*f.dy/f.value),(g?c:b)(f),m&&(g=e),e}var g,h=Wg.layout.hierarchy(),i=Math.round,j=[1,1],k=null,l=_e,m=!1,n="squarify",o=.5*(1+Math.sqrt(5));return f.size=function(a){return arguments.length?(j=a,f):j},f.padding=function(a){function b(b){var c=a.call(f,b,b.depth);return null==c?_e(b):af(b,"number"==typeof c?[c,c,c,c]:c)}function c(b){return af(b,a)}if(!arguments.length)return k;var d;return l=null==(k=a)?_e:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,f},f.round=function(a){return arguments.length?(i=a?Math.round:Number,f):i!=Number},f.sticky=function(a){return arguments.length?(m=a,g=null,f):m},f.ratio=function(a){return arguments.length?(o=a,f):o},f.mode=function(a){return arguments.length?(n=a+"",f):n},ne(f,h)},Wg.random={normal:function(a,b){var c=arguments.length;return 2>c&&(b=1),1>c&&(a=0),function(){var c,d,e;do c=2*Math.random()-1,d=2*Math.random()-1,e=c*c+d*d;while(!e||e>1);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=Wg.random.normal.apply(Wg,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=Wg.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;a>c;c++)b+=Math.random();return b}}},Wg.scale={};var kj={floor:qb,ceil:qb};Wg.scale.linear=function(){return hf([0,1],[0,1],Hd,!1)};var lj={s:1,g:1,p:1,r:1,e:1};Wg.scale.log=function(){return qf(Wg.scale.linear().domain([0,1]),10,!0,[1,10])};var mj=Wg.format(".0e"),nj={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};Wg.scale.pow=function(){return rf(Wg.scale.linear(),1,[0,1])},Wg.scale.sqrt=function(){return Wg.scale.pow().exponent(.5)},Wg.scale.ordinal=function(){return tf([],{t:"range",a:[[]]})},Wg.scale.category10=function(){return Wg.scale.ordinal().range(oj)},Wg.scale.category20=function(){return Wg.scale.ordinal().range(pj)},Wg.scale.category20b=function(){return Wg.scale.ordinal().range(qj)},Wg.scale.category20c=function(){return Wg.scale.ordinal().range(rj)};var oj=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(gb),pj=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(gb),qj=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(gb),rj=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(gb);
Wg.scale.quantile=function(){return uf([],[])},Wg.scale.quantize=function(){return vf(0,1,[0,1])},Wg.scale.threshold=function(){return wf([.5],[0,1])},Wg.scale.identity=function(){return xf([0,1])},Wg.svg={},Wg.svg.arc=function(){function a(){var a=b.apply(this,arguments),f=c.apply(this,arguments),g=d.apply(this,arguments)+sj,h=e.apply(this,arguments)+sj,i=(g>h&&(i=g,g=h,h=i),h-g),j=Ah>i?"0":"1",k=Math.cos(g),l=Math.sin(g),m=Math.cos(h),n=Math.sin(h);return i>=tj?a?"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"Z":a?"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L"+a*m+","+a*n+"A"+a+","+a+" 0 "+j+",0 "+a*k+","+a*l+"Z":"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L0,0Z"}var b=yf,c=zf,d=Af,e=Bf;return a.innerRadius=function(c){return arguments.length?(b=pb(c),a):b},a.outerRadius=function(b){return arguments.length?(c=pb(b),a):c},a.startAngle=function(b){return arguments.length?(d=pb(b),a):d},a.endAngle=function(b){return arguments.length?(e=pb(b),a):e},a.centroid=function(){var a=(b.apply(this,arguments)+c.apply(this,arguments))/2,f=(d.apply(this,arguments)+e.apply(this,arguments))/2+sj;return[Math.cos(f)*a,Math.sin(f)*a]},a};var sj=-Ch,tj=Bh-Dh;Wg.svg.line=function(){return Cf(qb)};var uj=Wg.map({linear:Df,"linear-closed":Ef,step:Ff,"step-before":Gf,"step-after":Hf,basis:Nf,"basis-open":Of,"basis-closed":Pf,bundle:Qf,cardinal:Kf,"cardinal-open":If,"cardinal-closed":Jf,monotone:Wf});uj.forEach(function(a,b){b.key=a,b.closed=/-closed$/.test(a)});var vj=[0,2/3,1/3,0],wj=[0,1/3,2/3,0],xj=[0,1/6,2/3,1/6];Wg.svg.line.radial=function(){var a=Cf(Xf);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},Gf.reverse=Hf,Hf.reverse=Gf,Wg.svg.area=function(){return Yf(qb)},Wg.svg.area.radial=function(){var a=Yf(Xf);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},Wg.svg.chord=function(){function a(a,h){var i=b(this,f,a,h),j=b(this,g,a,h);return"M"+i.p0+d(i.r,i.p1,i.a1-i.a0)+(c(i,j)?e(i.r,i.p1,i.r,i.p0):e(i.r,i.p1,j.r,j.p0)+d(j.r,j.p1,j.a1-j.a0)+e(j.r,j.p1,i.r,i.p0))+"Z"}function b(a,b,c,d){var e=b.call(a,c,d),f=h.call(a,e,d),g=i.call(a,e,d)+sj,k=j.call(a,e,d)+sj;return{r:f,a0:g,a1:k,p0:[f*Math.cos(g),f*Math.sin(g)],p1:[f*Math.cos(k),f*Math.sin(k)]}}function c(a,b){return a.a0==b.a0&&a.a1==b.a1}function d(a,b,c){return"A"+a+","+a+" 0 "+ +(c>Ah)+",1 "+b}function e(a,b,c,d){return"Q 0,0 "+d}var f=Jc,g=Kc,h=Zf,i=Af,j=Bf;return a.radius=function(b){return arguments.length?(h=pb(b),a):h},a.source=function(b){return arguments.length?(f=pb(b),a):f},a.target=function(b){return arguments.length?(g=pb(b),a):g},a.startAngle=function(b){return arguments.length?(i=pb(b),a):i},a.endAngle=function(b){return arguments.length?(j=pb(b),a):j},a},Wg.svg.diagonal=function(){function a(a,e){var f=b.call(this,a,e),g=c.call(this,a,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];return i=i.map(d),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var b=Jc,c=Kc,d=$f;return a.source=function(c){return arguments.length?(b=pb(c),a):b},a.target=function(b){return arguments.length?(c=pb(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a},Wg.svg.diagonal.radial=function(){var a=Wg.svg.diagonal(),b=$f,c=a.projection;return a.projection=function(a){return arguments.length?c(_f(b=a)):b},a},Wg.svg.symbol=function(){function a(a,d){return(yj.get(b.call(this,a,d))||cg)(c.call(this,a,d))}var b=bg,c=ag;return a.type=function(c){return arguments.length?(b=pb(c),a):b},a.size=function(b){return arguments.length?(c=pb(b),a):c},a};var yj=Wg.map({circle:cg,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*Cj)),c=b*Cj;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/Bj),c=b*Bj/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/Bj),c=b*Bj/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});Wg.svg.symbolTypes=yj.keys();var zj,Aj,Bj=Math.sqrt(3),Cj=Math.tan(30*Fh),Dj=[],Ej=0;Dj.call=sh.call,Dj.empty=sh.empty,Dj.node=sh.node,Dj.size=sh.size,Wg.transition=function(a){return arguments.length?zj?a.transition():a:vh.transition()},Wg.transition.prototype=Dj,Dj.select=function(a){var b,c,d,e=this.id,f=[];a=p(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]);for(var i=this[g],j=-1,k=i.length;++j<k;)(d=i[j])&&(c=a.call(d,d.__data__,j,g))?("__data__"in d&&(c.__data__=d.__data__),gg(c,j,e,d.__transition__[e]),b.push(c)):b.push(null)}return dg(f,e)},Dj.selectAll=function(a){var b,c,d,e,f,g=this.id,h=[];a=q(a);for(var i=-1,j=this.length;++i<j;)for(var k=this[i],l=-1,m=k.length;++l<m;)if(d=k[l]){f=d.__transition__[g],c=a.call(d,d.__data__,l,i),h.push(b=[]);for(var n=-1,o=c.length;++n<o;)(e=c[n])&&gg(e,n,g,f),b.push(e)}return dg(h,g)},Dj.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=B(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]);for(var c=this[f],h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return dg(e,this.id)},Dj.tween=function(a,b){var c=this.id;return arguments.length<2?this.node().__transition__[c].tween.get(a):D(this,null==b?function(b){b.__transition__[c].tween.remove(a)}:function(d){d.__transition__[c].tween.set(a,b)})},Dj.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return null==a?c:(a+="",function(){var b,c=this.getAttribute(h);return c!==a&&(b=g(c,a),function(a){this.setAttribute(h,b(a))})})}function f(a){return null==a?d:(a+="",function(){var b,c=this.getAttributeNS(h.space,h.local);return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(h.space,h.local,b(a))})})}if(arguments.length<2){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?ce:Hd,h=Wg.ns.qualify(a);return eg(this,"attr."+a,b,h.local?f:e)},Dj.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=Wg.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)},Dj.style=function(a,b,c){function d(){this.style.removeProperty(a)}function e(b){return null==b?d:(b+="",function(){var d,e=_g.getComputedStyle(this,null).getPropertyValue(a);return e!==b&&(d=Hd(e,b),function(b){this.style.setProperty(a,d(b),c)})})}var f=arguments.length;if(3>f){if("string"!=typeof a){2>f&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}return eg(this,"style."+a,b,e)},Dj.styleTween=function(a,b,c){function d(d,e){var f=b.call(this,d,e,_g.getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),c)}}return arguments.length<3&&(c=""),this.tween("style."+a,d)},Dj.text=function(a){return eg(this,"text",a,fg)},Dj.remove=function(){return this.each("end.transition",function(){var a;this.__transition__.count<2&&(a=this.parentNode)&&a.removeChild(this)})},Dj.ease=function(a){var b=this.id;return arguments.length<1?this.node().__transition__[b].ease:("function"!=typeof a&&(a=Wg.ease.apply(Wg,arguments)),D(this,function(c){c.__transition__[b].ease=a}))},Dj.delay=function(a){var b=this.id;return D(this,"function"==typeof a?function(c,d,e){c.__transition__[b].delay=+a.call(c,c.__data__,d,e)}:(a=+a,function(c){c.__transition__[b].delay=a}))},Dj.duration=function(a){var b=this.id;return D(this,"function"==typeof a?function(c,d,e){c.__transition__[b].duration=Math.max(1,a.call(c,c.__data__,d,e))}:(a=Math.max(1,a),function(c){c.__transition__[b].duration=a}))},Dj.each=function(a,b){var c=this.id;if(arguments.length<2){var d=Aj,e=zj;zj=c,D(this,function(b,d,e){Aj=b.__transition__[c],a.call(b,b.__data__,d,e)}),Aj=d,zj=e}else D(this,function(d){var e=d.__transition__[c];(e.event||(e.event=Wg.dispatch("start","end"))).on(a,b)});return this},Dj.transition=function(){for(var a,b,c,d,e=this.id,f=++Ej,g=[],h=0,i=this.length;i>h;h++){g.push(a=[]);for(var b=this[h],j=0,k=b.length;k>j;j++)(c=b[j])&&(d=Object.create(c.__transition__[e]),d.delay+=d.duration,gg(c,j,f,d)),a.push(c)}return dg(g,f)},Wg.svg.axis=function(){function a(a){a.each(function(){var a,j=Wg.select(this),k=this.__chart__||c,l=this.__chart__=c.copy(),m=null==i?l.ticks?l.ticks.apply(l,h):l.domain():i,n=null==b?l.tickFormat?l.tickFormat.apply(l,h):qb:b,o=j.selectAll(".tick").data(m,l),p=o.enter().insert("g",".domain").attr("class","tick").style("opacity",Dh),q=Wg.transition(o.exit()).style("opacity",Dh).remove(),r=Wg.transition(o).style("opacity",1),s=cf(l),t=j.selectAll(".domain").data([0]),u=(t.enter().append("path").attr("class","domain"),Wg.transition(t));p.append("line"),p.append("text");var v=p.select("line"),w=r.select("line"),x=o.select("text").text(n),y=p.select("text"),z=r.select("text");switch(d){case"bottom":a=hg,v.attr("y2",e),y.attr("y",Math.max(e,0)+g),w.attr("x2",0).attr("y2",e),z.attr("x",0).attr("y",Math.max(e,0)+g),x.attr("dy",".71em").style("text-anchor","middle"),u.attr("d","M"+s[0]+","+f+"V0H"+s[1]+"V"+f);break;case"top":a=hg,v.attr("y2",-e),y.attr("y",-(Math.max(e,0)+g)),w.attr("x2",0).attr("y2",-e),z.attr("x",0).attr("y",-(Math.max(e,0)+g)),x.attr("dy","0em").style("text-anchor","middle"),u.attr("d","M"+s[0]+","+-f+"V0H"+s[1]+"V"+-f);break;case"left":a=ig,v.attr("x2",-e),y.attr("x",-(Math.max(e,0)+g)),w.attr("x2",-e).attr("y2",0),z.attr("x",-(Math.max(e,0)+g)).attr("y",0),x.attr("dy",".32em").style("text-anchor","end"),u.attr("d","M"+-f+","+s[0]+"H0V"+s[1]+"H"+-f);break;case"right":a=ig,v.attr("x2",e),y.attr("x",Math.max(e,0)+g),w.attr("x2",e).attr("y2",0),z.attr("x",Math.max(e,0)+g).attr("y",0),x.attr("dy",".32em").style("text-anchor","start"),u.attr("d","M"+f+","+s[0]+"H0V"+s[1]+"H"+f)}if(l.rangeBand){var A=l,B=A.rangeBand()/2;k=l=function(a){return A(a)+B}}else k.rangeBand?k=l:q.call(a,l);p.call(a,k),r.call(a,l)})}var b,c=Wg.scale.linear(),d=Fj,e=6,f=6,g=3,h=[10],i=null;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b in Gj?b+"":Fj,a):d},a.ticks=function(){return arguments.length?(h=arguments,a):h},a.tickValues=function(b){return arguments.length?(i=b,a):i},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b){var c=arguments.length;return c?(e=+b,f=+arguments[c-1],a):e},a.innerTickSize=function(b){return arguments.length?(e=+b,a):e},a.outerTickSize=function(b){return arguments.length?(f=+b,a):f},a.tickPadding=function(b){return arguments.length?(g=+b,a):g},a.tickSubdivide=function(){return arguments.length&&a},a};var Fj="bottom",Gj={top:1,right:1,bottom:1,left:1};Wg.svg.brush=function(){function a(f){f.each(function(){var f=Wg.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",e).on("touchstart.brush",e),g=f.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),f.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=f.selectAll(".resize").data(q,qb);h.exit().remove(),h.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Hj[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),h.style("display",a.empty()?"none":null);var k,l=Wg.transition(f),m=Wg.transition(g);i&&(k=cf(i),m.attr("x",k[0]).attr("width",k[1]-k[0]),c(l)),j&&(k=cf(j),m.attr("y",k[0]).attr("height",k[1]-k[0]),d(l)),b(l)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+k[+/e$/.test(a)]+","+m[+/^s/.test(a)]+")"})}function c(a){a.select(".extent").attr("x",k[0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",k[1]-k[0])}function d(a){a.select(".extent").attr("y",m[0]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",m[1]-m[0])}function e(){function e(){32==Wg.event.keyCode&&(C||(t=null,E[0]-=k[1],E[1]-=m[1],C=2),l())}function n(){32==Wg.event.keyCode&&2==C&&(E[0]+=k[1],E[1]+=m[1],C=0,l())}function q(){var a=Wg.mouse(v),e=!1;u&&(a[0]+=u[0],a[1]+=u[1]),C||(Wg.event.altKey?(t||(t=[(k[0]+k[1])/2,(m[0]+m[1])/2]),E[0]=k[+(a[0]<t[0])],E[1]=m[+(a[1]<t[1])]):t=null),A&&r(a,i,0)&&(c(y),e=!0),B&&r(a,j,1)&&(d(y),e=!0),e&&(b(y),x({type:"brush",mode:C?"move":"resize"}))}function r(a,b,c){var d,e,h=cf(b),i=h[0],j=h[1],l=E[c],n=c?m:k,q=n[1]-n[0];return C&&(i-=l,j-=q+l),d=(c?p:o)?Math.max(i,Math.min(j,a[c])):a[c],C?e=(d+=l)+q:(t&&(l=Math.max(i,Math.min(j,2*t[c]-d))),d>l?(e=d,d=l):e=l),n[0]!=d||n[1]!=e?(c?g=null:f=null,n[0]=d,n[1]=e,!0):void 0}function s(){q(),y.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null),Wg.select("body").style("cursor",null),F.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),D(),x({type:"brushend"})}var t,u,v=this,w=Wg.select(Wg.event.target),x=h.of(v,arguments),y=Wg.select(v),z=w.datum(),A=!/^(n|s)$/.test(z)&&i,B=!/^(e|w)$/.test(z)&&j,C=w.classed("extent"),D=K(),E=Wg.mouse(v),F=Wg.select(_g).on("keydown.brush",e).on("keyup.brush",n);if(Wg.event.changedTouches?F.on("touchmove.brush",q).on("touchend.brush",s):F.on("mousemove.brush",q).on("mouseup.brush",s),y.interrupt().selectAll("*").interrupt(),C)E[0]=k[0]-E[0],E[1]=m[0]-E[1];else if(z){var G=+/w$/.test(z),H=+/^n/.test(z);u=[k[1-G]-E[0],m[1-H]-E[1]],E[0]=k[G],E[1]=m[H]}else Wg.event.altKey&&(t=E.slice());y.style("pointer-events","none").selectAll(".resize").style("display",null),Wg.select("body").style("cursor",w.style("cursor")),x({type:"brushstart"}),q()}var f,g,h=n(a,"brushstart","brush","brushend"),i=null,j=null,k=[0,0],m=[0,0],o=!0,p=!0,q=Ij[0];return a.event=function(a){a.each(function(){var a=h.of(this,arguments),b={x:k,y:m,i:f,j:g},c=this.__chart__||b;this.__chart__=b,zj?Wg.select(this).transition().each("start.brush",function(){f=c.i,g=c.j,k=c.x,m=c.y,a({type:"brushstart"})}).tween("brush:brush",function(){var c=Id(k,b.x),d=Id(m,b.y);return f=g=null,function(e){k=b.x=c(e),m=b.y=d(e),a({type:"brush",mode:"resize"})}}).each("end.brush",function(){f=b.i,g=b.j,a({type:"brush",mode:"resize"}),a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(i=b,q=Ij[!i<<1|!j],a):i},a.y=function(b){return arguments.length?(j=b,q=Ij[!i<<1|!j],a):j},a.clamp=function(b){return arguments.length?(i&&j?(o=!!b[0],p=!!b[1]):i?o=!!b:j&&(p=!!b),a):i&&j?[o,p]:i?o:j?p:null},a.extent=function(b){var c,d,e,h,l;return arguments.length?(i&&(c=b[0],d=b[1],j&&(c=c[0],d=d[0]),f=[c,d],i.invert&&(c=i(c),d=i(d)),c>d&&(l=c,c=d,d=l),(c!=k[0]||d!=k[1])&&(k=[c,d])),j&&(e=b[0],h=b[1],i&&(e=e[1],h=h[1]),g=[e,h],j.invert&&(e=j(e),h=j(h)),e>h&&(l=e,e=h,h=l),(e!=m[0]||h!=m[1])&&(m=[e,h])),a):(i&&(f?(c=f[0],d=f[1]):(c=k[0],d=k[1],i.invert&&(c=i.invert(c),d=i.invert(d)),c>d&&(l=c,c=d,d=l))),j&&(g?(e=g[0],h=g[1]):(e=m[0],h=m[1],j.invert&&(e=j.invert(e),h=j.invert(h)),e>h&&(l=e,e=h,h=l))),i&&j?[[c,e],[d,h]]:i?[c,d]:j&&[e,h])},a.clear=function(){return a.empty()||(k=[0,0],m=[0,0],f=g=null),a},a.empty=function(){return!!i&&k[0]==k[1]||!!j&&m[0]==m[1]},Wg.rebind(a,h,"on")};var Hj={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ij=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Jj=Wg.time={},Kj=Date,Lj=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];jg.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Mj.setUTCDate.apply(this._,arguments)},setDay:function(){Mj.setUTCDay.apply(this._,arguments)},setFullYear:function(){Mj.setUTCFullYear.apply(this._,arguments)},setHours:function(){Mj.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Mj.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Mj.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Mj.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Mj.setUTCSeconds.apply(this._,arguments)},setTime:function(){Mj.setTime.apply(this._,arguments)}};var Mj=Date.prototype,Nj="%a %b %e %X %Y",Oj="%m/%d/%Y",Pj="%H:%M:%S",Qj=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Rj=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Sj=["January","February","March","April","May","June","July","August","September","October","November","December"],Tj=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Jj.year=kg(function(a){return a=Jj.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()}),Jj.years=Jj.year.range,Jj.years.utc=Jj.year.utc.range,Jj.day=kg(function(a){var b=new Kj(2e3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1}),Jj.days=Jj.day.range,Jj.days.utc=Jj.day.utc.range,Jj.dayOfYear=function(a){var b=Jj.year(a);return Math.floor((a-b-6e4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864e5)},Lj.forEach(function(a,b){a=a.toLowerCase(),b=7-b;var c=Jj[a]=kg(function(a){return(a=Jj.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=Jj.year(a).getDay();return Math.floor((Jj.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});Jj[a+"s"]=c.range,Jj[a+"s"].utc=c.utc.range,Jj[a+"OfYear"]=function(a){var c=Jj.year(a).getDay();return Math.floor((Jj.dayOfYear(a)+(c+b)%7)/7)}}),Jj.week=Jj.sunday,Jj.weeks=Jj.sunday.range,Jj.weeks.utc=Jj.sunday.utc.range,Jj.weekOfYear=Jj.sundayOfYear,Jj.format=mg;var Uj=og(Qj),Vj=pg(Qj),Wj=og(Rj),Xj=pg(Rj),Yj=og(Sj),Zj=pg(Sj),$j=og(Tj),_j=pg(Tj),ak=/^%/,bk={"-":"",_:" ",0:"0"},ck={a:function(a){return Rj[a.getDay()]},A:function(a){return Qj[a.getDay()]},b:function(a){return Tj[a.getMonth()]},B:function(a){return Sj[a.getMonth()]},c:mg(Nj),d:function(a,b){return qg(a.getDate(),b,2)},e:function(a,b){return qg(a.getDate(),b,2)},H:function(a,b){return qg(a.getHours(),b,2)},I:function(a,b){return qg(a.getHours()%12||12,b,2)},j:function(a,b){return qg(1+Jj.dayOfYear(a),b,3)},L:function(a,b){return qg(a.getMilliseconds(),b,3)},m:function(a,b){return qg(a.getMonth()+1,b,2)},M:function(a,b){return qg(a.getMinutes(),b,2)},p:function(a){return a.getHours()>=12?"PM":"AM"},S:function(a,b){return qg(a.getSeconds(),b,2)},U:function(a,b){return qg(Jj.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return qg(Jj.mondayOfYear(a),b,2)},x:mg(Oj),X:mg(Pj),y:function(a,b){return qg(a.getFullYear()%100,b,2)},Y:function(a,b){return qg(a.getFullYear()%1e4,b,4)},Z:Ng,"%":function(){return"%"}},dk={a:rg,A:sg,b:wg,B:xg,c:yg,d:Gg,e:Gg,H:Ig,I:Ig,j:Hg,L:Lg,m:Fg,M:Jg,p:Mg,S:Kg,U:ug,w:tg,W:vg,x:zg,X:Ag,y:Cg,Y:Bg,Z:Dg,"%":Og},ek=/^\s*\d+/,fk=Wg.map({am:0,pm:1});mg.utc=Pg;var gk=Pg("%Y-%m-%dT%H:%M:%S.%LZ");mg.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Qg:gk,Qg.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},Qg.toString=gk.toString,Jj.second=kg(function(a){return new Kj(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(a.getTime()+1e3*Math.floor(b))},function(a){return a.getSeconds()}),Jj.seconds=Jj.second.range,Jj.seconds.utc=Jj.second.utc.range,Jj.minute=kg(function(a){return new Kj(6e4*Math.floor(a/6e4))},function(a,b){a.setTime(a.getTime()+6e4*Math.floor(b))},function(a){return a.getMinutes()}),Jj.minutes=Jj.minute.range,Jj.minutes.utc=Jj.minute.utc.range,Jj.hour=kg(function(a){var b=a.getTimezoneOffset()/60;return new Kj(36e5*(Math.floor(a/36e5-b)+b))},function(a,b){a.setTime(a.getTime()+36e5*Math.floor(b))},function(a){return a.getHours()}),Jj.hours=Jj.hour.range,Jj.hours.utc=Jj.hour.utc.range,Jj.month=kg(function(a){return a=Jj.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()}),Jj.months=Jj.month.range,Jj.months.utc=Jj.month.utc.range;var hk=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],ik=[[Jj.second,1],[Jj.second,5],[Jj.second,15],[Jj.second,30],[Jj.minute,1],[Jj.minute,5],[Jj.minute,15],[Jj.minute,30],[Jj.hour,1],[Jj.hour,3],[Jj.hour,6],[Jj.hour,12],[Jj.day,1],[Jj.day,2],[Jj.week,1],[Jj.month,1],[Jj.month,3],[Jj.year,1]],jk=[[mg("%Y"),Tb],[mg("%B"),function(a){return a.getMonth()}],[mg("%b %d"),function(a){return 1!=a.getDate()}],[mg("%a %d"),function(a){return a.getDay()&&1!=a.getDate()}],[mg("%I %p"),function(a){return a.getHours()}],[mg("%I:%M"),function(a){return a.getMinutes()}],[mg(":%S"),function(a){return a.getSeconds()}],[mg(".%L"),function(a){return a.getMilliseconds()}]],kk=Tg(jk);ik.year=Jj.year,Jj.scale=function(){return Rg(Wg.scale.linear(),ik,kk)};var lk={range:function(a,b,c){return Wg.range(+a,+b,c).map(Sg)},floor:qb,ceil:qb},mk=ik.map(function(a){return[a[0].utc,a[1]]}),nk=[[Pg("%Y"),Tb],[Pg("%B"),function(a){return a.getUTCMonth()}],[Pg("%b %d"),function(a){return 1!=a.getUTCDate()}],[Pg("%a %d"),function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],[Pg("%I %p"),function(a){return a.getUTCHours()}],[Pg("%I:%M"),function(a){return a.getUTCMinutes()}],[Pg(":%S"),function(a){return a.getUTCSeconds()}],[Pg(".%L"),function(a){return a.getUTCMilliseconds()}]],ok=Tg(nk);return mk.year=Jj.year.utc,Jj.scale.utc=function(){return Rg(Wg.scale.linear(),mk,ok)},Wg.text=rb(function(a){return a.responseText}),Wg.json=function(a,b){return sb(a,"application/json",Ug,b)},Wg.html=function(a,b){return sb(a,"text/html",Vg,b)},Wg.xml=rb(function(a){return a.responseXML}),Wg}(),angular.module("angularCharts",["angularChartsTemplates"]),angular.module("angularCharts").directive("acChart",["$templateCache","$compile","$rootElement","$window","$timeout","$sce",function(a,b,c,d,e,f){function g(){var a=(Math.round(127*Math.random())+127).toString(16),b=(Math.round(127*Math.random())+127).toString(16),c=(Math.round(127*Math.random())+127).toString(16);return"#"+a+b+c}function h(a,b){var c=null;for(var d in a)if(angular.isElement(a[d])&&(c=angular.element(a[d]),c.hasClass(b)))return c;return c}function i(c,i){function k(){if(l()){p(),m(),n();var a=q(O);a(),A()}}function l(){if(G&&F)return!0;if(E.waitForHeightAndWidth)return!1;throw new Error("Please set height and width for the chart element")}function m(){if(!E.legend.display)return K=G,void(L=F);switch(E.legend.position){case"top":case"bottom":K=.75*G,L=F;break;case"left":case"right":K=G,L=.75*F}}function n(){var d=a.get("angularChartsTemplate_"+E.legend.position);i.html(d),b(i.contents())(c);var e=i.find("div");M=h(e,"ac-chart"),N=h(e,"ac-legend"),K-=h(e,"ac-title")[0].clientHeight}function o(){c.acConfig&&angular.extend(E,c.acConfig)}function p(){H=c.acData,O=c.acChart,I=H?H.series||[]:[],J=H?H.data||[]:[]}function q(a){var b={pie:v,bar:s,line:t,area:u,point:w};return b[a]}function r(a,b){var c=b.domain();if(E.xAxisMaxTicks&&c.length>E.xAxisMaxTicks){var d=Math.ceil(c.length/E.xAxisMaxTicks);a.tickValues(c.filter(function(a,b){return b%d===0}))}}function s(){var a={top:0,right:20,bottom:30,left:40};L-=a.left+a.right,K-=a.top+a.bottom;var b=d3.scale.ordinal().rangeRoundBands([0,L],.1),d=d3.scale.linear().range([K,10]),e=d3.scale.ordinal().rangeRoundBands([0,L],.1),f=[0];J.forEach(function(a){a.nicedata=a.y.map(function(b,c){return f.push(b),{x:a.x,y:b,s:c,tooltip:angular.isArray(a.tooltip)?a.tooltip[c]:a.tooltip}})});var g=d3.max(J.map(function(a){return a.y.length}));c.yMaxData=g,b.domain(J.map(function(a){return a.x}));var h=.2*d3.max(f);d.domain([d3.min(f),d3.max(f)+h]),e.domain(d3.range(g)).rangeRoundBands([0,b.rangeBand()]);var i=d3.svg.axis().scale(b).orient("bottom");r(i,b);var j=d3.svg.axis().scale(d).orient("left").ticks(10).tickFormat(d3.format(E.yAxisTickFormat)),k=d3.select(M[0]).append("svg").attr("width",L+a.left+a.right).attr("height",K+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")");k.append("g").attr("class","x axis").attr("transform","translate(0,"+K+")").call(i),k.append("g").attr("class","y axis").call(j);var l=k.selectAll(".state").data(J).enter().append("g").attr("class","g").attr("transform",function(a){return"translate("+b(a.x)+",0)"}),m=l.selectAll("rect").data(function(a){return a.nicedata}).enter().append("rect");m.attr("width",e.rangeBand()),m.attr("x",function(a,b){return e(b)}).attr("y",K).style("fill",function(a){return D(a.s)}).attr("height",0).transition().ease("cubic-in-out").duration(E.isAnimate?1e3:0).attr("y",function(a){return d(Math.max(0,a.y))}).attr("height",function(a){return Math.abs(d(a.y)-d(0))}),m.on("mouseover",function(a){x({index:a.x,value:a.tooltip?a.tooltip:a.y,series:I[a.s]},d3.event),E.mouseover(a,d3.event),c.$apply()}).on("mouseleave",function(a){y(),E.mouseout(a,d3.event),c.$apply()}).on("mousemove",function(a){z(a,d3.event)}).on("click",function(a){E.click.call(a,d3.event),c.$apply()}),E.labels&&l.selectAll("not-a-class").data(function(a){return a.nicedata}).enter().append("text").attr("x",function(a,b){return e(b)}).attr("y",function(a){return K-Math.abs(d(a.y)-d(0))}).text(function(a){return a.y}),k.append("line").attr("x1",L).attr("y1",d(0)).attr("y2",d(0)).style("stroke","silver")}function t(){function a(a){return Math.round(d(a))+d.rangeBand()/2}var b={top:0,right:40,bottom:20,left:40};L-=b.left+b.right,K-=b.top+b.bottom;var d=d3.scale.ordinal().domain(J.map(function(a){return a.x})).rangeRoundBands([0,L]),e=d3.scale.linear().range([K,10]),f=d3.svg.axis().scale(d).orient("bottom");r(f,d);var g=d3.svg.axis().scale(e).orient("left").ticks(5).tickFormat(d3.format(E.yAxisTickFormat)),h=d3.svg.line().interpolate(E.lineCurveType).x(function(b){return a(b.x)}).y(function(a){return e(a.y)}),i=[0],j=[];J.forEach(function(a){a.y.map(function(a){i.push(a)})});var k=d3.max(J.map(function(a){return a.y.length}));c.yMaxData=k,I.slice(0,k).forEach(function(a,b){var c={};c.series=a,c.values=J.map(function(a){return a.y.map(function(b){return{x:a.x,y:b,tooltip:a.tooltip}})[b]||{x:J[b].x,y:0}}),j.push(c)});var l=d3.select(M[0]).append("svg").attr("width",L+b.left+b.right).attr("height",K+b.top+b.bottom).append("g").attr("transform","translate("+b.left+","+b.top+")"),m=.2*d3.max(i);e.domain([d3.min(i),d3.max(i)+m]),l.append("g").attr("class","x axis").attr("transform","translate(0,"+K+")").call(f),l.append("g").attr("class","y axis").call(g);var n=l.selectAll(".points").data(j).enter().append("g"),o=n.attr("points","points").append("path").attr("class","ac-line").style("stroke",function(a,b){return D(b)}).attr("d",function(a){return h(a.values)}).attr("stroke-width","2").attr("fill","none");if(j.length>0){var p=j[j.length-1].values;if(p.length>0){var q=o.node().getTotalLength()+a(p[p.length-1].x);o.attr("stroke-dasharray",q+" "+q).attr("stroke-dashoffset",q).transition().duration(E.isAnimate?1500:0).ease("linear").attr("stroke-dashoffset",0).attr("d",function(a){return h(a.values)})}}return angular.forEach(j,function(b){var d=l.selectAll(".circle").data(b.values).enter();d.append("circle").attr("cx",function(b){return a(b.x)}).attr("cy",function(a){return e(a.y)}).attr("r",3).style("fill",D(j.indexOf(b))).style("stroke",D(j.indexOf(b))).on("mouseover",function(a){return function(b){x({index:b.x,value:b.tooltip?b.tooltip:b.y,series:a},d3.event),E.mouseover(b,d3.event),c.$apply()}}(b.series)).on("mouseleave",function(a){y(),E.mouseout(a,d3.event),c.$apply()}).on("mousemove",function(){z(d3.event)}).on("click",function(a){E.click(a,d3.event),c.$apply()}),E.labels&&d.append("text").attr("x",function(b){return a(b.x)}).attr("y",function(a){return e(a.y)}).text(function(a){return a.y})}),"lineEnd"===E.lineLegend&&n.append("text").datum(function(a){return{name:a.series,value:a.values[a.values.length-1]}}).attr("transform",function(b){return"translate("+a(b.value.x)+","+e(b.value.y)+")"}).attr("x",3).text(function(a){return a.name}),j}function u(){function a(a){return Math.round(d(a))+d.rangeBand()/2}var b={top:0,right:40,bottom:20,left:40};L-=b.left+b.right,K-=b.top+b.bottom;var d=d3.scale.ordinal().domain(J.map(function(a){return a.x})).rangePoints([0,L]),e=d3.scale.linear().range([K,10]),f=d3.svg.axis().scale(d).orient("bottom");r(f,d);var g=d3.svg.axis().scale(e).orient("left").ticks(5).tickFormat(d3.format(E.yAxisTickFormat));d3.svg.line().interpolate(E.lineCurveType).x(function(b){return a(b.x)}).y(function(a){return e(a.y)});var h=[0],i=[];J.forEach(function(a){a.y.map(function(a){h.push(a)})});var j=d3.max(J.map(function(a){return a.y.length}));c.yMaxData=j,I.slice(0,j).forEach(function(a,b){var c={};c.series=a,c.values=J.map(function(a){return a.y.map(function(b){return{x:a.x,y:b}})[b]||{x:J[b].x,y:0}}),i.push(c)});var k=d3.select(M[0]).append("svg").attr("width",L+b.left+b.right).attr("height",K+b.top+b.bottom).append("g").attr("transform","translate("+b.left+","+b.top+")"),l=.2*d3.max(h);e.domain([d3.min(h),d3.max(h)+l]),k.append("g").attr("class","x axis").attr("transform","translate(0,"+K+")").call(f),k.append("g").attr("class","y axis").call(g);var m=k.selectAll(".points").data(i).enter().append("g"),n=d3.svg.area().interpolate("basis").x(function(b){return a(b.x)}).y0(function(){return e(0)}).y1(function(a){return e(0+a.y)});m.append("path").attr("class","area").attr("d",function(a){return n(a.values)}).style("fill",function(a,b){return D(b)}).style("opacity","0.7")}function v(){function a(a){a.innerRadius=0;var b=d3.interpolate({startAngle:0,endAngle:0},a);return function(a){return g(b(a))}}var b=Math.min(L,K)/2,d=d3.select(M[0]).append("svg").attr("width",L).attr("height",K).append("g").attr("transform","translate("+L/2+","+K/2+")"),e=0;if(E.innerRadius){var f=E.innerRadius;f="string"==typeof f&&f.indexOf("%")>0?.01*b*parseFloat(f):Number(f),f>=0&&(e=f)}c.yMaxData=J.length;var g=d3.svg.arc().outerRadius(b-10).innerRadius(e);d3.svg.arc().outerRadius(b+5).innerRadius(0);var h=d3.layout.pie().sort(null).value(function(a){return a.y[0]}),i=d.selectAll(".arc").data(h(J)).enter().append("g"),j=!1;i.append("path").style("fill",function(a,b){return D(b)}).transition().ease("linear").duration(E.isAnimate?500:0).attrTween("d",a).attr("class","arc").each("end",function(){j||(j=!0,i.on("mouseover",function(a){x({value:a.data.tooltip?a.data.tooltip:a.data.y[0]},d3.event),d3.select(this).select("path").transition().duration(200).style("stroke","white").style("stroke-width","2px"),E.mouseover(a,d3.event),c.$apply()}).on("mouseleave",function(a){d3.select(this).select("path").transition().duration(200).style("stroke","").style("stroke-width",""),y(),E.mouseout(a,d3.event),c.$apply()}).on("mousemove",function(a){z(a,d3.event)}).on("click",function(a){E.click(a,d3.event),c.$apply()}))}),E.labels&&i.append("text").attr("transform",function(a){return"translate("+g.centroid(a)+")"}).attr("dy",".35em").style("text-anchor","middle").text(function(a){return a.data.y[0]})}function w(){function a(a){return Math.round(d(a))+d.rangeBand()/2}var b={top:0,right:40,bottom:20,left:40};L-=b.left-b.right,K-=b.top-b.bottom;var d=d3.scale.ordinal().domain(J.map(function(a){return a.x
})).rangeRoundBands([0,L]),e=d3.scale.linear().range([K,10]),f=d3.svg.axis().scale(d).orient("bottom");r(f,d);var g=d3.svg.axis().scale(e).orient("left").ticks(5).tickFormat(d3.format(E.yAxisTickFormat)),h=[0],i=[];J.forEach(function(a){a.y.map(function(a){h.push(a)})});var j=d3.max(J.map(function(a){return a.y.length}));c.yMaxPoints=j,I.slice(0,j).forEach(function(a,b){var c={};c.series=a,c.values=J.map(function(a){return a.y.map(function(b){return{x:a.x,y:b}})[b]||{x:J[b].x,y:0}}),i.push(c)});var k=d3.select(M[0]).append("svg").attr("width",L+b.left+b.right).attr("height",K+b.top+b.bottom).append("g").attr("transform","translate("+b.left+","+b.top+")"),l=.2*d3.max(h);e.domain([d3.min(h),d3.max(h)+l]),k.append("g").attr("class","x axis").attr("transform","translate(0,"+K+")").call(f),k.append("g").attr("class","y axis").call(g),k.selectAll(".points").data(i).enter().append("g"),angular.forEach(i,function(b){var d=k.selectAll(".circle").data(b.values).enter();d.append("circle").attr("cx",function(b){return a(b.x)}).attr("cy",function(a){return e(a.y)}).attr("r",3).style("fill",D(i.indexOf(b))).style("stroke",D(i.indexOf(b))).on("mouseover",function(a){return function(b){x({index:b.x,value:b.tooltip?b.tooltip:b.y,series:a},d3.event),E.mouseover(b,d3.event),c.$apply()}}(b.series)).on("mouseleave",function(a){y(),E.mouseout(a,d3.event),c.$apply()}).on("mousemove",function(){z(d3.event)}).on("click",function(a){E.click(a,d3.event),c.$apply()}),E.labels&&d.append("text").attr("x",function(b){return a(b.x)}).attr("y",function(a){return e(a.y)}).text(function(a){return a.y})})}function x(a,b){if(E.tooltips){a="function"==typeof E.tooltips?E.tooltips(a):a.value;var d=angular.element('<p class="ac-tooltip"></p>').html(a).css({left:b.pageX+20+"px",top:b.pageY-30+"px"});angular.element(document.querySelector(".ac-tooltip")).remove(),angular.element(document.body).append(d),c.$tooltip=d}}function y(){c.$tooltip&&c.$tooltip.remove()}function z(a,b){c.$tooltip&&c.$tooltip.css({left:b.pageX+20+"px",top:b.pageY-30+"px"})}function A(){c.legends=[],"pie"===O&&angular.forEach(J,function(a,b){c.legends.push({color:E.colors[b],title:C(a.x)})}),("bar"===O||"area"===O||"point"===O||"line"===O&&"traditional"===E.lineLegend)&&angular.forEach(I,function(a,b){c.legends.push({color:E.colors[b],title:C(a)})})}function B(a){return String(a).replace(/[&<>"'\/]/g,function(a){return P[a]})}function C(a){return f.trustAsHtml(E.legend.htmlEnabled?a:B(a))}function D(a){if(a<E.colors.length)return E.colors[a];var b=g();return E.colors.push(b),b}var E={title:"",tooltips:!0,labels:!1,mouseover:function(){},mouseout:function(){},click:function(){},legend:{display:!0,position:"left",htmlEnabled:!1},colors:j,innerRadius:0,lineLegend:"lineEnd",lineCurveType:"cardinal",isAnimate:!0,yAxisTickFormat:"s",waitForHeightAndWidth:!1};o();var F=i[0].clientWidth,G=i[0].clientHeight;l();var H,I,J,K,L,M,N,O,P={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},Q=angular.element(d),R=null;Q.bind("resize",function(){R&&e.cancel(R),R=e(function(){F=i[0].clientWidth,G=i[0].clientHeight,k()},100)}),c.getWindowDimensions=function(){return{h:Q[0].clientHeight,w:Q[0].clientWidth}},c.$watch("[acChart, acData, acConfig]",k,!0),c.$watch(function(){return{w:i[0].clientWidth,h:i[0].clientHeight}},function(a){F=a.w,G=a.h,k()},!0)}var j=["rgb(255,153,0)","rgb(220,57,18)","rgb(70,132,238)","rgb(73,66,204)","rgb(0,128,0)","rgb(0, 169, 221)","steelBlue","rgb(0, 169, 221)","rgb(50, 205, 252)","rgb(70,132,238)","rgb(0, 169, 221)","rgb(5, 150, 194)","rgb(50, 183, 224)","steelBlue","rgb(2, 185, 241)","rgb(0, 169, 221)","steelBlue","rgb(0, 169, 221)","rgb(50, 205, 252)","rgb(70,132,238)","rgb(0, 169, 221)","rgb(5, 150, 194)","rgb(50, 183, 224)","steelBlue","rgb(2, 185, 241)"];return{restrict:"EA",link:i,transclude:"true",scope:{acChart:"=",acData:"=",acConfig:"="}}}]),function(){var a=".angular-charts-template .axis path,.angular-charts-template .axis line{fill:none;stroke:#333}.angular-charts-template .ac-title{font-weight:700;font-size:1.2em}.angular-charts-template .ac-chart{float:left;width:75%}.angular-charts-template .ac-line{fill:none;stroke-width:2px}.angular-charts-template table{float:left;max-width:25%;list-style:none;margin:0;padding:0}.angular-charts-template td[ng-bind]{display:inline-block}.angular-charts-template .ac-legend-box{border-radius:5px;height:15px;width:15px}.ac-tooltip{display:block;position:absolute;border:2px solid rgba(51,51,51,.9);background-color:rgba(22,22,22,.7);border-radius:5px;padding:5px;color:#fff}",b=document.createElement("style");if(document.getElementsByTagName("head")[0].appendChild(b),b.styleSheet)b.styleSheet.disabled||(b.styleSheet.cssText=a);else try{b.innerHTML=a}catch(c){b.innerText=a}}(),angular.module("angularChartsTemplates",["angularChartsTemplate_left","angularChartsTemplate_right"]),angular.module("angularChartsTemplate_left",[]).run(["$templateCache",function(a){a.put("angularChartsTemplate_left",'<div class="angular-charts-template"><div class="ac-title" ng-if="acConfig.title !== false">{{acConfig.title}}</div><div class="ac-legend" ng-show="{{acConfig.legend.display}}"><table><tr ng-repeat="l in legends"><td><div class="ac-legend-box" ng-attr-style="background:{{l.color}};"></div></td><td ng-bind-html="l.title"></td></tr></table></div><div class="ac-chart"></div></div>')}]),angular.module("angularChartsTemplate_right",[]).run(["$templateCache",function(a){a.put("angularChartsTemplate_right",'<div class="angular-charts-template"><div class="ac-title" ng-if="acConfig.title !== false">{{acConfig.title}}</div><div class="ac-chart"></div><div class="ac-legend" ng-show="{{acConfig.legend.display}}"><table><tr ng-repeat="l in legends | limitTo:yMaxData"><td><div class="ac-legend-box" ng-attr-style="background:{{l.color}};"></div></td><td ng-bind-html="l.title"></td></tr></table></div></div>')}]),function(){"use strict";angular.module("ui.grid.i18n",[]),angular.module("ui.grid",["ui.grid.i18n"])}(),function(){"use strict";angular.module("ui.grid").constant("uiGridConstants",{LOG_DEBUG_MESSAGES:!0,LOG_WARN_MESSAGES:!0,LOG_ERROR_MESSAGES:!0,CUSTOM_FILTERS:/CUSTOM_FILTERS/g,COL_FIELD:/COL_FIELD/g,MODEL_COL_FIELD:/MODEL_COL_FIELD/g,DISPLAY_CELL_TEMPLATE:/DISPLAY_CELL_TEMPLATE/g,TEMPLATE_REGEXP:/<.+>/,FUNC_REGEXP:/(\([^)]*\))?$/,DOT_REGEXP:/\./g,APOS_REGEXP:/'/g,BRACKET_REGEXP:/^(.*)((?:\s*\[\s*\d+\s*\]\s*)|(?:\s*\[\s*"(?:[^"\\]|\\.)*"\s*\]\s*)|(?:\s*\[\s*'(?:[^'\\]|\\.)*'\s*\]\s*))(.*)$/,COL_CLASS_PREFIX:"ui-grid-col",events:{GRID_SCROLL:"uiGridScroll",COLUMN_MENU_SHOWN:"uiGridColMenuShown",ITEM_DRAGGING:"uiGridItemDragStart"},keymap:{TAB:9,STRG:17,CTRL:17,CTRLRIGHT:18,CTRLR:18,SHIFT:16,RETURN:13,ENTER:13,BACKSPACE:8,BCKSP:8,ALT:18,ALTR:17,ALTRIGHT:17,SPACE:32,WIN:91,MAC:91,FN:null,UP:38,DOWN:40,LEFT:37,RIGHT:39,ESC:27,DEL:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123},ASC:"asc",DESC:"desc",filter:{STARTS_WITH:2,ENDS_WITH:4,EXACT:8,CONTAINS:16,GREATER_THAN:32,GREATER_THAN_OR_EQUAL:64,LESS_THAN:128,LESS_THAN_OR_EQUAL:256,NOT_EQUAL:512},aggregationTypes:{sum:2,count:4,avg:8,min:16,max:32},CURRENCY_SYMBOLS:["ƒ","$","£","$","¤","¥","៛","₩","₱","฿","₫"],dataChange:{ALL:"all",EDIT:"edit",ROW:"row",COLUMN:"column"},scrollbars:{NEVER:0,ALWAYS:1,WHEN_NEEDED:2}})}(),angular.module("ui.grid").directive("uiGridCell",["$compile","$parse","gridUtil","uiGridConstants",function(a,b,c,d){var e={priority:0,scope:!1,require:"?^uiGrid",compile:function(){return{pre:function(b,e,f,g){function h(){var a=b.col.compiledElementFn;a(b,function(a){e.append(a)})}if(g&&b.col.compiledElementFn)h();else if(g&&!b.col.compiledElementFn)b.col.getCompiledElementFn().then(function(a){a(b,function(a){e.append(a)})});else{var i=b.col.cellTemplate.replace(d.MODEL_COL_FIELD,"row.entity."+c.preEval(b.col.field)).replace(d.COL_FIELD,"grid.getCellValue(row, col)"),j=a(i)(b);e.append(j)}},post:function(a,b){b.addClass(a.col.getColClass(!1));var c,e=function(){var d=b;c&&(d.removeClass(c),c=null),c=angular.isFunction(a.col.cellClass)?a.col.cellClass(a.grid,a.row,a.col,a.rowRenderIndex,a.colRenderIndex):a.col.cellClass,d.addClass(c)};a.col.cellClass&&e();var f=a.grid.registerDataChangeCallback(e,[d.dataChange.COLUMN,d.dataChange.EDIT]),g=function(){a.grid.deregisterDataChangeCallback(f)};a.$on("$destroy",g)}}}};return e}]),function(){angular.module("ui.grid").service("uiGridColumnMenuService",["i18nService","uiGridConstants","gridUtil",function(a,b,c){var d={initialize:function(a,b){a.grid=b.grid,b.columnMenuScope=a,a.menuShown=!1},setColMenuItemWatch:function(a){var b=a.$watch("col.menuItems",function(b){"undefined"!=typeof b&&b&&angular.isArray(b)?(b.forEach(function(b){"undefined"!=typeof b.context&&b.context||(b.context={}),b.context.col=a.col}),a.menuItems=a.defaultMenuItems.concat(b)):a.menuItems=a.defaultMenuItems});a.$on("$destroy",b)},sortable:function(a){return a.grid.options.enableSorting&&"undefined"!=typeof a.col&&a.col&&a.col.enableSorting?!0:!1},isActiveSort:function(a,b){return"undefined"!=typeof a.col&&"undefined"!=typeof a.col.sort&&"undefined"!=typeof a.col.sort.direction&&a.col.sort.direction===b},suppressRemoveSort:function(a){return a.col&&a.col.colDef&&a.col.colDef.suppressRemoveSort?!0:!1},hideable:function(a){return"undefined"!=typeof a.col&&a.col&&a.col.colDef&&a.col.colDef.enableHiding===!1?!1:!0},getDefaultMenuItems:function(c){return[{title:a.getSafeText("sort.ascending"),icon:"ui-grid-icon-sort-alt-up",action:function(a){a.stopPropagation(),c.sortColumn(a,b.ASC)},shown:function(){return d.sortable(c)},active:function(){return d.isActiveSort(c,b.ASC)}},{title:a.getSafeText("sort.descending"),icon:"ui-grid-icon-sort-alt-down",action:function(a){a.stopPropagation(),c.sortColumn(a,b.DESC)},shown:function(){return d.sortable(c)},active:function(){return d.isActiveSort(c,b.DESC)}},{title:a.getSafeText("sort.remove"),icon:"ui-grid-icon-cancel",action:function(a){a.stopPropagation(),c.unsortColumn()},shown:function(){return d.sortable(c)&&"undefined"!=typeof c.col&&"undefined"!=typeof c.col.sort&&"undefined"!=typeof c.col.sort.direction&&null!==c.col.sort.direction&&!d.suppressRemoveSort(c)}},{title:a.getSafeText("column.hide"),icon:"ui-grid-icon-cancel",shown:function(){return d.hideable(c)},action:function(a){a.stopPropagation(),c.hideColumn()}}]},getColumnElementPosition:function(a,b,d){var e={};return e.left=d[0].offsetLeft,e.top=d[0].offsetTop,e.offset=0,b.grid.options.offsetLeft&&(e.offset=b.grid.options.offsetLeft),e.height=c.elementHeight(d,!0),e.width=c.elementWidth(d,!0),e},repositionMenu:function(a,b,d,e,f){var g=e[0].querySelectorAll(".ui-grid-menu"),h=b.renderContainer?b.renderContainer:"body",i=(b.grid.renderContainers[h],c.closestElm(f,".ui-grid-render-container")),j=i.getBoundingClientRect().left-a.grid.element[0].getBoundingClientRect().left,k=i.querySelectorAll(".ui-grid-viewport")[0].scrollLeft,l=b.lastMenuWidth?b.lastMenuWidth:a.lastMenuWidth?a.lastMenuWidth:170,m=b.lastMenuPaddingRight?b.lastMenuPaddingRight:a.lastMenuPaddingRight?a.lastMenuPaddingRight:10;if(0!==g.length){var n=g[0].querySelectorAll(".ui-grid-menu-mid");0===n.length||angular.element(n).hasClass("ng-hide")||(l=c.elementWidth(g,!0),a.lastMenuWidth=l,b.lastMenuWidth=l,m=parseInt(c.getStyles(angular.element(g)[0]).paddingRight,10),a.lastMenuPaddingRight=m,b.lastMenuPaddingRight=m)}var o=d.left+j-k+d.width-l+m;o<d.offset&&(o=d.offset),e.css("left",o+"px"),e.css("top",d.top+d.height+"px")}};return d}]).directive("uiGridColumnMenu",["$timeout","gridUtil","uiGridConstants","uiGridColumnMenuService",function(a,b,c,d){var e={priority:0,scope:!0,require:"?^uiGrid",templateUrl:"ui-grid/uiGridColumnMenu",replace:!0,link:function(b,c,e,f){var g=this;d.initialize(b,f),b.defaultMenuItems=d.getDefaultMenuItems(b),b.menuItems=b.defaultMenuItems,d.setColMenuItemWatch(b),b.showMenu=function(a,e,f){b.col=a;var h=d.getColumnElementPosition(b,a,e);b.menuShown?(b.colElement=e,b.colElementPosition=h,b.hideThenShow=!0,b.$broadcast("hide-menu",{originalEvent:f})):(g.shown=b.menuShown=!0,d.repositionMenu(b,a,h,c,e),b.colElement=e,b.colElementPosition=h,b.$broadcast("show-menu",{originalEvent:f}))},b.hideMenu=function(a){b.menuShown=!1,a||b.$broadcast("hide-menu")},b.$on("menu-hidden",function(){b.hideThenShow?(delete b.hideThenShow,d.repositionMenu(b,b.col,b.colElementPosition,c,b.colElement),b.$broadcast("show-menu"),b.menuShown=!0):b.hideMenu(!0)}),b.$on("menu-shown",function(){a(function(){d.repositionMenu(b,b.col,b.colElementPosition,c,b.colElement),delete b.colElementPosition,delete b.columnElement},200)}),b.sortColumn=function(a,c){a.stopPropagation(),b.grid.sortColumn(b.col,c,!0).then(function(){b.grid.refresh(),b.hideMenu()})},b.unsortColumn=function(){b.col.unsort(),b.grid.refresh(),b.hideMenu()},b.hideColumn=function(){b.col.colDef.visible=!1,b.grid.refresh(),b.hideMenu()}},controller:["$scope",function(a){var b=this;a.$watch("menuItems",function(a){b.menuItems=a})}]};return e}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridFooterCell",["$timeout","gridUtil","uiGridConstants","$compile",function(a,b,c,d){var e={priority:0,scope:{col:"=",row:"=",renderIndex:"="},replace:!0,require:"^uiGrid",compile:function(){return{pre:function(a,c){function e(e){b.getTemplate(e).then(function(b){var e=d(b),f=e(a);c.append(f)})}e(a.col.footerCellTemplate?a.col.footerCellTemplate:"ui-grid/uiGridFooterCell")},post:function(a,b,d,e){a.grid=e.grid,a.getExternalScopes=e.getExternalScopes,b.addClass(a.col.getColClass(!1));var f,g=function(){var c=b;f&&(c.removeClass(f),f=null),f=angular.isFunction(a.col.footerCellClass)?a.col.footerCellClass(a.grid,a.row,a.col,a.rowRenderIndex,a.colRenderIndex):a.col.footerCellClass,c.addClass(f)};a.col.footerCellClass&&g();var h=a.grid.registerDataChangeCallback(g,[c.dataChange.COLUMN]);a.$on("$destroy",function(){a.grid.deregisterDataChangeCallback(h)})}}}};return e}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridFooter",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function(a,b,c,d){var e="ui-grid/ui-grid-footer";return{restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function(){return{pre:function(a,c,f,g){var h=g[0],i=g[1];a.grid=h.grid,a.colContainer=i.colContainer,a.getExternalScopes=h.getExternalScopes,i.footer=c;var j=a.grid.options.footerTemplate?a.grid.options.footerTemplate:e;d.getTemplate(j).then(function(d){var e=angular.element(d),f=b(e)(a);if(c.append(f),i){var g=c[0].getElementsByClassName("ui-grid-footer-viewport")[0];g&&(i.footerViewport=g)}})},post:function(a,b,c,e){{var f=e[0],g=e[1];f.grid}d.disableAnimations(b),g.footer=b;var h=b[0].getElementsByClassName("ui-grid-footer-viewport")[0];h&&(g.footerViewport=h)}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridGroupPanel",["$compile","uiGridConstants","gridUtil",function(a,b,c){var d="ui-grid/ui-grid-group-panel";return{restrict:"EA",replace:!0,require:"?^uiGrid",scope:!1,compile:function(){return{pre:function(b,e){var f=b.grid.options.groupPanelTemplate||d;c.getTemplate(f).then(function(c){var d=angular.element(c),f=a(d)(b);e.append(f)})},post:function(a,b){b.bind("$destroy",function(){})}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridHeaderCell",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants",function(a,b,c,d,e,f){var g=500,h={priority:0,scope:{col:"=",row:"=",renderIndex:"="},require:["?^uiGrid","^uiGridRenderContainer"],replace:!0,compile:function(){return{pre:function(b,c){var d=a(b.col.headerCellTemplate)(b);c.append(d)},post:function(a,c,d,e){function h(b){var c=!1;b.shiftKey&&(c=!0),i.grid.sortColumn(a.col,c).then(function(){i.columnMenuScope&&i.columnMenuScope.hideMenu(),i.grid.refresh()})}var i=e[0],j=e[1];a.grid=i.grid,a.getExternalScopes=i.getExternalScopes,a.renderContainer=i.grid.renderContainers[j.containerId],c.addClass(a.col.getColClass(!1)),a.menuShown=!1,a.asc=f.ASC,a.desc=f.DESC;var k,l=(angular.element(c[0].querySelectorAll(".ui-grid-header-cell-menu")),angular.element(c[0].querySelectorAll(".ui-grid-cell-contents"))),m=function(){var b=c;k&&(b.removeClass(k),k=null),k=angular.isFunction(a.col.headerCellClass)?a.col.headerCellClass(a.grid,a.row,a.col,a.rowRenderIndex,a.colRenderIndex):a.col.headerCellClass,b.addClass(k)};a.col.headerCellClass&&m();var n=a.grid.registerDataChangeCallback(m,[f.dataChange.COLUMN]),o=function(){a.grid.deregisterDataChangeCallback(n)};a.$on("$destroy",o),a.sortable=i.grid.options.enableSorting&&a.col.enableSorting?!0:!1,a.filterable=i.grid.options.enableFiltering&&a.col.enableFiltering?!0:!1;var p,q=0;if(l.on("mousedown touchstart",function(d){"undefined"!=typeof d.originalEvent&&void 0!==d.originalEvent&&(d=d.originalEvent),d.button&&0!==d.button||(q=(new Date).getTime(),p=b(function(){},g),p.then(function(){a.col.grid.options&&a.col.grid.options.enableColumnMenus!==!1&&a.col.colDef&&a.col.colDef.enableColumnMenu!==!1&&i.columnMenuScope.showMenu(a.col,c,d)}))}),l.on("mouseup touchend",function(){b.cancel(p)}),a.$on("$destroy",function(){l.off("mousedown touchstart")}),a.toggleMenu=function(b){b.stopPropagation(),i.columnMenuScope.menuShown&&i.columnMenuScope.col===a.col?i.columnMenuScope.hideMenu():i.columnMenuScope.showMenu(a.col,c)},a.sortable&&(l.on("click touchend",function(a){a.stopPropagation(),b.cancel(p);var c=(new Date).getTime(),d=c-q;d>g||h(a)}),a.$on("$destroy",function(){b.cancel(p)})),a.filterable){var r=[];angular.forEach(a.col.filters,function(b,c){r.push(a.$watch("col.filters["+c+"].term",function(a,b){a!==b&&(i.grid.api.core.raise.filterChanged(),i.grid.refresh().then(function(){i.prevScrollArgs&&i.prevScrollArgs.y&&i.prevScrollArgs.y.percentage&&i.fireScrollingEvent({y:{percentage:i.prevScrollArgs.y.percentage}})}))}))}),a.$on("$destroy",function(){angular.forEach(r,function(a){a()})})}}}}};return h}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridHeader",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function(a,b,c,d){var e="ui-grid/ui-grid-header",f="ui-grid/ui-grid-no-header";return{restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function(){return{pre:function(a,c,g,h){var i=h[0],j=h[1];a.grid=i.grid,a.colContainer=j.colContainer,a.getExternalScopes=i.getExternalScopes,j.header=c,j.colContainer.header=c;var k;k=a.grid.options.hideHeader?f:a.grid.options.headerTemplate?a.grid.options.headerTemplate:e,d.getTemplate(k).then(function(d){var e=angular.element(d),f=b(e)(a);if(c.replaceWith(f),j.header=f,j.colContainer.header=f,c=f,j){var g=c[0].getElementsByClassName("ui-grid-header-viewport")[0];g&&(j.headerViewport=g)}})},post:function(a,b,c,e){function f(){var a=h.colContainer.getViewportWidth();"undefined"!=typeof g.grid.verticalScrollbarWidth&&void 0!==g.grid.verticalScrollbarWidth&&g.grid.verticalScrollbarWidth>0&&(a+=g.grid.verticalScrollbarWidth);var b=h.colContainer.visibleColumnCache,c=0,e=0,f=0,j=a,k=!1,l=function(b){return"manual"===b.widthType?+b.width:"percent"===b.widthType?parseInt(b.width.replace(/%/g,""),10)*a/100:"auto"===b.widthType?(0===f&&(f=parseInt(j/e,10)),b.width.length*f):void 0};b.forEach(function(a){a.widthType=null,isFinite(+a.width)?a.widthType="manual":d.endsWith(a.width,"%")?(a.widthType="percent",k=!0):angular.isString(a.width)&&-1!==a.width.indexOf("*")&&(a.widthType="auto",e+=a.width.length,k=!0)});var m=["manual","percent","auto"];if(b.filter(function(a){return a.visible&&a.widthType}).sort(function(a,b){return m.indexOf(a.widthType)-m.indexOf(b.widthType)}).forEach(function(a){var b=l(a);a.minWidth&&(b=Math.max(b,a.minWidth)),a.maxWidth&&(b=Math.min(b,a.maxWidth)),a.drawnWidth=Math.floor(b),c+=a.drawnWidth,j-=a.drawnWidth}),k&&j>0&&c>0&&a>c){var n=function(a){j>0&&("auto"===a.widthType||"percent"===a.widthType)&&(a.drawnWidth=a.drawnWidth+1,c+=1,j--)},o=0;do o=j,b.forEach(n);while(j>0&&j!==o)}c=Math.max(c,a);var p="";return b.forEach(function(a){p+=a.getColClassDefinition()}),i.verticalScrollbarWidth&&(c+=i.verticalScrollbarWidth),b.length>0&&(b[b.length-1].headerWidth=b[b.length-1].drawnWidth-30),h.colContainer.canvasWidth=parseInt(c,10),p}var g=e[0],h=e[1],i=g.grid;d.disableAnimations(b),h.header=b;var j=b[0].getElementsByClassName("ui-grid-header-viewport")[0];j&&(h.headerViewport=j),g&&g.grid.registerStyleComputation({priority:5,func:f})}}}}}])}(),function(){angular.module("ui.grid").service("uiGridGridMenuService",["gridUtil","i18nService",function(a,b){var c={initialize:function(a,b){b.gridMenuScope=a,a.grid=b,a.registeredMenuItems=[],a.$on("$destroy",function(){a.grid&&a.grid.gridMenuScope&&(a.grid.gridMenuScope=null),a.grid&&(a.grid=null),a.registeredMenuItems&&(a.registeredMenuItems=null)}),a.registeredMenuItems=[],b.api.registerMethod("core","addToGridMenu",c.addToGridMenu),b.api.registerMethod("core","removeFromGridMenu",c.removeFromGridMenu)},addToGridMenu:function(b,c){angular.isArray(c)?b.gridMenuScope?(b.gridMenuScope.registeredMenuItems=b.gridMenuScope.registeredMenuItems?b.gridMenuScope.registeredMenuItems:[],b.gridMenuScope.registeredMenuItems=b.gridMenuScope.registeredMenuItems.concat(c)):a.logError("Asked to addToGridMenu, but gridMenuScope not present.  Timing issue?  Please log issue with ui-grid"):a.logError("addToGridMenu: menuItems must be an array, and is not, not adding any items")},removeFromGridMenu:function(b,c){var d=-1;b&&b.gridMenuScope&&b.gridMenuScope.registeredMenuItems.forEach(function(b,e){b.id===c&&(d>-1?a.logError("removeFromGridMenu: found multiple items with the same id, removing only the last"):d=e)}),d>-1&&b.gridMenuScope.registeredMenuItems.splice(d,1)},getMenuItems:function(b){var d=[];return b.grid.options.gridMenuCustomItems&&(angular.isArray(b.grid.options.gridMenuCustomItems)?d=d.concat(b.grid.options.gridMenuCustomItems):a.logError("gridOptions.gridMenuCustomItems must be an array, and is not")),d=d.concat(b.registeredMenuItems),b.grid.options.gridMenuShowHideColumns!==!1&&(d=d.concat(c.showHideColumns(b))),d},showHideColumns:function(a){var d=[];return a.grid.options.columnDefs&&0!==a.grid.options.columnDefs.length&&0!==a.grid.columns.length?(d.push({title:b.getSafeText("gridMenu.columns")}),a.grid.options.gridMenuTitleFilter=a.grid.options.gridMenuTitleFilter?a.grid.options.gridMenuTitleFilter:function(a){return a},a.grid.options.columnDefs.forEach(function(b){if(b.enableHiding!==!1){var e={icon:"ui-grid-icon-ok",action:function(a){a.stopPropagation(),c.toggleColumnVisibility(this.context.gridCol)},shown:function(){return this.context.gridCol.colDef.visible===!0||void 0===this.context.gridCol.colDef.visible},context:{gridCol:a.grid.getColumn(b.name||b.field)}};c.setMenuItemTitle(e,b,a.grid),d.push(e),e={icon:"ui-grid-icon-cancel",action:function(a){a.stopPropagation(),c.toggleColumnVisibility(this.context.gridCol)},shown:function(){return!(this.context.gridCol.colDef.visible===!0||void 0===this.context.gridCol.colDef.visible)},context:{gridCol:a.grid.getColumn(b.name||b.field)}},c.setMenuItemTitle(e,b,a.grid),d.push(e)}}),d):d},setMenuItemTitle:function(b,c,d){var e=d.options.gridMenuTitleFilter(c.displayName||c.name||c.field);"string"==typeof e?b.title=e:e.then?(b.title="",e.then(function(a){b.title=a},function(a){b.title=a})):(a.logError("Expected gridMenuTitleFilter to return a string or a promise, it has returned neither, bad config"),b.title="badconfig")},toggleColumnVisibility:function(a){a.colDef.visible=!(a.colDef.visible===!0||void 0===a.colDef.visible),a.grid.refresh()}};return c}]).directive("uiGridMenuButton",["gridUtil","uiGridConstants","uiGridGridMenuService",function(a,b,c){return{priority:0,scope:!0,require:["?^uiGrid"],templateUrl:"ui-grid/ui-grid-menu-button",replace:!0,link:function(a,b,d,e){var f=e[0];c.initialize(a,f.grid),a.shown=!1,a.toggleMenu=function(){a.shown?(a.$broadcast("hide-menu"),a.shown=!1):(a.menuItems=c.getMenuItems(a),a.$broadcast("show-menu"),a.shown=!0)},a.$on("menu-hidden",function(){a.shown=!1})}}}])}(),function(){angular.module("ui.grid").directive("uiGridMenu",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants",function(a,b,c,d,e,f){var g={priority:0,scope:{menuItems:"=",autoHide:"=?"},require:"?^uiGrid",templateUrl:"ui-grid/uiGridMenu",replace:!1,link:function(a){var d=this;d.showMenu=a.showMenu=function(c,d){a.shown?a.shownMid||(a.shownMid=!0,a.$emit("menu-shown")):(a.shown=!0,b(function(){a.shownMid=!0,a.$emit("menu-shown")}));var f="click";d&&d.originalEvent&&d.originalEvent.type&&"touchstart"===d.originalEvent.type&&(f=d.originalEvent.type),angular.element(document).off("click touchstart",e),b(function(){angular.element(document).on(f,e)})},d.hideMenu=a.hideMenu=function(){a.shown&&(a.shownMid=!1,b(function(){a.shownMid||(a.shown=!1,a.$emit("menu-hidden"))},200)),angular.element(document).off("click touchstart",e)},a.$on("hide-menu",function(b,c){a.hideMenu(b,c)}),a.$on("show-menu",function(b,c){a.showMenu(b,c)});var e=function(){a.shown&&a.$apply(function(){a.hideMenu()})};("undefined"==typeof a.autoHide||void 0===a.autoHide)&&(a.autoHide=!0),a.autoHide&&angular.element(c).on("resize",e),a.$on("$destroy",function(){angular.element(document).off("click touchstart",e)}),a.$on("$destroy",function(){angular.element(c).off("resize",e)}),a.$on("$destroy",a.$on(f.events.GRID_SCROLL,e)),a.$on("$destroy",a.$on(f.events.ITEM_DRAGGING,e))},controller:["$scope","$element","$attrs",function(){}]};return g}]).directive("uiGridMenuItem",["gridUtil","$compile","i18nService",function(a,b,c){var d={priority:0,scope:{title:"=",active:"=",action:"=",icon:"=",shown:"=",context:"=",templateUrl:"="},require:["?^uiGrid","^uiGridMenu"],templateUrl:"ui-grid/uiGridMenuItem",replace:!0,compile:function(){return{pre:function(c,d,e,f){f[0],f[1];c.templateUrl&&a.getTemplate(c.templateUrl).then(function(a){var e=angular.element(a),f=b(e)(c);d.replaceWith(f)})},post:function(a,b,d,e){{var f=e[0];e[1]}("undefined"==typeof a.shown||null===a.shown)&&(a.shown=function(){return!0}),a.itemShown=function(){var b={};return a.context&&(b.context=a.context),"undefined"!=typeof f&&f&&(b.grid=f.grid),a.shown.call(b)},a.itemAction=function(b,c){if(b.stopPropagation(),"function"==typeof a.action){var d={};a.context&&(d.context=a.context),"undefined"!=typeof f&&f&&(d.grid=f.grid),a.action.call(d,b,c),a.$emit("hide-menu")}},a.i18n=c.get()}}}};return d}])}(),function(){angular.module("ui.grid").directive("uiGridNativeScrollbar",["$timeout","$document","uiGridConstants","gridUtil",function(a,b,c,d){var e=d.getScrollbarWidth();angular.isNumber(e)||(e=0);var f=d.detectBrowser();return"ie"===f&&(e+=1),{scope:{type:"@"},require:["^uiGrid","^uiGridRenderContainer"],link:function(a,b,f,g){function h(){var a=n.getViewportHeight(),b=n.getCanvasHeight(),d=o.headerHeight?o.headerHeight:p.headerHeight,e=p.options.enableVerticalScrollbar===c.scrollbars.WHEN_NEEDED?"overflow-y:auto;":"",f=".grid"+p.id+" .ui-grid-render-container-"+m.containerId+" .ui-grid-native-scrollbar.vertical .contents { height: "+b+"px; }";return f+="\n .grid"+p.id+" .ui-grid-render-container-"+m.containerId+" .ui-grid-native-scrollbar.vertical { height: "+a+"px; top: "+d+"px;"+e+"}",s=b,f}function i(){var a=o.getCanvasWidth(),b=u;p.options.showFooter&&(b-=1);var d=p.options.enableHorizontalScrollbar===c.scrollbars.WHEN_NEEDED?"overflow-x:auto":"",e=".grid"+p.id+" .ui-grid-render-container-"+m.containerId+" .ui-grid-native-scrollbar.horizontal { bottom: "+b+"px;"+d+" }";return e+=".grid"+p.id+" .ui-grid-render-container-"+m.containerId+" .ui-grid-native-scrollbar.horizontal .contents { width: "+a+"px; }",s=a,e}function j(){if("vertical"===a.type){p.flagScrollingVertically();var c=b[0].scrollTop,e=n.getCanvasHeight()-n.getViewportHeight();p.horizontalScrollbarHeight&&p.horizontalScrollbarHeight>0&&(e-=l.grid.horizontalScrollbarHeight);var f=c/e;f>1&&(f=1),0>f&&(f=0);var g={target:b,y:{percentage:f}};a.scrollSource?a.scrollSource=null:l.fireScrollingEvent(g),r=c}else if("horizontal"===a.type){p.flagScrollingHorizontally();var h=d.normalizeScrollLeft(b),i=o.getCanvasWidth()-o.getViewportWidth(),j=h/i,k={target:b,x:{percentage:j}};a.scrollSource?a.scrollSource=null:l.fireScrollingEvent(k),r=h}}function k(c,e){if(!e.target||e.target!==b&&!angular.element(e.target).hasClass("ui-grid-native-scrollbar"))if(a.scrollSource=e.target,"vertical"===a.type){if(e.y&&"undefined"!=typeof e.y.percentage&&void 0!==e.y.percentage){p.flagScrollingVertically();var f=n.getCanvasHeight()-n.getViewportHeight(),g=Math.max(0,e.y.percentage*f);b[0].scrollTop=g}}else if("horizontal"===a.type&&e.x&&"undefined"!=typeof e.x.percentage&&void 0!==e.x.percentage){p.flagScrollingHorizontally();var h=o.getCanvasWidth()-o.getViewportWidth(),i=Math.max(0,e.x.percentage*h);b[0].scrollLeft=d.denormalizeScrollLeft(b,i)}}var l=g[0],m=g[1],n=m.rowContainer,o=m.colContainer,p=l.grid,q=angular.element('<div class="contents">&nbsp;</div>');b.addClass("ui-grid-native-scrollbar");var r,s=0;"vertical"===a.type?(b.css("width",e+"px"),b.addClass("vertical"),p.verticalScrollbarWidth=p.options.enableVerticalScrollbar===c.scrollbars.WHEN_NEEDED?0:e,o.verticalScrollbarWidth=p.verticalScrollbarWidth,r=b[0].scrollTop):"horizontal"===a.type&&(b.css("height",e+"px"),b.addClass("horizontal"),p.horizontalScrollbarHeight=p.options.enableHorizontalScrollbar===c.scrollbars.WHEN_NEEDED?0:e,n.horizontalScrollbarHeight=p.horizontalScrollbarHeight,r=d.normalizeScrollLeft(b)),b.append(q),"vertical"===a.type?s=d.elementHeight(b):"horizontal"===a.type&&(s=d.elementWidth(b));var t=d.closestElm(b,".ui-grid"),u=d.getBorderSize(t,"bottom");"vertical"===a.type?p.registerStyleComputation({priority:6,func:h}):"horizontal"===a.type&&p.registerStyleComputation({priority:6,func:i}),a.scrollSource=null,b.on("scroll",j),b.on("$destroy",function(){b.off("scroll")});var v=a.$on(c.events.GRID_SCROLL,k);a.$on("$destroy",v)}}}])}(),function(){"use strict";var a=angular.module("ui.grid");a.directive("uiGridRenderContainer",["$timeout","$document","uiGridConstants","gridUtil",function(a,b,c,d){return{replace:!0,transclude:!0,templateUrl:"ui-grid/uiGridRenderContainer",require:["^uiGrid","uiGridRenderContainer"],scope:{containerId:"=",rowContainerName:"=",colContainerName:"=",bindScrollHorizontal:"=",bindScrollVertical:"=",enableVerticalScrollbar:"=",enableHorizontalScrollbar:"="},controller:"uiGridRenderContainer as RenderContainer",compile:function(){return{pre:function(a,b,c,d){var e=d[0],f=d[1],g=a.grid=e.grid;if(!a.rowContainerName)throw"No row render container name specified";if(!a.colContainerName)throw"No column render container name specified";if(!g.renderContainers[a.rowContainerName])throw"Row render container '"+a.rowContainerName+"' is not registered.";if(!g.renderContainers[a.colContainerName])throw"Column render container '"+a.colContainerName+"' is not registered.";var h=a.rowContainer=g.renderContainers[a.rowContainerName],i=a.colContainer=g.renderContainers[a.colContainerName];f.containerId=a.containerId,f.rowContainer=h,f.colContainer=i},post:function(e,f,g,h){function i(a,b){if(b.y&&e.bindScrollVertical){n.prevScrollArgs=b;var c=p.getCanvasHeight()-p.getViewportHeight();o.horizontalScrollbarHeight&&o.horizontalScrollbarHeight>0&&(c+=o.horizontalScrollbarHeight);var f,g=n.viewport[0].scrollTop;if("undefined"!=typeof b.y.percentage&&void 0!==b.y.percentage)f=b.y.percentage;else{if("undefined"==typeof b.y.pixels||void 0===b.y.pixels)throw new Error("No percentage or pixel value provided for scroll event Y axis");f=b.y.percentage=(g+b.y.pixels)/c}var h=Math.max(0,f*c);n.viewport[0].scrollTop=h,n.prevScrollArgs.y.pixels=h-g}if(b.x&&e.bindScrollHorizontal){n.prevScrollArgs=b;var i,j=q.getCanvasWidth()-q.getViewportWidth(),k=d.normalizeScrollLeft(n.viewport);if("undefined"!=typeof b.x.percentage&&void 0!==b.x.percentage)i=b.x.percentage;else{if("undefined"==typeof b.x.pixels||void 0===b.x.pixels)throw new Error("No percentage or pixel value provided for scroll event X axis");
i=b.x.percentage=(k+b.x.pixels)/j}var l=Math.max(0,i*j);n.viewport[0].scrollLeft=d.denormalizeScrollLeft(n.viewport,l),n.prevScrollLeft=l,n.headerViewport&&(n.headerViewport.scrollLeft=d.denormalizeScrollLeft(n.headerViewport,l)),n.footerViewport&&(n.footerViewport.scrollLeft=d.denormalizeScrollLeft(n.footerViewport,l)),n.prevScrollArgs.x.pixels=l-k}}function j(a){a.originalEvent&&(a=a.originalEvent),a.preventDefault();var b,c,d,e;d=a.targetTouches[0].screenX,e=a.targetTouches[0].screenY,b=-(d-v),c=-(e-u),y=1>c?-1:1,z=1>b?-1:1,c*=2,b*=2;var f={target:a.target};if(0!==c){var g=(w+c)/(p.getCanvasHeight()-p.getViewportHeight());g>1?g=1:0>g&&(g=0),f.y={percentage:g,pixels:c}}if(0!==b){var h=(x+b)/(q.getCanvasWidth()-q.getViewportWidth());h>1?h=1:0>h&&(h=0),f.x={percentage:h,pixels:b}}m.fireScrollingEvent(f)}function k(c){function d(){a(function(){var a={target:c.target};if(0!==u){var b=(n.viewport[0].scrollTop+u)/(p.getCanvasHeight()-p.getViewportHeight());a.y={percentage:b,pixels:u}}if(0!==v){var e=(n.viewport[0].scrollLeft+v)/(q.getCanvasWidth()-q.getViewportWidth());a.x={percentage:e,pixels:v}}m.fireScrollingEvent(a),s-=1,u/=2,v/=2,s>0?d():m.scrollbars.forEach(function(a){a.removeClass("ui-grid-scrollbar-visible"),a.removeClass("ui-grid-scrolling")})},r)}c.originalEvent&&(c=c.originalEvent),c.preventDefault(),b.unbind("touchmove",j),b.unbind("touchend",k),b.unbind("touchcancel",k);var e=n.viewport[0].scrollTop,f=n.viewport[0].scrollTop,g=Math.abs(e-w),h=Math.abs(f-x),i=new Date-t,l=g/i,o=h/i,r=63,s=8,u=120*y*l,v=120*z*o;d()}function l(){var a="",b=q.getCanvasWidth(),c=q.getViewportWidth(),d=p.getCanvasHeight(),f=p.getViewportHeight(),g=q.getHeaderViewportWidth(),h=q.getHeaderViewportWidth();return a+="\n .grid"+m.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-canvas { width: "+b+"px; height: "+d+"px; }",a+="\n .grid"+m.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-header-canvas { width: "+b+"px; }",a+="\n .grid"+m.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-viewport { width: "+c+"px; height: "+f+"px; }",a+="\n .grid"+m.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-header-viewport { width: "+g+"px; }",a+="\n .grid"+m.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-footer-canvas { width: "+b+"px; }",a+="\n .grid"+m.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-footer-viewport { width: "+h+"px; }",void 0!==r.explicitHeaderHeight&&null!==r.explicitHeaderHeight&&r.explicitHeaderHeight>0?a+="\n .grid"+m.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-header-cell { height: "+r.explicitHeaderHeight+"px; }":void 0!==r.innerHeaderHeight&&null!==r.innerHeaderHeight&&r.innerHeaderHeight>0&&(a+="\n .grid"+m.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-header-cell { height: "+r.innerHeaderHeight+"px; }"),a}var m=h[0],n=h[1],o=m.grid,p=n.rowContainer,q=n.colContainer,r=o.renderContainers[e.containerId];f.addClass("ui-grid-render-container-"+e.containerId);var s;(e.bindScrollHorizontal||e.bindScrollVertical)&&(s=e.$on(c.events.GRID_SCROLL,i)),f.bind("wheel mousewheel DomMouseScroll MozMousePixelScroll",function(a){a.preventDefault();var b=d.normalizeWheelEvent(a),c={target:f};if(0!==b.deltaY){var e=-120*b.deltaY,g=(n.viewport[0].scrollTop+e)/(p.getCanvasHeight()-p.getViewportHeight());0>g?g=0:g>1&&(g=1),c.y={percentage:g,pixels:e}}if(0!==b.deltaX){var h=-120*b.deltaX,i=d.normalizeScrollLeft(n.viewport),j=(i+h)/(q.getCanvasWidth()-q.getViewportWidth());0>j?j=0:j>1&&(j=1),c.x={percentage:j,pixels:h}}m.fireScrollingEvent(c)});var t,u=0,v=0,w=0,x=0,y=1,z=1;d.isTouchEnabled()&&f.bind("touchstart",function(a){a.originalEvent&&(a=a.originalEvent),a.preventDefault(),m.scrollbars.forEach(function(a){a.addClass("ui-grid-scrollbar-visible"),a.addClass("ui-grid-scrolling")}),t=new Date,u=a.targetTouches[0].screenY,v=a.targetTouches[0].screenX,w=n.viewport[0].scrollTop,x=n.viewport[0].scrollLeft,b.on("touchmove",j),b.on("touchend touchcancel",k)}),f.bind("$destroy",function(){s(),f.unbind("keydown"),["touchstart","touchmove","touchend","keydown","wheel","mousewheel","DomMouseScroll","MozMousePixelScroll"].forEach(function(a){f.unbind(a)})}),m.grid.registerStyleComputation({priority:6,func:l})}}}}}]),a.controller("uiGridRenderContainer",["$scope","gridUtil",function(a){var b=this;b.rowStyle=function(c){var d=a.grid.renderContainers[a.containerId],e={};if(!d.disableRowOffset&&0===c&&0!==b.currentTopRow){var f=a.rowContainer.currentTopRow*a.rowContainer.visibleRowCache[a.rowContainer.currentTopRow].height;e["margin-top"]=f+"px"}return d.disableColumnOffset||0===a.colContainer.currentFirstColumn||(a.grid.isRTL()?e["margin-right"]=a.colContainer.columnOffset+"px":e["margin-left"]=a.colContainer.columnOffset+"px"),e},b.columnStyle=function(b){var c=a.grid.renderContainers[a.containerId];if(!c.disableColumnOffset&&0===b&&0!==a.colContainer.currentFirstColumn){var d=a.colContainer.columnOffset;return a.grid.isRTL()?{"margin-right":d+"px"}:{"margin-left":d+"px"}}return null}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridRow",["gridUtil",function(){return{replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:{row:"=uiGridRow",rowRenderIndex:"="},compile:function(){return{pre:function(a,b,c,d){var e=d[0],f=d[1],g=e.grid;a.grid=e.grid,a.colContainer=f.colContainer,g.getRowTemplateFn.then(function(c){c(a,function(a){b.replaceWith(a)})})},post:function(a,b,c,d){{var e=d[0];d[1]}a.getExternalScopes=e.getExternalScopes}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridStyle",["gridUtil","$interpolate",function(a,b){return{link:function(a,c){var d=b(c.text(),!0);d&&a.$watch(d,function(a){c.text(a)})}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridViewport",["gridUtil",function(a){return{replace:!0,scope:{},templateUrl:"ui-grid/uiGridViewport",require:["^uiGrid","^uiGridRenderContainer"],link:function(b,c,d,e){var f=e[0],g=e[1];b.containerCtrl=g;{var h=g.rowContainer,i=g.colContainer;f.grid}b.grid=f.grid,b.rowContainer=g.rowContainer,b.colContainer=g.colContainer,g.viewport=c,c.on("scroll",function(){var d=c[0].scrollTop,e=a.normalizeScrollLeft(c),g=-1,j=-1;if(e!==i.prevScrollLeft){var k=(e-i.prevScrollLeft,i.getCanvasWidth()-i.getViewportWidth());g=e/k,i.adjustScrollHorizontal(e,g)}if(d!==h.prevScrollTop){var l=(d-h.prevScrollTop,h.getCanvasHeight()-h.getViewportHeight());j=d/l,j>1&&(j=1),0>j&&(j=0),h.adjustScrollVertical(d,j)}if(!b.grid.isScrollingVertically&&!b.grid.isScrollingHorizontally){var m={};g>-1&&(m.x={percentage:g}),j>-1&&(m.y={percentage:j}),f.fireScrollingEvent(m)}})}}}])}(),function(){angular.module("ui.grid").directive("uiGridVisible",function(){return function(a,b,c){a.$watch(c.uiGridVisible,function(a){b[a?"removeClass":"addClass"]("ui-grid-invisible")})}})}(),function(){"use strict";angular.module("ui.grid").controller("uiGridController",["$scope","$element","$attrs","gridUtil","$q","uiGridConstants","$templateCache","gridClassFactory","$timeout","$parse","$compile",function(a,b,c,d,e,f,g,h,i,j,k){function l(a,b){a&&a!==b&&(n.grid.options.columnDefs=a,n.grid.buildColumns().then(function(){n.grid.preCompileCellTemplates(),n.grid.callDataChangeCallbacks(f.dataChange.COLUMN)}))}function m(b){var d=[];b&&(n.grid.columns.length===(n.grid.rowHeaderColumns?n.grid.rowHeaderColumns.length:0)&&!c.uiGridColumns&&0===n.grid.options.columnDefs.length&&b.length>0&&n.grid.buildColumnDefsFromData(b),(n.grid.options.columnDefs.length>0||b.length>0)&&d.push(n.grid.buildColumns().then(function(){n.grid.preCompileCellTemplates()})),e.all(d).then(function(){n.grid.modifyRows(b).then(function(){n.grid.redrawInPlace(),a.$evalAsync(function(){n.grid.refreshCanvas(!0),n.grid.callDataChangeCallbacks(f.dataChange.ROW)})})}))}var n=this;n.grid=h.createGrid(a.uiGrid),b.addClass("grid"+n.grid.id),n.grid.rtl="rtl"===d.getStyles(b[0]).direction,n.getExternalScopes=a.getExternalScopes,a.grid=n.grid,c.uiGridColumns&&c.$observe("uiGridColumns",function(a){n.grid.options.columnDefs=a,n.grid.buildColumns().then(function(){n.grid.preCompileCellTemplates(),n.grid.refreshCanvas(!0)})});var o;o=angular.isString(a.uiGrid.data)?a.$parent.$watchCollection(a.uiGrid.data,m):a.$parent.$watchCollection(function(){return a.uiGrid.data},m);var p=a.$parent.$watchCollection(function(){return a.uiGrid.columnDefs},l);a.$on("$destroy",function(){o(),p()}),a.$watch(function(){return n.grid.styleComputations},function(){n.grid.refreshCanvas(!0)}),n.fireScrollingEvent=d.throttle(function(b){a.$broadcast(f.events.GRID_SCROLL,b)},n.grid.options.scrollThrottle,{trailing:!0}),n.fireEvent=function(b,c){("undefined"==typeof c||void 0===c)&&(c={}),("undefined"==typeof c.grid||void 0===c.grid)&&(c.grid=n.grid),a.$broadcast(b,c)},n.innerCompile=function(b){k(b)(a)}}]),angular.module("ui.grid").directive("uiGrid",["$compile","$templateCache","gridUtil","$window",function(a,b,c,d){return{templateUrl:"ui-grid/ui-grid",scope:{uiGrid:"=",getExternalScopes:"&?externalScopes"},replace:!0,transclude:!0,controller:"uiGridController",compile:function(){return{post:function(a,b,e,f){function g(){h.gridWidth=a.gridWidth=c.elementWidth(b),h.gridHeight=a.gridHeight=c.elementHeight(b),h.queueRefresh()}var h=f.grid;if(f.scrollbars=[],h.renderingComplete(),h.element=b,h.gridWidth=a.gridWidth=c.elementWidth(b),h.canvasWidth=f.grid.gridWidth,h.gridHeight=a.gridHeight=c.elementHeight(b),h.gridHeight<h.options.rowHeight){var i=h.options.minRowsToShow*h.options.rowHeight,j=h.options.hideHeader?0:h.options.headerRowHeight,k=h.options.showFooter?h.options.footerRowHeight:0,l=h.options.enableScrollbars?c.getScrollbarWidth():0,m=0;angular.forEach(h.options.columnDefs,function(a){a.hasOwnProperty("filter")?1>m&&(m=1):a.hasOwnProperty("filters")&&m<a.filters.length&&(m=a.filters.length)});var n=m*j,o=j+i+k+l+n;b.css("height",o+"px"),h.gridHeight=a.gridHeight=c.elementHeight(b)}h.refreshCanvas();var p=angular.element('<div ng-if="grid.hasLeftContainer()" style="width: 0" ui-grid-pinned-container="\'left\'"></div>');b.prepend(p),f.innerCompile(p);var q=angular.element('<div  ng-if="grid.hasRightContainer()" style="width: 0" ui-grid-pinned-container="\'right\'"></div>');b.append(q),f.innerCompile(q),a.$watch(function(){return h.hasLeftContainer()},function(a,b){a!==b&&h.refreshCanvas(!0)}),a.$watch(function(){return h.hasRightContainer()},function(a,b){a!==b&&h.refreshCanvas(!0)}),angular.element(d).on("resize",g),b.on("$destroy",function(){angular.element(d).off("resize",g)})}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridPinnedContainer",["gridUtil",function(){return{restrict:"EA",replace:!0,template:'<div class="ui-grid-pinned-container"><div ui-grid-render-container container-id="side" row-container-name="\'body\'" col-container-name="side" bind-scroll-vertical="true" class="{{ side }} ui-grid-render-container-{{ side }}"></div></div>',scope:{side:"=uiGridPinnedContainer"},require:"^uiGrid",compile:function(){return{post:function(a,b,c,d){function e(){if("left"===a.side||"right"===a.side){for(var b=g.renderContainers[a.side].visibleColumnCache,c=0,d=0;d<b.length;d++){var e=b[d];c+=e.drawnWidth}h=c}}function f(){var c="";if("left"===a.side||"right"===a.side){e(),b.attr("style",null);var d=g.renderContainers.body.getViewportHeight();c+=".grid"+g.id+" .ui-grid-pinned-container-"+a.side+", .grid"+g.id+" .ui-grid-pinned-container-"+a.side+" .ui-grid-render-container-"+a.side+" .ui-grid-viewport { width: "+h+"px; height: "+d+"px; } "}return c}var g=d.grid,h=0;b.addClass("ui-grid-pinned-container-"+a.side),g.renderContainers.body.registerViewportAdjuster(function(a){return 0===h&&e(),a.width-=h,a}),g.registerStyleComputation({priority:15,func:f})}}}}}])}(),function(){angular.module("ui.grid").factory("Grid",["$q","$compile","$parse","gridUtil","uiGridConstants","GridOptions","GridColumn","GridRow","GridApi","rowSorter","rowSearcher","GridRenderContainer","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){}var o=function(a){var b=this;if(void 0===a||"undefined"==typeof a.id||!a.id)throw new Error("No ID provided. An ID must be given when creating a grid.");if(!/^[_a-zA-Z0-9-]+$/.test(a.id))throw new Error("Grid id '"+a.id+'" is invalid. It must follow CSS selector syntax rules.');b.id=a.id,delete a.id,b.options=f.initialize(a),b.headerHeight=b.options.headerRowHeight,b.footerHeight=b.options.showFooter===!0?b.options.footerRowHeight:0,b.rtl=!1,b.gridHeight=0,b.gridWidth=0,b.columnBuilders=[],b.rowBuilders=[],b.rowsProcessors=[],b.columnsProcessors=[],b.styleComputations=[],b.viewportAdjusters=[],b.rowHeaderColumns=[],b.dataChangeCallbacks={},b.renderContainers={},b.renderContainers.body=new l("body",b),b.cellValueGetterCache={},b.getRowTemplateFn=null,b.rows=[],b.columns=[],b.isScrollingVertically=!1,b.isScrollingHorizontally=!1;var c=d.debounce(function(){b.isScrollingVertically=!1},300),g=d.debounce(function(){b.isScrollingHorizontally=!1},300);b.flagScrollingVertically=function(){b.isScrollingVertically=!0,c()},b.flagScrollingHorizontally=function(){b.isScrollingHorizontally=!0,g()},b.api=new i(b),b.api.registerMethod("core","refresh",this.refresh),b.api.registerMethod("core","refreshRows",this.refreshRows),b.api.registerMethod("core","handleWindowResize",this.handleWindowResize),b.api.registerMethod("core","addRowHeaderColumn",this.addRowHeaderColumn),b.api.registerMethod("core","sortHandleNulls",j.handleNulls),b.api.registerEvent("core","sortChanged"),b.api.registerMethod("core","notifyDataChange",this.notifyDataChange),b.registerDataChangeCallback(b.columnRefreshCallback,[e.dataChange.COLUMN])};return o.prototype.isRTL=function(){return this.rtl},o.prototype.registerColumnBuilder=function(a){this.columnBuilders.push(a)},o.prototype.buildColumnDefsFromData=function(a){this.options.columnDefs=d.getColumnsFromData(a,this.options.excludeProperties)},o.prototype.registerRowBuilder=function(a){this.rowBuilders.push(a)},o.prototype.registerDataChangeCallback=function(a,b){var c=d.nextUid();return b||(b=[e.dataChange.ALL]),Array.isArray(b)||d.logError("Expected types to be an array or null in registerDataChangeCallback, value passed was: "+b),this.dataChangeCallbacks[c]={callback:a,types:b},c},o.prototype.deregisterDataChangeCallback=function(a){delete this.dataChangeCallbacks[a]},o.prototype.callDataChangeCallbacks=function(a){angular.forEach(this.dataChangeCallbacks,function(b){(-1!==b.types.indexOf(e.dataChange.ALL)||-1!==b.types.indexOf(a)||a===e.dataChange.ALL)&&b.callback(this)},this)},o.prototype.notifyDataChange=function(a,b){var c=e.dataChange;b===c.ALL||b===c.COLUMN||b===c.EDIT||b===c.ROW?a.callDataChangeCallbacks(b):d.logError("Notified of a data change, but the type was not recognised, so no action taken, type was: "+b)},o.prototype.columnRefreshCallback=function(a){a.refresh()},o.prototype.getColumn=function(a){var b=this.columns.filter(function(b){return b.colDef.name===a});return b.length>0?b[0]:null},o.prototype.getColDef=function(a){var b=this.options.columnDefs.filter(function(b){return b.name===a});return b.length>0?b[0]:null},o.prototype.assignTypes=function(){var a=this;a.options.columnDefs.forEach(function(b,c){if(!b.type){var e=new g(b,c,a),f=a.rows.length>0?a.rows[0]:null;f?b.type=d.guessType(a.getCellValue(f,e)):(d.logWarn("Unable to assign type from data, so defaulting to string"),b.type="string")}})},o.prototype.addRowHeaderColumn=function(a){var b=this,c=new g(a,b.rowHeaderColumns.length,b);c.isRowHeader=!0,b.isRTL()?(b.createRightContainer(),c.renderContainer="right"):(b.createLeftContainer(),c.renderContainer="left"),b.columnBuilders[0](a,c,b.options).then(function(){c.enableFiltering=!1,c.enableSorting=!1,c.enableHiding=!1,b.rowHeaderColumns.push(c),b.buildColumns().then(function(){b.preCompileCellTemplates(),b.handleWindowResize()})})},o.prototype.buildColumns=function(){var b,c=this,e=[],f=c.rowHeaderColumns.length;for(b=0;b<c.columns.length;b++)c.getColDef(c.columns[b].name)||(c.columns.splice(b,1),b--);return c.rowHeaderColumns.forEach(function(a){c.columns.unshift(a)}),c.options.columnDefs.forEach(function(a,b){c.preprocessColDef(a);var h=c.getColumn(a.name);h?h.updateColumnDef(a):(h=new g(a,d.nextUid(),c),c.columns.splice(b+f,0,h)),c.columnBuilders.forEach(function(b){e.push(b.call(c,a,h,c.options))})}),a.all(e)},o.prototype.preCompileCellTemplates=function(){var a=this;this.columns.forEach(function(c){var d=c.cellTemplate.replace(e.MODEL_COL_FIELD,a.getQualifiedColField(c));d=d.replace(e.COL_FIELD,"grid.getCellValue(row, col)");var f=b(d);c.compiledElementFn=f,c.compiledElementFnDefer&&c.compiledElementFnDefer.resolve(c.compiledElementFn)})},o.prototype.getQualifiedColField=function(a){return"row.entity."+d.preEval(a.field)},o.prototype.createLeftContainer=function(){this.hasLeftContainer()||(this.renderContainers.left=new l("left",this,{disableColumnOffset:!0}))},o.prototype.createRightContainer=function(){this.hasRightContainer()||(this.renderContainers.right=new l("right",this,{disableColumnOffset:!0}))},o.prototype.hasLeftContainer=function(){return void 0!==this.renderContainers.left},o.prototype.hasRightContainer=function(){return void 0!==this.renderContainers.right},o.prototype.preprocessColDef=function(a){if(!a.field&&!a.name)throw new Error("colDef.name or colDef.field property is required");void 0===a.name&&void 0!==a.field&&(a.name=a.field)},o.prototype.newInN=function(a,b,c,d){for(var e=this,f=[],g=0;g<b.length;g++){for(var h=d?b[g][d]:b[g],i=!1,j=0;j<a.length;j++){var k=c?a[j][c]:a[j];if(e.options.rowEquality(h,k)){i=!0;break}}i||f.push(h)}return f},o.prototype.getRow=function(a){var b=this.rows.filter(function(b){return b.entity===a});return b.length>0?b[0]:null},o.prototype.modifyRows=function(b){var c,d,e,f,g=this;if((g.options.useExternalSorting||0===g.getColumnSorting().length)&&b.length>0){var i=g.rowHashMap;i||(i={get:function(){return null}}),g.createRowHashMap(),d=g.rowHashMap;var j=0===g.rows.length;for(g.rows.length=0,c=0;c<b.length;c++){var k=b[c];e=i.get(k),f=e?e.row:g.processRowBuilders(new h(k,c,g)),g.rows.push(f),d.put(k,{i:c,entity:k,row:f})}j&&g.assignTypes()}else if(0===g.rows.length&&b.length>0){if(g.options.enableRowHashing)for(g.rowHashMap||g.createRowHashMap(),c=0;c<b.length;c++)f=b[c],g.rowHashMap.put(f,{i:c,entity:f});g.addRows(b),g.assignTypes()}else if(b.length>0){var l,m,n;if(g.options.enableRowHashing){l=[],n=[];var o={};for(m=[],g.rowHashMap||g.createRowHashMap(),d=g.rowHashMap,c=0;c<b.length;c++){f=b[c];var p=!1;g.options.getRowIdentity(f)||(p=!0),e=d.get(f),e?e.row&&(o[g.options.rowIdentity(f)]=!0):(d.put(f,{i:c,entity:f}),p?n.push(f):l.push(f))}for(c=0;c<g.rows.length;c++){var q=g.rows[c],r=g.options.rowIdentity(q.entity);o[r]||m.push(q)}}var s=l||[],t=n||b;s=s.concat(g.newInN(g.rows,t,"entity")),g.addRows(s);var u=g.getDeletedRows(m||g.rows,b);for(c=0;c<u.length;c++)g.options.enableRowHashing&&g.rowHashMap.remove(u[c].entity),g.rows.splice(g.rows.indexOf(u[c]),1)}else g.createRowHashMap(),g.rows.length=0;var v=a.when(g.processRowsProcessors(g.rows)).then(function(a){return g.setVisibleRows(a)}),w=a.when(g.processColumnsProcessors(g.columns)).then(function(a){return g.setVisibleColumns(a)});return a.all([v,w])},o.prototype.getDeletedRows=function(a,b){var c=this,d=a.filter(function(a){return!b.some(function(b){return c.options.rowEquality(b,a.entity)})});return d},o.prototype.addRows=function(a){for(var b=this,c=b.rows.length,d=0;d<a.length;d++){var e=b.processRowBuilders(new h(a[d],d+c,b));if(b.options.enableRowHashing){var f=b.rowHashMap.get(e.entity);f&&(f.row=e)}b.rows.push(e)}},o.prototype.processRowBuilders=function(a){var b=this;return b.rowBuilders.forEach(function(c){c.call(b,a,b.gridOptions)}),a},o.prototype.registerStyleComputation=function(a){this.styleComputations.push(a)},o.prototype.registerRowsProcessor=function(a){if(!angular.isFunction(a))throw"Attempt to register non-function rows processor: "+a;this.rowsProcessors.push(a)},o.prototype.removeRowsProcessor=function(a){var b=this.rowsProcessors.indexOf(a);"undefined"!=typeof b&&void 0!==b&&this.rowsProcessors.splice(b,1)},o.prototype.processRowsProcessors=function(b){function c(b,e){var g=d.rowsProcessors[b];return a.when(g.call(d,e,d.columns)).then(function(a){if(!a)throw"Processor at index "+b+" did not return a set of renderable rows";if(!angular.isArray(a))throw"Processor at index "+b+" did not return an array";return b++,b<=d.rowsProcessors.length-1?c(b,a):void f.resolve(a)})}var d=this,e=b.slice(0);if(0===d.rowsProcessors.length)return a.when(e);var f=a.defer();return c(0,e),f.promise},o.prototype.setVisibleRows=function(a){var b=this;for(var c in b.renderContainers){var d=b.renderContainers[c];d.visibleRowCache.length=0}for(var e=0;e<a.length;e++){var f=a[e];f.visible&&("undefined"!=typeof f.renderContainer&&f.renderContainer?b.renderContainers[f.renderContainer].visibleRowCache.push(f):b.renderContainers.body.visibleRowCache.push(f))}},o.prototype.registerColumnsProcessor=function(a){if(!angular.isFunction(a))throw"Attempt to register non-function rows processor: "+a;this.columnsProcessors.push(a)},o.prototype.removeColumnsProcessor=function(a){var b=this.columnsProcessors.indexOf(a);"undefined"!=typeof b&&void 0!==b&&this.columnsProcessors.splice(b,1)},o.prototype.processColumnsProcessors=function(b){function c(b,g){var h=d.columnsProcessors[b];return a.when(h.call(d,g,d.rows)).then(function(a){if(!a)throw"Processor at index "+b+" did not return a set of renderable rows";if(!angular.isArray(a))throw"Processor at index "+b+" did not return an array";return b++,b<=d.columnsProcessors.length-1?c(b,e):void f.resolve(e)})}var d=this,e=b.slice(0);if(0===d.columnsProcessors.length)return a.when(e);var f=a.defer();return c(0,e),f.promise},o.prototype.setVisibleColumns=function(a){var b=this;for(var c in b.renderContainers){var d=b.renderContainers[c];d.visibleColumnCache.length=0}for(var e=0;e<a.length;e++){var f=a[e];f.visible&&("undefined"!=typeof f.renderContainer&&f.renderContainer?b.renderContainers[f.renderContainer].visibleColumnCache.push(f):b.renderContainers.body.visibleColumnCache.push(f))}},o.prototype.handleWindowResize=function(){var a=this;a.gridWidth=d.elementWidth(a.element),a.gridHeight=d.elementHeight(a.element),a.queueRefresh()},o.prototype.queueRefresh=function(){var a=this;return a.refreshCanceller&&m.cancel(a.refreshCanceller),a.refreshCanceller=m(function(){a.refreshCanvas(!0)}),a.refreshCanceller.then(function(){a.refreshCanceller=null}),a.refreshCanceller},o.prototype.buildStyles=function(){var a=this;a.customStyles="",a.styleComputations.sort(function(a,b){return null===a.priority?1:null===b.priority?-1:null===a.priority&&null===b.priority?0:a.priority-b.priority}).forEach(function(b){var c=b.func.call(a);angular.isString(c)&&(a.customStyles+="\n"+c)})},o.prototype.minColumnsToRender=function(){var a=this,b=this.getViewportWidth(),c=0,d=0;return a.columns.forEach(function(e,f){if(b>d)d+=e.drawnWidth,c++;else{for(var g=0,h=f;h>=f-c;h--)g+=a.columns[h].drawnWidth;b>g&&c++}}),c},o.prototype.getBodyHeight=function(){var a=this.getViewportHeight();return"undefined"!=typeof this.horizontalScrollbarHeight&&void 0!==this.horizontalScrollbarHeight&&this.horizontalScrollbarHeight>0&&(a+=this.horizontalScrollbarHeight),a},o.prototype.getViewportHeight=function(){var a=this,b=this.gridHeight-this.headerHeight-this.footerHeight;"undefined"!=typeof this.horizontalScrollbarHeight&&void 0!==this.horizontalScrollbarHeight&&this.horizontalScrollbarHeight>0&&(b-=this.horizontalScrollbarHeight);var c=a.getViewportAdjustment();return b+=c.height},o.prototype.getViewportWidth=function(){var a=this,b=this.gridWidth;"undefined"!=typeof this.verticalScrollbarWidth&&void 0!==this.verticalScrollbarWidth&&this.verticalScrollbarWidth>0&&(b-=this.verticalScrollbarWidth);var c=a.getViewportAdjustment();return b+=c.width},o.prototype.getHeaderViewportWidth=function(){var a=this.getViewportWidth();return"undefined"!=typeof this.verticalScrollbarWidth&&void 0!==this.verticalScrollbarWidth&&this.verticalScrollbarWidth>0&&(a+=this.verticalScrollbarWidth),a},o.prototype.registerViewportAdjuster=function(a){this.viewportAdjusters.push(a)},o.prototype.removeViewportAdjuster=function(a){var b=this.viewportAdjusters.indexOf(a);"undefined"!=typeof b&&void 0!==b&&this.viewportAdjusters.splice(b,1)},o.prototype.getViewportAdjustment=function(){var a=this,b={height:0,width:0};return a.viewportAdjusters.forEach(function(a){b=a.call(this,b)}),b},o.prototype.getVisibleRowCount=function(){return this.renderContainers.body.visibleRowCache.length},o.prototype.getVisibleRows=function(){return this.renderContainers.body.visibleRowCache},o.prototype.getVisibleColumnCount=function(){return this.renderContainers.body.visibleColumnCache.length},o.prototype.searchRows=function(a){return k.search(this,a,this.columns)},o.prototype.sortByColumn=function(a){return j.sort(this,a,this.columns)},o.prototype.getCellValue=function(a,b){var d=this;return d.cellValueGetterCache[b.colDef.name]||(d.cellValueGetterCache[b.colDef.name]=c(a.getEntityQualifiedColField(b))),d.cellValueGetterCache[b.colDef.name](a)},o.prototype.getNextColumnSortPriority=function(){var a=this,b=0;return a.columns.forEach(function(a){a.sort&&a.sort.priority&&a.sort.priority>b&&(b=a.sort.priority)}),b+1},o.prototype.resetColumnSorting=function(a){var b=this;b.columns.forEach(function(b){b!==a&&(b.sort={})})},o.prototype.getColumnSorting=function(){var a,b=this,c=[];return a=b.columns.slice(0),a.sort(j.prioritySort).forEach(function(a){a.sort&&"undefined"!=typeof a.sort.direction&&a.sort.direction&&(a.sort.direction===e.ASC||a.sort.direction===e.DESC)&&c.push(a)}),c},o.prototype.sortColumn=function(b,c,d){var f=this,g=null;if("undefined"==typeof b||!b)throw new Error("No column parameter provided");return"boolean"==typeof c?d=c:g=c,d?b.sort.priority=f.getNextColumnSortPriority():(f.resetColumnSorting(b),b.sort.priority=0),b.sort.direction=g?g:b.sort.direction&&b.sort.direction===e.ASC?e.DESC:b.sort.direction&&b.sort.direction===e.DESC?b.colDef&&b.colDef.suppressRemoveSort?e.ASC:null:e.ASC,f.api.core.raise.sortChanged(f,f.getColumnSorting()),a.when(b)},o.prototype.renderingComplete=function(){angular.isFunction(this.options.onRegisterApi)&&this.options.onRegisterApi(this.api),this.api.core.raise.renderingComplete(this.api)},o.prototype.createRowHashMap=function(){var a=this,b=new n;b.grid=a,a.rowHashMap=b},o.prototype.refresh=function(){d.logDebug("grid refresh");var b=this,c=b.processRowsProcessors(b.rows).then(function(a){b.setVisibleRows(a)}),e=b.processColumnsProcessors(b.columns).then(function(a){b.setVisibleColumns(a)});return a.all([c,e]).then(function(){b.redrawInPlace(),b.refreshCanvas(!0)})},o.prototype.refreshRows=function(){var a=this;return a.processRowsProcessors(a.rows).then(function(b){a.setVisibleRows(b),a.redrawRows(),a.refreshCanvas()})},o.prototype.refreshCanvas=function(b){var c=this;b&&c.buildStyles();var e=a.defer(),f=[];for(var g in c.renderContainers)if(c.renderContainers.hasOwnProperty(g)){var h=c.renderContainers[g];if(null===h.canvasWidth||isNaN(h.canvasWidth))continue;h.header&&f.push(h)}return m(f.length>0?function(){var a,g,h=!1,i=0;for(a=0;a<f.length;a++)if(g=f[a],null!==g.canvasWidth&&!isNaN(g.canvasWidth)&&g.header){var j=g.headerHeight,k=d.outerElementHeight(g.header);g.headerHeight=parseInt(k,10),j!==k&&(h=!0);var l=d.getBorderSize(g.header,"top"),m=d.getBorderSize(g.header,"bottom"),n=parseInt(k-l-m,10);n=0>n?0:n,g.innerHeaderHeight=n,n>i&&(i=n)}for(a=0;a<f.length;a++)g=f[a],g.headerHeight<i&&(g.explicitHeaderHeight=i);b&&h&&c.buildStyles(),e.resolve()}:function(){e.resolve()}),e.promise},o.prototype.redrawInPlace=function(){var a=this;for(var b in a.renderContainers){var c=a.renderContainers[b];c.adjustRows(c.prevScrollTop,null),c.adjustColumns(c.prevScrollLeft,null)}},n.prototype={put:function(a,b){this[this.grid.options.rowIdentity(a)]=b},get:function(a){return this[this.grid.options.rowIdentity(a)]},remove:function(a){var b=this[a=this.grid.options.rowIdentity(a)];return delete this[a],b}},o}])}(),function(){angular.module("ui.grid").factory("GridApi",["$q","$rootScope","gridUtil","uiGridConstants","GridRow","uiGridGridMenuService",function(a,b,c,d,e){function f(a,b,c,d){return a.$on(b,function(){var a=Array.prototype.slice.call(arguments);a.splice(0,1),c.apply(d.api,a)})}var g=function(a){this.grid=a,this.listeners=[],this.registerEvent("core","renderingComplete"),this.registerEvent("core","filterChanged"),this.registerMethod("core","setRowInvisible",e.prototype.setRowInvisible),this.registerMethod("core","clearRowInvisible",e.prototype.clearRowInvisible),this.registerMethod("core","getVisibleRows",e.prototype.getVisibleRows),this.registerEvent("core","rowsVisibleChanged")};return g.prototype.suppressEvents=function(a,b){var c=this,d=angular.isArray(a)?a:[a],e=[];d.forEach(function(a){e=c.listeners.filter(function(b){return a===b.handler})}),e.forEach(function(a){a.dereg()}),b(),e.forEach(function(a){a.dereg=f(a.scope,a.eventId,a.handler,c.grid)})},g.prototype.registerEvent=function(a,c){var d=this;d[a]||(d[a]={});var e=d[a];e.on||(e.on={},e.raise={});var g=d.grid.id+a+c;e.raise[c]=function(){b.$broadcast.apply(b,[g].concat(Array.prototype.slice.call(arguments)))},e.on[c]=function(a,b){var c=f(a,g,b,d.grid),e={handler:b,dereg:c,eventId:g,scope:a};d.listeners.push(e),a.$on("$destroy",function(){e.dereg=null,e.handler=null,e.eventId=null,e.scope=null})}},g.prototype.registerEventsFromObject=function(a){var b=this,c=[];angular.forEach(a,function(a,b){var d={name:b,events:[]};angular.forEach(a,function(a,b){d.events.push(b)}),c.push(d)}),c.forEach(function(a){a.events.forEach(function(c){b.registerEvent(a.name,c)})})},g.prototype.registerMethod=function(a,b,d,e){this[a]||(this[a]={});var f=this[a];f[b]=c.createBoundedWrapper(e||this.grid,d)},g.prototype.registerMethodsFromObject=function(a,b){var c=this,d=[];angular.forEach(a,function(a,b){var c={name:b,methods:[]};angular.forEach(a,function(a,b){c.methods.push({name:b,fn:a})}),d.push(c)}),d.forEach(function(a){a.methods.forEach(function(d){c.registerMethod(a.name,d.name,d.fn,b)})})},g}])}(),function(){angular.module("ui.grid").factory("GridColumn",["gridUtil","uiGridConstants","i18nService",function(a,b,c){function d(a,b,c){var d=this;d.grid=c,d.uid=b,d.updateColumnDef(a)}return d.prototype.setPropertyOrDefault=function(a,b,c){var d=this;d[b]="undefined"!=typeof a[b]&&a[b]?a[b]:"undefined"!=typeof d[b]?d[b]:c?c:{}},d.prototype.updateColumnDef=function(b){var c=this;if(c.colDef=b,void 0===b.name)throw new Error("colDef.name is required for column at index "+c.grid.options.columnDefs.indexOf(b));var e="Cannot parse column width '"+b.width+"' for column named '"+b.name+"'";if(a.isNullOrUndefined(c.width)||!angular.isNumber(c.width))if(a.isNullOrUndefined(b.width))c.width="*";else if(angular.isNumber(b.width))c.width=b.width;else if(a.endsWith(b.width,"%")){var f=b.width.replace(/%/g,""),g=parseInt(f,10);if(isNaN(g))throw new Error(e);c.width=b.width}else if(b.width.match(/^(\d+)$/))c.width=parseInt(b.width.match(/^(\d+)$/)[1],10);else{if(!b.width.match(/^\*+$/))throw new Error(e);c.width=b.width}d.prototype.unsort=function(){this.sort={},c.grid.api.core.raise.sortChanged(c,c.grid.getColumnSorting())},c.minWidth=b.minWidth?b.minWidth:30,c.maxWidth=b.maxWidth?b.maxWidth:9e3,c.field=void 0===b.field?b.name:b.field,"string"!=typeof c.field&&a.logError("Field is not a string, this is likely to break the code, Field is: "+c.field),c.name=b.name,c.displayName=void 0===b.displayName?a.readableColumnName(b.name):b.displayName,c.aggregationType=angular.isDefined(b.aggregationType)?b.aggregationType:null,c.footerCellTemplate=angular.isDefined(b.footerCellTemplate)?b.footerCellTemplate:null,c.footerCellClass=b.footerCellClass,c.cellClass=b.cellClass,c.headerCellClass=b.headerCellClass,c.cellFilter=b.cellFilter?b.cellFilter:"",c.headerCellFilter=b.headerCellFilter?b.headerCellFilter:"",c.visible=a.isNullOrUndefined(b.visible)||b.visible,c.headerClass=b.headerClass,c.visible=!0,c.enableSorting="undefined"!=typeof b.enableSorting?b.enableSorting:!0,c.sortingAlgorithm=b.sortingAlgorithm,c.enableFiltering="undefined"!=typeof b.enableFiltering?b.enableFiltering:!0,c.setPropertyOrDefault(b,"menuItems",[]),c.setPropertyOrDefault(b,"sort");
var h=[];b.filter?h.push(b.filter):c.enableFiltering&&c.grid.options.enableFiltering&&h.push({}),c.setPropertyOrDefault(b,"filter"),c.setPropertyOrDefault(b,"filters",h)},d.prototype.getColClass=function(a){var c=b.COL_CLASS_PREFIX+this.uid;return a?"."+c:c},d.prototype.getColClassDefinition=function(){return" .grid"+this.grid.id+" "+this.getColClass(!0)+" { width: "+this.drawnWidth+"px; }"},d.prototype.getRenderContainer=function(){var a=this,b=a.renderContainer;return(null===b||""===b||void 0===b)&&(b="body"),a.grid.renderContainers[b]},d.prototype.showColumn=function(){this.colDef.visible=!0},d.prototype.hideColumn=function(){this.colDef.visible=!1},d.prototype.getAggregationValue=function(){var a=this,c=0,d=a.grid.getVisibleRows(),e=[];return angular.forEach(d,function(b){var c=a.grid.getCellValue(b,a);angular.isNumber(c)&&e.push(c)}),angular.isFunction(a.aggregationType)?a.aggregationType(d,a):a.aggregationType===b.aggregationTypes.count?a.getAggregationText("aggregation.count",a.grid.getVisibleRowCount()):a.aggregationType===b.aggregationTypes.sum?(angular.forEach(e,function(a){c+=a}),a.getAggregationText("aggregation.sum",c)):a.aggregationType===b.aggregationTypes.avg?(angular.forEach(e,function(a){c+=a}),c/=e.length,a.getAggregationText("aggregation.avg",c)):a.aggregationType===b.aggregationTypes.min?a.getAggregationText("aggregation.min",Math.min.apply(null,e)):a.aggregationType===b.aggregationTypes.max?a.getAggregationText("aggregation.max",Math.max.apply(null,e)):" "},d.prototype.getAggregationText=function(a,b){var d=this;return d.colDef.aggregationHideLabel?b:c.getSafeText(a)+b},d.prototype.getCellTemplate=function(){var a=this;return a.cellTemplatePromise},d.prototype.getCompiledElementFn=function(){var a=this;return a.compiledElementFnDefer.promise},d}])}(),function(){angular.module("ui.grid").factory("GridOptions",["gridUtil","uiGridConstants",function(a,b){return{initialize:function(c){return c.onRegisterApi=c.onRegisterApi||angular.noop(),c.data=c.data||[],c.columnDefs=c.columnDefs||[],c.excludeProperties=c.excludeProperties||["$$hashKey"],c.enableRowHashing=c.enableRowHashing!==!1,c.rowIdentity=c.rowIdentity||function(b){return a.hashKey(b)},c.getRowIdentity=c.getRowIdentity||function(a){return a.$$hashKey},c.headerRowHeight="undefined"!=typeof c.headerRowHeight?c.headerRowHeight:30,c.rowHeight=c.rowHeight||30,c.maxVisibleRowCount=c.maxVisibleRowCount||200,c.minRowsToShow="undefined"!=typeof c.minRowsToShow?c.minRowsToShow:10,c.showFooter=c.showFooter===!0,c.footerRowHeight="undefined"!=typeof c.footerRowHeight?c.footerRowHeight:30,c.columnWidth="undefined"!=typeof c.columnWidth?c.columnWidth:50,c.maxVisibleColumnCount="undefined"!=typeof c.maxVisibleColumnCount?c.maxVisibleColumnCount:200,c.virtualizationThreshold="undefined"!=typeof c.virtualizationThreshold?c.virtualizationThreshold:20,c.columnVirtualizationThreshold="undefined"!=typeof c.columnVirtualizationThreshold?c.columnVirtualizationThreshold:10,c.excessRows="undefined"!=typeof c.excessRows?c.excessRows:4,c.scrollThreshold="undefined"!=typeof c.scrollThreshold?c.scrollThreshold:4,c.excessColumns="undefined"!=typeof c.excessColumns?c.excessColumns:4,c.horizontalScrollThreshold="undefined"!=typeof c.horizontalScrollThreshold?c.horizontalScrollThreshold:2,c.scrollThrottle="undefined"!=typeof c.scrollThrottle?c.scrollThrottle:70,c.enableSorting=c.enableSorting!==!1,c.enableFiltering=c.enableFiltering===!0,c.enableColumnMenus=c.enableColumnMenus!==!1,c.enableVerticalScrollbar="undefined"!=typeof c.enableVerticalScrollbar?c.enableVerticalScrollbar:b.scrollbars.ALWAYS,c.enableHorizontalScrollbar="undefined"!=typeof c.enableHorizontalScrollbar?c.enableHorizontalScrollbar:b.scrollbars.ALWAYS,c.minimumColumnSize="undefined"!=typeof c.minimumColumnSize?c.minimumColumnSize:10,c.rowEquality=c.rowEquality||function(a,b){return a===b},c.headerTemplate=c.headerTemplate||null,c.footerTemplate=c.footerTemplate||null,c.rowTemplate=c.rowTemplate||"ui-grid/ui-grid-row",c}}}])}(),function(){angular.module("ui.grid").factory("GridRenderContainer",["gridUtil",function(a){function b(a,b,c){var d=this;d.name=a,d.grid=b,d.visibleRowCache=[],d.visibleColumnCache=[],d.renderedRows=[],d.renderedColumns=[],d.prevScrollTop=0,d.prevScrolltopPercentage=0,d.prevRowScrollIndex=0,d.prevScrollLeft=0,d.prevScrollleftPercentage=0,d.prevColumnScrollIndex=0,d.columnStyles="",d.viewportAdjusters=[],c&&angular.isObject(c)&&angular.extend(d,c),b.registerStyleComputation({priority:5,func:function(){return d.columnStyles}})}return b.prototype.reset=function(){this.visibleColumnCache.length=0,this.visibleRowCache.length=0,this.renderedRows.length=0,this.renderedColumns.length=0},b.prototype.minRowsToRender=function(){for(var a=this,b=0,c=0,d=a.getViewportHeight(),e=a.visibleRowCache.length-1;d>c&&e>=0;e--)c+=a.visibleRowCache[e].height,b++;return b},b.prototype.minColumnsToRender=function(){for(var a=this,b=this.getViewportWidth(),c=0,d=0,e=0;e<a.visibleColumnCache.length;e++){var f=a.visibleColumnCache[e];if(b>d)d+=f.drawnWidth?f.drawnWidth:0,c++;else{for(var g=0,h=e;h>=e-c;h--)g+=a.visibleColumnCache[h].drawnWidth?a.visibleColumnCache[h].drawnWidth:0;b>g&&c++}}return c},b.prototype.getVisibleRowCount=function(){return this.visibleRowCache.length},b.prototype.registerViewportAdjuster=function(a){this.viewportAdjusters.push(a)},b.prototype.removeViewportAdjuster=function(a){var b=this.viewportAdjusters.indexOf(a);"undefined"!=typeof b&&void 0!==b&&this.viewportAdjusters.splice(b,1)},b.prototype.getViewportAdjustment=function(){var a=this,b={height:0,width:0};return a.viewportAdjusters.forEach(function(a){b=a.call(this,b)}),b},b.prototype.getViewportHeight=function(){var a=this,b=a.headerHeight?a.headerHeight:a.grid.headerHeight,c=a.grid.gridHeight-b-a.grid.footerHeight;"undefined"!=typeof a.horizontalScrollbarHeight&&void 0!==a.horizontalScrollbarHeight&&a.horizontalScrollbarHeight>0&&(c-=a.horizontalScrollbarHeight);var d=a.getViewportAdjustment();return c+=d.height},b.prototype.getViewportWidth=function(){var a=this,b=a.grid.gridWidth;"undefined"!=typeof a.grid.verticalScrollbarWidth&&void 0!==a.grid.verticalScrollbarWidth&&a.grid.verticalScrollbarWidth>0&&(b-=a.grid.verticalScrollbarWidth);var c=a.getViewportAdjustment();return b+=c.width},b.prototype.getHeaderViewportWidth=function(){var a=this,b=this.getViewportWidth();return"undefined"!=typeof a.grid.verticalScrollbarWidth&&void 0!==a.grid.verticalScrollbarWidth&&a.grid.verticalScrollbarWidth>0&&(b+=a.grid.verticalScrollbarWidth),b},b.prototype.getCanvasHeight=function(){var a=this,b=0;return a.visibleRowCache.forEach(function(a){b+=a.height}),"undefined"!=typeof a.grid.horizontalScrollbarHeight&&void 0!==a.grid.horizontalScrollbarHeight&&a.grid.horizontalScrollbarHeight>0&&(b-=a.grid.horizontalScrollbarHeight),b},b.prototype.getCanvasWidth=function(){var a=this,b=a.canvasWidth;return"undefined"!=typeof a.verticalScrollbarWidth&&void 0!==a.verticalScrollbarWidth&&a.verticalScrollbarWidth>0&&(b-=a.verticalScrollbarWidth),b},b.prototype.setRenderedRows=function(a){this.renderedRows.length=a.length;for(var b=0;b<a.length;b++)this.renderedRows[b]=a[b]},b.prototype.setRenderedColumns=function(a){this.renderedColumns.length=a.length;for(var b=0;b<a.length;b++)this.renderedColumns[b]=a[b];this.updateColumnOffset()},b.prototype.updateColumnOffset=function(){for(var a=0,b=0;b<this.currentFirstColumn;b++)a+=this.visibleColumnCache[b].drawnWidth;this.columnOffset=a},b.prototype.adjustScrollVertical=function(a,b,c){(this.prevScrollTop!==a||c)&&(("undefined"==typeof a||void 0===a||null===a)&&(a=(this.getCanvasHeight()-this.getCanvasWidth())*b),this.adjustRows(a,b),this.prevScrollTop=a,this.prevScrolltopPercentage=b,this.grid.queueRefresh())},b.prototype.adjustScrollHorizontal=function(a,b,c){(this.prevScrollLeft!==a||c)&&(("undefined"==typeof a||void 0===a||null===a)&&(a=(this.getCanvasWidth()-this.getViewportWidth())*b),this.adjustColumns(a,b),this.prevScrollLeft=a,this.prevScrollleftPercentage=b,this.grid.queueRefresh())},b.prototype.adjustRows=function(a,b){var c=this,d=c.minRowsToRender(),e=c.visibleRowCache,f=e.length-d;c.maxRowIndex=f;c.prevRowScrollIndex;"undefined"!=typeof b&&null!==b||!a||(b=a/c.getCanvasHeight());var g=Math.ceil(Math.min(f,f*b));g>f&&(g=f);var h=[];if(e.length>c.grid.options.virtualizationThreshold){if(c.prevScrollTop<a&&g<c.prevRowScrollIndex+c.grid.options.scrollThreshold&&f>g)return;if(c.prevScrollTop>a&&g>c.prevRowScrollIndex-c.grid.options.scrollThreshold&&f>g)return;var i=Math.max(0,g-c.grid.options.excessRows),j=Math.min(e.length,g+d+c.grid.options.excessRows);h=[i,j]}else{var k=c.visibleRowCache.length;h=[0,Math.max(k,d+c.grid.options.excessRows)]}c.updateViewableRowRange(h),c.prevRowScrollIndex=g},b.prototype.adjustColumns=function(a,b){var c=this,d=c.minColumnsToRender(),e=c.visibleColumnCache,f=e.length-d;"undefined"!=typeof b&&null!==b||!a||(b=a/c.getCanvasWidth());var g=Math.ceil(Math.min(f,f*b));g>f&&(g=f);var h=[];if(e.length>c.grid.options.columnVirtualizationThreshold&&c.getCanvasWidth()>c.getViewportWidth()){if(c.prevScrollLeft<a&&g<c.prevColumnScrollIndex+c.grid.options.horizontalScrollThreshold&&f>g)return;if(c.prevScrollLeft>a&&g>c.prevColumnScrollIndex-c.grid.options.horizontalScrollThreshold&&f>g)return;var i=Math.max(0,g-c.grid.options.excessColumns),j=Math.min(e.length,g+d+c.grid.options.excessColumns);h=[i,j]}else{var k=c.visibleColumnCache.length;h=[0,Math.max(k,d+c.grid.options.excessColumns)]}c.updateViewableColumnRange(h),c.prevColumnScrollIndex=g},b.prototype.updateViewableRowRange=function(a){var b=this.visibleRowCache.slice(a[0],a[1]);this.currentTopRow=a[0],this.setRenderedRows(b)},b.prototype.updateViewableColumnRange=function(a){var b=this.visibleColumnCache.slice(a[0],a[1]);this.currentFirstColumn=a[0],this.setRenderedColumns(b)},b.prototype.rowStyle=function(a){var b=this,c={};if(0===a&&0!==b.currentTopRow){var d=b.currentTopRow*b.grid.options.rowHeight;c["margin-top"]=d+"px"}return 0!==b.currentFirstColumn&&(b.grid.isRTL()?c["margin-right"]=b.columnOffset+"px":c["margin-left"]=b.columnOffset+"px"),c},b.prototype.columnStyle=function(a){var b=this;if(0===a&&0!==b.currentFirstColumn){var c=b.columnOffset;return b.grid.isRTL()?{"margin-right":c+"px"}:{"margin-left":c+"px"}}return null},b.prototype.updateColumnWidths=function(){var b=this,c=[],d=[],e=0,f=b.getViewportWidth();"undefined"!=typeof b.grid.verticalScrollbarWidth&&void 0!==b.grid.verticalScrollbarWidth&&b.grid.verticalScrollbarWidth>0&&(f+=b.grid.verticalScrollbarWidth);var g,h=0,i=0,j="",k=b.visibleColumnCache;k.forEach(function(b){if(b.visible){var f=!1;angular.isNumber(b.width)||(f=isNaN(b.width)&&a.endsWith(b.width,"%")),angular.isString(b.width)&&-1!==b.width.indexOf("*")?(e=parseInt(e+b.width.length,10),c.push(b)):f?d.push(b):angular.isNumber(b.width)&&(h=parseInt(h+b.width,10),i=parseInt(i,10)+parseInt(b.width,10),b.drawnWidth=b.width)}});var l,m,n,o=f-h;if(d.length>0){for(l=0;l<d.length;l++){m=d[l];var p=parseInt(m.width.replace(/%/g,""),10)/100;n=parseInt(p*o,10),m.colDef.minWidth&&n<m.colDef.minWidth?(n=m.colDef.minWidth,o-=n,i+=n,m.drawnWidth=n,d.splice(l,1)):m.colDef.maxWidth&&n>m.colDef.maxWidth&&(n=m.colDef.maxWidth,o-=n,i+=n,m.drawnWidth=n,d.splice(l,1))}d.forEach(function(a){var b=parseInt(a.width.replace(/%/g,""),10)/100,c=parseInt(b*o,10);i+=c,a.drawnWidth=c})}if(c.length>0){var q=parseInt(o/e,10);for(l=0;l<c.length;l++)m=c[l],n=parseInt(q*m.width.length,10),m.colDef.minWidth&&n<m.colDef.minWidth?(n=m.colDef.minWidth,o-=n,e--,i+=n,m.drawnWidth=n,g=m,c.splice(l,1)):m.colDef.maxWidth&&n>m.colDef.maxWidth&&(n=m.colDef.maxWidth,o-=n,e--,i+=n,m.drawnWidth=n,c.splice(l,1));q=parseInt(o/e,10),c.forEach(function(a){var b=parseInt(q*a.width.length,10);i+=b,a.drawnWidth=b})}var r=f-parseInt(i,10);if(r>0&&i>0&&f>i){var s=!1;if(k.forEach(function(a){a.width&&!angular.isNumber(a.width)&&(s=!0)}),s)for(var t=function(a){r>0&&(a.drawnWidth=a.drawnWidth+1,i+=1,r--)};r>0;)k.forEach(t)}f>i&&(i=f),k.forEach(function(a){j+=a.getColClassDefinition()}),b.grid.verticalScrollbarWidth&&(i+=b.grid.verticalScrollbarWidth),b.canvasWidth=parseInt(i,10),this.columnStyles=j},b}])}(),function(){angular.module("ui.grid").factory("GridRow",["gridUtil",function(a){function b(b,c,d){this.grid=d,this.entity=b,this.uid=a.nextUid(),this.visible=!0,this.height=d.options.rowHeight}return b.prototype.getQualifiedColField=function(a){return"row."+this.getEntityQualifiedColField(a)},b.prototype.getEntityQualifiedColField=function(b){return a.preEval("entity."+b.field)},b.prototype.setRowInvisible=function(a){null!==a&&(a.forceInvisible=!0,a.visible&&(a.visible=!1,a.grid.refresh(),a.grid.api.core.raise.rowsVisibleChanged()))},b.prototype.clearRowInvisible=function(a){null!==a&&(a.forceInvisible=!1,a.visible||(a.visible=!0,a.grid.refresh(),a.grid.api.core.raise.rowsVisibleChanged()))},b.prototype.getVisibleRows=function(a){return a.rows.filter(function(a){return a.visible})},b}])}(),function(){"use strict";angular.module("ui.grid").service("gridClassFactory",["gridUtil","$q","$compile","$templateCache","uiGridConstants","Grid","GridColumn","GridRow",function(a,b,c,d,e,f){var g={createGrid:function(d){d="undefined"!=typeof d?d:{},d.id=a.newId();var e=new f(d);if(e.options.rowTemplate){var h=b.defer();e.getRowTemplateFn=h.promise,a.getTemplate(e.options.rowTemplate).then(function(a){var b=c(a);h.resolve(b)},function(){throw new Error("Couldn't fetch/use row template '"+e.options.rowTemplate+"'")})}return e.registerColumnBuilder(g.defaultColumnBuilder),e.registerRowsProcessor(function(a){return a.forEach(function(a){a.visible=!a.forceInvisible}),a}),e.registerColumnsProcessor(function(a){return a.forEach(function(a){a.visible=!0}),a}),e.registerColumnsProcessor(function(a){return a.forEach(function(a){a.colDef.visible===!1&&(a.visible=!1)}),a}),e.options.enableFiltering&&e.registerRowsProcessor(e.searchRows),e.registerRowsProcessor(e.options.externalSort&&angular.isFunction(e.options.externalSort)?e.options.externalSort:e.sortByColumn),e},defaultColumnBuilder:function(c,d){var f=[];return d.headerCellTemplate=c.headerCellTemplate?c.headerCellTemplate:"ui-grid/uiGridHeaderCell",d.cellTemplate=c.cellTemplate?c.cellTemplate:"ui-grid/uiGridCell",d.cellTemplatePromise=a.getTemplate(d.cellTemplate),f.push(d.cellTemplatePromise.then(function(a){d.cellTemplate=a.replace(e.CUSTOM_FILTERS,d.cellFilter?"|"+d.cellFilter:"")},function(){throw new Error("Couldn't fetch/use colDef.cellTemplate '"+c.cellTemplate+"'")})),f.push(a.getTemplate(d.headerCellTemplate).then(function(a){d.headerCellTemplate=a.replace(e.CUSTOM_FILTERS,d.headerCellFilter?"|"+d.headerCellFilter:"")},function(){throw new Error("Couldn't fetch/use colDef.headerCellTemplate '"+c.headerCellTemplate+"'")})),d.compiledElementFnDefer=b.defer(),b.all(f)}};return g}])}(),function(){function a(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function b(){var a=function(b,c){return b&&a.cache[b]?a.cache[b]:b&&c?(a.cache[b]=c,a.cache[b]):void 0};return a.cache={},a.clear=function(){a.cache={}},a}var c=angular.module("ui.grid");c.service("rowSearcher",["gridUtil","uiGridConstants",function(c,d){var e=d.filter.STARTS_WITH,f={};return f.getTerm=function(a){if("undefined"==typeof a.term)return a.term;var b=a.term;return"string"==typeof b&&(b=b.trim()),b},f.stripTerm=function(b){var c=f.getTerm(b);return"string"==typeof c?a(c.replace(/(^\*|\*$)/g,"")):c},f.guessCondition=function(a){if("undefined"==typeof a.term||!a.term)return e;var b=f.getTerm(a);if(/\*/.test(b)){var c="";a.flags&&a.flags.caseSensitive||(c+="i");var d=b.replace(/(\\)?\*/g,function(a,b){return b?a:"[\\s\\S]*?"});return new RegExp("^"+d+"$",c)}return e},f.runColumnFilter=function(a,b,c,e,g,h){var i=typeof h.condition;"undefined"!==i&&h.condition||(h.condition=d.filter.CONTAINS);var j=f.stripTerm(h);if(null===j||void 0===j||""===j)return!0;var k=a.getCellValue(b,c),l="";h.flags&&h.flags.caseSensitive||(l+="i");var m=c.field+g;if(h.condition instanceof RegExp){if(!h.condition.test(k))return!1}else{if("function"===i)return h.condition(j,k,b,c);if(h.condition===d.filter.STARTS_WITH){var n=e(m)?e(m):e(m,new RegExp("^"+j,l));if(!n.test(k))return!1}else if(h.condition===d.filter.ENDS_WITH){var o=e(m)?e(m):e(m,new RegExp(j+"$",l));if(!o.test(k))return!1}else if(h.condition===d.filter.CONTAINS){var p=e(m)?e(m):e(m,new RegExp(j,l));if(!p.test(k))return!1}else if(h.condition===d.filter.EXACT){var q=e(m)?e(m):e(m,new RegExp("^"+j+"$",l));if(!q.test(k))return!1}else if(h.condition===d.filter.GREATER_THAN){if(j>=k)return!1}else if(h.condition===d.filter.GREATER_THAN_OR_EQUAL){if(j>k)return!1}else if(h.condition===d.filter.LESS_THAN){if(k>=j)return!1}else if(h.condition===d.filter.LESS_THAN_OR_EQUAL){if(k>j)return!1}else if(h.condition===d.filter.NOT_EQUAL&&!angular.equals(k,j))return!1}return!0},f.searchColumn=function(a,b,c,d){var e=[];if(a.options.useExternalFiltering)return!0;if(!("undefined"!=typeof c.filters&&c.filters&&c.filters.length>0))return!0;e=c.filters;for(var g in e){var h=e[g];if(!h.condition){var i="cond-"+c.field+"-"+h.term,j=d(i)?d(i):d(i,f.guessCondition(h));h={term:h.term,condition:j,flags:angular.extend({caseSensitive:!1},h.flags)}}var k=f.runColumnFilter(a,b,c,d,g,h);if(!k)return!1}return!0},f.search=function(a,c,d){if(c){var e=new b,g=[];return d.forEach(function(a){"undefined"!=typeof a.filters&&a.filters.length>0?g.push(a):"undefined"!=typeof a.filter&&a.filter&&"undefined"!=typeof a.filter.term&&a.filter.term&&g.push(a)}),g.length>0&&(g.forEach(function(b){c.forEach(function(c){(c.forceInvisible||!f.searchColumn(a,c,b,e))&&(c.visible=!1)})}),a.api.core.raise.rowsVisibleChanged&&a.api.core.raise.rowsVisibleChanged()),e.clear(),c}},f}])}(),function(){var a=angular.module("ui.grid");a.service("rowSorter",["$parse","uiGridConstants",function(a,b){var c="("+b.CURRENCY_SYMBOLS.map(function(a){return"\\"+a}).join("|")+")?",d=(new RegExp("^[-+]?"+c+"[\\d,.]+"+c+"%?$"),{colSortFnCache:[]});return d.guessSortFn=function(a){switch(a){case"number":return d.sortNumber;case"boolean":return d.sortBool;case"string":return d.sortAlpha;case"date":return d.sortDate;case"object":return d.basicSort;default:throw new Error("No sorting function found for type:"+a)}},d.handleNulls=function(a,b){if(!a&&0!==a&&a!==!1||!b&&0!==b&&b!==!1){if(!a&&0!==a&&a!==!1&&!b&&0!==b&&b!==!1)return 0;if(!a&&0!==a&&a!==!1)return 1;if(!b&&0!==b&&b!==!1)return-1}return null},d.basicSort=function(a,b){var c=d.handleNulls(a,b);return null!==c?c:a===b?0:b>a?-1:1},d.sortNumber=function(a,b){var c=d.handleNulls(a,b);return null!==c?c:a-b},d.sortNumberStr=function(a,b){var c=d.handleNulls(a,b);if(null!==c)return c;var e,f,g=!1,h=!1;return e=parseFloat(a.replace(/[^0-9.-]/g,"")),isNaN(e)&&(g=!0),f=parseFloat(b.replace(/[^0-9.-]/g,"")),isNaN(f)&&(h=!0),g&&h?0:g?1:h?-1:e-f},d.sortAlpha=function(a,b){var c=d.handleNulls(a,b);if(null!==c)return c;var e=a.toLowerCase(),f=b.toLowerCase();return e===f?0:f>e?-1:1},d.sortDate=function(a,b){var c=d.handleNulls(a,b);if(null!==c)return c;var e=a.getTime(),f=b.getTime();return e===f?0:f>e?-1:1},d.sortBool=function(a,b){var c=d.handleNulls(a,b);return null!==c?c:a&&b?0:a||b?a?1:-1:0},d.getSortFn=function(a,b){var c;return d.colSortFnCache[b.colDef.name]?c=d.colSortFnCache[b.colDef.name]:void 0!==b.sortingAlgorithm?(c=b.sortingAlgorithm,d.colSortFnCache[b.colDef.name]=b.sortingAlgorithm):(c=d.guessSortFn(b.colDef.type),c?d.colSortFnCache[b.colDef.name]=c:c=d.sortAlpha),c},d.prioritySort=function(a,b){return void 0!==a.sort.priority&&void 0!==b.sort.priority?a.sort.priority<b.sort.priority?-1:a.sort.priority===b.sort.priority?0:1:a.sort.priority||0===a.sort.priority?-1:b.sort.priority||0===b.sort.priority?1:0},d.sort=function(a,c,e){if(c){if(a.options.useExternalSorting)return c;var f=[];if(e.forEach(function(a){a.sort&&a.sort.direction&&(a.sort.direction===b.ASC||a.sort.direction===b.DESC)&&f.push(a)}),f=f.sort(d.prioritySort),0===f.length)return c;var g,h,i=c.slice(0);return c.sort(function(c,e){for(var j,k=0,l=0;0===k&&l<f.length;){g=f[l],h=f[l].sort.direction,j=d.getSortFn(a,g,i);var m=a.getCellValue(c,g),n=a.getCellValue(e,g);k=j(m,n),l++}return h===b.ASC?k:0-k})}},d}])}(),function(){function a(a){var b=a;return"undefined"!=typeof b.length&&b.length&&(b=a[0]),b.ownerDocument.defaultView.getComputedStyle(b,null)}function b(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0,h=["Top","Right","Bottom","Left"];4>f;f+=2){var i=h[f];if("margin"===c){var j=parseFloat(e[c+i]);isNaN(j)||(g+=j)}if(d){if("content"===c){var k=parseFloat(e["padding"+i]);isNaN(k)||(g-=k)}if("margin"!==c){var l=parseFloat(e["border"+i+"Width"]);isNaN(l)||(g-=l)}}else{var m=parseFloat(e["padding"+i]);if(isNaN(m)||(g+=m),"padding"!==c){var n=parseFloat(e["border"+i+"Width"]);isNaN(n)||(g+=n)}}}return g}function c(c,d,f){var g,h=!0,i=a(c),j="border-box"===i.boxSizing;if(0>=g||null==g){if(g=i[d],(0>g||null==g)&&(g=c.style[d]),e.test(g))return g;h=j&&!0,g=parseFloat(g)||0}var k=g+b(c,d,f||(j?"border":"content"),h,i);return k}var d=angular.module("ui.grid"),e=new RegExp("^("+/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source+")(?!px)[a-z%]+$","i"),f=/^(block|none|table(?!-c[ea]).+)/,g={position:"absolute",visibility:"hidden",display:"block"},h=["0","0","0"],i="uiGrid-";d.service("gridUtil",["$log","$window","$document","$http","$templateCache","$timeout","$injector","$q","$interpolate","uiGridConstants",function(b,d,e,j,k,l,m,n,o,p){var q={getStyles:a,createBoundedWrapper:function(a,b){return function(){return b.apply(a,arguments)}},readableColumnName:function(a){return"undefined"==typeof a||void 0===a||null===a?a:("string"!=typeof a&&(a=String(a)),a.replace(/_+/g," ").replace(/^[A-Z]+$/,function(a){return angular.lowercase(angular.uppercase(a.charAt(0))+a.slice(1))}).replace(/(\w+)/g,function(a){return angular.uppercase(a.charAt(0))+a.slice(1)}).replace(/(\w+?(?=[A-Z]))/g,"$1 "))},getColumnsFromData:function(a,b){var c=[];if(!a||"undefined"==typeof a[0]||void 0===a[0])return[];angular.isUndefined(b)&&(b=[]);var d=a[0];return angular.forEach(d,function(a,d){-1===b.indexOf(d)&&c.push({name:d})}),c},newId:function(){var a=(new Date).getTime();return function(){return a+=1}}(),getTemplate:function(a){if(k.get(a))return q.postProcessTemplate(k.get(a));if(a.hasOwnProperty("then"))return a.then(q.postProcessTemplate);try{if(angular.element(a).length>0)return n.when(a).then(q.postProcessTemplate)}catch(b){}return q.logDebug("fetching url",a),j({method:"GET",url:a}).then(function(b){var c=b.data.trim();return k.put(a,c),c},function(b){throw new Error("Could not get template "+a+": "+b)}).then(q.postProcessTemplate)},postProcessTemplate:function(a){var b=o.startSymbol(),c=o.endSymbol();return("{{"!==b||"}}"!==c)&&(a=a.replace(/\{\{/g,b),a=a.replace(/\}\}/g,c)),n.when(a)},guessType:function(a){var b=typeof a;switch(b){case"number":case"boolean":case"string":return b;default:return angular.isDate(a)?"date":"object"}},elementWidth:function(){},elementHeight:function(){},getScrollbarWidth:function(){var a=document.createElement("div");a.style.visibility="hidden",a.style.width="100px",a.style.msOverflowStyle="scrollbar",document.body.appendChild(a);var b=a.offsetWidth;a.style.overflow="scroll";var c=document.createElement("div");c.style.width="100%",a.appendChild(c);var d=c.offsetWidth;return a.parentNode.removeChild(a),b-d},swap:function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},fakeElement:function(a,b,c){var d,e,f=angular.element(a).clone()[0];for(e in b)f.style[e]=b[e];return angular.element(document.body).append(f),d=c.call(f,f),angular.element(f).remove(),d},normalizeWheelEvent:function(a){var b,c,d,e=a||window.event,f=([].slice.call(arguments,1),0),g=0,h=0,i=0,j=0;return e.originalEvent&&(e=e.originalEvent),e.wheelDelta&&(f=e.wheelDelta),e.detail&&(f=-1*e.detail),h=f,void 0!==e.axis&&e.axis===e.HORIZONTAL_AXIS&&(h=0,g=-1*f),e.deltaY&&(h=-1*e.deltaY,f=h),e.deltaX&&(g=e.deltaX,f=-1*g),void 0!==e.wheelDeltaY&&(h=e.wheelDeltaY),void 0!==e.wheelDeltaX&&(g=e.wheelDeltaX),i=Math.abs(f),(!b||b>i)&&(b=i),j=Math.max(Math.abs(h),Math.abs(g)),(!c||c>j)&&(c=j),d=f>0?"floor":"ceil",f=Math[d](f/b),g=Math[d](g/c),h=Math[d](h/c),{delta:f,deltaX:g,deltaY:h}},isTouchEnabled:function(){var a;return("ontouchstart"in d||d.DocumentTouch&&e instanceof DocumentTouch)&&(a=!0),a},isNullOrUndefined:function(a){return void 0===a||null===a?!0:!1},endsWith:function(a,b){return a&&b&&"string"==typeof a?-1!==a.indexOf(b,a.length-b.length):!1},arrayContainsObjectWithProperty:function(a,b,c){var d=!1;return angular.forEach(a,function(a){a[b]===c&&(d=!0)}),d},requestAnimationFrame:d.requestAnimationFrame&&d.requestAnimationFrame.bind(d)||d.webkitRequestAnimationFrame&&d.webkitRequestAnimationFrame.bind(d)||function(a){return l(a,10,!1)},numericAndNullSort:function(a,b){return null===a?1:null===b?-1:null===a&&null===b?0:a-b},disableAnimations:function(a){var b;try{b=m.get("$animate"),b.enabled(!1,a)}catch(c){}},enableAnimations:function(a){var b;try{return b=m.get("$animate"),b.enabled(!0,a),b}catch(c){}},nextUid:function(){for(var a,b=h.length;b;){if(b--,a=h[b].charCodeAt(0),57===a)return h[b]="A",i+h.join("");if(90!==a)return h[b]=String.fromCharCode(a+1),i+h.join("");h[b]="0"}return h.unshift("0"),i+h.join("")},hashKey:function(a){var b,c=typeof a;return"object"===c&&null!==a?"function"==typeof(b=a.$$hashKey)?b=a.$$hashKey():"undefined"!=typeof a.$$hashKey&&a.$$hashKey?b=a.$$hashKey:void 0===b&&(b=a.$$hashKey=q.nextUid()):b=a,c+":"+b},resetUids:function(){h=["0","0","0"]},logError:function(a){p.LOG_ERROR_MESSAGES&&b.error(a)},logWarn:function(a){p.LOG_WARN_MESSAGES&&b.warn(a)},logDebug:function(){p.LOG_DEBUG_MESSAGES&&b.debug.apply(b,arguments)}};return["width","height"].forEach(function(b){var d=angular.uppercase(b.charAt(0))+b.substr(1);q["element"+d]=function(d,e){var h=d;if(h&&"undefined"!=typeof h.length&&h.length&&(h=d[0]),h){var i=a(h);return 0===h.offsetWidth&&f.test(i.display)?q.fakeElement(h,g,function(a){return c(a,b,e)}):c(h,b,e)}return null},q["outerElement"+d]=function(a,b){return a?q["element"+d].call(this,a,b?"margin":"border"):null}}),q.closestElm=function(a,b){"undefined"!=typeof a.length&&a.length&&(a=a[0]);var c;["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(a){return"function"==typeof document.body[a]?(c=a,!0):!1});for(var d;null!==a;){if(d=a.parentElement,null!==d&&d[c](b))return d;a=d}return null},q.type=function(a){var b=Function.prototype.toString.call(a.constructor);return b.match(/function (.*?)\(/)[1]},q.getBorderSize=function(b,c){"undefined"!=typeof b.length&&b.length&&(b=b[0]);var d=a(b);c=c?"border"+c.charAt(0).toUpperCase()+c.slice(1):"border",c+="Width";var e=parseInt(d[c],10);return isNaN(e)?0:e},q.detectBrowser=function(){var a=d.navigator.userAgent,b={chrome:/chrome/i,safari:/safari/i,firefox:/firefox/i,ie:/internet explorer|trident\//i};for(var c in b)if(b[c].test(a))return c;return"unknown"},q.normalizeScrollLeft=function(a){"undefined"!=typeof a.length&&a.length&&(a=a[0]);var b=q.detectBrowser(),c=a.scrollLeft,d=q.getStyles(a).direction;if("ie"===b)return c;if("chrome"===b){if("rtl"===d){var e=a.scrollWidth-a.clientWidth;return e-c}return c}return"firefox"===b?Math.abs(c):c},q.denormalizeScrollLeft=function(a,b){"undefined"!=typeof a.length&&a.length&&(a=a[0]);var c=q.detectBrowser(),d=q.getStyles(a).direction;if("ie"===c)return b;if("chrome"===c){if("rtl"===d){var e=a.scrollWidth-a.clientWidth;return e-b}return b}return"firefox"===c&&"rtl"===d?-1*b:b},q.preEval=function(a){var b=p.BRACKET_REGEXP.exec(a);if(b)return(b[1]?q.preEval(b[1]):b[1])+b[2]+(b[3]?q.preEval(b[3]):b[3]);a=a.replace(p.APOS_REGEXP,"\\'");var c=a.split(p.DOT_REGEXP),d=[c.shift()];return angular.forEach(c,function(a){d.push(a.replace(p.FUNC_REGEXP,"']$1"))}),d.join("['")},q.debounce=function(a,b,c){function d(){g=this,f=arguments;var d=function(){e=null,c||(h=a.apply(g,f))},i=c&&!e;return e&&l.cancel(e),e=l(d,b),i&&(h=a.apply(g,f)),h}var e,f,g,h;return d.cancel=function(){l.cancel(e),e=null},d},q.throttle=function(a,b,c){function d(){g=+new Date,a.apply(e,f),l(function(){h=null},0)}c=c||{};var e,f,g=0,h=null;return function(){if(e=this,f=arguments,null===h){var a=+new Date-g;a>b?d():c.trailing&&(h=l(d,b-a))}}},q}]),d.filter("px",function(){return function(a){return a.match(/^[\d\.]+$/)?a+"px":a}})}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("da",{aggregate:{label:"artikler"},groupPanel:{description:"Grupér rækker udfra en kolonne ved at trække dens overskift hertil."},search:{placeholder:"Søg...",showingItems:"Viste rækker:",selectedItems:"Valgte rækker:",totalItems:"Rækker totalt:",size:"Side størrelse:",first:"Første side",next:"Næste side",previous:"Forrige side",last:"Sidste side"},menu:{text:"Vælg kolonner:"},column:{hide:"Skjul kolonne"},aggregation:{count:"samlede rækker: ",sum:"smalede: ",avg:"gns: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("de",{aggregate:{label:"eintrag"},groupPanel:{description:"Ziehen Sie eine Spaltenüberschrift hierhin, um nach dieser Spalte zu gruppieren."},search:{placeholder:"Suche...",showingItems:"Zeige Einträge:",selectedItems:"Ausgewählte Einträge:",totalItems:"Einträge gesamt:",size:"Einträge pro Seite:",first:"Erste Seite",next:"Nächste Seite",previous:"Vorherige Seite",last:"Letzte Seite"},menu:{text:"Spalten auswählen:"},sort:{ascending:"aufsteigend sortieren",descending:"absteigend sortieren",remove:"Sortierung zurücksetzen"},column:{hide:"Spalte ausblenden"},aggregation:{count:"Zeilen insgesamt: ",sum:"gesamt: ",avg:"Durchschnitt: ",min:"min: ",max:"max: "},gridMenu:{columns:"Spalten:",importerTitle:"Datei importieren",exporterAllAsCsv:"Alle Daten als CSV exportieren",exporterVisibleAsCsv:"sichtbare Daten als CSV exportieren",exporterSelectedAsCsv:"markierte Daten als CSV exportieren",exporterAllAsPdf:"Alle Daten als PDF exportieren",exporterVisibleAsPdf:"sichtbare Daten als PDF exportieren",exporterSelectedAsPdf:"markierte Daten als CSV exportieren"},importer:{noHeaders:"Es konnten keine Spaltennamen ermittelt werden. Sind in der Datei Spaltendefinitionen enthalten?",noObjects:"Es konnten keine Zeileninformationen gelesen werden, Sind in der Datei außer den Spaltendefinitionen auch Daten enthalten?",invalidCsv:"Die Datei konnte nicht eingelesen werden, ist es eine gültige CSV-Datei?",invalidJson:"Die Datei konnte nicht eingelesen werden. Enthält sie gültiges JSON?",jsonNotArray:"Die importierte JSON-Datei muß ein Array enthalten. Breche Import ab."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("en",{aggregate:{label:"items"},groupPanel:{description:"Drag a column header here and drop it to group by that column."},search:{placeholder:"Search...",showingItems:"Showing Items:",selectedItems:"Selected Items:",totalItems:"Total Items:",size:"Page Size:",first:"First Page",next:"Next Page",previous:"Previous Page",last:"Last Page"},menu:{text:"Choose Columns:"},sort:{ascending:"Sort Ascending",descending:"Sort Descending",remove:"Remove Sort"},column:{hide:"Hide Column"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Pin Left",pinRight:"Pin Right",unpin:"Unpin"},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),a
}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("es",{aggregate:{label:"Artículos"},groupPanel:{description:"Arrastre un encabezado de columna aquí y suéltelo para agrupar por esa columna."},search:{placeholder:"Buscar...",showingItems:"Artículos Mostrados:",selectedItems:"Artículos Seleccionados:",totalItems:"Artículos Totales:",size:"Tamaño de Página:",first:"Primera Página",next:"Página Siguiente",previous:"Página Anterior",last:"Última Página"},menu:{text:"Elegir columnas:"},sort:{ascending:"Orden Ascendente",descending:"Orden Descendente",remove:"Sin Ordenar"},column:{hide:"Ocultar la columna"},aggregation:{count:"filas totales: ",sum:"total: ",avg:"media: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fijar a la Izquierda",pinRight:"Fijar a la Derecha",unpin:"Quitar Fijación"},gridMenu:{columns:"Columnas:",importerTitle:"Importar archivo",exporterAllAsCsv:"Exportar todo como csv",exporterVisibleAsCsv:"Exportar vista como csv",exporterSelectedAsCsv:"Exportar selección como csv",exporterAllAsPdf:"Exportar todo como pdf",exporterVisibleAsPdf:"Exportar vista como pdf",exporterSelectedAsPdf:"Exportar selección como pdf"},importer:{noHeaders:"No fue posible derivar los nombres de las columnas, ¿tiene encabezados el archivo?",noObjects:"No fue posible obtener registros, ¿contiene datos el archivo, aparte de los encabezados?",invalidCsv:"No fue posible procesar el archivo, ¿es un CSV válido?",invalidJson:"No fue posible procesar el archivo, ¿es un Json válido?",jsonNotArray:"El archivo json importado debe contener un array, abortando."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("fa",{aggregate:{label:"موردها"},groupPanel:{description:"یک عنوان ستون اینجا را بردار و به گروهی از آن ستون بیانداز."},search:{placeholder:"جستجو...",showingItems:"نمایش موردها:",selectedItems:"موردهای انتخاب‌شده:",totalItems:"همهٔ موردها:",size:"اندازهٔ صفحه:",first:"صفحهٔ اول",next:"صفحهٔ بعد",previous:"صفحهٔ قبل",last:"آخرین صفحه"},menu:{text:"انتخاب ستون‌ها:"},column:{hide:"ستون پنهان کن"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("fi",{aggregate:{label:"rivit"},groupPanel:{description:"Raahaa ja pudota otsikko tähän ryhmittääksesi sarakkeen mukaan."},search:{placeholder:"Hae...",showingItems:"Näytetään rivejä:",selectedItems:"Valitut rivit:",totalItems:"Rivejä yht.:",size:"Näytä:",first:"Ensimmäinen sivu",next:"Seuraava sivu",previous:"Edellinen sivu",last:"Viimeinen sivu"},menu:{text:"Valitse sarakkeet:"},sort:{ascending:"Järjestä nouseva",descending:"Järjestä laskeva",remove:"Poista järjestys"},column:{hide:"Piilota sarake"},aggregation:{count:"Rivejä yht.: ",sum:"Summa: ",avg:"K.a.: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Lukitse vasemmalle",pinRight:"Lukitse oikealle",unpin:"Poista lukitus"},gridMenu:{columns:"Sarakkeet:",importerTitle:"Tuo tiedosto",exporterAllAsCsv:"Vie tiedot csv-muodossa",exporterVisibleAsCsv:"Vie näkyvä tieto csv-muodossa",exporterSelectedAsCsv:"Vie valittu tieto csv-muodossa",exporterAllAsPdf:"Vie tiedot pdf-muodossa",exporterVisibleAsPdf:"Vie näkyvä tieto pdf-muodossa",exporterSelectedAsPdf:"Vie valittu tieto pdf-muodossa"},importer:{noHeaders:"Sarakkeen nimiä ei voitu päätellä, onko tiedostossa otsikkoriviä?",noObjects:"Tietoja ei voitu lukea, onko tiedostossa muuta kuin otsikkot?",invalidCsv:"Tiedostoa ei voitu käsitellä, oliko se CSV-muodossa?",invalidJson:"Tiedostoa ei voitu käsitellä, oliko se JSON-muodossa?",jsonNotArray:"Tiedosto ei sisältänyt taulukkoa, lopetetaan."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("fr",{aggregate:{label:"articles"},groupPanel:{description:"Faites glisser un en-tête de colonne ici et déposez-le vers un groupe par cette colonne."},search:{placeholder:"Recherche...",showingItems:"Articles Affichage des:",selectedItems:"Éléments Articles:",totalItems:"Nombre total d'articles:",size:"Taille de page:",first:"Première page",next:"Page Suivante",previous:"Page précédente",last:"Dernière page"},menu:{text:"Choisir des colonnes:"},sort:{ascending:"Trier par ordre croissant",descending:"Trier par ordre décroissant",remove:"Enlever le tri"},column:{hide:"Cacher la colonne"},aggregation:{count:"total lignes: ",sum:"total: ",avg:"moy: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Épingler à gauche",pinRight:"Épingler à droite",unpin:"Détacher"},gridMenu:{columns:"Colonnes:",importerTitle:"Importer un fichier",exporterAllAsCsv:"Exporter toutes les données en CSV",exporterVisibleAsCsv:"Exporter les données visibles en CSV",exporterSelectedAsCsv:"Exporter les données sélectionnées en CSV",exporterAllAsPdf:"Exporter toutes les données en PDF",exporterVisibleAsPdf:"Exporter les données visibles en PDF",exporterSelectedAsPdf:"Exporter les données sélectionnées en PDF"},importer:{noHeaders:"Impossible de déterminer le nom des colonnes, le fichier possède-t-il un en-tête ?",noObjects:"Aucun objet trouvé, le fichier possède-t-il des données autres que l'en-tête ?",invalidCsv:"Le fichier n'a pas pu être traité, le CSV est-il valide ?",invalidJson:"Le fichier n'a pas pu être traité, le JSON est-il valide ?",jsonNotArray:"Le fichier JSON importé doit contenir un tableau. Abandon."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("he",{aggregate:{label:"items"},groupPanel:{description:"גרור עמודה לכאן ושחרר בכדי לקבץ עמודה זו."},search:{placeholder:"חפש...",showingItems:"מציג:",selectedItems:'סה"כ נבחרו:',totalItems:'סה"כ רשומות:',size:"תוצאות בדף:",first:"דף ראשון",next:"דף הבא",previous:"דף קודם",last:"דף אחרון"},menu:{text:"בחר עמודות:"},sort:{ascending:"סדר עולה",descending:"סדר יורד",remove:"בטל"},column:{hide:"טור הסתר"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("it",{aggregate:{label:"elementi"},groupPanel:{description:"Trascina un'intestazione all'interno del gruppo della colonna."},search:{placeholder:"Ricerca...",showingItems:"Mostra:",selectedItems:"Selezionati:",totalItems:"Totali:",size:"Tot Pagine:",first:"Prima",next:"Prossima",previous:"Precedente",last:"Ultima"},menu:{text:"Scegli le colonne:"},sort:{ascending:"Asc.",descending:"Desc.",remove:"Annulla ordinamento"},column:{hide:"Nascondi"},aggregation:{count:"righe totali: ",sum:"tot: ",avg:"media: ",min:"minimo: ",max:"massimo: "},pinning:{pinLeft:"Blocca a sx",pinRight:"Blocca a dx",unpin:"Blocca in alto"},gridMenu:{columns:"Colonne:",importerTitle:"Importa",exporterAllAsCsv:"Esporta tutti i dati in CSV",exporterVisibleAsCsv:"Esporta i dati visibili in CSV",exporterSelectedAsCsv:"Esporta i dati selezionati in CSV",exporterAllAsPdf:"Esporta tutti i dati in PDF",exporterVisibleAsPdf:"Esporta i dati visibili in PDF",exporterSelectedAsPdf:"Esporta i dati selezionati in PDF"},importer:{noHeaders:"Impossibile reperire i nomi delle colonne, sicuro che siano indicati all'interno del file?",noObjects:"Impossibile reperire gli oggetti, sicuro che siano indicati all'interno del file?",invalidCsv:"Impossibile elaborare il file, sicuro che sia un CSV?",invalidJson:"Impossibile elaborare il file, sicuro che sia un JSON valido?",jsonNotArray:"Errore! Il file JSON da importare deve contenere un array."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("nl",{aggregate:{label:"items"},groupPanel:{description:"Sleep hier een kolomnaam heen om op te groeperen."},search:{placeholder:"Zoeken...",showingItems:"Getoonde items:",selectedItems:"Geselecteerde items:",totalItems:"Totaal aantal items:",size:"Items per pagina:",first:"Eerste pagina",next:"Volgende pagina",previous:"Vorige pagina",last:"Laatste pagina"},menu:{text:"Kies kolommen:"},sort:{ascending:"Sorteer oplopend",descending:"Sorteer aflopend",remove:"Verwijder sortering"},column:{hide:"Verberg kolom"},aggregation:{count:"Aantal rijen: ",sum:"Som: ",avg:"Gemiddelde: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Zet links vast",pinRight:"Zet rechts vast",unpin:"Maak los"},gridMenu:{columns:"Kolommen:",importerTitle:"Importeer bestand",exporterAllAsCsv:"Exporteer alle data als csv",exporterVisibleAsCsv:"Exporteer zichtbare data als csv",exporterSelectedAsCsv:"Exporteer geselecteerde data als csv",exporterAllAsPdf:"Exporteer alle data als pdf",exporterVisibleAsPdf:"Exporteer zichtbare data als pdf",exporterSelectedAsPdf:"Exporteer geselecteerde data als pdf"},importer:{noHeaders:"Kolomnamen kunnen niet worden afgeleid. Heeft het bestand een header?",noObjects:"Objecten kunnen niet worden afgeleid. Bevat het bestand data naast de headers?",invalidCsv:"Het bestand kan niet verwerkt worden. Is het een valide csv bestand?",invalidJson:"Het bestand kan niet verwerkt worden. Is het valide json?",jsonNotArray:"Het json bestand moet een array bevatten. De actie wordt geannuleerd."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("pt-br",{aggregate:{label:"itens"},groupPanel:{description:"Arraste e solte uma coluna aqui para agrupar por essa coluna"},search:{placeholder:"Procurar...",showingItems:"Mostrando os Itens:",selectedItems:"Items Selecionados:",totalItems:"Total de Itens:",size:"Tamanho da Página:",first:"Primeira Página",next:"Próxima Página",previous:"Página Anterior",last:"Última Página"},menu:{text:"Selecione as colunas:"},sort:{ascending:"Ordenar Ascendente",descending:"Ordenar Descendente",remove:"Remover Ordenação"},column:{hide:"Esconder coluna"},aggregation:{count:"total de linhas: ",sum:"total: ",avg:"med: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fixar Esquerda",pinRight:"Fixar Direita",unpin:"Desprender"},gridMenu:{columns:"Colunas:",exporterAllAsCsv:"Exportar todos os dados como csv",exporterVisibleAsCsv:"Exportar dados visíveis como csv",exporterSelectedAsCsv:"Exportar dados selecionados como csv",exporterAllAsPdf:"Exportar todos os dados como pdf",exporterVisibleAsPdf:"Exportar dados visíveis como pdf",exporterSelectedAsPdf:"Exportar dados selecionados como pdf"},importer:{noHeaders:"Nomes de colunas não puderam ser derivados. O arquivo tem um cabeçalho?",noObjects:"Objetos não puderam ser derivados. Havia dados no arquivo, além dos cabeçalhos?",invalidCsv:"Arquivo não pode ser processado. É um CSV válido?",invalidJson:"Arquivo não pode ser processado. É um Json válido?",jsonNotArray:"Arquivo json importado tem que conter um array. Abortando."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("ru",{aggregate:{label:"элементы"},groupPanel:{description:"Для группировки по столбцу перетащите сюда его название."},search:{placeholder:"Поиск...",showingItems:"Показать элементы:",selectedItems:"Выбранные элементы:",totalItems:"Всего элементов:",size:"Размер страницы:",first:"Первая страница",next:"Следующая страница",previous:"Предыдущая страница",last:"Последняя страница"},menu:{text:"Выбрать столбцы:"},sort:{ascending:"По возрастанию",descending:"По убыванию",remove:"Убрать сортировку"},column:{hide:"спрятать столбец"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("sk",{aggregate:{label:"items"},groupPanel:{description:"Pretiahni sem názov stĺpca pre zoskupenie podľa toho stĺpca."},search:{placeholder:"Hľadaj...",showingItems:"Zobrazujem položky:",selectedItems:"Vybraté položky:",totalItems:"Počet položiek:",size:"Počet:",first:"Prvá strana",next:"Ďalšia strana",previous:"Predchádzajúca strana",last:"Posledná strana"},menu:{text:"Vyberte stĺpce:"},sort:{ascending:"Zotriediť vzostupne",descending:"Zotriediť zostupne",remove:"Vymazať triedenie"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("sv",{aggregate:{label:"artiklar"},groupPanel:{description:"Dra en kolumnrubrik hit och släpp den för att gruppera efter den kolumnen."},search:{placeholder:"Sök...",showingItems:"Visar artiklar:",selectedItems:"Valda artiklar:",totalItems:"Antal artiklar:",size:"Sidstorlek:",first:"Första sidan",next:"Nästa sida",previous:"Föregående sida",last:"Sista sidan"},menu:{text:"Välj kolumner:"},sort:{ascending:"Sortera stigande",descending:"Sortera fallande",remove:"Inaktivera sortering"},column:{hide:"Göm kolumn"},aggregation:{count:"Antal rader: ",sum:"Summa: ",avg:"Genomsnitt: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Fäst vänster",pinRight:"Fäst höger",unpin:"Lösgör"},gridMenu:{columns:"Kolumner:",importerTitle:"Importera fil",exporterAllAsCsv:"Exportera all data som CSV",exporterVisibleAsCsv:"Exportera synlig data som CSV",exporterSelectedAsCsv:"Exportera markerad data som CSV",exporterAllAsPdf:"Exportera all data som PDF",exporterVisibleAsPdf:"Exportera synlig data som PDF",exporterSelectedAsPdf:"Exportera markerad data som PDF"},importer:{noHeaders:"Kolumnnamn kunde inte härledas. Har filen ett sidhuvud?",noObjects:"Objekt kunde inte härledas. Har filen data undantaget sidhuvud?",invalidCsv:"Filen kunde inte behandlas, är den en giltig CSV?",invalidJson:"Filen kunde inte behandlas, är den en giltig JSON?",jsonNotArray:"Importerad JSON-fil måste innehålla ett fält. Import avbruten."}}),a}])}])}(),function(){var a=["uiT","uiTranslate"],b=["t","uiTranslate"],c=angular.module("ui.grid.i18n");c.constant("i18nConstants",{MISSING:"[MISSING]",UPDATE_EVENT:"$uiI18n",LOCALE_DIRECTIVE_ALIAS:"uiI18n",DEFAULT_LANG:"en"}),c.service("i18nService",["$log","i18nConstants","$rootScope",function(a,b,c){var d={_langs:{},current:null,get:function(a){return this._langs[a.toLowerCase()]},add:function(a,b){var c=a.toLowerCase();this._langs[c]||(this._langs[c]={}),angular.extend(this._langs[c],b)},getAllLangs:function(){var a=[];if(!this._langs)return a;for(var b in this._langs)a.push(b);return a},setCurrent:function(a){this.current=a.toLowerCase()},getCurrentLang:function(){return this.current}},e={add:function(a,b){"object"==typeof a?angular.forEach(a,function(a){a&&d.add(a,b)}):d.add(a,b)},getAllLangs:function(){return d.getAllLangs()},get:function(a){var b=a?a:e.getCurrentLang();return d.get(b)},getSafeText:function(a,c){var f=c?c:e.getCurrentLang(),g=d.get(f);if(!g)return b.MISSING;for(var h=a.split("."),i=g,j=0;j<h.length;++j){if(void 0===i[h[j]]||null===i[h[j]])return b.MISSING;i=i[h[j]]}return i},setCurrentLang:function(a){a&&(d.setCurrent(a),c.$broadcast(b.UPDATE_EVENT))},getCurrentLang:function(){var a=d.getCurrentLang();return a||(a=b.DEFAULT_LANG,d.setCurrent(a)),a}};return e}]);var d=function(a,b){return{compile:function(){return{pre:function(c,d,e){var f=b.LOCALE_DIRECTIVE_ALIAS,g=c.$eval(e[f]);g?c.$watch(e[f],function(){a.setCurrentLang(g)}):e.$$observers&&e.$observe(f,function(){a.setCurrentLang(e[f]||b.DEFAULT_LANG)})}}}}};c.directive("uiI18n",["i18nService","i18nConstants",d]);var e=function(b,c,d){return{restrict:"EA",compile:function(){return{pre:function(e,f,g){var h,i=a[0],j=a[1],k=g[i]||g[j]||f.html(),l=d.MISSING+k;if(g.$$observers){var m=g[i]?i:j;h=g.$observe(m,function(a){a&&f.html(b(a)(c.getCurrentLang())||l)})}var n=b(k),o=e.$on(d.UPDATE_EVENT,function(){h?h(g[i]||g[j]):f.html(n(c.get())||l)});e.$on("$destroy",o),f.html(n(c.get())||l)}}}}};angular.forEach(a,function(a){c.directive(a,["$parse","i18nService","i18nConstants",e])});var f=function(a,b,c){return function(d){var e=a(d);return e(b.get())||c.MISSING+d}};angular.forEach(b,function(a){c.filter(a,["$parse","i18nService","i18nConstants",f])})}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("zh-cn",{aggregate:{label:"行"},groupPanel:{description:"拖曳表头到此处进行分组"},search:{placeholder:"查找",showingItems:"已显示行数：",selectedItems:"已选择行数：",totalItems:"总行数：",size:"每页显示行数：",first:"首页",next:"下一页",previous:"上一页",last:"末页"},menu:{text:"选择列："},sort:{ascending:"升序",descending:"降序",remove:"取消排序"},column:{hide:"隐藏列"},aggregation:{count:"计数：",sum:"求和：",avg:"均值：",min:"最小值：",max:"最大值："},pinning:{pinLeft:"左侧固定",pinRight:"右侧固定",unpin:"取消固定"},gridMenu:{columns:"列：",importerTitle:"导入文件",exporterAllAsCsv:"导出全部数据到CSV",exporterVisibleAsCsv:"导出可见数据到CSV",exporterSelectedAsCsv:"导出已选数据到CSV",exporterAllAsPdf:"导出全部数据到PDF",exporterVisibleAsPdf:"导出可见数据到PDF",exporterSelectedAsPdf:"导出已选数据到PDF"},importer:{noHeaders:"无法获取列名，确定文件包含表头？",noObjects:"无法获取数据，确定文件包含数据？",invalidCsv:"无法处理文件，确定是合法的CSV文件？",invalidJson:"无法处理文件，确定是合法的JSON文件？",jsonNotArray:"导入的文件不是JSON数组！"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("zh-tw",{aggregate:{label:"行"},groupPanel:{description:"拖曳表頭到此處進行分組"},search:{placeholder:"查找",showingItems:"已顯示行數：",selectedItems:"已選擇行數：",totalItems:"總行數：",size:"每頁顯示行數：",first:"首頁",next:"下壹頁",previous:"上壹頁",last:"末頁"},menu:{text:"選擇列："},sort:{ascending:"升序",descending:"降序",remove:"取消排序"},column:{hide:"隱藏列"},aggregation:{count:"計數：",sum:"求和：",avg:"均值：",min:"最小值：",max:"最大值："},pinning:{pinLeft:"左側固定",pinRight:"右側固定",unpin:"取消固定"},gridMenu:{columns:"列：",importerTitle:"導入文件",exporterAllAsCsv:"導出全部數據到CSV",exporterVisibleAsCsv:"導出可見數據到CSV",exporterSelectedAsCsv:"導出已選數據到CSV",exporterAllAsPdf:"導出全部數據到PDF",exporterVisibleAsPdf:"導出可見數據到PDF",exporterSelectedAsPdf:"導出已選數據到PDF"},importer:{noHeaders:"無法獲取列名，確定文件包含表頭？",noObjects:"無法獲取數據，確定文件包含數據？",invalidCsv:"無法處理文件，確定是合法的CSV文件？",invalidJson:"無法處理文件，確定是合法的JSON文件？",jsonNotArray:"導入的文件不是JSON數組！"}}),a}])}])}(),function(){"use strict";var a=angular.module("ui.grid.autoResize",["ui.grid"]);a.directive("uiGridAutoResize",["$timeout","gridUtil",function(a,b){return{require:"uiGrid",scope:!1,link:function(c,d,e,f){function g(){j=b.elementHeight(d),i=b.elementWidth(d)}function h(){a.cancel(k),k=a(function(){var a=b.elementHeight(d),c=b.elementWidth(d);a!==j||c!==i?(f.grid.gridHeight=a,f.grid.gridWidth=c,f.grid.refresh().then(function(){g(),h()})):h()},250)}var i,j;g();var k;h(),c.$on("$destroy",function(){a.cancel(k)})}}}])}(),function(){"use strict";function a(a,b){this.row=a,this.col=b}var b=angular.module("ui.grid.cellNav",["ui.grid"]);b.constant("uiGridCellNavConstants",{FEATURE_NAME:"gridCellNav",CELL_NAV_EVENT:"cellNav",direction:{LEFT:0,RIGHT:1,UP:2,DOWN:3},EVENT_TYPE:{KEYDOWN:0,CLICK:1}}),b.factory("uiGridCellNavFactory",["gridUtil","uiGridConstants","uiGridCellNavConstants","$q",function(b,c,d){var e=function(a,b,c,d){this.rows=a.visibleRowCache,this.columns=b.visibleColumnCache,this.leftColumns=c?c.visibleColumnCache:[],this.rightColumns=d?d.visibleColumnCache:[]};return e.prototype.getFocusableCols=function(){var a=this.leftColumns.concat(this.columns,this.rightColumns);return a.filter(function(a){return a.colDef.allowCellFocus})},e.prototype.getNextRowCol=function(a,b,c){switch(a){case d.direction.LEFT:return this.getRowColLeft(b,c);case d.direction.RIGHT:return this.getRowColRight(b,c);case d.direction.UP:return this.getRowColUp(b,c);case d.direction.DOWN:return this.getRowColDown(b,c)}},e.prototype.getRowColLeft=function(b,c){var d=this.getFocusableCols(),e=d.indexOf(c),f=this.rows.indexOf(b);-1===e&&(e=1);var g=0===e?d.length-1:e-1;return g>e?0===f?new a(b,d[g]):new a(this.rows[f-1],d[g]):new a(b,d[g])},e.prototype.getRowColRight=function(b,c){var d=this.getFocusableCols(),e=d.indexOf(c),f=this.rows.indexOf(b);-1===e&&(e=0);var g=e===d.length-1?0:e+1;return e>g?f===this.rows.length-1?new a(b,d[g]):new a(this.rows[f+1],d[g]):new a(b,d[g])},e.prototype.getRowColDown=function(b,c){var d=this.getFocusableCols(),e=d.indexOf(c),f=this.rows.indexOf(b);return-1===e&&(e=0),f===this.rows.length-1?new a(b,d[e]):new a(this.rows[f+1],d[e])},e.prototype.getRowColUp=function(b,c){var d=this.getFocusableCols(),e=d.indexOf(c),f=this.rows.indexOf(b);return-1===e&&(e=0),0===f?new a(b,d[e]):new a(this.rows[f-1],d[e])},e}]),b.service("uiGridCellNavService",["gridUtil","uiGridConstants","uiGridCellNavConstants","$q","uiGridCellNavFactory",function(a,b,c,d,e){var f={initializeGrid:function(a){a.registerColumnBuilder(f.cellNavColumnBuilder),a.cellNav={},a.cellNav.lastRowCol=null;var b={events:{cellNav:{navigate:function(){}}},methods:{cellNav:{scrollTo:function(a,b,c,d){f.scrollTo(a,b,c,d)},getFocusedCell:function(){return a.cellNav.lastRowCol}}}};a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods)},decorateRenderContainers:function(a){var b=a.hasRightContainer()?a.renderContainers.right:null,c=a.hasLeftContainer()?a.renderContainers.left:null;null!==c&&(a.renderContainers.left.cellNav=new e(a.renderContainers.body,c,b,a.renderContainers.body)),null!==b&&(a.renderContainers.right.cellNav=new e(a.renderContainers.body,b,a.renderContainers.body,c)),a.renderContainers.body.cellNav=new e(a.renderContainers.body,a.renderContainers.body,c,b)},getDirection:function(a){return a.keyCode===b.keymap.LEFT||a.keyCode===b.keymap.TAB&&a.shiftKey?c.direction.LEFT:a.keyCode===b.keymap.RIGHT||a.keyCode===b.keymap.TAB?c.direction.RIGHT:a.keyCode===b.keymap.UP||a.keyCode===b.keymap.ENTER&&a.shiftKey?c.direction.UP:a.keyCode===b.keymap.DOWN||a.keyCode===b.keymap.ENTER?c.direction.DOWN:null},cellNavColumnBuilder:function(a){var b=[];return a.allowCellFocus=void 0===a.allowCellFocus?!0:a.allowCellFocus,d.all(b)},scrollTo:function(a,b,c,d){var e=null,f=null;null!==c&&(e=a.getRow(c)),null!==d&&(f=a.getColumn(d.name?d.name:d.field)),this.scrollToInternal(a,b,e,f)},scrollToInternal:function(a,c,d,e){var f={};if(null!==d){var g=a.renderContainers.body.visibleRowCache.indexOf(d),h=a.renderContainers.body.visibleRowCache.length,i=(g+g/(h-1))/h;f.y={percentage:i}}null!==e&&(f.x={percentage:this.getLeftWidth(a,e)/this.getLeftWidth(a,a.renderContainers.body.visibleColumnCache[a.renderContainers.body.visibleColumnCache.length-1])}),(f.y||f.x)&&c.$broadcast(b.events.GRID_SCROLL,f)},scrollToIfNecessary:function(a,c,d,e){var f={},g=a.renderContainers.body.visibleRowCache,h=a.renderContainers.body.visibleColumnCache,i=a.renderContainers.body.prevScrollTop+a.headerHeight;i=0>i?0:i;var j=a.renderContainers.body.prevScrollLeft,k=a.renderContainers.body.prevScrollTop+a.gridHeight-a.headerHeight;a.horizontalScrollbarHeight&&(k-=a.horizontalScrollbarHeight);var l=a.renderContainers.body.prevScrollLeft+a.gridWidth;if(a.verticalScrollbarWidth&&(l-=a.verticalScrollbarWidth),null!==d){var m=g.indexOf(d),n=a.renderContainers.body.getCanvasHeight()-a.renderContainers.body.getViewportHeight();a.horizontalScrollbarHeight&&a.horizontalScrollbarHeight>0&&(n+=a.horizontalScrollbarHeight);var o=(m+1)*a.options.rowHeight;o=0>o?0:o;var p,q;i>o?(p=a.renderContainers.body.prevScrollTop-(i-o),q=p/n,f.y={percentage:q}):o>k&&(p=o-k+a.renderContainers.body.prevScrollTop,q=p/n,f.y={percentage:q})}if(null!==e){for(var r=h.indexOf(e),s=a.renderContainers.body.getCanvasWidth()-a.renderContainers.body.getViewportWidth(),t=0,u=0;r>u;u++){var v=h[u];t+=v.drawnWidth}t=0>t?0:t;var w=t+e.drawnWidth;w=0>w?0:w;var x,y;j>t?(x=a.renderContainers.body.prevScrollLeft-(j-t),y=x/s,y=y>1?1:y,f.x={percentage:y}):w>l&&(x=w-l+a.renderContainers.body.prevScrollLeft,y=x/s,y=y>1?1:y,f.x={percentage:y})}(f.y||f.x)&&c.$broadcast(b.events.GRID_SCROLL,f)},getLeftWidth:function(a,b){var c=0;if(!b)return c;var d=a.renderContainers.body.visibleColumnCache.indexOf(b);a.renderContainers.body.visibleColumnCache.forEach(function(a,b){d>b&&(c+=a.drawnWidth)});var e=0===d?0:(d+1)/a.renderContainers.body.visibleColumnCache.length;return c+=b.drawnWidth*e}};return f}]),b.directive("uiGridCellnav",["gridUtil","uiGridCellNavService","uiGridCellNavConstants",function(b,c,d){return{replace:!0,priority:-150,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(b,e,f,g){var h=g.grid;c.initializeGrid(h),g.cellNav={},g.cellNav.focusCell=function(a,b){g.cellNav.broadcastCellNav({row:a,col:b})},g.cellNav.broadcastCellNav=function(a){b.$broadcast(d.CELL_NAV_EVENT,a),g.cellNav.broadcastFocus(a)},g.cellNav.broadcastFocus=function(b){var c=b.row,d=b.col;if(null===h.cellNav.lastRowCol||h.cellNav.lastRowCol.row!==c||h.cellNav.lastRowCol.col!==d){var e=new a(c,d);h.api.cellNav.raise.navigate(e,h.cellNav.lastRowCol),h.cellNav.lastRowCol=e}},g.cellNav.handleKeyDown=function(a){var e=c.getDirection(a);if(null===e)return!0;var f="body";a.uiGridTargetRenderContainerId&&(f=a.uiGridTargetRenderContainerId);var i=g.grid.api.cellNav.getFocusedCell();if(i){var j=g.grid.renderContainers[f].cellNav.getNextRowCol(e,i.row,i.col);return j.eventType=d.EVENT_TYPE.KEYDOWN,g.cellNav.broadcastCellNav(j),c.scrollToIfNecessary(h,b,j.row,j.col),a.stopPropagation(),a.preventDefault(),!1}}},post:function(){}}}}}]),b.directive("uiGridRenderContainer",["$timeout","$document","gridUtil","uiGridConstants","uiGridCellNavService","uiGridCellNavConstants",function(a,b,c,d,e){return{replace:!0,priority:-99999,require:["^uiGrid","uiGridRenderContainer"],scope:!1,compile:function(){return{pre:function(){},post:function(c,f,g,h){var i=h[0],j=h[1],k=j.containerId,l=i.grid;e.decorateRenderContainers(l),f.attr("tabindex",-1),f.on("keydown",function(a){return a.uiGridTargetRenderContainerId=k,i.cellNav.handleKeyDown(a)}),c.$on(d.events.GRID_SCROLL,function(){null!=i.grid.api.cellNav.getFocusedCell()&&a(function(){a(function(){var a=i.grid.api.cellNav.getFocusedCell();b.activeElement===b.body&&f[0].focus(),i.cellNav.broadcastCellNav(a)})})})}}}}}]),b.directive("uiGridCell",["$timeout","$document","uiGridCellNavService","gridUtil","uiGridCellNavConstants","uiGridConstants",function(b,c,d,e,f){return{priority:-150,restrict:"A",require:"^uiGrid",scope:!1,link:function(b,c,d,e){function g(){c.find("div").attr("tabindex",-1)}function h(){var a=c.find("div");a.addClass("ui-grid-cell-focus")}function i(){var a=c.find("div");a.removeClass("ui-grid-cell-focus")}b.col.colDef.allowCellFocus&&(g(),c.find("div").on("click",function(c){e.cellNav.broadcastCellNav(new a(b.row,b.col)),c.stopPropagation()}),b.$on(f.CELL_NAV_EVENT,function(a,d){d.row===b.row&&d.col===b.col?(h(),d.hasOwnProperty("eventType")&&d.eventType===f.EVENT_TYPE.KEYDOWN&&c.find("div")[0].focus()):i()}),b.$on("$destroy",function(){c.find("div").off("click")}))}}}])}(),function(){"use strict";var a=angular.module("ui.grid.edit",["ui.grid"]);a.constant("uiGridEditConstants",{EDITABLE_CELL_TEMPLATE:/EDITABLE_CELL_TEMPLATE/g,EDITABLE_CELL_DIRECTIVE:/editable_cell_directive/g,events:{BEGIN_CELL_EDIT:"uiGridEventBeginCellEdit",END_CELL_EDIT:"uiGridEventEndCellEdit",CANCEL_CELL_EDIT:"uiGridEventCancelCellEdit"}}),a.service("uiGridEditService",["$q","$templateCache","uiGridConstants","gridUtil",function(a,b,c,d){var e={initializeGrid:function(a){e.defaultGridOptions(a.options),a.registerColumnBuilder(e.editColumnBuilder);var b={events:{edit:{afterCellEdit:function(){},beginCellEdit:function(){},cancelCellEdit:function(){}}},methods:{edit:{}}};a.api.registerEventsFromObject(b.events)},defaultGridOptions:function(a){a.cellEditableCondition=void 0===a.cellEditableCondition?!0:a.cellEditableCondition,a.enableCellEditOnFocus=void 0===a.enableCellEditOnFocus?!1:a.enableCellEditOnFocus},editColumnBuilder:function(b,c,e){var f=[];return b.enableCellEdit=void 0===b.enableCellEdit?void 0===e.enableCellEdit?"object"!==b.type:e.enableCellEdit:b.enableCellEdit,b.cellEditableCondition=void 0===b.cellEditableCondition?e.cellEditableCondition:b.cellEditableCondition,b.enableCellEdit&&(b.editableCellTemplate=b.editableCellTemplate||e.editableCellTemplate||"ui-grid/cellEditor",f.push(d.getTemplate(b.editableCellTemplate).then(function(a){c.editableCellTemplate=a},function(){throw new Error("Couldn't fetch/use colDef.editableCellTemplate '"+b.editableCellTemplate+"'")}))),b.enableCellEditOnFocus=void 0===b.enableCellEditOnFocus?e.enableCellEditOnFocus:b.enableCellEditOnFocus,a.all(f)},isStartEditKey:function(a){return a.keyCode===c.keymap.LEFT||a.keyCode===c.keymap.TAB&&a.shiftKey||a.keyCode===c.keymap.RIGHT||a.keyCode===c.keymap.TAB||a.keyCode===c.keymap.UP||a.keyCode===c.keymap.ENTER&&a.shiftKey||a.keyCode===c.keymap.DOWN||a.keyCode===c.keymap.ENTER?!1:!0}};return e}]),a.directive("uiGridEdit",["gridUtil","uiGridEditService",function(a,b){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.initializeGrid(e.grid)},post:function(){}}
}}}]),a.directive("uiGridCell",["$compile","$injector","uiGridConstants","uiGridEditConstants","gridUtil","$parse","uiGridEditService",function(a,b,c,d,e,f,g){return{priority:-100,restrict:"A",scope:!1,require:"?^uiGrid",link:function(e,h,i,j){function k(){h.on("dblclick",p),h.on("keydown",n),e.col.colDef.enableCellEditOnFocus&&h.find("div").on("focus",m)}function l(){h.off("dblclick",p),h.off("keydown",n),e.col.colDef.enableCellEditOnFocus&&h.find("div").off("focus",m)}function m(a){j&&j.cellNav&&j.cellNav.focusCell(e.row,e.col),a.stopPropagation(),p()}function n(a){g.isStartEditKey(a)&&p()}function o(a,b){return!b.isSaving&&(angular.isFunction(a.colDef.cellEditableCondition)?a.colDef.cellEditableCondition(e):a.colDef.cellEditableCondition)}function p(){if(!v&&o(e.col,e.row)){u=f(e.row.getQualifiedColField(e.col)),t=u(e),s=e.col.editableCellTemplate,s=s.replace(c.MODEL_COL_FIELD,e.row.getQualifiedColField(e.col));var b=e.col.colDef.editDropdownFilter?"|"+e.col.colDef.editDropdownFilter:"";switch(s=s.replace(c.CUSTOM_FILTERS,b),e.inputType="text",e.col.colDef.type){case"boolean":e.inputType="checkbox";break;case"number":e.inputType="number";break;case"date":e.inputType="date"}e.editDropdownOptionsArray=e.col.colDef.editDropdownOptionsArray,e.editDropdownIdLabel=e.col.colDef.editDropdownIdLabel?e.col.colDef.editDropdownIdLabel:"id",e.editDropdownValueLabel=e.col.colDef.editDropdownValueLabel?e.col.colDef.editDropdownValueLabel:"value";e.$apply(function(){v=!0,l();var b=angular.element(s);h.append(b),a(b)(e.$new());var c=angular.element(h.children()[0]);w=c.hasClass("ui-grid-cell-focus"),c.addClass("ui-grid-cell-contents-hidden")});var g=e.$on(c.events.GRID_SCROLL,function(){q(!0),e.grid.api.edit.raise.afterCellEdit(e.row.entity,e.col.colDef,u(e),t),g()}),i=e.$on(d.events.END_CELL_EDIT,function(a,b){q(b),e.grid.api.edit.raise.afterCellEdit(e.row.entity,e.col.colDef,u(e),t),i()}),j=e.$on(d.events.CANCEL_CELL_EDIT,function(){r(),j()});e.$broadcast(d.events.BEGIN_CELL_EDIT),e.grid.api.edit.raise.beginCellEdit(e.row.entity,e.col.colDef)}}function q(a){if(v){var b=angular.element(h.children()[0]);angular.element(h.children()[1]).remove(),b.removeClass("ui-grid-cell-contents-hidden"),a&&w&&b[0].focus(),w=!1,v=!1,k(),e.grid.api.core.notifyDataChange(e.grid,c.dataChange.EDIT)}}function r(){v&&(u.assign(e,t),e.$apply(),e.grid.api.edit.raise.cancelCellEdit(e.row.entity,e.col.colDef),q(!0))}if(e.col.colDef.enableCellEdit){var s,t,u,v=!1,w=!1;k();try{var x=b.get("uiGridCellNavConstants");e.col.colDef.enableCellEditOnFocus&&e.$on(x.CELL_NAV_EVENT,function(a,b){b.row===e.row&&b.col===e.col?p():q()})}catch(y){}}}}}]),a.directive("uiGridEditor",["uiGridConstants","uiGridEditConstants",function(a,b){return{scope:!0,require:["?^uiGrid","?^uiGridRenderContainer"],compile:function(){return{pre:function(){},post:function(c,d,e,f){var g,h;f[0]&&(g=f[0]),f[1]&&(h=f[1]),c.$on(b.events.BEGIN_CELL_EDIT,function(){d[0].focus(),d[0].select(),d.on("blur",function(a){console.log("stop edit!"),c.stopEdit(a)})}),c.deepEdit=!1,c.stopEdit=function(a){c.inputForm&&!c.inputForm.$valid?(a.stopPropagation(),c.$emit(b.events.CANCEL_CELL_EDIT)):c.$emit(b.events.END_CELL_EDIT),c.deepEdit=!1},d.on("click",function(){c.deepEdit=!0}),d.on("keydown",function(d){switch(d.keyCode){case a.keymap.ESC:d.stopPropagation(),c.$emit(b.events.CANCEL_CELL_EDIT);break;case a.keymap.ENTER:c.stopEdit(d);break;case a.keymap.TAB:c.stopEdit(d)}if(c.deepEdit)switch(d.keyCode){case a.keymap.LEFT:d.stopPropagation();break;case a.keymap.RIGHT:d.stopPropagation();break;case a.keymap.UP:d.stopPropagation();break;case a.keymap.DOWN:d.stopPropagation()}else g&&g.hasOwnProperty("cellNav")&&h&&(d.uiGridTargetRenderContainerId=h.containerId,g.cellNav.handleKeyDown(d));return!0})}}}}}]),a.directive("input",["$filter",function(a){function b(a){if("undefined"==typeof a||""===a)return null;var b=a.split("-");if(3!==b.length)return null;var c=parseInt(b[0],10),d=parseInt(b[1],10),e=parseInt(b[2],10);return 1>d||1>c||1>e?null:new Date(c,d-1,e)}return{restrict:"E",require:"?ngModel",link:function(c,d,e,f){2===angular.version.minor&&e.type&&"date"===e.type&&f&&(f.$formatters.push(function(b){return f.$setValidity(null,!b||!isNaN(b.getTime())),a("date")(b,"yyyy-MM-dd")}),f.$parsers.push(function(a){if(a&&a.length>0){var c=b(a);return f.$setValidity(null,c&&!isNaN(c.getTime())),c}return f.$setValidity(null,!0),null}))}}}]),a.directive("uiGridEditDropdown",["uiGridConstants","uiGridEditConstants",function(a,b){return{scope:!0,compile:function(){return{pre:function(){},post:function(c,d){c.$on(b.events.BEGIN_CELL_EDIT,function(){d[0].focus(),d[0].style.width=d[0].parentElement.offsetWidth-1+"px",d.on("blur",function(a){c.stopEdit(a)})}),c.stopEdit=function(){c.$emit(b.events.END_CELL_EDIT)},d.on("keydown",function(d){switch(d.keyCode){case a.keymap.ESC:d.stopPropagation(),c.$emit(b.events.CANCEL_CELL_EDIT);break;case a.keymap.ENTER:c.stopEdit(d);break;case a.keymap.LEFT:c.stopEdit(d);break;case a.keymap.RIGHT:c.stopEdit(d);break;case a.keymap.UP:d.stopPropagation();break;case a.keymap.DOWN:d.stopPropagation();break;case a.keymap.TAB:c.stopEdit(d)}return!0})}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.expandable",["ui.grid"]);a.service("uiGridExpandableService",["gridUtil","$compile",function(a){var b={initializeGrid:function(c){c.options.enableExpandable=c.options.enableExpandable!==!1,c.options.expandableRowHeight=c.options.expandableRowHeight||150,c.options.enableExpandable&&!c.options.expandableRowTemplate&&(a.logError("You have not set the expandableRowTemplate, disabling expandable module"),c.options.enableExpandable=!1);var d={events:{expandable:{rowExpandedStateChanged:function(){}}},methods:{expandable:{toggleRowExpansion:function(a){var d=c.getRow(a);null!==d&&b.toggleRowExpansion(c,d)},expandAllRows:function(){b.expandAllRows(c)},collapseAllRows:function(){b.collapseAllRows(c)}}}};c.api.registerEventsFromObject(d.events),c.api.registerMethodsFromObject(d.methods)},toggleRowExpansion:function(a,b){b.isExpanded=!b.isExpanded,b.height=b.isExpanded?b.grid.options.rowHeight+a.options.expandableRowHeight:b.grid.options.rowHeight,a.api.expandable.raise.rowExpandedStateChanged(b)},expandAllRows:function(a){angular.forEach(a.renderContainers.body.visibleRowCache,function(c){c.isExpanded||b.toggleRowExpansion(a,c)}),a.refresh()},collapseAllRows:function(a){angular.forEach(a.renderContainers.body.visibleRowCache,function(c){c.isExpanded&&b.toggleRowExpansion(a,c)}),a.refresh()}};return b}]),a.directive("uiGridExpandable",["uiGridExpandableService","$templateCache",function(a,b){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(c,d,e,f){if(f.grid.options.enableExpandableRowHeader!==!1){var g={name:"expandableButtons",width:40};g.cellTemplate=b.get("ui-grid/expandableRowHeader"),f.grid.addRowHeaderColumn(g)}a.initializeGrid(f.grid)},post:function(){}}}}}]),a.directive("uiGridExpandableRow",["uiGridExpandableService","$timeout","$compile","uiGridConstants","gridUtil","$interval",function(a,b,c,d,e){return{replace:!1,priority:0,scope:!1,compile:function(){return{pre:function(a,b){e.getTemplate(a.grid.options.expandableRowTemplate).then(function(d){var e=c(d)(a);b.append(e),a.row.expandedRendered=!0})},post:function(a){a.$on("$destroy",function(){a.row.expandedRendered=!1})}}}}}]),a.directive("uiGridRow",["$compile","gridUtil","$templateCache",function(){return{priority:-200,scope:!1,compile:function(){return{pre:function(a){function b(){var b=a.grid,c=0;return angular.forEach(b.columns,function(a){"left"===a.renderContainer&&(c+=a.width)}),c=Math.floor(c),".grid"+b.id+" .ui-grid-pinned-container-"+a.colContainer.name+", .grid"+b.id+" .ui-grid-pinned-container-"+a.colContainer.name+" .ui-grid-render-container-"+a.colContainer.name+" .ui-grid-viewport .ui-grid-canvas .ui-grid-row { width: "+c+"px; }"}a.expandableRow={},a.expandableRow.shouldRenderExpand=function(){var b="body"===a.colContainer.name&&a.grid.options.enableExpandable!==!1&&a.row.isExpanded&&(!a.grid.isScrollingVertically||a.row.expandedRendered);return b},a.expandableRow.shouldRenderFiller=function(){var b=a.row.isExpanded&&("body"!==a.colContainer.name||a.grid.isScrollingVertically&&!a.row.expandedRendered);return b},"left"===a.colContainer.name&&a.grid.registerStyleComputation({priority:15,func:b})},post:function(){}}}}}]),a.directive("uiGridViewport",["$compile","gridUtil","$templateCache",function(a,b,c){return{priority:-200,scope:!1,compile:function(a){var b=angular.element(a.children().children()[0]),d=c.get("ui-grid/expandableScrollFiller"),e=c.get("ui-grid/expandableRow");return b.append(e),b.append(d),{pre:function(){},post:function(){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.exporter",["ui.grid"]);a.constant("uiGridExporterConstants",{featureName:"exporter",ALL:"all",VISIBLE:"visible",SELECTED:"selected",CSV_CONTENT:"CSV_CONTENT",LINK_LABEL:"LINK_LABEL",BUTTON_LABEL:"BUTTON_LABEL"}),a.service("uiGridExporterService",["$q","uiGridExporterConstants","uiGridSelectionConstants","gridUtil","$compile","$interval","i18nService",function(a,b,c,d,e,f,g){var h={initializeGrid:function(a){a.exporter={},this.defaultGridOptions(a.options);var b={events:{exporter:{}},methods:{exporter:{csvExport:function(b,c,d){h.csvExport(a,b,c,d)},pdfExport:function(b,c){h.pdfExport(a,b,c)}}}};a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods),a.api.core.addToGridMenu?h.addToMenu(a):f(function(){a.api.core.addToGridMenu&&h.addToMenu(a)},100,1)},defaultGridOptions:function(a){a.exporterSuppressMenu=a.exporterSuppressMenu===!0,a.exporterLinkTemplate=a.exporterLinkTemplate?a.exporterLinkTemplate:"ui-grid/csvLink",a.exporterHeaderTemplate=a.exporterHeaderTemplate?a.exporterHeaderTemplate:"ui-grid/exporterHeader",a.exporterLinkLabel=a.exporterLinkLabel?a.exporterLinkLabel:"Download CSV",a.exporterMenuLabel=a.exporterMenuLabel?a.exporterMenuLabel:"Export",a.exporterSuppressColumns=a.exporterSuppressColumns?a.exporterSuppressColumns:[],a.exporterCsvColumnSeparator=a.exporterCsvColumnSeparator?a.exporterCsvColumnSeparator:",",a.exporterPdfDefaultStyle=a.exporterPdfDefaultStyle?a.exporterPdfDefaultStyle:{fontSize:11},a.exporterPdfTableStyle=a.exporterPdfTableStyle?a.exporterPdfTableStyle:{margin:[0,5,0,15]},a.exporterPdfTableHeaderStyle=a.exporterPdfTableHeaderStyle?a.exporterPdfTableHeaderStyle:{bold:!0,fontSize:12,color:"black"},a.exporterPdfHeader=a.exporterPdfHeader?a.exporterPdfHeader:null,a.exporterPdfFooter=a.exporterPdfFooter?a.exporterPdfFooter:null,a.exporterPdfOrientation=a.exporterPdfOrientation?a.exporterPdfOrientation:"landscape",a.exporterPdfPageSize=a.exporterPdfPageSize?a.exporterPdfPageSize:"A4",a.exporterPdfMaxGridWidth=a.exporterPdfMaxGridWidth?a.exporterPdfMaxGridWidth:720,a.exporterMenuCsv=void 0!==a.exporterMenuCsv?a.exporterMenuCsv:!0,a.exporterMenuPdf=void 0!==a.exporterMenuPdf?a.exporterMenuPdf:!0,a.exporterPdfCustomFormatter=a.exporterPdfCustomFormatter&&"function"==typeof a.exporterPdfCustomFormatter?a.exporterPdfCustomFormatter:function(a){return a},a.exporterFieldCallback=a.exporterFieldCallback?a.exporterFieldCallback:function(a,b,c,d){return d}},addToMenu:function(a){a.api.core.addToGridMenu(a,[{title:g.getSafeText("gridMenu.exporterAllAsCsv"),action:function(){this.grid.api.exporter.csvExport(b.ALL,b.ALL)},shown:function(){return this.grid.options.exporterMenuCsv}},{title:g.getSafeText("gridMenu.exporterVisibleAsCsv"),action:function(){this.grid.api.exporter.csvExport(b.VISIBLE,b.VISIBLE)},shown:function(){return this.grid.options.exporterMenuCsv}},{title:g.getSafeText("gridMenu.exporterSelectedAsCsv"),action:function(){this.grid.api.exporter.csvExport(b.SELECTED,b.VISIBLE)},shown:function(){return this.grid.options.exporterMenuCsv&&this.grid.api.selection&&this.grid.api.selection.getSelectedRows().length>0}},{title:g.getSafeText("gridMenu.exporterAllAsPdf"),action:function(){this.grid.api.exporter.pdfExport(b.ALL,b.ALL)},shown:function(){return this.grid.options.exporterMenuPdf}},{title:g.getSafeText("gridMenu.exporterVisibleAsPdf"),action:function(){this.grid.api.exporter.pdfExport(b.VISIBLE,b.VISIBLE)},shown:function(){return this.grid.options.exporterMenuPdf}},{title:g.getSafeText("gridMenu.exporterSelectedAsPdf"),action:function(){this.grid.api.exporter.pdfExport(b.SELECTED,b.VISIBLE)},shown:function(){return this.grid.options.exporterMenuPdf&&this.grid.api.selection&&this.grid.api.selection.getSelectedRows().length>0}}])},csvExport:function(a,b,c,e){var f=this.getColumnHeaders(a,c),g=this.getData(a,b,c),h=this.formatAsCsv(f,g,a.options.exporterCsvColumnSeparator);!e&&a.options.exporterCsvLinkElement&&(e=a.options.exporterCsvLinkElement),e?this.renderCsvLink(a,h,e):d.logError("Exporter asked to export as csv, but no element provided.  Perhaps you should set gridOptions.exporterCsvLinkElement?")},getColumnHeaders:function(a,d){var e=[];return angular.forEach(a.columns,function(f){!f.visible&&d!==b.ALL||f.name===c.selectionRowHeaderColName||-1!==a.options.exporterSuppressColumns.indexOf(f.name)||e.push({name:f.field,displayName:a.options.exporterHeaderFilter?a.options.exporterHeaderFilter(f.displayName):f.displayName,width:f.drawnWidth?f.drawnWidth:f.width,align:"number"===f.colDef.type?"right":"left"})}),e},getData:function(a,e,f){var g,h=[];switch(e){case b.ALL:g=a.rows;break;case b.VISIBLE:g=a.getVisibleRows();break;case b.SELECTED:a.api.selection?g=a.api.selection.getSelectedGridRows():d.logError("selection feature must be enabled to allow selected rows to be exported")}return b.ALL?(angular.forEach(g,function(d){var e=[];angular.forEach(a.columns,function(g){!g.visible&&f!==b.ALL||g.name===c.selectionRowHeaderColName||-1!==a.options.exporterSuppressColumns.indexOf(g.name)||e.push(a.options.exporterFieldCallback(a,d,g,a.getCellValue(d,g)))}),h.push(e)}),h):void 0},formatAsCsv:function(a,b,c){var d=this,e=a.map(function(a){return a.displayName}),f=d.formatRowAsCsv(this,c)(e)+"\n";return f+=b.map(this.formatRowAsCsv(this,c)).join("\n")},formatRowAsCsv:function(a,b){return function(c){return c.map(a.formatFieldAsCsv).join(b)}},formatFieldAsCsv:function(a){return null==a?"":"number"==typeof a?a:"boolean"==typeof a?a?"TRUE":"FALSE":"string"==typeof a?'"'+a.replace(/"/g,'""')+'"':JSON.stringify(a)},renderCsvLink:function(a,c,f){var g=f?f:angular.element(a.exporter.gridElm[0].querySelectorAll(".ui-grid-exporter-csv-link"));angular.element(g[0].querySelectorAll(".ui-grid-exporter-csv-link-span"))&&angular.element(g[0].querySelectorAll(".ui-grid-exporter-csv-link-span")).remove();d.getTemplate(a.options.exporterLinkTemplate).then(function(d){var f=angular.element(d);f.children("a").html(f.children("a").html().replace(b.LINK_LABEL,a.options.exporterLinkLabel)),f.children("a").attr("href",f.children("a").attr("href").replace(b.CSV_CONTENT,encodeURIComponent(c)));var h=e(f)(a.exporter.$scope);g.append(h)})},pdfExport:function(a,b,c){var d=this.getColumnHeaders(a,c),e=this.getData(a,b,c),f=this.prepareAsPdf(a,d,e);pdfMake.createPdf(f).open()},prepareAsPdf:function(a,b,c){var d=this.calculatePdfHeaderWidths(a,b),e=b.map(function(a){return{text:a.displayName,style:"tableHeader"}}),f=c.map(this.formatRowAsPdf(this)),g=[e].concat(f),h={pageOrientation:a.options.exporterPdfOrientation,pageSize:a.options.exporterPdfPageSize,content:[{style:"tableStyle",table:{headerRows:1,widths:d,body:g}}],styles:{tableStyle:a.options.exporterPdfTableStyle,tableHeader:a.options.exporterPdfTableHeaderStyle},defaultStyle:a.options.exporterPdfDefaultStyle};return a.options.exporterPdfLayout&&(h.layout=a.options.exporterPdfLayout),a.options.exporterPdfHeader&&h.content.unshift(a.options.exporterPdfHeader),a.options.exporterPdfFooter&&h.content.push(a.options.exporterPdfFooter),a.options.exporterPdfCustomFormatter&&(h=a.options.exporterPdfCustomFormatter(h)),h},calculatePdfHeaderWidths:function(a,b){var c=0;angular.forEach(b,function(a){"number"==typeof a.width&&(c+=a.width)});var d=0;angular.forEach(b,function(a){if("*"===a.width&&(d+=100),"string"==typeof a.width&&a.width.match(/(\d)*%/)){var b=parseInt(a.width.match(/(\d)*%/)[0]);a.width=c*b/100,d+=a.width}});var e=c+d;return b.map(function(b){return"*"===b.width?b.width:b.width*a.options.exporterPdfMaxGridWidth/e})},formatRowAsPdf:function(a){return function(b){return b.map(a.formatFieldAsPdfString)}},formatFieldAsPdfString:function(a){return null==a?"":"number"==typeof a?a.toString():"boolean"==typeof a?a?"TRUE":"FALSE":"string"==typeof a?a.replace(/"/g,'""'):JSON.stringify(a).replace(/^"/,"").replace(/"$/,"")}};return h}]),a.directive("uiGridExporter",["uiGridExporterConstants","uiGridExporterService","gridUtil","$compile",function(a,b){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(a,c,d,e){b.initializeGrid(e.grid),e.grid.exporter.$scope=a}}}])}(),function(){"use strict";var a=angular.module("ui.grid.importer",["ui.grid"]);a.constant("uiGridImporterConstants",{featureName:"importer"}),a.service("uiGridImporterService",["$q","uiGridConstants","uiGridImporterConstants","gridUtil","$compile","$interval","i18nService","$window",function(a,b,c,d,e,f,g,h){var i={initializeGrid:function(a,b){b.importer={$scope:a},this.defaultGridOptions(b.options);var c={events:{importer:{}},methods:{importer:{importFile:function(a,b){i.importFile(a,b)}}}};b.api.registerEventsFromObject(c.events),b.api.registerMethodsFromObject(c.methods),b.options.enableImporter&&b.options.importerShowMenu&&(b.api.core.addToGridMenu?i.addToMenu(b):f(function(){b.api.core.addToGridMenu&&i.addToMenu(b)},100,1))},defaultGridOptions:function(a){a.enableImporter||void 0===a.enableImporter?h.hasOwnProperty("File")&&h.hasOwnProperty("FileReader")&&h.hasOwnProperty("FileList")&&h.hasOwnProperty("Blob")?a.enableImporter=!0:(d.logError("The File APIs are not fully supported in this browser, grid importer cannot be used."),a.enableImporter=!1):a.enableImporter=!1,a.importerProcessHeaders=a.importerProcessHeaders||i.processHeaders,a.importerHeaderFilter=a.importerHeaderFilter||function(a){return a},a.importerErrorCallback&&"function"==typeof a.importerErrorCallback||delete a.importerErrorCallback,a.enableImporter!==!0||a.importerDataAddCallback||(d.logError("You have not set an importerDataAddCallback, importer is disabled"),a.enableImporter=!1),a.importerShowMenu=a.importerShowMenu!==!1,a.importerObjectCallback=a.importerObjectCallback||function(a,b){return b}},addToMenu:function(a){a.api.core.addToGridMenu(a,[{title:g.getSafeText("gridMenu.importerTitle")},{templateUrl:"ui-grid/importerMenuItemContainer",action:function(){this.grid.api.importer.importAFile(a)}}])},importThisFile:function(a,b){if(!b)return void d.logError("No file object provided to importThisFile, should be impossible, aborting");var c=new FileReader;switch(b.type){case"application/json":c.onload=i.importJsonClosure(a);break;default:c.onload=i.importCsvClosure(a)}c.readAsText(b)},importJsonClosure:function(a){return function(b){var c,d=[];angular.forEach(i.parseJson(a,b),function(b){c=i.newObject(a),angular.extend(c,b),c=a.options.importerObjectCallback(a,c),d.push(c)}),i.addObjects(a,d)}},parseJson:function(a,b){var c;try{c=JSON.parse(b.target.result)}catch(d){return void i.alertError(a,"importer.invalidJson","File could not be processed, is it valid json? Content was: ",b.target.result)}return Array.isArray(c)?c:(i.alertError(a,"importer.jsonNotarray","Import failed, file is not an array, file was: ",b.target.result),[])},importCsvClosure:function(a){return function(b){var c=i.parseCsv(b);if(!c||c.length<1)return void i.alertError(a,"importer.invalidCsv","File could not be processed, is it valid csv? Content was: ",b.target.result);var d=i.createCsvObjects(a,c);return d&&0!==d.length?void i.addObjects(a,d):void i.alertError(a,"importer.noObjects","Objects were not able to be derived, content was: ",b.target.result)}},parseCsv:function(a){var b=a.target.result;return CSV.parse(b)},createCsvObjects:function(a,b){var c=a.options.importerProcessHeaders(a,b.shift());if(!c||0===c.length)return i.alertError(a,"importer.noHeaders","Column names could not be derived, content was: ",b),[];var d,e=[];return angular.forEach(b,function(b){d=i.newObject(a),angular.forEach(b,function(a,b){null!==c[b]&&(d[c[b]]=a)}),d=a.options.importerObjectCallback(a,d),e.push(d)}),e},processHeaders:function(a,b){var c=[];if(a.options.columnDefs&&0!==a.options.columnDefs.length){var d=i.flattenColumnDefs(a,a.options.columnDefs);return angular.forEach(b,function(a){c.push(d[a]?d[a]:d[a.toLowerCase()]?d[a.toLowerCase()]:null)}),c}return angular.forEach(b,function(a){c.push(a.replace(/[^0-9a-zA-Z\-_]/g,"_"))}),c},flattenColumnDefs:function(a,b){var c={};return angular.forEach(b,function(b){b.name&&(c[b.name]=b.field||b.name,c[b.name.toLowerCase()]=b.field||b.name),b.field&&(c[b.field]=b.field||b.name,c[b.field.toLowerCase()]=b.field||b.name),b.displayName&&(c[b.displayName]=b.field||b.name,c[b.displayName.toLowerCase()]=b.field||b.name),b.displayName&&a.options.importerHeaderFilter&&(c[a.options.importerHeaderFilter(b.displayName)]=b.field||b.name,c[a.options.importerHeaderFilter(b.displayName).toLowerCase()]=b.field||b.name)}),c},addObjects:function(a,c){if(a.api.rowEdit){var d=a.registerDataChangeCallback(function(){a.api.rowEdit.setRowsDirty(a,c),a.deregisterDataChangeCallback(d)},[b.dataChange.ROW]),e=function(){a.deregisterDataChangeCallback(d)};a.importer.$scope.$on("$destroy",e)}a.importer.$scope.$apply(a.options.importerDataAddCallback(a,c))},newObject:function(a){return"undefined"!=typeof a.options&&"undefined"!=typeof a.options.importerNewObject?new a.options.importerNewObject:{}},alertError:function(a,b,c,e){a.options.importerErrorCallback?a.options.importerErrorCallback(a,b,c,e):(h.alert(g.getSafeText(b)),d.logError(c+e))}};return i}]),a.directive("uiGridImporter",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(a,b){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(a,c,d,e){b.initializeGrid(a,e.grid)}}}]),a.directive("uiGridImporterMenuItem",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(a,b,c){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,templateUrl:"ui-grid/importerMenuItem",link:function(a,d,e,f){var g=function(a){if(1===a.srcElement.files.length){var c=a.srcElement.files[0];b.importThisFile(i,c),a.srcElement.form.reset()}},h=d[0].querySelectorAll(".ui-grid-importer-file-chooser"),i=f.grid;1!==h.length?c.logError("Found > 1 or < 1 file choosers within the menu item, error, cannot continue"):h[0].addEventListener("change",g,!1)}}}])}(),function(){"use strict";var a=angular.module("ui.grid.infiniteScroll",["ui.grid"]);a.service("uiGridInfiniteScrollService",["gridUtil","$compile","$timeout",function(){var a={initializeGrid:function(b){a.defaultGridOptions(b.options);var c={events:{infiniteScroll:{needLoadMoreData:function(){}}},methods:{infiniteScroll:{dataLoaded:function(){b.options.loadTimout=!1}}}};b.options.loadTimout=!1,b.api.registerEventsFromObject(c.events),b.api.registerMethodsFromObject(c.methods)},defaultGridOptions:function(a){a.enableInfiniteScroll=a.enableInfiniteScroll!==!1},loadData:function(a){a.options.loadTimout=!0,a.api.infiniteScroll.raise.needLoadMoreData()},checkScroll:function(a,b){var c=a.options.infiniteScrollPercentage?a.options.infiniteScrollPercentage:20;return!a.options.loadTimout&&c>=b?(this.loadData(a),!0):!1}};return a}]),a.directive("uiGridInfiniteScroll",["uiGridInfiniteScrollService",function(a){return{priority:-200,scope:!1,require:"^uiGrid",compile:function(){return{pre:function(b,c,d,e){a.initializeGrid(e.grid)},post:function(){}}}}}]),a.directive("uiGridViewport",["$compile","gridUtil","uiGridInfiniteScrollService","uiGridConstants",function(a,b,c,d){return{priority:-200,scope:!1,link:function(a){a.grid.options.enableInfiniteScroll&&a.$on(d.events.GRID_SCROLL,function(b,d){if(d.y){var e=100-100*d.y.percentage;c.checkScroll(a.grid,e)}})}}}])}(),function(){"use strict";var a=angular.module("ui.grid.moveColumns",["ui.grid"]);a.service("uiGridMoveColumnService",["$q","$timeout",function(a,b){var c={initializeGrid:function(a){var b=this;this.registerPublicApi(a),this.defaultGridOptions(a.options),a.registerColumnBuilder(b.movableColumnBuilder)},registerPublicApi:function(a){var b=this,c={events:{colMovable:{columnPositionChanged:function(){}}},methods:{colMovable:{moveColumn:function(c,d){b.redrawColumnAtPosition(a,c,d)}}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods)},defaultGridOptions:function(a){a.enableColumnMoving=a.enableColumnMoving!==!1},movableColumnBuilder:function(b,c,d){var e=[];return b.enableColumnMoving=void 0===b.enableColumnMoving?d.enableColumnMoving:b.enableColumnMoving,a.all(e)},redrawColumnAtPosition:function(a,c,d){var e=a.columns,f=function(a){for(var b=a,c=0;b>=c;c++)(angular.isDefined(e[c].colDef.visible)&&e[c].colDef.visible===!1||e[c].isRowHeader===!0)&&b++;return b};c=f(c),d=f(d);var g=e[c];if(g.colDef.enableColumnMoving){if(c>d)for(var h=c;h>d;h--)e[h]=e[h-1];else if(d>c)for(var i=c;d>i;i++)e[i]=e[i+1];e[d]=g,b(function(){a.refresh(),a.api.colMovable.raise.columnPositionChanged(g.colDef,c,d)})}}};return c}]),a.directive("uiGridMoveColumns",["uiGridMoveColumnService",function(a){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(b,c,d,e){a.initializeGrid(e.grid)},post:function(){}}}}}]),a.directive("uiGridHeaderCell",["$q","gridUtil","uiGridMoveColumnService","$document",function(a,b,c,d){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function(b,e,f,g){if(b.col.colDef.enableColumnMoving){var h=function(h){if("ui-grid-icon-angle-down"!==h.target.className&&"I"!==h.target.tagName){var i=e.clone();e.append(i),i.addClass("movingColumn");var j={},k=b.grid.element[0].getBoundingClientRect().left,l=e[0].getBoundingClientRect().left;j.left=l-k+"px";var m,n=b.grid.element[0].getBoundingClientRect().right,o=e[0].getBoundingClientRect().right;o>n&&(m=b.col.drawnWidth+(n-o),j.width=m+"px"),i.css(j);var p=h.pageX,q=0,r=k+b.grid.getViewportWidth()-b.grid.verticalScrollbarWidth,s=function(a){g.fireEvent("hide-menu");var c=i[0].getBoundingClientRect().left-1,d=i[0].getBoundingClientRect().right,e=a.pageX-p,f=c-k+e;f=r>f?f:r,(c>=k||e>0)&&(r>=d||0>e)?i.css({visibility:"visible",left:f+"px"}):(e*=5,g.fireScrollingEvent({x:{pixels:2.5*e}})),q+=e,p=a.pageX,m<b.col.drawnWidth&&(m+=Math.abs(e),i.css({width:m+"px"}))};b.$on("$destroy",function(){d.off("mousemove",s),d.off("mouseup",t)}),d.on("mousemove",s);var t=function(e){var h,j=a.defer();f.$observe("renderIndex",function(a){h=b.$eval(a),j.resolve()}),j.promise.then(function(){i&&i.remove();for(var a=b.grid.renderContainers.body.renderedColumns,f=0,j=b.grid.columns,k=0;k<j.length&&j[k].colDef.name!==a[0].colDef.name;k++)f++;if(0>q){for(var l=0,m=h-1;m>=0;m--)if(l+=a[m].drawnWidth,l>Math.abs(q)){c.redrawColumnAtPosition(b.grid,f+h,f+m+1);break}l<Math.abs(q)&&c.redrawColumnAtPosition(b.grid,f+h,f+0)}else if(q>0){for(var n=0,o=h+1;o<a.length;o++)if(n+=a[o].drawnWidth,n>q){c.redrawColumnAtPosition(b.grid,f+h,f+o-1);break}q>n&&c.redrawColumnAtPosition(b.grid,f+h,f+a.length-1)}else if(0===q){var p=!1;e.shiftKey&&(p=!0),g.grid.sortColumn(b.col,p).then(function(){g.columnMenuScope&&g.columnMenuScope.hideMenu(),g.grid.refresh()})}d.off("mousemove",s),d.off("mouseup",t)})};d.on("mouseup",t)}};e.on("mousedown",h)}}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.pagination",["ui.grid"]);a.service("uiGridPaginationService",function(){var a={initializeGrid:function(b){a.defaultGridOptions(b.options),b.pagination={page:1,totalPages:1};var c={methods:{pagination:{getPage:function(){return b.pagination.page},getTotalPages:function(){return b.pagination.totalPages},nextPage:function(){b.pagination.page++,b.refresh()},previousPage:function(){b.pagination.page=Math.max(1,b.pagination.page-1),b.refresh()},seek:function(a){if(!angular.isNumber(a)||1>a)throw"Invalid page number: "+a;b.pagination.page=a,b.refresh()}}}};b.api.registerMethodsFromObject(c.methods),b.registerRowsProcessor(function(a){if(!b.options.enablePagination)return a;b.pagination.totalPages=Math.max(1,Math.ceil(a.length/b.options.rowsPerPage));var c=(b.pagination.page-1)*b.options.rowsPerPage;return c>=a.length&&(b.pagination.page=b.pagination.totalPages,c=(b.pagination.page-1)*b.options.rowsPerPage),a.slice(c,c+b.options.rowsPerPage)})},defaultGridOptions:function(a){a.enablePagination=a.enablePagination!==!1,a.rowsPerPage=angular.isNumber(a.rowsPerPage)?a.rowsPerPage:10}};return a}),a.directive("uiGridPagination",["uiGridPaginationService",function(a){return{priority:-400,scope:!1,require:"^uiGrid",link:{pre:function(b,c,d,e){a.initializeGrid(e.grid)}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.pinning",["ui.grid"]);a.service("uiGridPinningService",["gridUtil","GridRenderContainer","i18nService",function(a,b,c){var d={initializeGrid:function(a){d.defaultGridOptions(a.options),a.registerColumnBuilder(d.pinningColumnBuilder)},defaultGridOptions:function(a){a.enablePinning=a.enablePinning!==!1},pinningColumnBuilder:function(b,d,e){if(b.enablePinning=void 0===b.enablePinning?e.enablePinning:b.enablePinning,b.pinnedLeft?"*"===d.width?d.grid.refresh().then(function(){d.renderContainer="left",d.width=d.grid.canvasWidth/d.grid.columns.length,d.grid.createLeftContainer()}):(d.renderContainer="left",d.grid.createLeftContainer()):b.pinnedRight&&("*"===d.width?d.grid.refresh().then(function(){d.renderContainer="right",d.width=d.grid.canvasWidth/d.grid.columns.length,d.grid.createRightContainer()}):(d.renderContainer="right",d.grid.createRightContainer())),b.enablePinning){var f={name:"ui.grid.pinning.pinLeft",title:c.get().pinning.pinLeft,icon:"ui-grid-icon-left-open",shown:function(){return"undefined"==typeof this.context.col.renderContainer||!this.context.col.renderContainer||"left"!==this.context.col.renderContainer},action:function(){this.context.col.renderContainer="left",this.context.col.width=this.context.col.drawnWidth,this.context.col.grid.createLeftContainer(),d.grid.refresh().then(function(){d.grid.refresh()})}},g={name:"ui.grid.pinning.pinRight",title:c.get().pinning.pinRight,icon:"ui-grid-icon-right-open",shown:function(){return"undefined"==typeof this.context.col.renderContainer||!this.context.col.renderContainer||"right"!==this.context.col.renderContainer},action:function(){this.context.col.renderContainer="right",this.context.col.width=this.context.col.drawnWidth,this.context.col.grid.createRightContainer(),d.grid.refresh().then(function(){d.grid.refresh()})}},h={name:"ui.grid.pinning.unpin",title:c.get().pinning.unpin,icon:"ui-grid-icon-cancel",shown:function(){return"undefined"!=typeof this.context.col.renderContainer&&null!==this.context.col.renderContainer&&"body"!==this.context.col.renderContainer},action:function(){this.context.col.renderContainer=null,d.grid.refresh().then(function(){d.grid.refresh()})}};a.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.pinning.pinLeft")||d.menuItems.push(f),a.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.pinning.pinRight")||d.menuItems.push(g),a.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.pinning.unpin")||d.menuItems.push(h)}}};return d}]),a.directive("uiGridPinning",["gridUtil","uiGridPinningService",function(a,b){return{require:"uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.initializeGrid(e.grid)},post:function(){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.resizeColumns",["ui.grid"]);a.constant("columnBounds",{minWidth:35}),a.service("uiGridResizeColumnsService",["gridUtil","$q","$timeout",function(a,b,c){var d={defaultGridOptions:function(a){a.enableColumnResizing=a.enableColumnResizing!==!1,a.enableColumnResize===!1&&(a.enableColumnResizing=!1)
},colResizerColumnBuilder:function(a,c,d){var e=[];return a.enableColumnResizing=void 0===a.enableColumnResizing?d.enableColumnResizing:a.enableColumnResizing,a.enableColumnResize===!1&&(a.enableColumnResizing=!1),b.all(e)},registerPublicApi:function(a){var b={events:{colResizable:{columnSizeChanged:function(){}}}};a.api.registerEventsFromObject(b.events)},fireColumnSizeChanged:function(a,b,d){c(function(){a.api.colResizable.raise.columnSizeChanged(b,d)})}};return d}]),a.directive("uiGridResizeColumns",["gridUtil","uiGridResizeColumnsService",function(a,b){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.defaultGridOptions(e.grid.options),e.grid.registerColumnBuilder(b.colResizerColumnBuilder),b.registerPublicApi(e.grid)},post:function(){}}}}}]),a.directive("uiGridHeaderCell",["gridUtil","$templateCache","$compile","$q",function(a,b,c,d){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function(a,e,f,g){if(g.grid.options.enableColumnResizing){var h=d.defer();f.$observe("renderIndex",function(b){a.renderIndex=a.$eval(b),h.resolve()}),h.promise.then(function(){var d=b.get("ui-grid/columnResizer"),f=angular.element(d).clone(),g=angular.element(d).clone();f.attr("position","left"),g.attr("position","right");var h=a.col,i=h.getRenderContainer(),j=i.renderedColumns[a.renderIndex-1];j&&0!==i.visibleColumnCache.indexOf(a.col)&&j.colDef.enableColumnResizing!==!1&&(e.prepend(f),c(f)(a)),a.col.colDef.enableColumnResizing!==!1&&(e.append(g),c(g)(a))})}}}}}}]),a.directive("uiGridColumnResizer",["$document","gridUtil","uiGridConstants","columnBounds","uiGridResizeColumnsService",function(a,b,c,d,e){var f=angular.element('<div class="ui-grid-resize-overlay"></div>'),g={priority:0,scope:{col:"=",position:"@",renderIndex:"="},require:"?^uiGrid",link:function(g,h,i,j){function k(a){var b=a.getRenderContainer();b.visibleColumnCache.forEach(function(b){if(b!==a){var c=b.colDef;(!c.width||angular.isString(c.width)&&(-1!==c.width.indexOf("*")||-1!==c.width.indexOf("%")))&&(b.width=b.drawnWidth)}})}function l(){j.grid.buildColumns().then(function(){j.grid.refreshCanvas(!0)})}function m(a){a.originalEvent&&(a=a.originalEvent),a.preventDefault(),p=a.clientX-q,0>p?p=0:p>j.grid.gridWidth&&(p=j.grid.gridWidth);var b,e=g.col,h=e.getRenderContainer();if("left"===g.position?(e=h.renderedColumns[g.renderIndex-1],b=g.col):"right"===g.position&&(b=h.renderedColumns[g.renderIndex+1]),e.colDef.enableColumnResizing!==!1){j.grid.element.hasClass("column-resizing")||j.grid.element.addClass("column-resizing");var i=p-o,k=parseInt(e.drawnWidth+i*r,10);e.colDef.minWidth&&k<e.colDef.minWidth?p+=(e.colDef.minWidth-k)*r:!e.colDef.minWidth&&d.minWidth&&k<d.minWidth?p+=e.colDef.minWidth-k:e.colDef.maxWidth&&k>e.colDef.maxWidth&&(p+=(e.colDef.maxWidth-k)*r),f.css({left:p+"px"}),j.fireEvent(c.events.ITEM_DRAGGING)}}function n(b){b.originalEvent&&(b=b.originalEvent),b.preventDefault(),j.grid.element.removeClass("column-resizing"),f.remove(),p=b.clientX-q;var c=p-o;if(0===c)return a.off("mouseup",n),void a.off("mousemove",m);var h,i=g.col,s=i.getRenderContainer();if("left"===g.position?(i=s.renderedColumns[g.renderIndex-1],h=g.col):"right"===g.position&&(h=s.renderedColumns[g.renderIndex+1]),i.colDef.enableColumnResizing!==!1){var t=parseInt(i.drawnWidth+c*r,10);i.colDef.minWidth&&t<i.colDef.minWidth?t=i.colDef.minWidth:!i.colDef.minWidth&&d.minWidth&&t<d.minWidth&&(t=d.minWidth),i.colDef.maxWidth&&t>i.colDef.maxWidth&&(t=i.colDef.maxWidth),i.width=t,k(i),l(c),e.fireColumnSizeChanged(j.grid,i.colDef,c),a.off("mouseup",n),a.off("mousemove",m)}}var o=0,p=0,q=0,r=1;j.grid.isRTL()&&(g.position="left",r=-1),"left"===g.position?h.addClass("left"):"right"===g.position&&h.addClass("right"),h.on("mousedown",function(b){b.originalEvent&&(b=b.originalEvent),b.stopPropagation(),q=j.grid.element[0].getBoundingClientRect().left,o=b.clientX-q,j.grid.element.append(f),f.css({left:o}),a.on("mouseup",n),a.on("mousemove",m)}),h.on("dblclick",function(a){a.stopPropagation();var f,i,m=g.col,n=m.getRenderContainer();"left"===g.position?(m=n.renderedColumns[g.renderIndex-1],f=g.col,i=1):"right"===g.position&&(f=n.renderedColumns[g.renderIndex+1],f=n.renderedColumns[g.renderIndex+1],i=-1);var o=0,p=0,q=b.closestElm(h,".ui-grid-render-container"),r=q.querySelectorAll("."+c.COL_CLASS_PREFIX+m.uid+" .ui-grid-cell-contents");Array.prototype.forEach.call(r,function(a){var c;angular.element(a).parent().hasClass("ui-grid-header-cell")&&(c=angular.element(a).parent()[0].querySelectorAll(".ui-grid-column-menu-button")),b.fakeElement(a,{},function(a){var d=angular.element(a);d.attr("style","float: left");var e=b.elementWidth(d);if(c){var f=b.elementWidth(c);e+=f}e>o&&(o=e,p=o-e)})}),m.colDef.minWidth&&o<m.colDef.minWidth?o=m.colDef.minWidth:!m.colDef.minWidth&&d.minWidth&&o<d.minWidth&&(o=d.minWidth),m.colDef.maxWidth&&o>m.colDef.maxWidth&&(o=m.colDef.maxWidth),m.width=parseInt(o,10),k(m),l(p),e.fireColumnSizeChanged(j.grid,m.colDef,p)}),h.on("$destroy",function(){h.off("mousedown"),h.off("dblclick"),a.off("mousemove",m),a.off("mouseup",n)})}};return g}])}(),function(){"use strict";var a=angular.module("ui.grid.rowEdit",["ui.grid","ui.grid.edit","ui.grid.cellNav"]);a.constant("uiGridRowEditConstants",{}),a.service("uiGridRowEditService",["$interval","$q","uiGridConstants","uiGridRowEditConstants","gridUtil",function(a,b,c,d,e){var f={initializeGrid:function(a,b){b.rowEdit={};var c={events:{rowEdit:{saveRow:function(){}}},methods:{rowEdit:{setSavePromise:function(a,b,c){f.setSavePromise(a,b,c)},getDirtyRows:function(a){return a.rowEdit.dirtyRows?a.rowEdit.dirtyRows:[]},getErrorRows:function(a){return a.rowEdit.errorRows?a.rowEdit.errorRows:[]},flushDirtyRows:function(a){return f.flushDirtyRows(a)},setRowsDirty:function(a,b){f.setRowsDirty(a,b)}}}};b.api.registerEventsFromObject(c.events),b.api.registerMethodsFromObject(c.methods),b.api.core.on.renderingComplete(a,function(){b.api.edit.on.afterCellEdit(a,f.endEditCell),b.api.edit.on.beginCellEdit(a,f.beginEditCell),b.api.edit.on.cancelCellEdit(a,f.cancelEditCell),b.api.cellNav&&b.api.cellNav.on.navigate(a,f.navigate)})},defaultGridOptions:function(){},saveRow:function(a,b){var c=this;return function(){b.isSaving=!0;var d=a.api.rowEdit.raise.saveRow(b.entity);return b.rowEditSavePromise?b.rowEditSavePromise.then(c.processSuccessPromise(a,b),c.processErrorPromise(a,b)):e.logError("A promise was not returned when saveRow event was raised, either nobody is listening to event, or event handler did not return a promise"),d}},setSavePromise:function(a,b,c){var d=a.getRow(b);d.rowEditSavePromise=c},processSuccessPromise:function(a,b){var c=this;return function(){delete b.isSaving,delete b.isDirty,delete b.isError,delete b.rowEditSaveTimer,c.removeRow(a.rowEdit.errorRows,b),c.removeRow(a.rowEdit.dirtyRows,b)}},processErrorPromise:function(a,b){return function(){delete b.isSaving,delete b.rowEditSaveTimer,b.isError=!0,a.rowEdit.errorRows||(a.rowEdit.errorRows=[]),f.isRowPresent(a.rowEdit.errorRows,b)||a.rowEdit.errorRows.push(b)}},removeRow:function(a,b){angular.forEach(a,function(c,d){c.uid===b.uid&&a.splice(d,1)})},isRowPresent:function(a,b){var c=!1;return angular.forEach(a,function(a){a.uid===b.uid&&(c=!0)}),c},flushDirtyRows:function(a){var c=[];return angular.forEach(a.rowEdit.dirtyRows,function(b){f.saveRow(a,b)(),c.push(b.rowEditSavePromise)}),b.all(c)},endEditCell:function(a,b,c,d){var g=this.grid,h=g.getRow(a);return h?void((c!==d||h.isDirty)&&(g.rowEdit.dirtyRows||(g.rowEdit.dirtyRows=[]),h.isDirty||(h.isDirty=!0,g.rowEdit.dirtyRows.push(h)),delete h.isError,f.considerSetTimer(g,h))):void e.logError("Unable to find rowEntity in grid data, dirty flag cannot be set")},beginEditCell:function(a){var b=this.grid,c=b.getRow(a);return c?void f.cancelTimer(b,c):void e.logError("Unable to find rowEntity in grid data, timer cannot be cancelled")},cancelEditCell:function(a){var b=this.grid,c=b.getRow(a);return c?void f.considerSetTimer(b,c):void e.logError("Unable to find rowEntity in grid data, timer cannot be set")},navigate:function(a,b){var c=this.grid;a.row.rowEditSaveTimer&&f.cancelTimer(c,a.row),b&&b.row&&b.row!==a.row&&f.considerSetTimer(c,b.row)},considerSetTimer:function(b,c){if(f.cancelTimer(b,c),c.isDirty&&!c.isSaving&&-1!==b.options.rowEditWaitInterval){var d=b.options.rowEditWaitInterval?b.options.rowEditWaitInterval:2e3;c.rowEditSaveTimer=a(f.saveRow(b,c),d,1)}},cancelTimer:function(b,c){c.rowEditSaveTimer&&!c.isSaving&&(a.cancel(c.rowEditSaveTimer),delete c.rowEditSaveTimer)},setRowsDirty:function(a,b){var c;b.forEach(function(b){c=a.getRow(b),c?(a.rowEdit.dirtyRows||(a.rowEdit.dirtyRows=[]),c.isDirty||(c.isDirty=!0,a.rowEdit.dirtyRows.push(c)),delete c.isError,f.considerSetTimer(a,c)):e.logError("requested row not found in rowEdit.setRowsDirty, row was: "+b)})}};return f}]),a.directive("uiGridRowEdit",["gridUtil","uiGridRowEditService","uiGridEditConstants",function(a,b){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.initializeGrid(a,e.grid)},post:function(){}}}}}]),a.directive("uiGridViewport",["$compile","uiGridConstants","gridUtil","$parse",function(){return{priority:-200,scope:!1,compile:function(a){var b=angular.element(a.children().children()[0]),c=b.attr("ng-class"),d="";return d=c?c.slice(0,-1)+", 'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}":"{'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}",b.attr("ng-class",d),{pre:function(){},post:function(){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.selection",["ui.grid"]);a.constant("uiGridSelectionConstants",{featureName:"selection",selectionRowHeaderColName:"selectionRowHeaderCol"}),a.service("uiGridSelectionService",["$q","$templateCache","uiGridSelectionConstants","gridUtil",function(){var a={initializeGrid:function(b){b.selection={},b.selection.lastSelectedRow=null,b.selection.selectAll=!1,a.defaultGridOptions(b.options);var c={events:{selection:{rowSelectionChanged:function(){},rowSelectionChangedBatch:function(){}}},methods:{selection:{toggleRowSelection:function(c){var d=b.getRow(c);null!==d&&a.toggleRowSelection(b,d,b.options.multiSelect,b.options.noUnselect)},selectRow:function(c){var d=b.getRow(c);null===d||d.isSelected||a.toggleRowSelection(b,d,b.options.multiSelect,b.options.noUnselect)},selectRowByVisibleIndex:function(c){var d=b.renderContainers.body.visibleRowCache[c];null===d||d.isSelected||a.toggleRowSelection(b,d,b.options.multiSelect,b.options.noUnselect)},unSelectRow:function(c){var d=b.getRow(c);null!==d&&d.isSelected&&a.toggleRowSelection(b,d,b.options.multiSelect,b.options.noUnselect)},selectAllRows:function(){if(b.options.multiSelect!==!1){var c=[];b.rows.forEach(function(d){d.isSelected||(d.isSelected=!0,a.decideRaiseSelectionEvent(b,d,c))}),a.decideRaiseSelectionBatchEvent(b,c)}},selectAllVisibleRows:function(){if(b.options.multiSelect!==!1){var c=[];b.rows.forEach(function(d){d.visible?d.isSelected||(d.isSelected=!0,a.decideRaiseSelectionEvent(b,d,c)):d.isSelected&&(d.isSelected=!1,a.decideRaiseSelectionEvent(b,d,c))}),a.decideRaiseSelectionBatchEvent(b,c)}},clearSelectedRows:function(){a.clearSelectedRows(b)},getSelectedRows:function(){return a.getSelectedRows(b).map(function(a){return a.entity})},getSelectedGridRows:function(){return a.getSelectedRows(b)},setMultiSelect:function(a){b.options.multiSelect=a},setModifierKeysToMultiSelect:function(a){b.options.modifierKeysToMultiSelect=a},getSelectAllState:function(){return b.selection.selectAll}}}};b.api.registerEventsFromObject(c.events),b.api.registerMethodsFromObject(c.methods)},defaultGridOptions:function(a){a.enableRowSelection=a.enableRowSelection!==!1,a.multiSelect=a.multiSelect!==!1,a.noUnselect=a.noUnselect===!0,a.modifierKeysToMultiSelect=a.modifierKeysToMultiSelect===!0,a.enableRowHeaderSelection=a.enableRowHeaderSelection!==!1,a.enableSelectAll=a.enableSelectAll!==!1,a.enableSelectionBatchEvent=a.enableSelectionBatchEvent!==!1,a.selectionRowHeaderWidth=angular.isDefined(a.selectionRowHeaderWidth)?a.selectionRowHeaderWidth:30},toggleRowSelection:function(b,c,d,e){var f=c.isSelected;if(d||f){if(!d&&f){var g=a.getSelectedRows(b);g.length>1&&(f=!1,a.clearSelectedRows(b))}}else a.clearSelectedRows(b);f&&e||(c.isSelected=!f,c.isSelected===!0&&(b.selection.lastSelectedRow=c),b.api.selection.raise.rowSelectionChanged(c))},shiftSelect:function(b,c,d){if(d){var e=a.getSelectedRows(b),f=e.length>0?b.renderContainers.body.visibleRowCache.indexOf(b.selection.lastSelectedRow):0,g=b.renderContainers.body.visibleRowCache.indexOf(c);if(f>g){var h=f;f=g,g=h}for(var i=[],j=f;g>=j;j++){var k=b.renderContainers.body.visibleRowCache[j];k&&(k.isSelected||(k.isSelected=!0,b.selection.lastSelectedRow=k,a.decideRaiseSelectionEvent(b,k,i)))}a.decideRaiseSelectionBatchEvent(b,i)}},getSelectedRows:function(a){return a.rows.filter(function(a){return a.isSelected})},clearSelectedRows:function(b){var c=[];a.getSelectedRows(b).forEach(function(d){d.isSelected&&(d.isSelected=!1,a.decideRaiseSelectionEvent(b,d,c))}),a.decideRaiseSelectionBatchEvent(b,c)},decideRaiseSelectionEvent:function(a,b,c){a.options.enableSelectionBatchEvent?c.push(b):a.api.selection.raise.rowSelectionChanged(b)},decideRaiseSelectionBatchEvent:function(a,b){b.length>0&&a.api.selection.raise.rowSelectionChangedBatch(b)}};return a}]),a.directive("uiGridSelection",["uiGridSelectionConstants","uiGridSelectionService","$templateCache",function(a,b){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(c,d,e,f){if(b.initializeGrid(f.grid),f.grid.options.enableRowHeaderSelection){var g={name:a.selectionRowHeaderColName,displayName:"",width:f.grid.options.selectionRowHeaderWidth,cellTemplate:"ui-grid/selectionRowHeader",headerCellTemplate:"ui-grid/selectionHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1};f.grid.addRowHeaderColumn(g)}},post:function(){}}}}}]),a.directive("uiGridSelectionRowHeaderButtons",["$templateCache","uiGridSelectionService",function(a,b){return{replace:!0,restrict:"E",template:a.get("ui-grid/selectionRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function(a,c,d,e){var f=e.grid;a.selectButtonClick=function(a,c){c.shiftKey?b.shiftSelect(f,a,f.options.multiSelect):c.ctrlKey||c.metaKey?b.toggleRowSelection(f,a,f.options.multiSelect,f.options.noUnselect):b.toggleRowSelection(f,a,f.options.multiSelect&&!f.options.modifierKeysToMultiSelect,f.options.noUnselect)}}}}]),a.directive("uiGridSelectionSelectAllButtons",["$templateCache","uiGridSelectionService",function(a,b){return{replace:!0,restrict:"E",template:a.get("ui-grid/selectionSelectAllButtons"),scope:!1,link:function(a){var c=a.col.grid;a.headerButtonClick=function(){c.selection.selectAll?(b.clearSelectedRows(c),c.options.noUnselect&&c.api.selection.selectRowByVisibleIndex(0),c.selection.selectAll=!1):c.options.multiSelect&&(c.api.selection.selectAllVisibleRows(),c.selection.selectAll=!0)}}}}]),a.directive("uiGridViewport",["$compile","uiGridConstants","uiGridSelectionConstants","gridUtil","$parse","uiGridSelectionService",function(){return{priority:-200,scope:!1,compile:function(a){var b=angular.element(a.children().children()[0]),c=b.attr("ng-class"),d="";return d=c?c.slice(0,-1)+",'ui-grid-row-selected': row.isSelected}":"{'ui-grid-row-selected': row.isSelected}",b.attr("ng-class",d),{pre:function(){},post:function(){}}}}}]),a.directive("uiGridCell",["$compile","uiGridConstants","uiGridSelectionConstants","gridUtil","$parse","uiGridSelectionService",function(a,b,c,d,e,f){return{priority:-200,restrict:"A",scope:!1,link:function(a,b){function c(){var c=0,d=300,e=function(b){b.shiftKey?f.shiftSelect(a.grid,a.row,a.grid.options.multiSelect):b.ctrlKey||b.metaKey?f.toggleRowSelection(a.grid,a.row,a.grid.options.multiSelect,a.grid.options.noUnselect):f.toggleRowSelection(a.grid,a.row,a.grid.options.multiSelect&&!a.grid.options.modifierKeysToMultiSelect,a.grid.options.noUnselect),a.$apply()};b.on("touchstart",function(){c=(new Date).getTime()}),b.on("touchend",function(a){var b=(new Date).getTime(),f=b-c;d>f&&e(a)}),b.on("click",function(a){e(a)})}a.grid.options.enableRowSelection&&!a.grid.options.enableRowHeaderSelection&&(b.addClass("ui-grid-disable-selection"),c())}}}])}(),angular.module("ui.grid").run(["$templateCache",function(a){"use strict";a.put("ui-grid/ui-grid-footer",'<div class="ui-grid-footer-panel"><div ui-grid-group-panel ng-show="grid.options.showGroupPanel"></div><div class="ui-grid-footer ui-grid-footer-viewport"><div class="ui-grid-footer-canvas"><div ng-repeat="col in colContainer.renderedColumns track by col.colDef.name" ui-grid-footer-cell col="col" render-index="$index" class="ui-grid-footer-cell clearfix" ng-style="$index === 0 && colContainer.columnStyle($index)"></div></div></div></div>'),a.put("ui-grid/ui-grid-group-panel",'<div class="ui-grid-group-panel"><div ui-t="groupPanel.description" class="description" ng-show="groupings.length == 0"></div><ul ng-show="groupings.length > 0" class="ngGroupList"><li class="ngGroupItem" ng-repeat="group in configGroups"><span class="ngGroupElement"><span class="ngGroupName">{{group.displayName}} <span ng-click="removeGroup($index)" class="ngRemoveGroup">x</span></span> <span ng-hide="$last" class="ngGroupArrow"></span></span></li></ul></div>'),a.put("ui-grid/ui-grid-header",'<div class="ui-grid-header"><div class="ui-grid-top-panel"><div ui-grid-group-panel ng-show="grid.options.showGroupPanel"></div><div class="ui-grid-header-viewport"><div class="ui-grid-header-canvas"><div class="ui-grid-header-cell clearfix" ng-repeat="col in colContainer.renderedColumns track by col.colDef.name" ui-grid-header-cell col="col" render-index="$index" ng-style="$index === 0 && colContainer.columnStyle($index)"></div></div></div><div ui-grid-menu></div></div></div>'),a.put("ui-grid/ui-grid-menu-button",'<div class="ui-grid-menu-button" ng-click="toggleMenu()"><div class="ui-grid-icon-container"><i class="ui-grid-icon-menu">&nbsp;</i></div><div ui-grid-menu menu-items="menuItems"></div></div>'),a.put("ui-grid/ui-grid-no-header",'<div class="ui-grid-top-panel"></div>'),a.put("ui-grid/ui-grid-row",'<div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader }" ui-grid-cell></div>'),a.put("ui-grid/ui-grid",'<div ui-i18n="en" class="ui-grid"><!-- TODO (c0bra): add "scoped" attr here, eventually? --><style ui-grid-style>.grid{{ grid.id }} {\n      /* Styles for the grid */\n    }\n\n    .grid{{ grid.id }} .ui-grid-row, .grid{{ grid.id }} .ui-grid-cell, .grid{{ grid.id }} .ui-grid-cell .ui-grid-vertical-bar {\n      height: {{ grid.options.rowHeight }}px;\n    }\n\n    .grid{{ grid.id }} .ui-grid-row:last-child .ui-grid-cell {\n      border-bottom-width: {{ ((grid.getTotalRowHeight() < grid.getViewportHeight()) && \'1\') || \'0\' }}px;\n    }\n\n    {{ grid.verticalScrollbarStyles }}\n    {{ grid.horizontalScrollbarStyles }}\n\n    .ui-grid[dir=rtl] .ui-grid-viewport {\n      padding-left: {{ grid.verticalScrollbarWidth }}px;\n    }\n\n    {{ grid.customStyles }}</style><div ui-grid-menu-button ng-if="grid.options.enableGridMenu"></div><div ui-grid-render-container container-id="\'body\'" col-container-name="\'body\'" row-container-name="\'body\'" bind-scroll-horizontal="true" bind-scroll-vertical="true" enable-horizontal-scrollbar="grid.options.enableHorizontalScrollbar" enable-vertical-scrollbar="grid.options.enableVerticalScrollbar"></div><div ui-grid-column-menu ng-if="grid.options.enableColumnMenus"></div><div ng-transclude></div></div>'),a.put("ui-grid/uiGridCell",'<div class="ui-grid-cell-contents">{{COL_FIELD CUSTOM_FILTERS}}</div>'),a.put("ui-grid/uiGridColumnFilter",'<li class="ui-grid-menu-item ui-grid-clearfix ui-grid-column-filter" ng-show="itemShown()" ng-click="$event.stopPropagation();"><div class="input-container"><input class="column-filter-input" type="text" ng-model="item.model" placeholder="{{ i18n.search.placeholder }}"><div class="column-filter-cancel-icon-container"><i class="ui-grid-filter-cancel ui-grid-icon-cancel column-filter-cancel-icon">&nbsp;</i></div></div><div style="button-container" ng-click="item.action($event)"><div class="ui-grid-button"><i class="ui-grid-icon-search">&nbsp;</i></div></div></li>'),a.put("ui-grid/uiGridColumnMenu",'<div class="ui-grid-column-menu"><div ui-grid-menu menu-items="menuItems"><!-- <div class="ui-grid-column-menu">\n    <div class="inner" ng-show="menuShown">\n      <ul>\n        <div ng-show="grid.options.enableSorting">\n          <li ng-click="sortColumn($event, asc)" ng-class="{ \'selected\' : col.sort.direction == asc }"><i class="ui-grid-icon-sort-alt-up"></i> Sort Ascending</li>\n          <li ng-click="sortColumn($event, desc)" ng-class="{ \'selected\' : col.sort.direction == desc }"><i class="ui-grid-icon-sort-alt-down"></i> Sort Descending</li>\n          <li ng-show="col.sort.direction" ng-click="unsortColumn()"><i class="ui-grid-icon-cancel"></i> Remove Sort</li>\n        </div>\n      </ul>\n    </div>\n  </div> --></div></div>'),a.put("ui-grid/uiGridFooterCell",'<div class="ui-grid-cell-contents" col-index="renderIndex"><div>{{ col.getAggregationValue() }}</div></div>'),a.put("ui-grid/uiGridHeaderCell",'<div ng-class="{ \'sortable\': sortable }"><div class="ui-grid-vertical-bar">&nbsp;</div><div class="ui-grid-cell-contents" col-index="renderIndex"><span>{{ col.displayName CUSTOM_FILTERS }}</span> <span ui-grid-visible="col.sort.direction" ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }">&nbsp;</span></div><div class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" class="ui-grid-column-menu-button" ng-click="toggleMenu($event)"><i class="ui-grid-icon-angle-down">&nbsp;</i></div><div ng-if="filterable" class="ui-grid-filter-container" ng-repeat="colFilter in col.filters"><input type="text" class="ui-grid-filter-input" ng-model="colFilter.term" ng-click="$event.stopPropagation()" ng-attr-placeholder="{{colFilter.placeholder || \'\'}}"><div class="ui-grid-filter-button" ng-click="colFilter.term = null"><i class="ui-grid-icon-cancel right" ng-show="!!colFilter.term">&nbsp;</i><!-- use !! because angular interprets \'f\' as false --></div></div></div>'),a.put("ui-grid/uiGridMenu",'<div class="ui-grid-menu" ng-if="shown"><div class="ui-grid-menu-mid" ng-show="shownMid"><div class="ui-grid-menu-inner"><ul class="ui-grid-menu-items"><li ng-repeat="item in menuItems" ui-grid-menu-item action="item.action" title="item.title" active="item.active" icon="item.icon" shown="item.shown" context="item.context" template-url="item.templateUrl"></li></ul></div></div></div>'),a.put("ui-grid/uiGridMenuItem",'<li class="ui-grid-menu-item" ng-click="itemAction($event, title)" ng-show="itemShown()" ng-class="{ \'ui-grid-menu-item-active\' : active() }"><i ng-class="icon"></i> {{ title }}</li>'),a.put("ui-grid/uiGridRenderContainer",'<div class="ui-grid-render-container"><div ui-grid-header></div><div ui-grid-viewport></div><div ui-grid-footer ng-if="grid.options.showFooter"></div><!-- native scrolling --><div ui-grid-native-scrollbar ng-if="enableVerticalScrollbar" type="vertical"></div><div ui-grid-native-scrollbar ng-if="enableHorizontalScrollbar" type="horizontal"></div></div>'),a.put("ui-grid/uiGridViewport",'<div class="ui-grid-viewport"><div class="ui-grid-canvas"><div ng-repeat="(rowRenderIndex, row) in rowContainer.renderedRows track by $index" class="ui-grid-row" ng-style="containerCtrl.rowStyle(rowRenderIndex)"><div ui-grid-row="row" row-render-index="rowRenderIndex"></div></div></div></div>'),a.put("ui-grid/cellEditor",'<div><form name="inputForm"><input type="{{inputType}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD"></form></div>'),a.put("ui-grid/dropdownEditor",'<div><form name="inputForm"><select ng-class="\'colt\' + col.uid" ui-grid-edit-dropdown ng-model="MODEL_COL_FIELD" ng-options="field[editDropdownIdLabel] as field[editDropdownValueLabel] CUSTOM_FILTERS for field in editDropdownOptionsArray"></select></form></div>'),a.put("ui-grid/expandableRow",'<div ui-grid-expandable-row ng-if="expandableRow.shouldRenderExpand()" class="expandableRow" style="float:left; margin-top: 1px; margin-bottom: 1px" ng-style="{width: (grid.renderContainers.body.getCanvasWidth() - grid.verticalScrollbarWidth) + \'px\'\n     , height: grid.options.expandableRowHeight + \'px\'}"></div>'),a.put("ui-grid/expandableRowHeader",'<div class="ui-grid-row-header-cell ui-grid-expandable-buttons-cell"><div class="ui-grid-cell-contents"><i ng-class="{ \'ui-grid-icon-plus-squared\' : !row.isExpanded, \'ui-grid-icon-minus-squared\' : row.isExpanded }" ng-click="grid.api.expandable.toggleRowExpansion(row.entity)"></i></div></div>'),a.put("ui-grid/expandableScrollFiller","<div ng-if=\"expandableRow.shouldRenderFiller()\" style=\"float:left; margin-top: 2px; margin-bottom: 2px\" ng-style=\"{ width: (grid.getViewportWidth()) + 'px',\n              height: grid.options.expandableRowHeight + 'px', 'margin-left': grid.options.rowHeader.rowHeaderWidth + 'px' }\"><i class=\"ui-grid-icon-spin5 ui-grid-animate-spin\" ng-style=\"{ 'margin-top': ( grid.options.expandableRowHeight/2 - 5) + 'px',\n            'margin-left' : ((grid.getViewportWidth() - grid.options.rowHeader.rowHeaderWidth)/2 - 5) + 'px' }\"></i></div>"),a.put("ui-grid/csvLink",'<span class="ui-grid-exporter-csv-link-span"><a href="data:text/csv;charset=UTF-8,CSV_CONTENT">LINK_LABEL</a></span>'),a.put("ui-grid/importerMenuItem",'<li class="ui-grid-menu-item"><form><input class="ui-grid-importer-file-chooser" type="file" id="files" name="files[]"></form></li>'),a.put("ui-grid/importerMenuItemContainer","<div ui-grid-importer-menu-item></div>"),a.put("ui-grid/columnResizer",'<div ui-grid-column-resizer ng-if="grid.options.enableColumnResizing" class="ui-grid-column-resizer" col="col" position="right" render-index="renderIndex"></div>'),a.put("ui-grid/selectionHeaderCell",'<div><div class="ui-grid-vertical-bar">&nbsp;</div><div class="ui-grid-cell-contents" col-index="renderIndex"><ui-grid-selection-select-all-buttons ng-if="grid.options.enableSelectAll"></ui-grid-selection-select-all-buttons></div></div>'),a.put("ui-grid/selectionRowHeader",'<div class="ui-grid-row-header-cell ui-grid-disable-selection"><div class="ui-grid-cell-contents"><ui-grid-selection-row-header-buttons></ui-grid-selection-row-header-buttons></div></div>'),a.put("ui-grid/selectionRowHeaderButtons",'<div class="ui-grid-selection-row-header-buttons ui-grid-icon-ok" ng-class="{\'ui-grid-row-selected\': row.isSelected}" ng-click="selectButtonClick(row, $event)">&nbsp;</div>'),a.put("ui-grid/selectionSelectAllButtons",'<div class="ui-grid-selection-row-header-buttons ui-grid-icon-ok" ng-class="{\'ui-grid-all-selected\': grid.selection.selectAll}" ng-click="headerButtonClick($event)">&nbsp;</div>')}]),function(){"use strict";angular.module("omr.directives",[]).directive("ngCamera",["$timeout","$sce",function(a,b){return{require:"ngModel",template:'<div class="ng-camera clearfix">        <p ng-hide="isLoaded">Loading Camera...</p>        <p ng-show="noCamera">Couldn\'t find a camera to use</p>        <div class="ng-camera-stack" ng-hide="!isLoaded">          <div class="ng-camera-countdown" ng-show="activeCountdown">            <p class="tick">{{countdownText}}</p>          </div>          <img class="ng-camera-overlay" ng-hide="!overlaySrc" ng-src="{{overlaySrc}}" width="{{width}}" height="{{height}}">          <video id="ng-camera-feed" autoplay width="{{width}}" height="{{height}}" src="{{videoStream}}">Install Browser\'s latest version</video>          <canvas id="ng-photo-canvas" width="{{width}}" height="{{height}}" style="display:none;"></canvas>        </div>        <div class="ng-camera-controls" ng-hide="hideUI">          <button class="btn ng-camera-take-btn" ng-click="takePicture()">Take Picture</button>        </div>      </div>',replace:!1,transclude:!0,restrict:"E",scope:{type:"@",media:"=ngModel",width:"@",height:"@",overlaySrc:"=",countdown:"@",captureCallback:"&capture",enabled:"=",captureMessage:"@"},link:function(c){return c.activeCountdown=!1,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,c.$on("$destroy",function(){c.stream&&"function"==typeof c.stream.stop&&c.stream.stop()}),c.enableCamera=function(){return navigator.getUserMedia({audio:!1,video:!0},function(a){return c.$apply(function(){return c.stream=a,c.isLoaded=!0,c.videoStream=b.trustAsResourceUrl(window.URL.createObjectURL(a))})},function(){return c.$apply(function(){return c.isLoaded=!0,c.noCamera=!0})})},c.disableCamera=function(){return navigator.getUserMedia({audio:!1,video:!0},function(){return c.$apply(function(){return c.videoStream=""})})},c.takePicture=function(){var b,d,e,f;return b=window.document.getElementById("ng-photo-canvas"),f=null!=c.countdown?1e3*parseInt(c.countdown):0,null!=b&&(f>0&&(c.activeCountdown=!0,c.hideUI=!0),d=b.getContext("2d"),c.countdownTimer&&a.cancel(c.countdownTimer),c.countdownTimer=a(function(){var a;return c.activeCountdown=!1,a=window.document.getElementById("ng-camera-feed"),d.drawImage(a,0,0,c.width,c.height),null!=c.overlaySrc?c.addFrame(d,c.overlaySrc,function(){return c.$apply(function(){return c.media=b.toDataURL("image/jpeg")}),null!=c.captureCallback?c.captureCallback(c.media):void 0}):(c.media=b.toDataURL("image/jpeg"),null!=c.captureCallback&&c.captureCallback(c.media)),c.hideUI=!1},f+1e3),c.countdownText=parseInt(c.countdown),e=setInterval(function(){return c.$apply(function(){var a;return a=parseInt(c.countdownText)-1,0===a?(c.countdownText=null!=c.captureMessage?c.captureMessage:"GO!",clearInterval(e)):c.countdownText=a})},1e3)),!1},c.addFrame=function(a,b,d){var e;return null==d&&(d=!1),e=new Image,e.onload=function(){return a.drawImage(e,0,0,c.width,c.height),d?d(a):void 0},e.crossOrigin="",e.src=b},c.$watch("media",function(a){return null!=a?c.packagedMedia=c.media.replace(/^data:image\/\w+;base64,/,""):void 0}),c.$watch("overlaySrc",function(a){var b;return null!=c.overlaySrc?(c.isLoaded=!1,b=new Image,b.crossOrigin="",b.src=a,b.onload=function(){return c.$apply(function(){return c.isLoaded=!0})}):c.isLoaded=!0}),c.$watch("enabled",function(a,b){if(a){if(!b)return c.enableCamera()}else if(null!=b)return c.disableCamera()}),c.$watch("type",function(){switch(c.type){case"photo":if(c.enabled)return c.enableCamera();break;default:if(c.enabled)return c.enableCamera()}})}}}])}.call(this),function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(a){var b=["$q","$cacheFactory","$timeout","$rootScope","cfpLoadingBar",function(b,c,d,e,f){function g(){d.cancel(i),f.complete(),k=0,j=0}function h(b){var d,e=c.get("$http"),f=a.defaults;!b.cache&&!f.cache||b.cache===!1||"GET"!==b.method&&"JSONP"!==b.method||(d=angular.isObject(b.cache)?b.cache:angular.isObject(f.cache)?f.cache:e);var g=void 0!==d?void 0!==d.get(b.url):!1;return void 0!==b.cached&&g!==b.cached?b.cached:(b.cached=g,g)}var i,j=0,k=0,l=f.latencyThreshold;return{request:function(a){return a.ignoreLoadingBar||h(a)||(e.$broadcast("cfpLoadingBar:loading",{url:a.url}),0===j&&(i=d(function(){f.start()},l)),j++,f.set(k/j)),a},response:function(a){return a.config.ignoreLoadingBar||h(a.config)||(k++,e.$broadcast("cfpLoadingBar:loaded",{url:a.config.url}),k>=j?g():f.set(k/j)),a
},responseError:function(a){return a.config.ignoreLoadingBar||h(a.config)||(k++,e.$broadcast("cfpLoadingBar:loaded",{url:a.config.url}),k>=j?g():f.set(k/j)),b.reject(a)}}}];a.interceptors.push(b)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(a,b,c,d){function e(){k||(k=a.get("$animate"));var e=b.find(n).eq(0);c.cancel(m),r||(d.$broadcast("cfpLoadingBar:started"),r=!0,u&&k.enter(o,e),t&&k.enter(q,e),f(v))}function f(a){if(r){var b=100*a+"%";p.css("width",b),s=a,c.cancel(l),l=c(function(){g()},250)}}function g(){if(!(h()>=1)){var a=0,b=h();a=b>=0&&.25>b?(3*Math.random()+3)/100:b>=.25&&.65>b?3*Math.random()/100:b>=.65&&.9>b?2*Math.random()/100:b>=.9&&.99>b?.005:0;var c=h()+a;f(c)}}function h(){return s}function i(){s=0,r=!1}function j(){k||(k=a.get("$animate")),d.$broadcast("cfpLoadingBar:completed"),f(1),c.cancel(m),m=c(function(){var a=k.leave(o,i);a&&a.then&&a.then(i),k.leave(q)},500)}var k,l,m,n=this.parentSelector,o=angular.element(this.loadingBarTemplate),p=o.find("div").eq(0),q=angular.element(this.spinnerTemplate),r=!1,s=0,t=this.includeSpinner,u=this.includeBar,v=this.startSize;return{start:e,set:f,status:h,inc:g,complete:j,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}(),function(a,b){b.module("angular-md5",["gdi2290.md5"]),b.module("ngMd5",["gdi2290.md5"]),b.module("gdi2290.md5",["gdi2290.gravatar-filter","gdi2290.md5-service","gdi2290.md5-filter"]),b.module("gdi2290.gravatar-filter",[]).filter("gravatar",["md5",function(a){var b={};return function(c,d){return b[c]||(d=d?a.createHash(d.toString().toLowerCase()):"",b[c]=c?a.createHash(c.toString().toLowerCase()):d),b[c]}}]),b.module("gdi2290.md5-filter",[]).filter("md5",["md5",function(a){return function(b){return b?a.createHash(b.toString().toLowerCase()):b}}]),b.module("gdi2290.md5-service",[]).factory("md5",[function(){var a={createHash:function(a){var b,c,d,e,f,g,h,i,j,k,l=function(a,b){return a<<b|a>>>32-b},m=function(a,b){var c,d,e,f,g;return e=2147483648&a,f=2147483648&b,c=1073741824&a,d=1073741824&b,g=(1073741823&a)+(1073741823&b),c&d?2147483648^g^e^f:c|d?1073741824&g?3221225472^g^e^f:1073741824^g^e^f:g^e^f},n=function(a,b,c){return a&b|~a&c},o=function(a,b,c){return a&c|b&~c},p=function(a,b,c){return a^b^c},q=function(a,b,c){return b^(a|~c)},r=function(a,b,c,d,e,f,g){return a=m(a,m(m(n(b,c,d),e),g)),m(l(a,f),b)},s=function(a,b,c,d,e,f,g){return a=m(a,m(m(o(b,c,d),e),g)),m(l(a,f),b)},t=function(a,b,c,d,e,f,g){return a=m(a,m(m(p(b,c,d),e),g)),m(l(a,f),b)},u=function(a,b,c,d,e,f,g){return a=m(a,m(m(q(b,c,d),e),g)),m(l(a,f),b)},v=function(a){for(var b,c=a.length,d=c+8,e=(d-d%64)/64,f=16*(e+1),g=new Array(f-1),h=0,i=0;c>i;)b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|a.charCodeAt(i)<<h,i++;return b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|128<<h,g[f-2]=c<<3,g[f-1]=c>>>29,g},w=function(a){var b,c,d="",e="";for(c=0;3>=c;c++)b=a>>>8*c&255,e="0"+b.toString(16),d+=e.substr(e.length-2,2);return d},x=[],y=7,z=12,A=17,B=22,C=5,D=9,E=14,F=20,G=4,H=11,I=16,J=23,K=6,L=10,M=15,N=21;for(x=v(a),h=1732584193,i=4023233417,j=2562383102,k=271733878,b=x.length,c=0;b>c;c+=16)d=h,e=i,f=j,g=k,h=r(h,i,j,k,x[c+0],y,3614090360),k=r(k,h,i,j,x[c+1],z,3905402710),j=r(j,k,h,i,x[c+2],A,606105819),i=r(i,j,k,h,x[c+3],B,3250441966),h=r(h,i,j,k,x[c+4],y,4118548399),k=r(k,h,i,j,x[c+5],z,1200080426),j=r(j,k,h,i,x[c+6],A,2821735955),i=r(i,j,k,h,x[c+7],B,4249261313),h=r(h,i,j,k,x[c+8],y,1770035416),k=r(k,h,i,j,x[c+9],z,2336552879),j=r(j,k,h,i,x[c+10],A,4294925233),i=r(i,j,k,h,x[c+11],B,2304563134),h=r(h,i,j,k,x[c+12],y,1804603682),k=r(k,h,i,j,x[c+13],z,4254626195),j=r(j,k,h,i,x[c+14],A,2792965006),i=r(i,j,k,h,x[c+15],B,1236535329),h=s(h,i,j,k,x[c+1],C,4129170786),k=s(k,h,i,j,x[c+6],D,3225465664),j=s(j,k,h,i,x[c+11],E,643717713),i=s(i,j,k,h,x[c+0],F,3921069994),h=s(h,i,j,k,x[c+5],C,3593408605),k=s(k,h,i,j,x[c+10],D,38016083),j=s(j,k,h,i,x[c+15],E,3634488961),i=s(i,j,k,h,x[c+4],F,3889429448),h=s(h,i,j,k,x[c+9],C,568446438),k=s(k,h,i,j,x[c+14],D,3275163606),j=s(j,k,h,i,x[c+3],E,4107603335),i=s(i,j,k,h,x[c+8],F,1163531501),h=s(h,i,j,k,x[c+13],C,2850285829),k=s(k,h,i,j,x[c+2],D,4243563512),j=s(j,k,h,i,x[c+7],E,1735328473),i=s(i,j,k,h,x[c+12],F,2368359562),h=t(h,i,j,k,x[c+5],G,4294588738),k=t(k,h,i,j,x[c+8],H,2272392833),j=t(j,k,h,i,x[c+11],I,1839030562),i=t(i,j,k,h,x[c+14],J,4259657740),h=t(h,i,j,k,x[c+1],G,2763975236),k=t(k,h,i,j,x[c+4],H,1272893353),j=t(j,k,h,i,x[c+7],I,4139469664),i=t(i,j,k,h,x[c+10],J,3200236656),h=t(h,i,j,k,x[c+13],G,681279174),k=t(k,h,i,j,x[c+0],H,3936430074),j=t(j,k,h,i,x[c+3],I,3572445317),i=t(i,j,k,h,x[c+6],J,76029189),h=t(h,i,j,k,x[c+9],G,3654602809),k=t(k,h,i,j,x[c+12],H,3873151461),j=t(j,k,h,i,x[c+15],I,530742520),i=t(i,j,k,h,x[c+2],J,3299628645),h=u(h,i,j,k,x[c+0],K,4096336452),k=u(k,h,i,j,x[c+7],L,1126891415),j=u(j,k,h,i,x[c+14],M,2878612391),i=u(i,j,k,h,x[c+5],N,4237533241),h=u(h,i,j,k,x[c+12],K,1700485571),k=u(k,h,i,j,x[c+3],L,2399980690),j=u(j,k,h,i,x[c+10],M,4293915773),i=u(i,j,k,h,x[c+1],N,2240044497),h=u(h,i,j,k,x[c+8],K,1873313359),k=u(k,h,i,j,x[c+15],L,4264355552),j=u(j,k,h,i,x[c+6],M,2734768916),i=u(i,j,k,h,x[c+13],N,1309151649),h=u(h,i,j,k,x[c+4],K,4149444226),k=u(k,h,i,j,x[c+11],L,3174756917),j=u(j,k,h,i,x[c+2],M,718787259),i=u(i,j,k,h,x[c+9],N,3951481745),h=m(h,d),i=m(i,e),j=m(j,f),k=m(k,g);var O=w(h)+w(i)+w(j)+w(k);return O.toLowerCase()}};return a}])}(this,this.angular,void 0),function(a,b,c){"use strict";b.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(a,d){function e(){var a,e,f,i;for(a in h)k(g[a])&&d.cookies(a,c);for(a in g)e=g[a],b.isString(e)||(e=""+e,g[a]=e),e!==h[a]&&(d.cookies(a,e),i=!0);if(i){i=!1,f=d.cookies();for(a in g)g[a]!==f[a]&&(k(f[a])?delete g[a]:g[a]=f[a],i=!0)}}var f,g={},h={},i=!1,j=b.copy,k=b.isUndefined;return d.addPollFn(function(){var b=d.cookies();f!=b&&(f=b,j(b,h),j(b,g),i&&a.$apply())})(),i=!0,a.$watch(e),g}]).factory("$cookieStore",["$cookies",function(a){return{get:function(c){var d=a[c];return d?b.fromJson(d):d},put:function(c,d){a[c]=b.toJson(d)},remove:function(b){delete a[b]}}}])}(window,window.angular),angular.module("cgGrid",["cgGrid.tpls","cgGrid.lodash","cgGrid.config","cgGrid.jsonUtil","cgGrid.gridFactory","cgGrid.autoUpdateRunner","cgGrid.gridUtil","cgGrid.dhtmlxGrid"]),angular.module("cgGrid.tpls",[]),angular.module("cgGrid.lodash",[]).constant("_",window._),angular.module("cgGrid.config",["cgGrid.lodash"]).factory("GridConfig",function(){return{width:"700px",height:"350px",autoUpdate:!1,autoUpdateInterval:5e3,imagePath:"assets/dhtmlx/imgs/",skin:"modern",pagingSkin:"bricks",paging:!0,recordsPerPage:500,getGridServiceBaseUrl:"api/GridService"}}),angular.module("cgGrid.jsonUtil",["cgGrid.lodash"]).factory("JsonUtil",["_",function(a){function b(b){return a.keys(b)}function c(b,c){return a.range(b).map(function(){return c})}function d(d){var e=a.map(d,function(b,c){return{id:++c,data:a.values(b)}}),f=b(d[0]),g={headings:f.join(","),filters:c(f.length,"#text_filter").join(","),sortings:c(f.length,"str").join(","),data:{rows:e}};return g}return{jsonToArray:d}}]),angular.module("cgGrid.gridFactory",["cgGrid.config","cgGrid.jsonUtil"]).factory("GridFactory",["GridConfig","$http","$location","$log","JsonUtil",function c(a,b,d,e,f){function g(){var g=a.getGridServiceBaseUrl+d.url();return b.get(g).success(function(a){c.data=f.jsonToArray(a)}).error(function(){e.error("Failed to fetch data for "+g)})}return c.data={},c.getData=g,c}]),angular.module("cgGrid.autoUpdateRunner",["cgGrid.gridFactory"]).factory("AutoUpdateRunner",["$log","$interval","GridFactory",function(a,b,c){function d(c,d){a.info("started auto update");var e=this,f=d.autoUpdateInterval;c.intervalPromise=b(function(){e.checkForUpdates(c)},f)}function e(b){function d(){b.gridRows=c.data.data.rows.length}a.info("checking for updates"),c.getData().then(d)}function f(c){a.info("killed auto update"),b.cancel(c.intervalPromise)||a.error("Failed to cancel interval")}return{startAutoUpdate:d,checkForUpdates:e,killAutoUpdate:f}}]),angular.module("cgGrid.gridUtil",["cgGrid.gridFactory","cgGrid.jsonUtil"]).factory("GridUtil",["GridFactory","$compile","JsonUtil",function(a,b,c){function d(a,c){a.gridElement.style.height=a.height,a.gridElement.style.width=a.width,a.pagingElement.style.width=a.width;var d=new dhtmlXGridObject(a.gridElement);d.setImagePath(a.imagePath),d.enablePaging(a.paging,a.recordsPerPage,5,a.pagingElement,!0),d.setPagingSkin(a.pagingSkin),d.setSkin(a.skin),d.setHeader(a.headings),d.attachHeader(a.filters),d.setColSorting(a.sortings||""),d.init(),d.parse(a.data,"json"),b(angular.element(a.gridElement).contents())(c)}function e(b,c){var d=this,e=function(){_.extend(b,a.data),d.renderGrid(b,c)};a.getData().then(e)}function f(a,b){_.extend(a,b.options),_.isUndefined(b.options.data)?this.remoteInitialize(a,b):this.resolveDataFormatAndRenderGrid(a,b)}function g(a,b){_.isArray(a.data)&&_.extend(a,c.jsonToArray(a.data)),this.renderGrid(a,b)}return{renderGrid:d,remoteInitialize:e,resolveLocalInitialize:f,resolveDataFormatAndRenderGrid:g}}]),angular.module("cgGrid.dhtmlxGrid",["cgGrid.config","cgGrid.jsonUtil","cgGrid.gridUtil","cgGrid.lodash","cgGrid.autoUpdateRunner"]).directive("dhtmlxGrid",["GridConfig","$compile","JsonUtil","$interval","$log","GridUtil","AutoUpdateRunner","_",function(a,b,c,d,e,f,g,h){function i(b,c){var d=c.children(),i={gridElement:d[0],pagingElement:d[1]};h.extend(i,a),h.isUndefined(b.options)?f.remoteInitialize(i,b):f.resolveLocalInitialize(i,b),i.autoUpdate&&g.startAutoUpdate(b,i),b.$watch("gridRows",function(){i.autoUpdate&&h.isUndefined(b.options)&&f.remoteInitialize(i,b)}),b.$on("$destroy",function(){i.autoUpdate&&g.killAutoUpdate(b),e.info("killed auto update")})}return{template:"<div></div><div></div>",scope:{options:"="},restrict:"E",link:i}}]),angular.module("cgForm",["cgForm.tpls","cgForm.lodash","cgForm.formConfig","cgForm.templateFactory","cgForm.initFocus","cgForm.jQuery","cgForm.scrollTop","cgForm.ngEnter","cgForm.myFocus","cgForm.formElement","cgForm.formService","cgForm.joelpurra","cgForm.schemaFactory","cgForm.schemaResolver","cgForm.standardForm","cgForm.timelog","cgForm.surveyForm","cgForm.tableForm"]),angular.module("cgForm.tpls",["template/formElement/checkbox.html","template/formElement/control-group-heading.html","template/formElement/control-group.html","template/formElement/dropdown.html","template/formElement/dynamic_dropdown.html","template/formElement/gps.html","template/formElement/hidden.html","template/formElement/label-heading.html","template/formElement/label.html","template/formElement/lookup.html","template/formElement/password.html","template/formElement/radio-inline.html","template/formElement/radio.html","template/formElement/readonly.html","template/formElement/select_singletext.html","template/formElement/select_text.html","template/formElement/suggest.html","template/formElement/text.html","template/formElement/text_select.html","template/formElement/textarea.html","template/standardForm/standardForm.html","template/surveyForm/surveyForm.html"]),angular.module("cgForm.lodash",[]).constant("_",window._),angular.module("cgForm.formConfig",["cgForm.lodash"]).factory("FormConfig",function(){return{submitUrl:"api/entity/",resourceBaseUrl:"api/entity/",lookupBaseUrl:"api/survey/lookup/",crossFlowBaseUrl:"api/survey/crossFlow",crossCheckBaseUrl:"api/survey/crossCheck",dynamicDropdownBaseUrl:"api/survey/dynamicDropdown",gpsServiceUrl:"api/gps",submitLabel:"Save",style:"well"}}),angular.module("cgForm.templateFactory",[]).factory("TemplateFactory",["$http","$templateCache",function(a,b){function c(c){var d="template/formElement/"+c+".html";return a.get(d,{cache:b})}return{get:c}}]),angular.module("cgForm.initFocus",[]).directive("initFocus",["$timeout",function(a){function b(b,c,d){function e(){c.focus()}"false"!==d.initFocus&&a(e,0)}return{restrict:"A",link:b}}]),angular.module("cgForm.jQuery",[]).constant("jQuery",window.jQuery),angular.module("cgForm.scrollTop",["cgForm.jQuery"]).directive("scrollTop",["$timeout","jQuery",function(a,b){function c(c,d,e){function f(){b("body, html").animate({scrollTop:b(d).offset().top},100)}return"false"==e.scrollTop?!1:void a(f,0)}return{link:c}}]),angular.module("cgForm.ngEnter",[]).directive("ngEnter",function(){function a(a,b,c){b.bind("keypress",function(b){13!==b.charCode||b.shiftKey||a.$apply(c.ngEnter)})}return{restrict:"A",link:a}}),angular.module("cgForm.myFocus",[]).directive("myFocus",function(){return{link:function(a,b,c){b.bind("focus",function(){a.$apply(c.myFocus)})}}}),angular.module("cgForm.formElement",["cgForm.templateFactory","cgForm.initFocus","cgForm.scrollTop","cgForm.ngEnter","cgForm.myFocus"]).directive("formElement",["$http","$compile","$templateCache","TemplateFactory",function(a,b,c,d){function e(a,c,e){a.config=a.$eval(e.config),e.$observe("config",function(){a.config=a.$eval(e.config)});var f="heading"===a.config.type,g=f?"label-heading":"label";d.get(g).then(function(e){c.html(e.data),b(c)(a),f||d.get(a.config.type).then(function(d){c.find("div.controls").html(d.data),b(c)(a)})})}return{replace:!0,restrict:"E",template:"<div></div>",scope:!0,link:e}}]),angular.module("cgForm.formService",["cgForm.formConfig","cgForm.lodash","ui.router"]).factory("FormService",["FormConfig","$http","$location","_","$stateParams","$log",function(a,b,c,d,e){function f(){return b.get(a.gpsServiceUrl).then(function(a){var b=a.data;return 0!==b.latitude&&0!==b.longitude?b:void alert("GPS Not Fixed.Check whether the device is inserted properly and device light is blinking and Try Again")},function(){alert("GPS Server not Running")})}function g(a,c){return b.post(a,c)}function h(a){return b.get(a)}function i(b){var d=c.url().split("/"),e=d[d.length-2],f=a.resourceBaseUrl+b+"/"+e;return h(f)}function j(b){var c=b.datastore;return delete b.datastore,g(a.submitUrl+c,b)}function k(b){return b.refId=e[b.ref],g(a.lookupBaseUrl,b)}function l(b){return b.refId=e[b.ref],g(a.crossCheckBaseUrl,b)}function m(b){return angular.forEach(b,function(a){a.refId=e[a.ref]}),g(a.crossFlowBaseUrl,b)}function n(b){return g(a.dynamicDropdownBaseUrl,b)}return{getResource:i,postResource:j,getLookupData:k,getCrossCheckData:l,checkCrossFlow:m,getDynamicDropdownData:n,getGPS:f}}]),angular.module("cgForm.joelpurra",[]).factory("JoelPurra",["$window",function(a){var b=a.JoelPurra;return b.PlusAsTab.setOptions({key:13}),b}]),angular.module("cgForm.schemaFactory",["cgForm.lodash"]).factory("SchemaFactory",["_",function(a){function b(b){if(a.isUndefined(this[b]))throw"Schema Not found for "+b;return this[b]}function c(a,b){this[a]=b}return{get:b,put:c}}]),angular.module("cgForm.schemaResolver",["cgForm.schemaFactory","cgForm.lodash","ui.router","cgForm.formConfig"]).factory("SchemaResolver",["SchemaFactory","_","$state","FormConfig",function(a,b,c,d){function e(e){var f=b.clone(e.options)||b.clone(a.get(c.current.name));return b.extend(f,d)}return{resolve:e}}]),angular.module("cgForm.standardForm",["cgForm.formElement","cgForm.formConfig","cgForm.formService","cgForm.lodash","ui.router","cgForm.schemaFactory","cgForm.joelpurra"]).directive("standardForm",["FormConfig","_","SchemaFactory","$state","FormService","$rootScope","JoelPurra",function(a,b,c,d,e,f){return{templateUrl:"template/standardForm/standardForm.html",restrict:"E",replace:!0,scope:{options:"=",randomtotal:"@",randomsize:"@",formdata:"="},link:function(g,h){function i(){return Math.floor(Math.random()*g.randomtotal+1)}function j(){for(var a;;)if(a=i(),!b.contains(l,a))break;return a}Date.prototype.today=function(){return this.getFullYear()+"-"+(this.getMonth()+1<10?"0":"")+(this.getMonth()+1)+"-"+(this.getDate()<10?"0":"")+this.getDate()},Date.prototype.timeNow=function(){return(this.getHours()<10?"0":"")+this.getHours()+":"+(this.getMinutes()<10?"0":"")+this.getMinutes()+":"+(this.getSeconds()<10?"0":"")+this.getSeconds()};var k=new Date;f.timestamp=k.today()+" "+k.timeNow(),g.schema=angular.copy(g.options)||angular.copy(c.get(d.current.name));var l=[],m=[];g.randomsize=angular.isDefined(g.randomsize)?g.randomsize:0;for(var n=0;n<g.randomsize;n++)l.push(j());g.randomsize>0&&g.randomtotal>0&&(angular.forEach(g.schema.properties,function(a){"hidden"===a.type&&m.push(a)}),b.remove(g.schema.properties,{type:"hidden"}),angular.forEach(l,function(a){m.push(g.schema.properties[a])}),g.schema.properties=m),console.log("random properties"),console.log(g.schema.properties),g.data=g.formdata||{},g.schema=b.extend(g.schema,a),angular.forEach(g.schema.properties,function(a){a.initFocus=!1,a.scrollTop=!1,"lookup"===a.type&&e.getLookupData(a.lookup).then(function(b){a.type="radio",a.items=b.data})}),angular.forEach(g.schema.properties,function(a){"datastore"!==a.name&&"hidden"===a.type&&(a.value=f.$eval(a.value)),"hidden"===a.type&&(g.data[a.name]=a.value)});var o=b.filter(g.schema.properties,{type:"checkbox"});b.each(o,function(a){g.data[a.name]={}}),g.data.datastore=b.find(g.schema.properties,{name:"datastore"}).value,h.plusAsTab(),h.bValidator()},controller:["$scope","$element","$state","$stateParams",function(a,b,c,d){function f(b){var f=function(){c.go(a.schema.onSave,d)},g=function(){throw new Error("Failed to post data")};e.postResource(b).then(f,g)}a.onSubmit=function(a){b.data("bValidator").validate()&&f(a)},a.getGps=function(){a.data.gps_latitude="12.7435",a.data.gps_longitude="17.9872"}}]}}]),angular.module("cgForm.timelog",[]).factory("TimeLogFactory",function(){return{getCurrentTime:function(){var a=new Date;return a.setHours(a.getHours()+5),a.setMinutes(a.getMinutes()+30),a.toISOString().slice(0,19).replace("T"," ")}}}),angular.module("cgForm.surveyForm",["cgForm.formElement","cgForm.formConfig","cgForm.schemaFactory","cgForm.formService","cgForm.lodash","ui.router","cgForm.timelog"]).directive("surveyForm",["FormConfig","_","SchemaFactory","$state","FormService","$rootScope","$timeout","$q","TimeLogFactory",function(a,b,c,d,e,f,g,h,i){return{templateUrl:"template/surveyForm/surveyForm.html",restrict:"E",replace:!0,scope:{options:" = ",fnct:"&onSave"},controller:"surveyFormCtrl",link:function(g,j){f.timestamp=i.getCurrentTime(),g.schema=angular.copy(g.options)||angular.copy(c.get(d.current.name)),g.schema.properties.push({flow:"",type:"heading",label:"Section Completed. Press Enter to Continue ",valdn:""}),g.data={},g.schema=b.extend(g.schema,a),angular.forEach(g.schema.properties,function(a){"lookup"===a.type&&e.getLookupData(a.lookup).then(function(c){a.type="radio",a.items=c.data;var d=b.findIndex(g.flow.properties,{name:a.name});-1!=d&&(g.flow.properties[d].type="radio",g.flow.properties[d].items=c.data)}),b.isEmpty(a.crossCheck)||e.getCrossCheckData(a.crossCheck).then(function(c){var d=a.crossCheck.condition.replace("{value}",c.data.value);a.valdn=d;var e=b.findIndex(g.flow.properties,{name:a.name});-1!=e&&(g.flow.properties[e].valdn=d)})});var k=[],l=[];angular.forEach(g.schema.properties,function(a,b){a.crossFlow&&a.crossFlow.length>0&&(k.push(e.checkCrossFlow(a.crossFlow)),l.push(b))});var m=0;h.all(k).then(function(a){angular.forEach(a,function(a){a.data.check===!1&&(g.schema.properties[l[m]].crossFlowCheck=!1),m++}),g.schema.properties=b.remove(g.schema.properties,function(a){return angular.isUndefined(a.crossFlowCheck)?!0:a.crossFlowCheck!==!1}),g.flow.properties.push(angular.copy(g.schema.properties[++o])),g.flowSeq++,g.flowIndex++}),angular.forEach(g.schema.properties,function(a){"datastore"!==a.name&&"hidden"===a.type&&(a.value=f.$eval(a.value)),"hidden"===a.type&&(g.data[a.name]=a.value)});var n=b.filter(g.schema.properties,{type:"checkbox"});b.each(n,function(a){g.data[a.name]={}}),g.datastore=b.find(g.schema.properties,{name:"datastore"}).value,e.getResource(g.datastore).then(function(a){delete a.data.timelog,delete a.data.endtime,delete a.data.surveyor,angular.extend(g.data,a.data)}),j.bValidator(),g.flow={properties:[]};var o=-1;g.flowSeq=-1,g.flowIndex=-1;for(var p=0;p<g.schema.properties.length;p++){var q=g.schema.properties[p];if("hidden"!==q.type&&"heading"!==q.type)break;g.flow.properties.push(angular.copy(q)),o++,g.flowSeq++,g.flowIndex++}}}}]),angular.module("cgForm.surveyForm").controller("surveyFormCtrl",["$scope","$element","FormService","$state","$stateParams","_","$log",function($scope,$element,FormService,$state,$stateParams,_,$log){function postData(){var done=function(){if(""!==$scope.schema.onSave)$state.go($scope.schema.onSave,$stateParams);else if(""!==$scope.schema.condition){var data=$scope.data,transition=eval($scope.schema.condition)?$scope.schema.success:$scope.schema.fail;$state.go(transition,$stateParams)}else $scope.fnct({data:$scope.data})},fail=function(){throw new Error("Failed to post data")};angular.forEach($scope.data,function(a,b){if(_.isObject(a)){var c=_.keys(a,function(a){return a});$scope.data[b]=c.join(";")}}),FormService.postResource($scope.data).then(done,fail)}function isValidForm(){return $element.data("bValidator").validate()}function handleFlow(){$scope.flowSeq++;var a=$scope.schema.properties[$scope.flowSeq];if(!_.isUndefined(a)){if("radio"==a.type){var b=angular.copy($scope.schema.properties[$scope.flowSeq].items);$scope.schema.properties[$scope.flowSeq].items=b.filter(function(a){return""==a.flow?!0:$scope.$eval(a.flow)})}if("checkbox"==a.type)$scope.data[a.name]={};else if("dynamic_dropdown"==a.type){var c=angular.copy(a.metadata);c.refValue=$scope.$eval(a.metadata.refValue),FormService.getDynamicDropdownData(c).then(function(a){var b=$scope.flowSeq;$scope.schema.properties[$scope.flowSeq].items=a.data,$scope.flow.properties.splice($scope.flow.properties.length-1,1),$scope.flow.properties.push($scope.schema.properties[b])},function(){$log.error("Failed to fetch data")})}}return a?void(0===a.flow.length||$scope.$eval(a.flow)===!0?($scope.flowIndex=$scope.flowSeq,$scope.flow.properties.push(angular.copy($scope.schema.properties[$scope.flowIndex]))):handleFlow()):void postData()}$scope.showNext=function(){if(isValidForm())if($scope.flowIndex<$scope.schema.properties.length-1){handleFlow();var a=$scope.schema.properties[$scope.flowIndex].valdn,b=a.match(/{.*}/);if(b){var c=$scope.$eval(b[0].replace("{","").replace("}",""));_.last($scope.flow.properties).valdn=a.replace(/{.*}/,c)}}else postData()},$scope.jumpFlow=function(a){var b=_.findIndex($scope.flow.properties,{name:a}),c=_.findIndex($scope.schema.properties,{name:a});$scope.flow.properties=_.initial($scope.flow.properties,$scope.flow.properties.length-1-b),$scope.flowIndex=c,$scope.flowSeq=$scope.flowIndex,_.each($scope.data,function(a,b){b=b.split("_")[0];var c=_.findIndex($scope.flow.properties,{name:b});-1===c&&delete $scope.data[b]})},$scope.getGps=function(){FormService.getGPS().then(function(a){$scope.data.gps_latitude=a.latitude,$scope.data.gps_longitude=a.longitude})}}]),angular.module("cgForm.tableForm",["cgForm.formElement","cgForm.formConfig","cgForm.formService","cgForm.lodash","cgForm.schemaFactory","ui.router","cgForm.joelpurra","cgForm.timelog","cgForm.schemaResolver"]).directive("tableForm",["FormConfig","_","SchemaFactory","$state","FormService","$rootScope","JoelPurra","TimeLogFactory","SchemaResolver",function(a,b,c,d,e,f,g,h){function i(a,g){f.timestamp=h.getCurrentTime(),a.data={},a.schema=angular.copy(a.options)||angular.copy(c.get(d.current.name)),b.each(a.schema.properties,function(b){"datastore"!==b.name&&"hidden"===b.type&&(b.value=f.$eval(b.value)),"hidden"===b.type&&(a.data[b.name]=b.value)});var i=b.filter(a.schema.properties,{type:"checkbox"});b.each(i,function(b){a.data[b.name]={}}),a.datastore=b.find(a.schema.properties,{name:"datastore"}).value,a.schema.hiddenElements=b.filter(a.schema.properties,{type:"hidden"}),b.remove(a.schema.properties,{type:"hidden"}),e.getResource(a.datastore).then(function(b){delete b.data.timelog,delete b.data.endtime,angular.extend(a.data,b.data)}),g.plusAsTab(),g.bValidator()}return{templateUrl:function(a,b){return b.templateUrl},restrict:"E",replace:!0,scope:{options:" = "},link:i,controller:"tableFormCtrl"}}]),angular.module("cgForm.tableForm").controller("tableFormCtrl",["$scope","$element","$state","$stateParams","FormService",function($scope,$element,$state,$stateParams,FormService){function isValidForm(){return $element.data("bValidator").validate()}function postData(data){var done=function(){if(""!==$scope.schema.onSave)$state.go($scope.schema.onSave,$stateParams);else if(""!==$scope.schema.condtion&&""===$scope.schema.crossEntity){var data=$scope.data,transition=eval($scope.schema.condition)?$scope.schema.success:$scope.schema.fail;$state.go(transition,$stateParams)}else if(""!==$scope.schema.crossEntity){var params=$scope.schema.crossEntity.split(";"),entity=params[0],entityId=params[1];FormService.getResource(entity,$stateParams[entityId]).then(function(resp){var data=resp.data,transition=eval($scope.schema.condition)?$scope.schema.success:$scope.schema.fail;$state.go(transition,$stateParams)})}else $scope.fnct({data:$scope.data})},fail=function(){throw new Error("Failed to post data")};FormService.postResource(data).then(done,fail)}$scope.onSubmit=function(a){isValidForm()&&postData(a)},$scope.alcoholFreqFocus=function(){}}]),angular.module("template/formElement/checkbox.html",[]).run(["$templateCache",function(a){a.put("template/formElement/checkbox.html",'<div class="checkbox" ng-repeat="item in config.items">\n    <label>\n        <div ng-if="$index==0">\n            <input data-bvalidator="{{config.valdn}}" data-bvalidator-msg="Please Select an option" type="checkbox"\n                   name="{{config.name}}[]"\n                   value="{{item.value}}"\n                   ng-model="data[config.name][item.value]" init-focus="{{config.initFocus}}"/>\n            {{item.text}}\n        </div>\n        <div ng-if="$index!=0">\n            <input type="checkbox"\n                   name="{{config.name}}[]"\n                   value="{{item.value}}"\n                   ng-model="data[config.name][item.value]"/>\n            {{item.text}}\n\n        </div>\n\n    </label>\n</div>')}]),angular.module("template/formElement/control-group-heading.html",[]).run(["$templateCache",function(a){a.put("template/formElement/control-group-heading.html",'<div class="control-group" id="{{config.name}}-control-group" scroll-top="{{config.scrollTop}}">\n    <div class="control-label" >\n        <div class="alert alert-error" style="font-weight:bold">{{config.label}}<a data-html="true" ng-if="config.help" popover="{{config.help}}" popover-trigger="mouseenter">Help</a></div>\n    </div>\n    <div class="controls"></div>\n</div>')}]),angular.module("template/formElement/control-group.html",[]).run(["$templateCache",function(a){a.put("template/formElement/control-group.html",'<div class="control-group" id="{{config.name}}-control-group" scroll-top="{{config.scrollTop}}">\n    <div class="control-label">\n        <label style="font-weight:bold">{{config.label}} {{config.dynamicValue}}<a  ng-if="config.help" popover="{{config.help}}" popover-trigger="mouseenter">Help</a></label>\n        <div ng-if="config.image!=\'\'"><img ng-src="{{config.image}}" /></div>\n    </div>\n    <div class="controls" ng-click="jumpFlow(config.name)"></div>\n\n</div>')}]),angular.module("template/formElement/dropdown.html",[]).run(["$templateCache",function(a){a.put("template/formElement/dropdown.html",'<div class="row">\n    <div class="col-lg-3">\n\n        <select class="form-control" data-bvalidator="{{config.valdn}}"\n                data-bvalidator-msg="Please select an option"\n                ng-model="data[config.name]"\n                init-focus>\n            <option ng-repeat="item in config.items" value="{{item.value}}" init-focus="{{config.initFocus}}">\n                {{item.text}}\n            </option>\n\n        </select>\n    </div>\n</div>\n')}]),angular.module("template/formElement/dynamic_dropdown.html",[]).run(["$templateCache",function(a){a.put("template/formElement/dynamic_dropdown.html",'<div class="row">\n    <div class="col-lg-3">\n        <select class="form-control" data-bvalidator="{{config.valdn}}"\n                data-bvalidator-msg="Please select an option"\n                ng-model="data[config.name]"\n                init-focus>\n            <option ng-repeat="item in config.items" value="{{item.value}}" init-focus="{{config.initFocus}}">\n                {{item.text}}\n            </option>\n\n        </select>\n    </div>\n</div>\n')}]),angular.module("template/formElement/gps.html",[]).run(["$templateCache",function(a){a.put("template/formElement/gps.html",'<label>Latitude</label>\n<div class="row">\n    <div class="col-lg-3">\n        <input class="form-control" type="text" ng-model="data[config.name+\'_latitude\']"\n               readonly="readonly"/>\n    </div>\n</div>\n<label>Longitude</label>\n<div class="row">\n    <div class="col-lg-3">\n        <input class="form-control" type="text"\n               ng-model="data[config.name+\'_longitude\']"\n               readonly="readonly"/> &nbsp;\n\n    </div>\n    <a class="btn btn-danger btn-small" href="" ng-click="getGps()">Get GPS</a>\n</div>\n')}]),angular.module("template/formElement/hidden.html",[]).run(["$templateCache",function(a){a.put("template/formElement/hidden.html",'<input type="text" value="{{config.value}}" ng-model="data[config.name]" style="display: none;" />')}]),angular.module("template/formElement/label-heading.html",[]).run(["$templateCache",function(a){a.put("template/formElement/label-heading.html",'<div id="{{config.name}}-control-group" scroll-top="{{config.scrollTop}}">\n    <div class="alert alert-danger" style="font-weight:bold">{{config.label}}<a ng-if="config.help"\n                                                                                popover="{{config.help}}"\n                                                                                popover-trigger="mouseenter">Help</a>\n    </div>\n</div>\n')}]),angular.module("template/formElement/label.html",[]).run(["$templateCache",function(a){a.put("template/formElement/label.html",'<div id="{{config.name}}-control-group" scroll-top="{{config.scrollTop}}">\n    <label ng-if="config.label">{{config.label}} {{config.dynamicValue}}<a data-html="true" ng-if="config.help"\n                                                                               popover="{{config.help}}"\n                                                                               popover-trigger="mouseenter">Help</a></label>\n\n    <div ng-if="config.image!=\'\'"><img ng-src="{{config.image}}"/></div>\n    <div class="controls" ng-click="jumpFlow(config.name)"></div>\n\n</div>\n')}]),angular.module("template/formElement/lookup.html",[]).run(["$templateCache",function(a){a.put("template/formElement/lookup.html",'<div class="radio" ng-repeat="item in config.items">\n    <label>\n        <div ng-if="$index==0"><input data-bvalidator="{{config.valdn}}" data-bvalidator-msg="Please select an option"\n                                      type="radio" name="{{config.name}}"\n                                      value="{{item.value}}" ng-model="data[config.name]"\n                                      init-focus="{{config.initFocus}}"/> {{item.text}}\n        </div>\n        <div ng-if="$index!=0"><input type="radio" name="{{config.name}}" value="{{item.value}}"\n                                      ng-model="data[config.name]"/> {{item.text}}\n        </div>\n    </label>\n</div>')}]),angular.module("template/formElement/password.html",[]).run(["$templateCache",function(a){a.put("template/formElement/password.html",'<div class="row">\n    <div class="col-lg-3">\n\n        <input class="form-control" type="password" data-bvalidator="{{config.valdn}}"\n               ng-model="data[config.name]" init-focus="{{config.initFocus}}"/>\n\n    </div>\n</div>\n')
}]),angular.module("template/formElement/radio-inline.html",[]).run(["$templateCache",function(a){a.put("template/formElement/radio-inline.html",'<label class="radio-inline" ng-repeat="item in config.items">\n    <div ng-if="$index==0"><input  data-bvalidator="{{config.valdn}}" data-bvalidator-msg="Please select an option" type="radio" name="{{config.name}}"\n                                   value="{{item.value}}" ng-model="data[config.name]" init-focus="{{config.initFocus}}"/> {{item.text}}\n    </div>\n    <div ng-if="$index!=0"><input  type="radio" name="{{config.name}}" value="{{item.value}}"\n                                   ng-model="data[config.name]"/> {{item.text}}\n    </div>\n</label>')}]),angular.module("template/formElement/radio.html",[]).run(["$templateCache",function(a){a.put("template/formElement/radio.html",'<div class="radio" ng-repeat="item in config.items">\n    <label>\n        <div ng-if="$index==0"><input data-bvalidator="{{config.valdn}}" data-bvalidator-msg="Please select an option"\n                                      type="radio" name="{{config.name}}"\n                                      value="{{item.value}}" ng-model="data[config.name]"\n                                      init-focus="{{config.initFocus}}"/> {{item.text}}\n        </div>\n        <div ng-if="$index!=0"><input type="radio" name="{{config.name}}" value="{{item.value}}"\n                                      ng-model="data[config.name]"/> {{item.text}}\n        </div>\n    </label>\n</div>')}]),angular.module("template/formElement/readonly.html",[]).run(["$templateCache",function(a){a.put("template/formElement/readonly.html",'<input class="form-control" type="text"  ng-model="data[config.name]" readonly="readonly"/>\n')}]),angular.module("template/formElement/select_singletext.html",[]).run(["$templateCache",function(a){a.put("template/formElement/select_singletext.html",'<div class="row">\n    <div class="col-lg-3">\n\n        <select class="form-control" data-bvalidator="required" data-bvalidator-msg="Please select an option"\n                ng-model="data[config.name+\'_unit\']" init-focus="{{config.initFocus}}">\n            <option value=""></option>\n            <option ng-repeat="item in config.items" value="{{item.value}}">{{item.text}}</option>\n        </select>\n    </div>\n</div>\n<div class="row">\n    <div class="col-lg-3">\n\n        <input class="form-control" type="text" data-bvalidator="{{config.valdn}}"\n               ng-model="data[config.name+\'_value\']" class="input-medium"/>\n    </div>\n</div>\n')}]),angular.module("template/formElement/select_text.html",[]).run(["$templateCache",function(a){a.put("template/formElement/select_text.html",'<div class="row">\n    <div class="col-lg-3">\n\n    <select class="form-control" data-bvalidator="required" data-bvalidator-msg="Please select an option"\n        ng-model="data[config.name+\'_unit\']" init-focus="{{config.initFocus}}">\n    <option value=""></option>\n    <option ng-repeat="item in config.items" value="{{item.value}}">{{item.text}}</option>\n</select>\n        </div></div>\n<div class="row">\n    <div class="col-lg-3">\n\n<span ng-repeat="item in config.items">\n    <input class="form-control" type="text" data-bvalidator="{{item.valdn}}"\n           ng-model="data[config.name+\'_value\']" class="input-medium" ng-if="data[config.name+\'_unit\']==item.value"\n           placeholder="{{item.value}}"/>\n</span>\n        </div></div>\n')}]),angular.module("template/formElement/suggest.html",[]).run(["$templateCache",function(a){a.put("template/formElement/suggest.html",'<div class="row">\n    <div class="col-lg-3">\n\n        <input class="form-control" type="text"\n               data-bvalidator="{{config.valdn}}"\n               ng-model="data[config.name]"\n               typeahead="item.text for item in config.items | filter:$viewValue"\n               init-focus="{{config.initFocus}}"/>\n\n    </div>\n</div>\n')}]),angular.module("template/formElement/text.html",[]).run(["$templateCache",function(a){a.put("template/formElement/text.html",'<div class="row">\n    <div class="col-lg-3">\n        <input type="text" data-bvalidator="{{config.valdn}}" id="{{config.name}}"\n               class="form-control" ng-model="data[config.name]" init-focus="{{config.initFocus}}"/>\n    </div>\n</div>\n')}]),angular.module("template/formElement/text_select.html",[]).run(["$templateCache",function(a){a.put("template/formElement/text_select.html",'<span ng-repeat="item in config.items">\n\n    <div class="row">\n        <div class="col-lg-3">\n\n            <input class="form-control" type="text" data-bvalidator="{{item.valdn}}"\n                   ng-model="data[config.name+\'_value\']" class="input-medium"\n                   ng-if="data[config.name+\'_unit\']==item.value"\n                   placeholder="{{item.value}}"/>\n        </div>\n    </div>\n</span>\n<div class="row">\n    <div class="col-lg-3">\n\n        <select class="form-control" data-bvalidator="required" data-bvalidator-msg="Please select an option"\n                ng-model="data[config.name+\'_unit\']" init-focus="{{config.initFocus}}">\n            <option value=""></option>\n            <option ng-repeat="item in config.items" value="{{item.value}}">{{item.text}}</option>\n        </select>\n    </div>\n</div>\n\n')}]),angular.module("template/formElement/textarea.html",[]).run(["$templateCache",function(a){a.put("template/formElement/textarea.html",'<div class="row">\n    <div class="col-lg-3">\n\n    <textarea class="form-control"  data-bvalidator="{{config.valdn}}" ng-model="data[config.name]" init-focus="{{config.initFocus}}" > </textarea>\n</div>\n    </div>\n')}]),angular.module("template/standardForm/standardForm.html",[]).run(["$templateCache",function(a){a.put("template/standardForm/standardForm.html",'<form ng-submit="onSubmit(data)" action="javascript:void(0)" role="form" class="well">\n\n    <div class="form-group" ng-repeat="element in schema.properties" >\n        <form-element config="{{element}}"></form-element>\n    </div>\n\n    <button class="btn btn-small btn-primary"\n            type="submit" data-plus-as-tab="false">Save\n    </button>\n\n</form>\n\n\n\n\n\n')}]),angular.module("template/surveyForm/surveyForm.html",[]).run(["$templateCache",function(a){a.put("template/surveyForm/surveyForm.html",'<div class="well"  ng-enter="showNext()">\n\n    <div class="form-group" ng-repeat="element in flow.properties">\n        <form-element config="{{element}}"></form-element>\n    </div>\n\n\n    <button class="btn btn-small btn-primary" ng-click="showNext()">\n        Next &#187;\n    </button>\n\n\n</div>\n\n\n\n\n\n')}]),function(a,b,c){"use strict";b.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var a="$$ngAnimateChildren";return function(c,d,e){var f=e.ngAnimateChildren;b.isString(f)&&0===f.length?d.data(a,!0):c.$watch(f,function(b){d.data(a,!!b)})}}).factory("$$animateReflow",["$$rAF","$document",function(a,b){var c=b[0].body;return function(b){return a(function(){c.offsetWidth+1;b()})}}]).config(["$provide","$animateProvider",function(d,e){function f(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.nodeType==q)return c}}function g(a){return a&&b.element(a)}function h(a){return b.element(f(a))}function i(a,b){return f(a)==f(b)}var j,k=b.noop,l=b.forEach,m=e.$$selectors,n=b.isArray,o=b.isString,p=b.isObject,q=1,r="$$ngAnimateState",s="$$ngAnimateChildren",t="ng-animate",u={running:!0};d.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest","$$jqLite",function(a,c,d,q,v,w,x,y,z,A){function B(a,b){var c=a.data(r)||{};return b&&(c.running=!0,c.structural=!0,a.data(r,c)),c.disabled||c.running&&c.structural}function C(a){var b,d=c.defer();return d.promise.$$cancelFn=function(){b&&b()},x.$$postDigest(function(){b=a(function(){d.resolve()})}),d.promise}function D(a){return p(a)?(a.tempClasses&&o(a.tempClasses)&&(a.tempClasses=a.tempClasses.split(/\s+/)),a):void 0}function E(a,b,c){c=c||{};var d={};l(c,function(a,b){l(b.split(" "),function(b){d[b]=a})});var e=Object.create(null);l((a.attr("class")||"").split(/\s+/),function(a){e[a]=!0});var f=[],g=[];return l(b&&b.classes||[],function(a,b){var c=e[b],h=d[b]||{};a===!1?(c||"addClass"==h.event)&&g.push(b):a===!0&&(c&&"removeClass"!=h.event||f.push(b))}),f.length+g.length>0&&[f.join(" "),g.join(" ")]}function F(a){if(a){var b=[],c={},e=a.substr(1).split(".");(q.transitions||q.animations)&&b.push(d.get(m[""]));for(var f=0;f<e.length;f++){var g=e[f],h=m[g];h&&!c[g]&&(b.push(d.get(h)),c[g]=!0)}return b}}function G(a,c,d,e){function f(a,b){var c=a[b],d=a["before"+b.charAt(0).toUpperCase()+b.substr(1)];return c||d?("leave"==b&&(d=c,c=null),w.push({event:b,fn:c}),t.push({event:b,fn:d}),!0):void 0}function g(b,c,f){function g(a){if(c){if((c[a]||k)(),++m<h.length)return;c=null}f()}var h=[];l(b,function(a){a.fn&&h.push(a)});var m=0;l(h,function(b,f){var h=function(){g(f)};switch(b.event){case"setClass":c.push(b.fn(a,i,j,h,e));break;case"animate":c.push(b.fn(a,d,e.from,e.to,h));break;case"addClass":c.push(b.fn(a,i||d,h,e));break;case"removeClass":c.push(b.fn(a,j||d,h,e));break;default:c.push(b.fn(a,h,e))}}),c&&0===c.length&&f()}var h=a[0];if(h){e&&(e.to=e.to||{},e.from=e.from||{});var i,j;n(d)&&(i=d[0],j=d[1],i?j?d=i+" "+j:(d=i,c="addClass"):(d=j,c="removeClass"));var m="setClass"==c,o=m||"addClass"==c||"removeClass"==c||"animate"==c,p=a.attr("class"),q=p+" "+d;if(O(q)){var r=k,s=[],t=[],u=k,v=[],w=[],x=(" "+q).replace(/\s+/g,".");return l(F(x),function(a){var b=f(a,c);!b&&m&&(f(a,"addClass"),f(a,"removeClass"))}),{node:h,event:c,className:d,isClassBased:o,isSetClassOperation:m,applyStyles:function(){e&&a.css(b.extend(e.from||{},e.to||{}))},before:function(a){r=a,g(t,s,function(){r=k,a()})},after:function(a){u=a,g(w,v,function(){u=k,a()})},cancel:function(){s&&(l(s,function(a){(a||k)(!0)}),r(!0)),v&&(l(v,function(a){(a||k)(!0)}),u(!0))}}}}}function H(a,c,d,e,f,g,h,i){function m(b){var e="$animate:"+b;x&&x[e]&&x[e].length>0&&w(function(){d.triggerHandler(e,{event:a,className:c})})}function n(){m("before")}function o(){m("after")}function p(){m("close"),i()}function q(){q.hasBeenRun||(q.hasBeenRun=!0,g())}function s(){if(!s.hasBeenRun){v&&v.applyStyles(),s.hasBeenRun=!0,h&&h.tempClasses&&l(h.tempClasses,function(a){j.removeClass(d,a)});var b=d.data(r);b&&(v&&v.isClassBased?J(d,c):(w(function(){var b=d.data(r)||{};H==b.index&&J(d,c,a)}),d.data(r,b))),p()}}var u=k,v=G(d,a,c,h);if(!v)return q(),n(),o(),s(),u;a=v.event,c=v.className;var x=b.element._data(v.node);if(x=x&&x.events,e||(e=f?f.parent():d.parent()),K(d,e))return q(),n(),o(),s(),u;var y=d.data(r)||{},z=y.active||{},A=y.totalActive||0,B=y.last,C=!1;if(A>0){var D=[];if(v.isClassBased){if("setClass"==B.event)D.push(B),J(d,c);else if(z[c]){var E=z[c];E.event==a?C=!0:(D.push(E),J(d,c))}}else if("leave"==a&&z["ng-leave"])C=!0;else{for(var F in z)D.push(z[F]);y={},J(d,!0)}D.length>0&&l(D,function(a){a.cancel()})}if(!v.isClassBased||v.isSetClassOperation||"animate"==a||C||(C="addClass"==a==d.hasClass(c)),C)return q(),n(),o(),p(),u;z=y.active||{},A=y.totalActive||0,"leave"==a&&d.one("$destroy",function(){var a=b.element(this),c=a.data(r);if(c){var d=c.active["ng-leave"];d&&(d.cancel(),J(a,"ng-leave"))}}),j.addClass(d,t),h&&h.tempClasses&&l(h.tempClasses,function(a){j.addClass(d,a)});var H=M++;return A++,z[c]=v,d.data(r,{last:v,active:z,index:H,totalActive:A}),n(),v.before(function(b){var e=d.data(r);b=b||!e||!e.active[c]||v.isClassBased&&e.active[c].event!=a,q(),b===!0?s():(o(),v.after(s))}),v.cancel}function I(a){var c=f(a);if(c){var d=b.isFunction(c.getElementsByClassName)?c.getElementsByClassName(t):c.querySelectorAll("."+t);l(d,function(a){a=b.element(a);var c=a.data(r);c&&c.active&&l(c.active,function(a){a.cancel()})})}}function J(a,b){if(i(a,v))u.disabled||(u.running=!1,u.structural=!1);else if(b){var c=a.data(r)||{},d=b===!0;!d&&c.active&&c.active[b]&&(c.totalActive--,delete c.active[b]),(d||!c.totalActive)&&(j.removeClass(a,t),a.removeData(r))}}function K(a,c){if(u.disabled)return!0;if(i(a,v))return u.running;var d,e,f;do{if(0===c.length)break;var g=i(c,v),h=g?u:c.data(r)||{};if(h.disabled)return!0;if(g&&(f=!0),d!==!1){var j=c.data(s);b.isDefined(j)&&(d=j)}e=e||h.running||h.last&&!h.last.isClassBased}while(c=c.parent());return!f||!d&&e}j=A,v.data(r,u);var L=x.$watch(function(){return z.totalPendingRequests},function(a){0===a&&(L(),x.$$postDigest(function(){x.$$postDigest(function(){u.running=!1})}))}),M=0,N=e.classNameFilter(),O=N?function(a){return N.test(a)}:function(){return!0};return{animate:function(a,b,c,d,e){return d=d||"ng-inline-animate",e=D(e)||{},e.from=c?b:null,e.to=c?c:b,C(function(b){return H("animate",d,h(a),null,null,k,e,b)})},enter:function(c,d,e,f){return f=D(f),c=b.element(c),d=g(d),e=g(e),B(c,!0),a.enter(c,d,e),C(function(a){return H("enter","ng-enter",h(c),d,e,k,f,a)})},leave:function(c,d){return d=D(d),c=b.element(c),I(c),B(c,!0),C(function(b){return H("leave","ng-leave",h(c),null,null,function(){a.leave(c)},d,b)})},move:function(c,d,e,f){return f=D(f),c=b.element(c),d=g(d),e=g(e),I(c),B(c,!0),a.move(c,d,e),C(function(a){return H("move","ng-move",h(c),d,e,k,f,a)})},addClass:function(a,b,c){return this.setClass(a,b,[],c)},removeClass:function(a,b,c){return this.setClass(a,[],b,c)},setClass:function(c,d,e,g){g=D(g);var i="$$animateClasses";if(c=b.element(c),c=h(c),B(c))return a.$$setClassImmediately(c,d,e,g);var j,k=c.data(i),m=!!k;return k||(k={},k.classes={}),j=k.classes,d=n(d)?d:d.split(" "),l(d,function(a){a&&a.length&&(j[a]=!0)}),e=n(e)?e:e.split(" "),l(e,function(a){a&&a.length&&(j[a]=!1)}),m?(g&&k.options&&(k.options=b.extend(k.options||{},g)),k.promise):(c.data(i,k={classes:j,options:g}),k.promise=C(function(b){var d=c.parent(),e=f(c),g=e.parentNode;if(!g||g.$$NG_REMOVED||e.$$NG_REMOVED)return void b();var h=c.data(i);c.removeData(i);var j=c.data(r)||{},k=E(c,h,j.active);return k?H("setClass",k,c,d,null,function(){k[0]&&a.$$addClassImmediately(c,k[0]),k[1]&&a.$$removeClassImmediately(c,k[1])},h.options,b):b()}))},cancel:function(a){a.$$cancelFn()},enabled:function(a,b){switch(arguments.length){case 2:if(a)J(b);else{var c=b.data(r)||{};c.disabled=!0,b.data(r,c)}break;case 1:u.disabled=!a;break;default:a=!u.disabled}return!!a}}}]),e.register("",["$window","$sniffer","$timeout","$$animateReflow",function(d,e,g,h){function i(){J||(J=h(function(){W=[],J=null,U={}}))}function m(a,b){J&&J(),W.push(b),J=h(function(){l(W,function(a){a()}),W=[],J=null,U={}})}function p(a,c){var d=f(a);a=b.element(d),Z.push(a);var e=Date.now()+c;Y>=e||(g.cancel(X),Y=e,X=g(function(){r(Z),Z=[]},c,!1))}function r(a){l(a,function(a){var b=a.data(Q);b&&l(b.closeAnimationFns,function(a){a()})})}function s(a,b){var c=b?U[b]:null;if(!c){var e=0,f=0,g=0,h=0;l(a,function(a){if(a.nodeType==q){var b=d.getComputedStyle(a)||{},c=b[E+K];e=Math.max(t(c),e);var i=b[E+M];f=Math.max(t(i),f);{b[G+M]}h=Math.max(t(b[G+M]),h);var j=t(b[G+K]);j>0&&(j*=parseInt(b[G+N],10)||1),g=Math.max(j,g)}}),c={total:0,transitionDelay:f,transitionDuration:e,animationDelay:h,animationDuration:g},b&&(U[b]=c)}return c}function t(a){var b=0,c=o(a)?a.split(/\s*,\s*/):[];return l(c,function(a){b=Math.max(parseFloat(a)||0,b)}),b}function u(a){var b=a.parent(),c=b.data(P);return c||(b.data(P,++V),c=V),c+"-"+f(a).getAttribute("class")}function v(a,b,c,d){var e=["ng-enter","ng-leave","ng-move"].indexOf(c)>=0,g=u(b),h=g+" "+c,i=U[h]?++U[h].total:0,k={};if(i>0){var l=c+"-stagger",m=g+" "+l,n=!U[m];n&&j.addClass(b,l),k=s(b,m),n&&j.removeClass(b,l)}j.addClass(b,c);var o=b.data(Q)||{},p=s(b,h),q=p.transitionDuration,r=p.animationDuration;if(e&&0===q&&0===r)return j.removeClass(b,c),!1;var t=d||e&&q>0,v=r>0&&k.animationDelay>0&&0===k.animationDuration,w=o.closeAnimationFns||[];b.data(Q,{stagger:k,cacheKey:h,running:o.running||0,itemIndex:i,blockTransition:t,closeAnimationFns:w});var z=f(b);return t&&(x(z,!0),d&&b.css(d)),v&&y(z,!0),!0}function w(a,b,c,d,e){function h(){b.off(M,i),j.removeClass(b,n),j.removeClass(b,o),K&&g.cancel(K),C(b,c);var a=f(b);for(var d in r)a.style.removeProperty(r[d])}function i(a){a.stopPropagation();var b=a.originalEvent||a,c=b.$manualTimeStamp||b.timeStamp||Date.now(),e=parseFloat(b.elapsedTime.toFixed(R));Math.max(c-L,0)>=G&&e>=D&&d()}var k=f(b),m=b.data(Q);if(-1==k.getAttribute("class").indexOf(c)||!m)return void d();var n="",o="";l(c.split(" "),function(a,b){var c=(b>0?" ":"")+a;n+=c+"-active",o+=c+"-pending"});var q="",r=[],t=m.itemIndex,u=m.stagger,v=0;if(t>0){var w=0;u.transitionDelay>0&&0===u.transitionDuration&&(w=u.transitionDelay*t);var z=0;u.animationDelay>0&&0===u.animationDuration&&(z=u.animationDelay*t,r.push(I+"animation-play-state")),v=Math.round(100*Math.max(w,z))/100}v||(j.addClass(b,n),m.blockTransition&&x(k,!1));var A=m.cacheKey+" "+n,B=s(b,A),D=Math.max(B.transitionDuration,B.animationDuration);if(0===D)return j.removeClass(b,n),C(b,c),void d();!v&&e&&(B.transitionDuration||(b.css("transition",B.animationDuration+"s linear all"),r.push("transition")),b.css(e));var E=Math.max(B.transitionDelay,B.animationDelay),G=E*T;if(r.length>0){var J=k.getAttribute("style")||"";";"!==J.charAt(J.length-1)&&(J+=";"),k.setAttribute("style",J+" "+q)}var K,L=Date.now(),M=H+" "+F,N=(E+D)*S,O=(v+N)*T;return v>0&&(j.addClass(b,o),K=g(function(){K=null,B.transitionDuration>0&&x(k,!1),B.animationDuration>0&&y(k,!1),j.addClass(b,n),j.removeClass(b,o),e&&(0===B.transitionDuration&&b.css("transition",B.animationDuration+"s linear all"),b.css(e),r.push("transition"))},v*T,!1)),b.on(M,i),m.closeAnimationFns.push(function(){h(),d()}),m.running++,p(b,O),h}function x(a,b){a.style[E+L]=b?"none":""}function y(a,b){a.style[G+O]=b?"paused":""}function z(a,b,c,d){return v(a,b,c,d)?function(a){a&&C(b,c)}:void 0}function A(a,b,c,d,e){return b.data(Q)?w(a,b,c,d,e):(C(b,c),void d())}function B(a,b,c,d,e){var f=z(a,b,c,e.from);if(!f)return i(),void d();var g=f;return m(b,function(){g=A(a,b,c,d,e.to)}),function(a){(g||k)(a)}}function C(a,b){j.removeClass(a,b);var c=a.data(Q);c&&(c.running&&c.running--,c.running&&0!==c.running||a.removeData(Q))}function D(a,b){var c="";return a=n(a)?a:a.split(/\s+/),l(a,function(a,d){a&&a.length>0&&(c+=(d>0?" ":"")+a+b)}),c}var E,F,G,H,I="";a.ontransitionend===c&&a.onwebkittransitionend!==c?(I="-webkit-",E="WebkitTransition",F="webkitTransitionEnd transitionend"):(E="transition",F="transitionend"),a.onanimationend===c&&a.onwebkitanimationend!==c?(I="-webkit-",G="WebkitAnimation",H="webkitAnimationEnd animationend"):(G="animation",H="animationend");var J,K="Duration",L="Property",M="Delay",N="IterationCount",O="PlayState",P="$$ngAnimateKey",Q="$$ngAnimateCSS3Data",R=3,S=1.5,T=1e3,U={},V=0,W=[],X=null,Y=0,Z=[];return{animate:function(a,b,c,d,e,f){return f=f||{},f.from=c,f.to=d,B("animate",a,b,e,f)},enter:function(a,b,c){return c=c||{},B("enter",a,"ng-enter",b,c)},leave:function(a,b,c){return c=c||{},B("leave",a,"ng-leave",b,c)},move:function(a,b,c){return c=c||{},B("move",a,"ng-move",b,c)},beforeSetClass:function(a,b,c,d,e){e=e||{};var f=D(c,"-remove")+" "+D(b,"-add"),g=z("setClass",a,f,e.from);return g?(m(a,d),g):(i(),void d())},beforeAddClass:function(a,b,c,d){d=d||{};var e=z("addClass",a,D(b,"-add"),d.from);return e?(m(a,c),e):(i(),void c())},beforeRemoveClass:function(a,b,c,d){d=d||{};var e=z("removeClass",a,D(b,"-remove"),d.from);return e?(m(a,c),e):(i(),void c())},setClass:function(a,b,c,d,e){e=e||{},c=D(c,"-remove"),b=D(b,"-add");var f=c+" "+b;return A("setClass",a,f,d,e.to)},addClass:function(a,b,c,d){return d=d||{},A("addClass",a,D(b,"-add"),c,d.to)},removeClass:function(a,b,c,d){return d=d||{},A("removeClass",a,D(b,"-remove"),c,d.to)}}}])}])}(window,window.angular),function(){angular.module("anguFixedHeaderTable",[]).directive("fixedHeader",["$timeout",function(a){return{restrict:"A",scope:{tableHeight:"@"},link:function(b,c){function d(a){var b=window.getComputedStyle(a);return"none"!=b.display&&0!=a.offsetWidth}function e(){return d(f.querySelector("tbody"))&&null!=f.querySelector("tbody tr:first-child")}var f=c[0],g=b.$watch(e,function(c){c===!0&&(angular.element(f.querySelectorAll("thead, tbody, tfoot")).css("display",""),a(function(){angular.forEach(f.querySelectorAll("tr:first-child th"),function(a,b){var c=f.querySelector("tbody tr:first-child td:nth-child("+(b+1)+")"),d=f.querySelector("tfoot tr:first-child td:nth-child("+(b+1)+")"),e=c?c.offsetWidth:a.offsetWidth;c&&(c.style.width=e+"px"),a&&(a.style.width=e+"px"),d&&(d.style.width=e+"px")}),angular.element(f.querySelectorAll("thead, tfoot")).css("display","block"),angular.element(f.querySelectorAll("tbody")).css({display:"block",height:b.tableHeight||"inherit",overflow:"auto"});var a=f.querySelector("tbody"),c=a.offsetWidth-a.clientWidth;if(c>0){c-=2;var d=f.querySelector("tbody tr:first-child td:last-child");d.style.width=d.offsetWidth-c+"px"}}),g())})}}}])}(),function(){"use strict";angular.module("toaster",["ngAnimate"]).service("toaster",["$rootScope",function(a){this.pop=function(b,c,d,e,f,g){if(angular.isObject(b)){var h=b;this.toast={type:h.type,title:h.title,body:h.body,timeout:h.timeout,bodyOutputType:h.bodyOutputType,clickHandler:h.clickHandler}}else this.toast={type:b,title:c,body:d,timeout:e,bodyOutputType:f,clickHandler:g};a.$emit("toaster-newToast")},this.clear=function(){a.$emit("toaster-clearToasts")}}]).constant("toasterConfig",{limit:0,"tap-to-dismiss":!0,"close-button":!1,"newest-on-top":!0,"time-out":5e3,"icon-classes":{error:"toast-error",info:"toast-info",wait:"toast-wait",success:"toast-success",warning:"toast-warning"},"body-output-type":"","body-template":"toasterBodyTmpl.html","icon-class":"toast-info","position-class":"toast-top-right","title-class":"toast-title","message-class":"toast-message"}).directive("toasterContainer",["$compile","$rootScope","$interval","$sce","toasterConfig","toaster",function(a,b,c,d,e,f){return{replace:!0,restrict:"EA",scope:!0,link:function(a,g,h){function i(b){switch(b.type=k["icon-classes"][b.type],b.type||(b.type=k["icon-class"]),l++,angular.extend(b,{id:l}),b.bodyOutputType=b.bodyOutputType||k["body-output-type"],b.bodyOutputType){case"trustedHtml":b.html=d.trustAsHtml(b.body);break;case"template":b.bodyTemplate=b.body||k["body-template"]}a.configureTimer(b),k["newest-on-top"]===!0?(a.toasters.unshift(b),k.limit>0&&a.toasters.length>k.limit&&a.toasters.pop()):(a.toasters.push(b),k.limit>0&&a.toasters.length>k.limit&&a.toasters.shift())}function j(b,d){b.timeout=c(function(){a.removeToast(b.id)},d)}var k,l=0;k=angular.extend({},e,a.$eval(h.toasterOptions)),a.config={position:k["position-class"],title:k["title-class"],message:k["message-class"],tap:k["tap-to-dismiss"],closeButton:k["close-button"],animation:k["animation-class"]},a.configureTimer=function(a){var b="number"==typeof a.timeout?a.timeout:k["time-out"];b>0&&j(a,b)},a.toasters=[],b.$on("toaster-newToast",function(){i(f.toast)}),b.$on("toaster-clearToasts",function(){a.toasters.splice(0,a.toasters.length)})},controller:["$scope","$element","$attrs",function(a){a.stopTimer=function(a){a.timeout&&(c.cancel(a.timeout),a.timeout=null)},a.restartTimer=function(b){b.timeout||a.configureTimer(b)},a.removeToast=function(b){var c=0;for(c;c<a.toasters.length&&a.toasters[c].id!==b;c++);a.toasters.splice(c,1)},a.click=function(b,c){if(a.config.tap===!0){var d=!0;b.clickHandler&&(angular.isFunction(b.clickHandler)?d=b.clickHandler(b,c):angular.isFunction(a.$parent.$eval(b.clickHandler))?d=a.$parent.$eval(b.clickHandler)(b,c):console.log("TOAST-NOTE: Your click handler is not inside a parent scope of toaster-container.")),d&&a.removeToast(b.id)}}}],template:'<div  id="toast-container" ng-class="[config.position, config.animation]"><div ng-repeat="toaster in toasters" class="toast" ng-class="toaster.type" ng-click="click(toaster)" ng-mouseover="stopTimer(toaster)"  ng-mouseout="restartTimer(toaster)"><button class="toast-close-button" ng-show="config.closeButton" ng-click="click(toaster, true)">&times;</button><div ng-class="config.title">{{toaster.title}}</div><div ng-class="config.message" ng-switch on="toaster.bodyOutputType"><div ng-switch-when="trustedHtml" ng-bind-html="toaster.html"></div><div ng-switch-when="template"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-default >{{toaster.body}}</div></div></div></div>'}}])}(window,document),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdownToggle","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/popup.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){return{link:function(b,c,d){function e(b){function d(){j===e&&(j=void 0)}var e=a(c,b);return j&&j.cancel(),j=e,e.then(d,d),e}function f(){k?(k=!1,g()):(c.removeClass("collapse").addClass("collapsing"),e({height:c[0].scrollHeight+"px"}).then(g))}function g(){c.removeClass("collapsing"),c.addClass("collapse in"),c.css({height:"auto"})}function h(){if(k)k=!1,i(),c.css({height:0});else{c.css({height:c[0].scrollHeight+"px"});{c[0].offsetWidth}c.removeClass("collapse in").addClass("collapsing"),e({height:0}).then(i)}}function i(){c.removeClass("collapsing"),c.addClass("collapse")}var j,k=!0;b.$watch(d.collapse,function(a){a?h():f()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(this.groups.indexOf(a),1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",["$parse",function(a){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(b,c,d,e){var f,g;e.addGroup(b),b.isOpen=!1,d.isOpen&&(f=a(d.isOpen),g=f.assign,b.$parent.$watch(f,function(a){b.isOpen=!!a})),b.$watch("isOpen",function(a){a&&e.closeOthers(b),g&&g(b.$parent,a)})}}}]).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",compile:function(a,b,c){return function(a,b,d,e){e.setHeading(c(a,function(){}))}}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(a,b){a.closeable="close"in b}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"=",close:"&"}}}),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.bindHtmlUnsafe),a.$watch(c.bindHtmlUnsafe,function(a){b.html(a||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){var e=d[0],f=d[1];f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.btnRadio)))},b.bind(e.toggleEvent,function(){b.hasClass(e.activeClass)||a.$apply(function(){f.$setViewValue(a.$eval(c.btnRadio)),f.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){var d=a.$eval(b);return angular.isDefined(d)?d:c}var h=d[0],i=d[1];i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.bind(h.toggleEvent,function(){a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition","$q",function(a,b,c){function d(){e();var c=+a.interval;!isNaN(c)&&c>=0&&(g=b(f,c))}function e(){g&&(b.cancel(g),g=null)}function f(){h?(a.next(),d()):a.pause()}var g,h,i=this,j=i.slides=[],k=-1;i.currentSlide=null;var l=!1;i.select=function(e,f){function g(){if(!l){if(i.currentSlide&&angular.isString(f)&&!a.noTransition&&e.$element){e.$element.addClass(f);{e.$element[0].offsetWidth}angular.forEach(j,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(e,{direction:f,active:!0,entering:!0}),angular.extend(i.currentSlide||{},{direction:f,leaving:!0}),a.$currentTransition=c(e.$element,{}),function(b,c){a.$currentTransition.then(function(){h(b,c)},function(){h(b,c)})}(e,i.currentSlide)}else h(e,i.currentSlide);i.currentSlide=e,k=m,d()}}function h(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(c||{},{direction:"",active:!1,leaving:!1,entering:!1}),a.$currentTransition=null}var m=j.indexOf(e);void 0===f&&(f=m>k?"next":"prev"),e&&e!==i.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),b(g)):g())
},a.$on("$destroy",function(){l=!0}),i.indexOfSlide=function(a){return j.indexOf(a)},a.next=function(){var b=(k+1)%j.length;return a.$currentTransition?void 0:i.select(j[b],"next")},a.prev=function(){var b=0>k-1?j.length-1:k-1;return a.$currentTransition?void 0:i.select(j[b],"prev")},a.select=function(a){i.select(a)},a.isActive=function(a){return i.currentSlide===a},a.slides=function(){return j},a.$watch("interval",d),a.$on("$destroy",e),a.play=function(){h||(h=!0,d())},a.pause=function(){a.noPause||(h=!1,e())},i.addSlide=function(b,c){b.$element=c,j.push(b),1===j.length||b.active?(i.select(j[j.length-1]),1==j.length&&a.play()):b.active=!1},i.removeSlide=function(a){var b=j.indexOf(a);j.splice(b,1),j.length>0&&a.active?i.select(b>=j.length?j[b-1]:j[b]):k>b&&k--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",["$parse",function(a){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{},link:function(b,c,d,e){if(d.active){var f=a(d.active),g=f.assign,h=b.active=f(b.$parent);b.$watch(function(){var a=f(b.$parent);return a!==b.active&&(a!==h?h=b.active=a:g(b.$parent,a=h=b.active)),a})}e.addSlide(b,c),b.$on("$destroy",function(){e.removeSlide(b)}),b.$watch("active",function(a){a&&e.select(b)})}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].body.scrollTop||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].body.scrollLeft||a[0].documentElement.scrollLeft)}}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.position"]).constant("datepickerConfig",{dayFormat:"dd",monthFormat:"MMMM",yearFormat:"yyyy",dayHeaderFormat:"EEE",dayTitleFormat:"MMMM yyyy",monthTitleFormat:"yyyy",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","dateFilter","datepickerConfig",function(a,b,c,d){function e(b,c){return angular.isDefined(b)?a.$parent.$eval(b):c}function f(a,b){return new Date(a,b,0).getDate()}function g(a,b){for(var c=new Array(b),d=a,e=0;b>e;)c[e++]=new Date(d),d.setDate(d.getDate()+1);return c}function h(a,b,d,e){return{date:a,label:c(a,b),selected:!!d,secondary:!!e}}var i={day:e(b.dayFormat,d.dayFormat),month:e(b.monthFormat,d.monthFormat),year:e(b.yearFormat,d.yearFormat),dayHeader:e(b.dayHeaderFormat,d.dayHeaderFormat),dayTitle:e(b.dayTitleFormat,d.dayTitleFormat),monthTitle:e(b.monthTitleFormat,d.monthTitleFormat)},j=e(b.startingDay,d.startingDay),k=e(b.yearRange,d.yearRange);this.minDate=d.minDate?new Date(d.minDate):null,this.maxDate=d.maxDate?new Date(d.maxDate):null,this.modes=[{name:"day",getVisibleDates:function(a,b){var d=a.getFullYear(),e=a.getMonth(),k=new Date(d,e,1),l=j-k.getDay(),m=l>0?7-l:-l,n=new Date(k),o=0;m>0&&(n.setDate(-m+1),o+=m),o+=f(d,e+1),o+=(7-o%7)%7;for(var p=g(n,o),q=new Array(7),r=0;o>r;r++){var s=new Date(p[r]);p[r]=h(s,i.day,b&&b.getDate()===s.getDate()&&b.getMonth()===s.getMonth()&&b.getFullYear()===s.getFullYear(),s.getMonth()!==e)}for(var t=0;7>t;t++)q[t]=c(p[t].date,i.dayHeader);return{objects:p,title:c(a,i.dayTitle),labels:q}},compare:function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},split:7,step:{months:1}},{name:"month",getVisibleDates:function(a,b){for(var d=new Array(12),e=a.getFullYear(),f=0;12>f;f++){var g=new Date(e,f,1);d[f]=h(g,i.month,b&&b.getMonth()===f&&b.getFullYear()===e)}return{objects:d,title:c(a,i.monthTitle)}},compare:function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},split:3,step:{years:1}},{name:"year",getVisibleDates:function(a,b){for(var c=new Array(k),d=a.getFullYear(),e=parseInt((d-1)/k,10)*k+1,f=0;k>f;f++){var g=new Date(e+f,0,1);c[f]=h(g,i.year,b&&b.getFullYear()===g.getFullYear())}return{objects:c,title:[c[0].label,c[k-1].label].join(" - ")}},compare:function(a,b){return a.getFullYear()-b.getFullYear()},split:5,step:{years:k}}],this.isDisabled=function(b,c){var d=this.modes[c||0];return this.minDate&&d.compare(b,this.minDate)<0||this.maxDate&&d.compare(b,this.maxDate)>0||a.dateDisabled&&a.dateDisabled({date:b,mode:d.name})}}]).directive("datepicker",["dateFilter","$parse","datepickerConfig","$log",function(a,b,c,d){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(a,e,f,g){function h(){a.showWeekNumbers=0===o&&q}function i(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c}function j(b){var c=null,e=!0;n.$modelValue&&(c=new Date(n.$modelValue),isNaN(c)?(e=!1,d.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):b&&(p=c)),n.$setValidity("date",e);var f=m.modes[o],g=f.getVisibleDates(p,c);angular.forEach(g.objects,function(a){a.disabled=m.isDisabled(a.date,o)}),n.$setValidity("date-disabled",!c||!m.isDisabled(c)),a.rows=i(g.objects,f.split),a.labels=g.labels||[],a.title=g.title}function k(a){o=a,h(),j()}function l(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}var m=g[0],n=g[1];if(n){var o=0,p=new Date,q=c.showWeeks;f.showWeeks?a.$parent.$watch(b(f.showWeeks),function(a){q=!!a,h()}):h(),f.min&&a.$parent.$watch(b(f.min),function(a){m.minDate=a?new Date(a):null,j()}),f.max&&a.$parent.$watch(b(f.max),function(a){m.maxDate=a?new Date(a):null,j()}),n.$render=function(){j(!0)},a.select=function(a){if(0===o){var b=n.$modelValue?new Date(n.$modelValue):new Date(0,0,0,0,0,0,0);b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),n.$setViewValue(b),j(!0)}else p=a,k(o-1)},a.move=function(a){var b=m.modes[o].step;p.setMonth(p.getMonth()+a*(b.months||0)),p.setFullYear(p.getFullYear()+a*(b.years||0)),j()},a.toggleMode=function(){k((o+1)%m.modes.length)},a.getWeekNumber=function(b){return 0===o&&a.showWeekNumbers&&7===b.length?l(b[0].date):null}}}}}]).constant("datepickerPopupConfig",{dateFormat:"yyyy-MM-dd",currentText:"Today",toggleWeeksText:"Weeks",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","datepickerPopupConfig","datepickerConfig",function(a,b,c,d,e,f,g){return{restrict:"EA",require:"ngModel",link:function(h,i,j,k){function l(a){u?u(h,!!a):q.isOpen=!!a}function m(a){if(a){if(angular.isDate(a))return k.$setValidity("date",!0),a;if(angular.isString(a)){var b=new Date(a);return isNaN(b)?void k.$setValidity("date",!1):(k.$setValidity("date",!0),b)}return void k.$setValidity("date",!1)}return k.$setValidity("date",!0),null}function n(a,c,d){a&&(h.$watch(b(a),function(a){q[c]=a}),y.attr(d||c,c))}function o(){q.position=s?d.offset(i):d.position(i),q.position.top=q.position.top+i.prop("offsetHeight")}var p,q=h.$new(),r=angular.isDefined(j.closeOnDateSelection)?h.$eval(j.closeOnDateSelection):f.closeOnDateSelection,s=angular.isDefined(j.datepickerAppendToBody)?h.$eval(j.datepickerAppendToBody):f.appendToBody;j.$observe("datepickerPopup",function(a){p=a||f.dateFormat,k.$render()}),q.showButtonBar=angular.isDefined(j.showButtonBar)?h.$eval(j.showButtonBar):f.showButtonBar,h.$on("$destroy",function(){C.remove(),q.$destroy()}),j.$observe("currentText",function(a){q.currentText=angular.isDefined(a)?a:f.currentText}),j.$observe("toggleWeeksText",function(a){q.toggleWeeksText=angular.isDefined(a)?a:f.toggleWeeksText}),j.$observe("clearText",function(a){q.clearText=angular.isDefined(a)?a:f.clearText}),j.$observe("closeText",function(a){q.closeText=angular.isDefined(a)?a:f.closeText});var t,u;j.isOpen&&(t=b(j.isOpen),u=t.assign,h.$watch(t,function(a){q.isOpen=!!a})),q.isOpen=t?t(h):!1;var v=function(a){q.isOpen&&a.target!==i[0]&&q.$apply(function(){l(!1)})},w=function(){q.$apply(function(){l(!0)})},x=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");x.attr({"ng-model":"date","ng-change":"dateSelection()"});var y=angular.element(x.children()[0]),z={};j.datepickerOptions&&(z=h.$eval(j.datepickerOptions),y.attr(angular.extend({},z))),k.$parsers.unshift(m),q.dateSelection=function(a){angular.isDefined(a)&&(q.date=a),k.$setViewValue(q.date),k.$render(),r&&l(!1)},i.bind("input change keyup",function(){q.$apply(function(){q.date=k.$modelValue})}),k.$render=function(){var a=k.$viewValue?e(k.$viewValue,p):"";i.val(a),q.date=k.$modelValue},n(j.min,"min"),n(j.max,"max"),j.showWeeks?n(j.showWeeks,"showWeeks","show-weeks"):(q.showWeeks="show-weeks"in z?z["show-weeks"]:g.showWeeks,y.attr("show-weeks","showWeeks")),j.dateDisabled&&y.attr("date-disabled",j.dateDisabled);var A=!1,B=!1;q.$watch("isOpen",function(a){a?(o(),c.bind("click",v),B&&i.unbind("focus",w),i[0].focus(),A=!0):(A&&c.unbind("click",v),i.bind("focus",w),B=!0),u&&u(h,a)}),q.today=function(){q.dateSelection(new Date)},q.clear=function(){q.dateSelection(null)};var C=a(x)(q);s?c.find("body").append(C):i.after(C)}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(a,b){b.bind("click",function(a){a.preventDefault(),a.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdownToggle",[]).directive("dropdownToggle",["$document","$location",function(a){var b=null,c=angular.noop;return{restrict:"CA",link:function(d,e){d.$watch("$location.path",function(){c()}),e.parent().bind("click",function(){c()}),e.bind("click",function(d){var f=e===b;d.preventDefault(),d.stopPropagation(),b&&c(),f||e.hasClass("disabled")||e.prop("disabled")||(e.parent().addClass("open"),b=e,c=function(d){d&&(d.preventDefault(),d.stopPropagation()),a.unbind("click",c),e.parent().removeClass("open"),c=angular.noop,b=null},a.bind("click",c))})}}}]),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$timeout",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(b){b.animate=!1,a(function(){b.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(a,b){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:"template/modal/window.html",link:function(c,d,e){c.windowClass=e.windowClass||"",b(function(){c.animate=!0,d[0].focus()}),c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))}}}}]).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d,e,f){function g(){for(var a=-1,b=n.keys(),c=0;c<b.length;c++)n.get(b[c]).value.backdrop&&(a=c);return a}function h(a){var b=c.find("body").eq(0),d=n.get(a).value;n.remove(a),j(d.modalDomEl,d.modalScope,300,i),b.toggleClass(m,n.length()>0)}function i(){if(k&&-1==g()){var a=l;j(k,l,150,function(){a.$destroy(),a=null}),k=void 0,l=void 0}}function j(c,d,e,f){function g(){g.done||(g.done=!0,c.remove(),f&&f())}d.animate=!1;var h=a.transitionEndEventName;if(h){var i=b(g,e);c.bind(h,function(){b.cancel(i),g(),d.$apply()})}else b(g,0)}var k,l,m="modal-open",n=f.createNew(),o={};return e.$watch(g,function(a){l&&(l.index=a)}),c.bind("keydown",function(a){var b;27===a.which&&(b=n.top(),b&&b.value.keyboard&&e.$apply(function(){o.dismiss(b.key)}))}),o.open=function(a,b){n.add(a,{deferred:b.deferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard});var f=c.find("body").eq(0),h=g();h>=0&&!k&&(l=e.$new(!0),l.index=h,k=d("<div modal-backdrop></div>")(l),f.append(k));var i=angular.element("<div modal-window></div>");i.attr("window-class",b.windowClass),i.attr("index",n.length()-1),i.attr("animate","animate"),i.html(b.content);var j=d(i)(b.scope);n.top().value.modalDomEl=j,f.append(j),f.addClass(m)},o.close=function(a,b){var c=n.get(a).value;c&&(c.deferred.resolve(b),h(a))},o.dismiss=function(a,b){var c=n.get(a).value;c&&(c.deferred.reject(b),h(a))},o.dismissAll=function(a){for(var b=this.getTop();b;)this.dismiss(b.key,a),b=this.getTop()},o.getTop=function(){return n.top()},o}]).provider("$modal",function(){var a={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?d.when(a.template):e.get(a.templateUrl,{cache:f}).then(function(a){return a.data})}function j(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var k={};return k.open=function(b){var e=d.defer(),f=d.defer(),k={result:e.promise,opened:f.promise,close:function(a){h.close(k,a)},dismiss:function(a){h.dismiss(k,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var l=d.all([i(b)].concat(j(b.resolve)));return l.then(function(a){var d=(b.scope||c).$new();d.$close=k.close,d.$dismiss=k.dismiss;var f,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=k,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),f=g(b.controller,i)),h.open(k,{scope:d,deferred:e,content:a[0],backdrop:b.backdrop,keyboard:b.keyboard,windowClass:b.windowClass})},function(a){e.reject(a)}),l.then(function(){f.resolve(!0)},function(){f.reject(!1)}),k},k}]};return a}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse","$interpolate",function(a,b,c,d){var e=this,f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(d){b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){e.itemsPerPage=parseInt(b,10),a.totalPages=e.calculateTotalPages()}):this.itemsPerPage=d},this.noPrevious=function(){return 1===this.page},this.noNext=function(){return this.page===a.totalPages},this.isActive=function(a){return this.page===a},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.getAttributeValue=function(b,c,e){return angular.isDefined(b)?e?d(b)(a.$parent):a.$parent.$eval(b):c},this.render=function(){this.page=parseInt(a.page,10)||1,this.page>0&&this.page<=a.totalPages&&(a.pages=this.getPages(this.page,a.totalPages))},a.selectPage=function(b){!e.isActive(b)&&b>0&&b<=a.totalPages&&(a.page=b,a.onSelectPage({page:b}))},a.$watch("page",function(){e.render()}),a.$watch("totalItems",function(){a.totalPages=e.calculateTotalPages()}),a.$watch("totalPages",function(b){f(a.$parent,b),e.page>b?a.selectPage(b):e.render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &"},controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(c,d,e,f){function g(a,b,c,d){return{number:a,text:b,active:c,disabled:d}}var h,i=f.getAttributeValue(e.boundaryLinks,b.boundaryLinks),j=f.getAttributeValue(e.directionLinks,b.directionLinks),k=f.getAttributeValue(e.firstText,b.firstText,!0),l=f.getAttributeValue(e.previousText,b.previousText,!0),m=f.getAttributeValue(e.nextText,b.nextText,!0),n=f.getAttributeValue(e.lastText,b.lastText,!0),o=f.getAttributeValue(e.rotate,b.rotate);f.init(b.itemsPerPage),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){h=parseInt(a,10),f.render()}),f.getPages=function(a,b){var c=[],d=1,e=b,p=angular.isDefined(h)&&b>h;p&&(o?(d=Math.max(a-Math.floor(h/2),1),e=d+h-1,e>b&&(e=b,d=e-h+1)):(d=(Math.ceil(a/h)-1)*h+1,e=Math.min(d+h-1,b)));for(var q=d;e>=q;q++){var r=g(q,q,f.isActive(q),!1);c.push(r)}if(p&&!o){if(d>1){var s=g(d-1,"...",!1,!1);c.unshift(s)}if(b>e){var t=g(e+1,"...",!1,!1);c.push(t)}}if(j){var u=g(a-1,l,!1,f.noPrevious());c.unshift(u);var v=g(a+1,m,!1,f.noNext());c.push(v)}if(i){var w=g(1,k,!1,f.noPrevious());c.unshift(w);var x=g(b,n,!1,f.noNext());c.push(x)}return c}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &"},controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d,e){function f(a,b,c,d,e){return{number:a,text:b,disabled:c,previous:i&&d,next:i&&e}}var g=e.getAttributeValue(d.previousText,a.previousText,!0),h=e.getAttributeValue(d.nextText,a.nextText,!0),i=e.getAttributeValue(d.align,a.align);e.init(a.itemsPerPage),e.getPages=function(a){return[f(a-1,g,e.noPrevious(),!0,!1),f(a+1,h,e.noNext(),!1,!0)]}}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$parse","$document","$position","$interpolate",function(e,f,g,h,i,j,k){return function(e,l,m){function n(a){var b=a||o.trigger||m,d=c[b]||b;return{show:b,hide:d}}var o=angular.extend({},b,d),p=a(e),q=k.startSymbol(),r=k.endSymbol(),s="<div "+p+'-popup title="'+q+"tt_title"+r+'" content="'+q+"tt_content"+r+'" placement="'+q+"tt_placement"+r+'" animation="tt_animation" is-open="tt_isOpen"></div>';return{restrict:"EA",scope:!0,compile:function(){var a=f(s);return function(b,c,d){function f(){b.tt_isOpen?m():k()}function k(){(!z||b.$eval(d[l+"Enable"]))&&(b.tt_popupDelay?(v=g(p,b.tt_popupDelay,!1),v.then(function(a){a()})):p()())}function m(){b.$apply(function(){q()})}function p(){return b.tt_content?(r(),u&&g.cancel(u),t.css({top:0,left:0,display:"block"}),w?i.find("body").append(t):c.after(t),A(),b.tt_isOpen=!0,b.$digest(),A):angular.noop}function q(){b.tt_isOpen=!1,g.cancel(v),b.tt_animation?u=g(s,500):s()}function r(){t&&s(),t=a(b,function(){}),b.$digest()}function s(){t&&(t.remove(),t=null)}var t,u,v,w=angular.isDefined(o.appendToBody)?o.appendToBody:!1,x=n(void 0),y=!1,z=angular.isDefined(d[l+"Enable"]),A=function(){var a,d,e,f;switch(a=w?j.offset(c):j.position(c),d=t.prop("offsetWidth"),e=t.prop("offsetHeight"),b.tt_placement){case"right":f={top:a.top+a.height/2-e/2,left:a.left+a.width};break;case"bottom":f={top:a.top+a.height,left:a.left+a.width/2-d/2};break;case"left":f={top:a.top+a.height/2-e/2,left:a.left-d};break;default:f={top:a.top-e,left:a.left+a.width/2-d/2}}f.top+="px",f.left+="px",t.css(f)};b.tt_isOpen=!1,d.$observe(e,function(a){b.tt_content=a,!a&&b.tt_isOpen&&q()}),d.$observe(l+"Title",function(a){b.tt_title=a}),d.$observe(l+"Placement",function(a){b.tt_placement=angular.isDefined(a)?a:o.placement}),d.$observe(l+"PopupDelay",function(a){var c=parseInt(a,10);b.tt_popupDelay=isNaN(c)?o.popupDelay:c});var B=function(){y&&(c.unbind(x.show,k),c.unbind(x.hide,m))};d.$observe(l+"Trigger",function(a){B(),x=n(a),x.show===x.hide?c.bind(x.show,f):(c.bind(x.show,k),c.bind(x.hide,m)),y=!0});var C=b.$eval(d[l+"Animation"]);b.tt_animation=angular.isDefined(C)?!!C:o.animation,d.$observe(l+"AppendToBody",function(a){w=angular.isDefined(a)?h(a)(b):w}),w&&b.$on("$locationChangeSuccess",function(){b.tt_isOpen&&q()}),b.$on("$destroy",function(){g.cancel(u),g.cancel(v),B(),s()})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",["ui.bootstrap.transition"]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig","$transition",function(a,b,c,d){var e=this,f=[],g=angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max,h=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.addBar=function(a,b){var c=0,d=a.$parent.$index;angular.isDefined(d)&&f[d]&&(c=f[d].value),f.push(a),this.update(b,a.value,c),a.$watch("value",function(a,c){a!==c&&e.update(b,a,c)}),a.$on("$destroy",function(){e.removeBar(a)})},this.update=function(a,b,c){var e=this.getPercentage(b);h?(a.css("width",this.getPercentage(c)+"%"),d(a,{width:e+"%"})):a.css({transition:"none",width:e+"%"})},this.removeBar=function(a){f.splice(f.indexOf(a),1)},this.getPercentage=function(a){return Math.round(100*a/g)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},template:'<div class="progress" ng-transclude></div>'}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","$parse","ratingConfig",function(a,b,c,d){this.maxRange=angular.isDefined(b.max)?a.$parent.$eval(b.max):d.max,this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):d.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):d.stateOff,this.createRateObjects=function(a){for(var b={stateOn:this.stateOn,stateOff:this.stateOff},c=0,d=a.length;d>c;c++)a[c]=angular.extend({index:c},b,a[c]);return a},a.range=this.createRateObjects(angular.isDefined(b.ratingStates)?angular.copy(a.$parent.$eval(b.ratingStates)):new Array(this.maxRange)),a.rate=function(b){a.value===b||a.readonly||(a.value=b)},a.enter=function(b){a.readonly||(a.val=b),a.onHover({value:b})},a.reset=function(){a.val=angular.copy(a.value),a.onLeave()},a.$watch("value",function(b){a.val=b}),a.readonly=!1,b.readonly&&a.$parent.$watch(c(b.readonly),function(b){a.readonly=!!b})}]).directive("rating",function(){return{restrict:"EA",scope:{value:"=",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(a){a.active=!1}),a.active=!0},b.addTab=function(a){c.push(a),(1===c.length||a.active)&&b.select(a)},b.removeTab=function(a){var d=c.indexOf(a);if(a.active&&c.length>1){var e=d==c.length-1?d-1:d+1;b.select(c[e])}c.splice(d,1)}}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1,a.type=angular.isDefined(c.type)?a.$parent.$eval(c.type):"tabs"}}}).directive("tab",["$parse",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){var g,h;e.active?(g=a(e.active),h=g.assign,b.$parent.$watch(g,function(a,c){a!==c&&(b.active=!!a)}),b.active=g(b.$parent)):h=g=angular.noop,b.$watch("active",function(a){h(b.$parent,a),a?(f.select(b),b.onSelect()):b.onDeselect()}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.$transcludeFn=d}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).directive("timepicker",["$parse","$log","timepickerConfig","$locale",function(a,b,c,d){return{restrict:"EA",require:"?^ngModel",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(e,f,g,h){function i(){var a=parseInt(e.hours,10),b=e.showMeridian?a>0&&13>a:a>=0&&24>a;return b?(e.showMeridian&&(12===a&&(a=0),e.meridian===q[1]&&(a+=12)),a):void 0}function j(){var a=parseInt(e.minutes,10);return a>=0&&60>a?a:void 0}function k(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a}function l(a){m(),h.$setViewValue(new Date(p)),n(a)}function m(){h.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1}function n(a){var b=p.getHours(),c=p.getMinutes();e.showMeridian&&(b=0===b||12===b?12:b%12),e.hours="h"===a?b:k(b),e.minutes="m"===a?c:k(c),e.meridian=p.getHours()<12?q[0]:q[1]}function o(a){var b=new Date(p.getTime()+6e4*a);p.setHours(b.getHours(),b.getMinutes()),l()}if(h){var p=new Date,q=angular.isDefined(g.meridians)?e.$parent.$eval(g.meridians):c.meridians||d.DATETIME_FORMATS.AMPMS,r=c.hourStep;g.hourStep&&e.$parent.$watch(a(g.hourStep),function(a){r=parseInt(a,10)});var s=c.minuteStep;g.minuteStep&&e.$parent.$watch(a(g.minuteStep),function(a){s=parseInt(a,10)}),e.showMeridian=c.showMeridian,g.showMeridian&&e.$parent.$watch(a(g.showMeridian),function(a){if(e.showMeridian=!!a,h.$error.time){var b=i(),c=j();angular.isDefined(b)&&angular.isDefined(c)&&(p.setHours(b),l())}else n()});var t=f.find("input"),u=t.eq(0),v=t.eq(1),w=angular.isDefined(g.mousewheel)?e.$eval(g.mousewheel):c.mousewheel;if(w){var x=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};u.bind("mousewheel wheel",function(a){e.$apply(x(a)?e.incrementHours():e.decrementHours()),a.preventDefault()}),v.bind("mousewheel wheel",function(a){e.$apply(x(a)?e.incrementMinutes():e.decrementMinutes()),a.preventDefault()})}if(e.readonlyInput=angular.isDefined(g.readonlyInput)?e.$eval(g.readonlyInput):c.readonlyInput,e.readonlyInput)e.updateHours=angular.noop,e.updateMinutes=angular.noop;else{var y=function(a,b){h.$setViewValue(null),h.$setValidity("time",!1),angular.isDefined(a)&&(e.invalidHours=a),angular.isDefined(b)&&(e.invalidMinutes=b)};e.updateHours=function(){var a=i();angular.isDefined(a)?(p.setHours(a),l("h")):y(!0)},u.bind("blur",function(){!e.validHours&&e.hours<10&&e.$apply(function(){e.hours=k(e.hours)})}),e.updateMinutes=function(){var a=j();angular.isDefined(a)?(p.setMinutes(a),l("m")):y(void 0,!0)},v.bind("blur",function(){!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=k(e.minutes)})})}h.$render=function(){var a=h.$modelValue?new Date(h.$modelValue):null;isNaN(a)?(h.$setValidity("time",!1),b.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(a&&(p=a),m(),n())},e.incrementHours=function(){o(60*r)},e.decrementHours=function(){o(60*-r)},e.incrementMinutes=function(){o(s)},e.decrementMinutes=function(){o(-s)},e.toggleMeridian=function(){o(720*(p.getHours()<12?1:-1))}}}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+c+"'.");return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m,n=i.$eval(k.typeaheadMinLength)||1,o=i.$eval(k.typeaheadWaitMs)||0,p=i.$eval(k.typeaheadEditable)!==!1,q=b(k.typeaheadLoading).assign||angular.noop,r=b(k.typeaheadOnSelect),s=k.typeaheadInputFormatter?b(k.typeaheadInputFormatter):void 0,t=k.typeaheadAppendToBody?b(k.typeaheadAppendToBody):!1,u=b(k.ngModel).assign,v=g.parse(k.typeahead),w=angular.element("<div typeahead-popup></div>");w.attr({matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(k.typeaheadTemplateUrl)&&w.attr("template-url",k.typeaheadTemplateUrl);var x=i.$new();i.$on("$destroy",function(){x.$destroy()});var y=function(){x.matches=[],x.activeIdx=-1},z=function(a){var b={$viewValue:a};q(i,!0),c.when(v.source(i,b)).then(function(c){if(a===l.$viewValue&&m){if(c.length>0){x.activeIdx=0,x.matches.length=0;for(var d=0;d<c.length;d++)b[v.itemName]=c[d],x.matches.push({label:v.viewMapper(x,b),model:c[d]});x.query=a,x.position=t?f.offset(j):f.position(j),x.position.top=x.position.top+j.prop("offsetHeight")}else y();q(i,!1)}},function(){y(),q(i,!1)})};y(),x.query=void 0;
var A;l.$parsers.unshift(function(a){return m=!0,a&&a.length>=n?o>0?(A&&d.cancel(A),A=d(function(){z(a)},o)):z(a):(q(i,!1),y()),p?a:a?void l.$setValidity("editable",!1):(l.$setValidity("editable",!0),a)}),l.$formatters.push(function(a){var b,c,d={};return s?(d.$model=a,s(i,d)):(d[v.itemName]=a,b=v.viewMapper(i,d),d[v.itemName]=void 0,c=v.viewMapper(i,d),b!==c?b:a)}),x.select=function(a){var b,c,d={};d[v.itemName]=c=x.matches[a].model,b=v.modelMapper(i,d),u(i,b),l.$setValidity("editable",!0),r(i,{$item:c,$model:b,$label:v.viewMapper(i,d)}),y(),j[0].focus()},j.bind("keydown",function(a){0!==x.matches.length&&-1!==h.indexOf(a.which)&&(a.preventDefault(),40===a.which?(x.activeIdx=(x.activeIdx+1)%x.matches.length,x.$digest()):38===a.which?(x.activeIdx=(x.activeIdx?x.activeIdx:x.matches.length)-1,x.$digest()):13===a.which||9===a.which?x.$apply(function(){x.select(x.activeIdx)}):27===a.which&&(a.stopPropagation(),y(),x.$digest()))}),j.bind("blur",function(){m=!1});var B=function(a){j[0]!==a.target&&(y(),x.$digest())};e.bind("click",B),i.$on("$destroy",function(){e.unbind("click",B)});var C=a(w)(x);t?e.find("body").append(C):j.after(C)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(a,b,c,d){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(e,f,g){var h=d(g.templateUrl)(e.$parent)||"template/typeahead/typeahead-match.html";a.get(h,{cache:b}).success(function(a){f.replaceWith(c(a.trim())(e))})}}}]).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?b.replace(new RegExp(a(c),"gi"),"<strong>$&</strong>"):b}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a class="accordion-toggle" ng-click="isOpen = !isOpen" accordion-transclude="heading">{{heading}}</a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html","<div class='alert' ng-class='\"alert-\" + (type || \"warning\")'>\n    <button ng-show='closeable' type='button' class='close' ng-click='close()'>&times;</button>\n    <div ng-transclude></div>\n</div>\n")}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel">\n    <ol class="carousel-indicators" ng-show="slides().length > 1">\n        <li ng-repeat="slide in slides()" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides().length > 1"><span class="icon-prev"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides().length > 1"><span class="icon-next"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<table>\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{rows[0].length - 2 + showWeekNumbers}}"><button type="button" class="btn btn-default btn-sm btn-block" ng-click="toggleMode()"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr ng-show="labels.length > 0" class="h6">\n      <th ng-show="showWeekNumbers" class="text-center">#</th>\n      <th ng-repeat="label in labels" class="text-center">{{label}}</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows">\n      <td ng-show="showWeekNumbers" class="text-center"><em>{{ getWeekNumber(row) }}</em></td>\n      <td ng-repeat="dt in row" class="text-center">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected}" ng-click="select(dt.date)" ng-disabled="dt.disabled"><span ng-class="{\'text-muted\': dt.secondary}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html","<ul class=\"dropdown-menu\" ng-style=\"{display: (isOpen && 'block') || 'none', top: position.top+'px', left: position.left+'px'}\">\n	<li ng-transclude></li>\n"+'	<li ng-show="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group">\n			<button type="button" class="btn btn-sm btn-info" ng-click="today()">{{currentText}}</button>\n			<button type="button" class="btn btn-sm btn-default" ng-click="showWeeks = ! showWeeks" ng-class="{active: showWeeks}">{{toggleWeeksText}}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="clear()">{{clearText}}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="isOpen = false">{{closeText}}</button>\n	</li>\n</ul>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1040 + index*10}"></div>')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div tabindex="-1" class="modal fade {{ windowClass }}" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog"><div class="modal-content" ng-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-repeat="page in pages" ng-class="{disabled: page.disabled, previous: page.previous, next: page.next}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-repeat="page in pages" ng-class="{active: page.active, disabled: page.disabled}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progressbar.html",'<div class="progress"><div class="progress-bar" ng-class="type && \'progress-bar-\' + type" ng-transclude></div></div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()">\n    <i ng-repeat="r in range" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < val && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')"></i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset-titles.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset-titles.html","<ul class=\"nav {{type && 'nav-' + type}}\" ng-class=\"{'nav-stacked': vertical}\">\n</ul>\n")}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'\n<div class="tabbable">\n  <ul class="nav {{type && \'nav-\' + type}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-popup.html","<ul class=\"dropdown-menu\" ng-style=\"{display: isOpen()&&'block' || 'none', top: position.top+'px', left: position.left+'px'}\">\n"+'    <li ng-repeat="match in matches" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>')}]),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(a,b,c){"use strict";function d(a,b){return M(new(M(function(){},{prototype:a})),b)}function e(a){return L(arguments,function(b){b!==a&&L(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})}),a}function f(a,b){var c=[];for(var d in a.path){if(a.path[d]!==b.path[d])break;c.push(a.path[d])}return c}function g(a){if(Object.keys)return Object.keys(a);var c=[];return b.forEach(a,function(a,b){c.push(b)}),c}function h(a,b){if(Array.prototype.indexOf)return a.indexOf(b,Number(arguments[2])||0);var c=a.length>>>0,d=Number(arguments[2])||0;for(d=0>d?Math.ceil(d):Math.floor(d),0>d&&(d+=c);c>d;d++)if(d in a&&a[d]===b)return d;return-1}function i(a,b,c,d){var e,i=f(c,d),j={},k=[];for(var l in i)if(i[l].params&&(e=g(i[l].params),e.length))for(var m in e)h(k,e[m])>=0||(k.push(e[m]),j[e[m]]=a[e[m]]);return M({},j,b)}function j(a,b,c){if(!c){c=[];for(var d in a)c.push(d)}for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!=b[f])return!1}return!0}function k(a,b){var c={};return L(a,function(a){c[a]=b[a]}),c}function l(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var d in a)-1==h(c,d)&&(b[d]=a[d]);return b}function m(a,b){var c=K(a),d=c?[]:{};return L(a,function(a,e){b(a,e)&&(d[c?d.length:e]=a)}),d}function n(a,b){var c=K(a)?[]:{};return L(a,function(a,d){c[d]=b(a,d)}),c}function o(a,b){var d=1,f=2,i={},j=[],k=i,m=M(a.when(i),{$$promises:i,$$values:i});this.study=function(i){function n(a,c){if(s[c]!==f){if(r.push(c),s[c]===d)throw r.splice(0,h(r,c)),new Error("Cyclic dependency: "+r.join(" -> "));if(s[c]=d,I(a))q.push(c,[function(){return b.get(a)}],j);else{var e=b.annotate(a);L(e,function(a){a!==c&&i.hasOwnProperty(a)&&n(i[a],a)}),q.push(c,a,e)}r.pop(),s[c]=f}}function o(a){return J(a)&&a.then&&a.$$promises}if(!J(i))throw new Error("'invocables' must be an object");var p=g(i||{}),q=[],r=[],s={};return L(i,n),i=r=s=null,function(d,f,g){function h(){--u||(v||e(t,f.$$values),r.$$values=t,r.$$promises=r.$$promises||!0,delete r.$$inheritedValues,n.resolve(t))}function i(a){r.$$failure=a,n.reject(a)}function j(c,e,f){function j(a){l.reject(a),i(a)}function k(){if(!G(r.$$failure))try{l.resolve(b.invoke(e,g,t)),l.promise.then(function(a){t[c]=a,h()},j)}catch(a){j(a)}}var l=a.defer(),m=0;L(f,function(a){s.hasOwnProperty(a)&&!d.hasOwnProperty(a)&&(m++,s[a].then(function(b){t[a]=b,--m||k()},j))}),m||k(),s[c]=l.promise}if(o(d)&&g===c&&(g=f,f=d,d=null),d){if(!J(d))throw new Error("'locals' must be an object")}else d=k;if(f){if(!o(f))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else f=m;var n=a.defer(),r=n.promise,s=r.$$promises={},t=M({},d),u=1+q.length/3,v=!1;if(G(f.$$failure))return i(f.$$failure),r;f.$$inheritedValues&&e(t,l(f.$$inheritedValues,p)),M(s,f.$$promises),f.$$values?(v=e(t,l(f.$$values,p)),r.$$inheritedValues=l(f.$$values,p),h()):(f.$$inheritedValues&&(r.$$inheritedValues=l(f.$$inheritedValues,p)),f.then(h,i));for(var w=0,x=q.length;x>w;w+=3)d.hasOwnProperty(q[w])?h():j(q[w],q[w+1],q[w+2]);return r}},this.resolve=function(a,b,c,d){return this.study(a)(b,c,d)}}function p(a,b,c){this.fromConfig=function(a,b,c){return G(a.template)?this.fromString(a.template,b):G(a.templateUrl)?this.fromUrl(a.templateUrl,b):G(a.templateProvider)?this.fromProvider(a.templateProvider,b,c):null},this.fromString=function(a,b){return H(a)?a(b):a},this.fromUrl=function(c,d){return H(c)&&(c=c(d)),null==c?null:a.get(c,{cache:b,headers:{Accept:"text/html"}}).then(function(a){return a.data})},this.fromProvider=function(a,b,d){return c.invoke(a,null,d||{params:b})}}function q(a,b,e){function f(b,c,d,e){if(q.push(b),o[b])return o[b];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(b))throw new Error("Invalid parameter name '"+b+"' in pattern '"+a+"'");if(p[b])throw new Error("Duplicate parameter name '"+b+"' in pattern '"+a+"'");return p[b]=new O.Param(b,c,d,e),p[b]}function g(a,b,c){var d=["",""],e=a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!b)return e;switch(c){case!1:d=["(",")"];break;case!0:d=["?(",")?"];break;default:d=["("+c+"|",")?"]}return e+d[0]+b+d[1]}function h(c,e){var f,g,h,i,j;return f=c[2]||c[3],j=b.params[f],h=a.substring(m,c.index),g=e?c[4]:c[4]||("*"==c[1]?".*":null),i=O.type(g||"string")||d(O.type("string"),{pattern:new RegExp(g)}),{id:f,regexp:g,segment:h,type:i,cfg:j}}b=M({params:{}},J(b)?b:{});var i,j=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,k=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l="^",m=0,n=this.segments=[],o=e?e.params:{},p=this.params=e?e.params.$$new():new O.ParamSet,q=[];this.source=a;for(var r,s,t;(i=j.exec(a))&&(r=h(i,!1),!(r.segment.indexOf("?")>=0));)s=f(r.id,r.type,r.cfg,"path"),l+=g(r.segment,s.type.pattern.source,s.squash),n.push(r.segment),m=j.lastIndex;t=a.substring(m);var u=t.indexOf("?");if(u>=0){var v=this.sourceSearch=t.substring(u);if(t=t.substring(0,u),this.sourcePath=a.substring(0,m+u),v.length>0)for(m=0;i=k.exec(v);)r=h(i,!0),s=f(r.id,r.type,r.cfg,"search"),m=j.lastIndex}else this.sourcePath=a,this.sourceSearch="";l+=g(t)+(b.strict===!1?"/?":"")+"$",n.push(t),this.regexp=new RegExp(l,b.caseInsensitive?"i":c),this.prefix=n[0],this.$$paramNames=q}function r(a){M(this,a)}function s(){function a(a){return null!=a?a.toString().replace(/\//g,"%2F"):a}function e(a){return null!=a?a.toString().replace(/%2F/g,"/"):a}function f(a){return this.pattern.test(a)}function i(){return{strict:t,caseInsensitive:p}}function j(a){return H(a)||K(a)&&H(a[a.length-1])}function k(){for(;x.length;){var a=x.shift();if(a.pattern)throw new Error("You cannot override a type's .pattern at runtime.");b.extend(v[a.name],o.invoke(a.def))}}function l(a){M(this,a||{})}O=this;var o,p=!1,t=!0,u=!1,v={},w=!0,x=[],y={string:{encode:a,decode:e,is:f,pattern:/[^/]*/},"int":{encode:a,decode:function(a){return parseInt(a,10)},is:function(a){return G(a)&&this.decode(a.toString())===a},pattern:/\d+/},bool:{encode:function(a){return a?1:0},decode:function(a){return 0!==parseInt(a,10)},is:function(a){return a===!0||a===!1},pattern:/0|1/},date:{encode:function(a){return this.is(a)?[a.getFullYear(),("0"+(a.getMonth()+1)).slice(-2),("0"+a.getDate()).slice(-2)].join("-"):c},decode:function(a){if(this.is(a))return a;var b=this.capture.exec(a);return b?new Date(b[1],b[2]-1,b[3]):c},is:function(a){return a instanceof Date&&!isNaN(a.valueOf())},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:b.toJson,decode:b.fromJson,is:b.isObject,equals:b.equals,pattern:/[^/]*/},any:{encode:b.identity,decode:b.identity,is:b.identity,equals:b.equals,pattern:/.*/}};s.$$getDefaultValue=function(a){if(!j(a.value))return a.value;if(!o)throw new Error("Injectable functions cannot be called at configuration time");return o.invoke(a.value)},this.caseInsensitive=function(a){return G(a)&&(p=a),p},this.strictMode=function(a){return G(a)&&(t=a),t},this.defaultSquashPolicy=function(a){if(!G(a))return u;if(a!==!0&&a!==!1&&!I(a))throw new Error("Invalid squash policy: "+a+". Valid policies: false, true, arbitrary-string");return u=a,a},this.compile=function(a,b){return new q(a,M(i(),b))},this.isMatcher=function(a){if(!J(a))return!1;var b=!0;return L(q.prototype,function(c,d){H(c)&&(b=b&&G(a[d])&&H(a[d]))}),b},this.type=function(a,b,c){if(!G(b))return v[a];if(v.hasOwnProperty(a))throw new Error("A type named '"+a+"' has already been defined.");return v[a]=new r(M({name:a},b)),c&&(x.push({name:a,def:c}),w||k()),this},L(y,function(a,b){v[b]=new r(M({name:b},a))}),v=d(v,{}),this.$get=["$injector",function(a){return o=a,w=!1,k(),L(y,function(a,b){v[b]||(v[b]=new r(a))}),this}],this.Param=function(a,b,d,e){function f(a){var b=J(a)?g(a):[],c=-1===h(b,"value")&&-1===h(b,"type")&&-1===h(b,"squash")&&-1===h(b,"array");return c&&(a={value:a}),a.$$fn=j(a.value)?a.value:function(){return a.value},a}function i(b,c,d){if(b.type&&c)throw new Error("Param '"+a+"' has two type configurations.");return c?c:b.type?b.type instanceof r?b.type:new r(b.type):"config"===d?v.any:v.string}function k(){var b={array:"search"===e?"auto":!1},c=a.match(/\[\]$/)?{array:!0}:{};return M(b,c,d).array}function l(a,b){var c=a.squash;if(!b||c===!1)return!1;if(!G(c)||null==c)return u;if(c===!0||I(c))return c;throw new Error("Invalid squash policy: '"+c+"'. Valid policies: false, true, or arbitrary string")}function p(a,b,d,e){var f,g,i=[{from:"",to:d||b?c:""},{from:null,to:d||b?c:""}];return f=K(a.replace)?a.replace:[],I(e)&&f.push({from:e,to:c}),g=n(f,function(a){return a.from}),m(i,function(a){return-1===h(g,a.from)}).concat(f)}function q(){if(!o)throw new Error("Injectable functions cannot be called at configuration time");return o.invoke(d.$$fn)}function s(a){function b(a){return function(b){return b.from===a}}function c(a){var c=n(m(w.replace,b(a)),function(a){return a.to});return c.length?c[0]:a}return a=c(a),G(a)?w.type.decode(a):q()}function t(){return"{Param:"+a+" "+b+" squash: '"+z+"' optional: "+y+"}"}var w=this;d=f(d),b=i(d,b,e);var x=k();b=x?b.$asArray(x,"search"===e):b,"string"!==b.name||x||"path"!==e||d.value!==c||(d.value="");var y=d.value!==c,z=l(d,y),A=p(d,x,y,z);M(this,{id:a,type:b,location:e,array:x,squash:z,replace:A,isOptional:y,value:s,dynamic:c,config:d,toString:t})},l.prototype={$$new:function(){return d(this,M(new l,{$$parent:this}))},$$keys:function(){for(var a=[],b=[],c=this,d=g(l.prototype);c;)b.push(c),c=c.$$parent;return b.reverse(),L(b,function(b){L(g(b),function(b){-1===h(a,b)&&-1===h(d,b)&&a.push(b)})}),a},$$values:function(a){var b={},c=this;return L(c.$$keys(),function(d){b[d]=c[d].value(a&&a[d])}),b},$$equals:function(a,b){var c=!0,d=this;return L(d.$$keys(),function(e){var f=a&&a[e],g=b&&b[e];d[e].type.equals(f,g)||(c=!1)}),c},$$validates:function(a){var b,c,d,e=!0,f=this;return L(this.$$keys(),function(g){d=f[g],c=a[g],b=!c&&d.isOptional,e=e&&(b||!!d.type.is(c))}),e},$$parent:c},this.ParamSet=l}function t(a,d){function e(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):""}function f(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)]})}function g(a,b,c){if(!c)return!1;var d=a.invoke(b,b,{$match:c});return G(d)?d:!0}function h(d,e,f,g){function h(a,b,c){return"/"===p?a:b?p.slice(0,-1)+a:c?p.slice(1)+a:a}function m(a){function b(a){var b=a(f,d);return b?(I(b)&&d.replace().url(b),!0):!1}if(!a||!a.defaultPrevented){var e=o&&d.url()===o;if(o=c,e)return!0;var g,h=j.length;for(g=0;h>g;g++)if(b(j[g]))return;k&&b(k)}}function n(){return i=i||e.$on("$locationChangeSuccess",m)}var o,p=g.baseHref(),q=d.url();return l||n(),{sync:function(){m()},listen:function(){return n()},update:function(a){return a?void(q=d.url()):void(d.url()!==q&&(d.url(q),d.replace()))},push:function(a,b,e){d.url(a.format(b||{})),o=e&&e.$$avoidResync?d.url():c,e&&e.replace&&d.replace()},href:function(c,e,f){if(!c.validates(e))return null;var g=a.html5Mode();b.isObject(g)&&(g=g.enabled);var i=c.format(e);if(f=f||{},g||null===i||(i="#"+a.hashPrefix()+i),i=h(i,g,f.absolute),!f.absolute||!i)return i;var j=!g&&i?"/":"",k=d.port();return k=80===k||443===k?"":":"+k,[d.protocol(),"://",d.host(),k,j,i].join("")}}}var i,j=[],k=null,l=!1;this.rule=function(a){if(!H(a))throw new Error("'rule' must be a function");return j.push(a),this},this.otherwise=function(a){if(I(a)){var b=a;a=function(){return b}}else if(!H(a))throw new Error("'rule' must be a function");return k=a,this},this.when=function(a,b){var c,h=I(b);if(I(a)&&(a=d.compile(a)),!h&&!H(b)&&!K(b))throw new Error("invalid 'handler' in when()");var i={matcher:function(a,b){return h&&(c=d.compile(b),b=["$match",function(a){return c.format(a)}]),M(function(c,d){return g(c,b,a.exec(d.path(),d.search()))},{prefix:I(a.prefix)?a.prefix:""})},regex:function(a,b){if(a.global||a.sticky)throw new Error("when() RegExp must not be global or sticky");return h&&(c=b,b=["$match",function(a){return f(c,a)}]),M(function(c,d){return g(c,b,a.exec(d.path()))},{prefix:e(a)})}},j={matcher:d.isMatcher(a),regex:a instanceof RegExp};for(var k in j)if(j[k])return this.rule(i[k](a,b));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(a){a===c&&(a=!0),l=a},this.$get=h,h.$inject=["$location","$rootScope","$injector","$browser"]}function u(a,e){function f(a){return 0===a.indexOf(".")||0===a.indexOf("^")}function l(a,b){if(!a)return c;var d=I(a),e=d?a:a.name,g=f(e);if(g){if(!b)throw new Error("No reference point given for path '"+e+"'");b=l(b);for(var h=e.split("."),i=0,j=h.length,k=b;j>i;i++)if(""!==h[i]||0!==i){if("^"!==h[i])break;if(!k.parent)throw new Error("Path '"+e+"' not valid for state '"+b.name+"'");k=k.parent}else k=b;h=h.slice(i).join("."),e=k.name+(k.name&&h?".":"")+h}var m=y[e];return!m||!d&&(d||m!==a&&m.self!==a)?c:m}function m(a,b){z[a]||(z[a]=[]),z[a].push(b)}function o(a){for(var b=z[a]||[];b.length;)p(b.shift())}function p(b){b=d(b,{self:b,resolve:b.resolve||{},toString:function(){return this.name}});var c=b.name;if(!I(c)||c.indexOf("@")>=0)throw new Error("State must have a valid name");if(y.hasOwnProperty(c))throw new Error("State '"+c+"'' is already defined");var e=-1!==c.indexOf(".")?c.substring(0,c.lastIndexOf(".")):I(b.parent)?b.parent:J(b.parent)&&I(b.parent.name)?b.parent.name:"";if(e&&!y[e])return m(e,b.self);for(var f in B)H(B[f])&&(b[f]=B[f](b,B.$delegates[f]));return y[c]=b,!b[A]&&b.url&&a.when(b.url,["$match","$stateParams",function(a,c){x.$current.navigable==b&&j(a,c)||x.transitionTo(b,a,{inherit:!0,location:!1})}]),o(c),b}function q(a){return a.indexOf("*")>-1}function r(a){var b=a.split("."),c=x.$current.name.split(".");if("**"===b[0]&&(c=c.slice(h(c,b[1])),c.unshift("**")),"**"===b[b.length-1]&&(c.splice(h(c,b[b.length-2])+1,Number.MAX_VALUE),c.push("**")),b.length!=c.length)return!1;for(var d=0,e=b.length;e>d;d++)"*"===b[d]&&(c[d]="*");return c.join("")===b.join("")}function s(a,b){return I(a)&&!G(b)?B[a]:H(b)&&I(a)?(B[a]&&!B.$delegates[a]&&(B.$delegates[a]=B[a]),B[a]=b,this):this}function t(a,b){return J(a)?b=a:b.name=a,p(b),this}function u(a,e,f,h,m,o,p){function s(b,c,d,f){var g=a.$broadcast("$stateNotFound",b,c,d);if(g.defaultPrevented)return p.update(),B;if(!g.retry)return null;if(f.$retry)return p.update(),C;var h=x.transition=e.when(g.retry);return h.then(function(){return h!==x.transition?u:(b.options.$retry=!0,x.transitionTo(b.to,b.toParams,b.options))},function(){return B}),p.update(),h}function t(a,c,d,g,i,j){var l=d?c:k(a.params.$$keys(),c),n={$stateParams:l};i.resolve=m.resolve(a.resolve,n,i.resolve,a);var o=[i.resolve.then(function(a){i.globals=a})];return g&&o.push(g),L(a.views,function(c,d){var e=c.resolve&&c.resolve!==a.resolve?c.resolve:{};e.$template=[function(){return f.load(d,{view:c,locals:n,params:l,notify:j.notify})||""}],o.push(m.resolve(e,n,i.resolve,a).then(function(f){if(H(c.controllerProvider)||K(c.controllerProvider)){var g=b.extend({},e,n);f.$$controller=h.invoke(c.controllerProvider,null,g)}else f.$$controller=c.controller;f.$$state=a,f.$$controllerAs=c.controllerAs,i[d]=f}))}),e.all(o).then(function(){return i})}var u=e.reject(new Error("transition superseded")),z=e.reject(new Error("transition prevented")),B=e.reject(new Error("transition aborted")),C=e.reject(new Error("transition failed"));return w.locals={resolve:null,globals:{$stateParams:{}}},x={params:{},current:w.self,$current:w,transition:null},x.reload=function(){return x.transitionTo(x.current,o,{reload:!0,inherit:!1,notify:!0})},x.go=function(a,b,c){return x.transitionTo(a,b,M({inherit:!0,relative:x.$current},c))},x.transitionTo=function(b,c,f){c=c||{},f=M({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},f||{});var g,j=x.$current,m=x.params,n=j.path,q=l(b,f.relative);if(!G(q)){var r={to:b,toParams:c,options:f},y=s(r,j.self,m,f);if(y)return y;if(b=r.to,c=r.toParams,f=r.options,q=l(b,f.relative),!G(q)){if(!f.relative)throw new Error("No such state '"+b+"'");throw new Error("Could not resolve '"+b+"' from state '"+f.relative+"'")}}if(q[A])throw new Error("Cannot transition to abstract state '"+b+"'");if(f.inherit&&(c=i(o,c||{},x.$current,q)),!q.params.$$validates(c))return C;c=q.params.$$values(c),b=q;var B=b.path,D=0,E=B[D],F=w.locals,H=[];if(!f.reload)for(;E&&E===n[D]&&E.ownParams.$$equals(c,m);)F=H[D]=E.locals,D++,E=B[D];if(v(b,j,F,f))return b.self.reloadOnSearch!==!1&&p.update(),x.transition=null,e.when(x.current);if(c=k(b.params.$$keys(),c||{}),f.notify&&a.$broadcast("$stateChangeStart",b.self,c,j.self,m).defaultPrevented)return p.update(),z;for(var I=e.when(F),J=D;J<B.length;J++,E=B[J])F=H[J]=d(F),I=t(E,c,E===b,I,F,f);var K=x.transition=I.then(function(){var d,e,g;if(x.transition!==K)return u;for(d=n.length-1;d>=D;d--)g=n[d],g.self.onExit&&h.invoke(g.self.onExit,g.self,g.locals.globals),g.locals=null;for(d=D;d<B.length;d++)e=B[d],e.locals=H[d],e.self.onEnter&&h.invoke(e.self.onEnter,e.self,e.locals.globals);return x.transition!==K?u:(x.$current=b,x.current=b.self,x.params=c,N(x.params,o),x.transition=null,f.location&&b.navigable&&p.push(b.navigable.url,b.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===f.location}),f.notify&&a.$broadcast("$stateChangeSuccess",b.self,c,j.self,m),p.update(!0),x.current)},function(d){return x.transition!==K?u:(x.transition=null,g=a.$broadcast("$stateChangeError",b.self,c,j.self,m,d),g.defaultPrevented||p.update(),e.reject(d))});return K},x.is=function(a,b,d){d=M({relative:x.$current},d||{});var e=l(a,d.relative);return G(e)?x.$current!==e?!1:b?j(e.params.$$values(b),o):!0:c},x.includes=function(a,b,d){if(d=M({relative:x.$current},d||{}),I(a)&&q(a)){if(!r(a))return!1;a=x.$current.name}var e=l(a,d.relative);return G(e)?G(x.$current.includes[e.name])?b?j(e.params.$$values(b),o,g(b)):!0:!1:c},x.href=function(a,b,d){d=M({lossy:!0,inherit:!0,absolute:!1,relative:x.$current},d||{});var e=l(a,d.relative);if(!G(e))return null;d.inherit&&(b=i(o,b||{},x.$current,e));var f=e&&d.lossy?e.navigable:e;return f&&f.url!==c&&null!==f.url?p.href(f.url,k(e.params.$$keys(),b||{}),{absolute:d.absolute}):null},x.get=function(a,b){if(0===arguments.length)return n(g(y),function(a){return y[a].self});var c=l(a,b||x.$current);return c&&c.self?c.self:null},x}function v(a,b,c,d){return a!==b||(c!==b.locals||d.reload)&&a.self.reloadOnSearch!==!1?void 0:!0}var w,x,y={},z={},A="abstract",B={parent:function(a){if(G(a.parent)&&a.parent)return l(a.parent);var b=/^(.+)\.[^.]+$/.exec(a.name);return b?l(b[1]):w},data:function(a){return a.parent&&a.parent.data&&(a.data=a.self.data=M({},a.parent.data,a.data)),a.data
},url:function(a){var b=a.url,c={params:a.params||{}};if(I(b))return"^"==b.charAt(0)?e.compile(b.substring(1),c):(a.parent.navigable||w).url.concat(b,c);if(!b||e.isMatcher(b))return b;throw new Error("Invalid url '"+b+"' in state '"+a+"'")},navigable:function(a){return a.url?a:a.parent?a.parent.navigable:null},ownParams:function(a){var b=a.url&&a.url.params||new O.ParamSet;return L(a.params||{},function(a,c){b[c]||(b[c]=new O.Param(c,null,a,"config"))}),b},params:function(a){return a.parent&&a.parent.params?M(a.parent.params.$$new(),a.ownParams):new O.ParamSet},views:function(a){var b={};return L(G(a.views)?a.views:{"":a},function(c,d){d.indexOf("@")<0&&(d+="@"+a.parent.name),b[d]=c}),b},path:function(a){return a.parent?a.parent.path.concat(a):[]},includes:function(a){var b=a.parent?M({},a.parent.includes):{};return b[a.name]=!0,b},$delegates:{}};w=p({name:"",url:"^",views:null,"abstract":!0}),w.navigable=null,this.decorator=s,this.state=t,this.$get=u,u.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function v(){function a(a,b){return{load:function(c,d){var e,f={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return d=M(f,d),d.view&&(e=b.fromConfig(d.view,d.params,d.locals)),e&&d.notify&&a.$broadcast("$viewContentLoading",d),e}}}this.$get=a,a.$inject=["$rootScope","$templateFactory"]}function w(){var a=!1;this.useAnchorScroll=function(){a=!0},this.$get=["$anchorScroll","$timeout",function(b,c){return a?b:function(a){c(function(){a[0].scrollIntoView()},0,!1)}}]}function x(a,c,d,e){function f(){return c.has?function(a){return c.has(a)?c.get(a):null}:function(a){try{return c.get(a)}catch(b){return null}}}function g(a,b){var c=function(){return{enter:function(a,b,c){b.after(a),c()},leave:function(a,b){a.remove(),b()}}};if(j)return{enter:function(a,b,c){var d=j.enter(a,null,b,c);d&&d.then&&d.then(c)},leave:function(a,b){var c=j.leave(a,b);c&&c.then&&c.then(b)}};if(i){var d=i&&i(b,a);return{enter:function(a,b,c){d.enter(a,null,b),c()},leave:function(a,b){d.leave(a),b()}}}return c()}var h=f(),i=h("$animator"),j=h("$animate"),k={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(c,f,h){return function(c,f,i){function j(){l&&(l.remove(),l=null),n&&(n.$destroy(),n=null),m&&(r.leave(m,function(){l=null}),l=m,m=null)}function k(g){var k,l=z(c,i,f,e),s=l&&a.$current&&a.$current.locals[l];if(g||s!==o){k=c.$new(),o=a.$current.locals[l];var t=h(k,function(a){r.enter(a,f,function(){n&&n.$emit("$viewContentAnimationEnded"),(b.isDefined(q)&&!q||c.$eval(q))&&d(a)}),j()});m=t,n=k,n.$emit("$viewContentLoaded"),n.$eval(p)}}var l,m,n,o,p=i.onload||"",q=i.autoscroll,r=g(i,c);c.$on("$stateChangeSuccess",function(){k(!1)}),c.$on("$viewContentLoading",function(){k(!1)}),k(!0)}}};return k}function y(a,b,c,d){return{restrict:"ECA",priority:-400,compile:function(e){var f=e.html();return function(e,g,h){var i=c.$current,j=z(e,h,g,d),k=i&&i.locals[j];if(k){g.data("$uiView",{name:j,state:k.$$state}),g.html(k.$template?k.$template:f);var l=a(g.contents());if(k.$$controller){k.$scope=e;var m=b(k.$$controller,k);k.$$controllerAs&&(e[k.$$controllerAs]=m),g.data("$ngControllerController",m),g.children().data("$ngControllerController",m)}l(e)}}}}}function z(a,b,c,d){var e=d(b.uiView||b.name||"")(a),f=c.inheritedData("$uiView");return e.indexOf("@")>=0?e:e+"@"+(f?f.state.name:"")}function A(a,b){var c,d=a.match(/^\s*({[^}]*})\s*$/);if(d&&(a=b+"("+d[1]+")"),c=a.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!c||4!==c.length)throw new Error("Invalid state ref '"+a+"'");return{state:c[1],paramExpr:c[3]||null}}function B(a){var b=a.parent().inheritedData("$uiView");return b&&b.state&&b.state.name?b.state:void 0}function C(a,c){var d=["location","inherit","reload"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(e,f,g,h){var i=A(g.uiSref,a.current.name),j=null,k=B(f)||a.$current,l=null,m="A"===f.prop("tagName"),n="FORM"===f[0].nodeName,o=n?"action":"href",p=!0,q={relative:k,inherit:!0},r=e.$eval(g.uiSrefOpts)||{};b.forEach(d,function(a){a in r&&(q[a]=r[a])});var s=function(c){if(c&&(j=b.copy(c)),p){l=a.href(i.state,j,q);var d=h[1]||h[0];return d&&d.$$setStateInfo(i.state,j),null===l?(p=!1,!1):void g.$set(o,l)}};i.paramExpr&&(e.$watch(i.paramExpr,function(a){a!==j&&s(a)},!0),j=b.copy(e.$eval(i.paramExpr))),s(),n||f.bind("click",function(b){var d=b.which||b.button;if(!(d>1||b.ctrlKey||b.metaKey||b.shiftKey||f.attr("target"))){var e=c(function(){a.go(i.state,j,q)});b.preventDefault();var g=m&&!l?1:0;b.preventDefault=function(){g--<=0&&c.cancel(e)}}})}}}function D(a,b,c){return{restrict:"A",controller:["$scope","$element","$attrs",function(b,d,e){function f(){g()?d.addClass(j):d.removeClass(j)}function g(){return"undefined"!=typeof e.uiSrefActiveEq?h&&a.is(h.name,i):h&&a.includes(h.name,i)}var h,i,j;j=c(e.uiSrefActiveEq||e.uiSrefActive||"",!1)(b),this.$$setStateInfo=function(b,c){h=a.get(b,B(d)),i=c,f()},b.$on("$stateChangeSuccess",f)}]}}function E(a){var b=function(b){return a.is(b)};return b.$stateful=!0,b}function F(a){var b=function(b){return a.includes(b)};return b.$stateful=!0,b}var G=b.isDefined,H=b.isFunction,I=b.isString,J=b.isObject,K=b.isArray,L=b.forEach,M=b.extend,N=b.copy;b.module("ui.router.util",["ng"]),b.module("ui.router.router",["ui.router.util"]),b.module("ui.router.state",["ui.router.router","ui.router.util"]),b.module("ui.router",["ui.router.state"]),b.module("ui.router.compat",["ui.router"]),o.$inject=["$q","$injector"],b.module("ui.router.util").service("$resolve",o),p.$inject=["$http","$templateCache","$injector"],b.module("ui.router.util").service("$templateFactory",p);var O;q.prototype.concat=function(a,b){var c={caseInsensitive:O.caseInsensitive(),strict:O.strictMode(),squash:O.defaultSquashPolicy()};return new q(this.sourcePath+a+this.sourceSearch,M(c,b),this)},q.prototype.toString=function(){return this.source},q.prototype.exec=function(a,b){function c(a){function b(a){return a.split("").reverse().join("")}function c(a){return a.replace(/\\-/,"-")}var d=b(a).split(/-(?!\\)/),e=n(d,b);return n(e,c).reverse()}var d=this.regexp.exec(a);if(!d)return null;b=b||{};var e,f,g,h=this.parameters(),i=h.length,j=this.segments.length-1,k={};if(j!==d.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(e=0;j>e;e++){g=h[e];var l=this.params[g],m=d[e+1];for(f=0;f<l.replace;f++)l.replace[f].from===m&&(m=l.replace[f].to);m&&l.array===!0&&(m=c(m)),k[g]=l.value(m)}for(;i>e;e++)g=h[e],k[g]=this.params[g].value(b[g]);return k},q.prototype.parameters=function(a){return G(a)?this.params[a]||null:this.$$paramNames},q.prototype.validates=function(a){return this.params.$$validates(a)},q.prototype.format=function(a){function b(a){return encodeURIComponent(a).replace(/-/g,function(a){return"%5C%"+a.charCodeAt(0).toString(16).toUpperCase()})}a=a||{};var c=this.segments,d=this.parameters(),e=this.params;if(!this.validates(a))return null;var f,g=!1,h=c.length-1,i=d.length,j=c[0];for(f=0;i>f;f++){var k=h>f,l=d[f],m=e[l],o=m.value(a[l]),p=m.isOptional&&m.type.equals(m.value(),o),q=p?m.squash:!1,r=m.type.encode(o);if(k){var s=c[f+1];if(q===!1)null!=r&&(j+=K(r)?n(r,b).join("-"):encodeURIComponent(r)),j+=s;else if(q===!0){var t=j.match(/\/$/)?/\/?(.*)/:/(.*)/;j+=s.match(t)[1]}else I(q)&&(j+=q+s)}else{if(null==r||p&&q!==!1)continue;K(r)||(r=[r]),r=n(r,encodeURIComponent).join("&"+l+"="),j+=(g?"&":"?")+(l+"="+r),g=!0}}return j},r.prototype.is=function(){return!0},r.prototype.encode=function(a){return a},r.prototype.decode=function(a){return a},r.prototype.equals=function(a,b){return a==b},r.prototype.$subPattern=function(){var a=this.pattern.toString();return a.substr(1,a.length-2)},r.prototype.pattern=/.*/,r.prototype.toString=function(){return"{Type:"+this.name+"}"},r.prototype.$asArray=function(a,b){function d(a,b){function d(a,b){return function(){return a[b].apply(a,arguments)}}function e(a){return K(a)?a:G(a)?[a]:[]}function f(a){switch(a.length){case 0:return c;case 1:return"auto"===b?a[0]:a;default:return a}}function g(a){return!a}function h(a,b){return function(c){c=e(c);var d=n(c,a);return b===!0?0===m(d,g).length:f(d)}}function i(a){return function(b,c){var d=e(b),f=e(c);if(d.length!==f.length)return!1;for(var g=0;g<d.length;g++)if(!a(d[g],f[g]))return!1;return!0}}this.encode=h(d(a,"encode")),this.decode=h(d(a,"decode")),this.is=h(d(a,"is"),!0),this.equals=i(d(a,"equals")),this.pattern=a.pattern,this.$arrayMode=b}if(!a)return this;if("auto"===a&&!b)throw new Error("'auto' array mode is for query parameters only");return new d(this,a)},b.module("ui.router.util").provider("$urlMatcherFactory",s),b.module("ui.router.util").run(["$urlMatcherFactory",function(){}]),t.$inject=["$locationProvider","$urlMatcherFactoryProvider"],b.module("ui.router.router").provider("$urlRouter",t),u.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],b.module("ui.router.state").value("$stateParams",{}).provider("$state",u),v.$inject=[],b.module("ui.router.state").provider("$view",v),b.module("ui.router.state").provider("$uiViewScroll",w),x.$inject=["$state","$injector","$uiViewScroll","$interpolate"],y.$inject=["$compile","$controller","$state","$interpolate"],b.module("ui.router.state").directive("uiView",x),b.module("ui.router.state").directive("uiView",y),C.$inject=["$state","$timeout"],D.$inject=["$state","$stateParams","$interpolate"],b.module("ui.router.state").directive("uiSref",C).directive("uiSrefActive",D).directive("uiSrefActiveEq",D),E.$inject=["$state"],F.$inject=["$state"],b.module("ui.router.state").filter("isState",E).filter("includedByState",F)}(window,window.angular),angular.module("checklist-model",[]).directive("checklistModel",["$parse","$compile",function(a,b){function c(a,b){if(angular.isArray(a))for(var c=0;c<a.length;c++)if(angular.equals(a[c],b))return!0;return!1}function d(a,b){a=angular.isArray(a)?a:[];for(var c=0;c<a.length;c++)if(angular.equals(a[c],b))return a;return a.push(b),a}function e(a,b){if(angular.isArray(a))for(var c=0;c<a.length;c++)if(angular.equals(a[c],b)){a.splice(c,1);break}return a}function f(f,g,h){b(g)(f);var i=a(h.checklistModel),j=i.assign,k=a(h.checklistValue)(f.$parent);f.$watch("checked",function(a,b){if(a!==b){var c=i(f.$parent);a===!0?j(f.$parent,d(c,k)):j(f.$parent,e(c,k))}}),f.$parent.$watch(h.checklistModel,function(a){f.checked=c(a,k)},!0)}return{restrict:"A",priority:1e3,terminal:!0,scope:!0,compile:function(a,b){if("INPUT"!==a[0].tagName||!a.attr("type","checkbox"))throw'checklist-model should be applied to `input[type="checkbox"]`.';if(!b.checklistValue)throw"You should provide `checklist-value`.";return a.removeAttr("checklist-model"),a.attr("ng-model","checked"),f}}}]),function(){"use strict";angular.module("base64",[]).constant("$base64",function(){function a(a,b){var c=f.indexOf(a.charAt(b));if(-1==c)throw"Cannot decode base64";return c}function b(b){b=""+b;var c,d,f,g=b.length;if(0==g)return b;if(g%4!=0)throw"Cannot decode base64";c=0,b.charAt(g-1)==e&&(c=1,b.charAt(g-2)==e&&(c=2),g-=4);var h=[];for(d=0;g>d;d+=4)f=a(b,d)<<18|a(b,d+1)<<12|a(b,d+2)<<6|a(b,d+3),h.push(String.fromCharCode(f>>16,f>>8&255,255&f));switch(c){case 1:f=a(b,d)<<18|a(b,d+1)<<12|a(b,d+2)<<6,h.push(String.fromCharCode(f>>16,f>>8&255));break;case 2:f=a(b,d)<<18|a(b,d+1)<<12,h.push(String.fromCharCode(f>>16))}return h.join("")}function c(a,b){var c=a.charCodeAt(b);if(c>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return c}function d(a){if(1!=arguments.length)throw"SyntaxError: Not enough arguments";var b,d,g=[];a=""+a;var h=a.length-a.length%3;if(0==a.length)return a;for(b=0;h>b;b+=3)d=c(a,b)<<16|c(a,b+1)<<8|c(a,b+2),g.push(f.charAt(d>>18)),g.push(f.charAt(d>>12&63)),g.push(f.charAt(d>>6&63)),g.push(f.charAt(63&d));switch(a.length-h){case 1:d=c(a,b)<<16,g.push(f.charAt(d>>18)+f.charAt(d>>12&63)+e+e);break;case 2:d=c(a,b)<<16|c(a,b+1)<<8,g.push(f.charAt(d>>18)+f.charAt(d>>12&63)+f.charAt(d>>6&63)+e)}return g.join("")}var e="=",f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";return{encode:d,decode:b}}())}(),function(a){return a.config(["$stateProvider","$urlRouterProvider","$httpProvider",function(a,b,c){var d,e,f,g;return b.otherwise("/enum/area"),d=function(){return/7000/.test(window.location.href)},e=function(a){return/api*/.test(a)},f=function(a){return e(a.url)&&(a.url="http://localhost:8080/services/"+a.url),a},g=function(){return{request:f}},d()?c.interceptors.push(g):void 0}])}(angular.module("myApp",["resampling","va","myApp.restore","base64","myApp.areaResolver","myApp.resolver","myApp.lodash","myApp.appService","myApp.idService","myApp.jsonSchemaListService","myApp.schemaLoader","myApp.focus","myApp.stateTransitions","myApp.report","myApp.backSpaceNav","angular-loading-bar","dashboard","esl","sync","enum","templates-app","templates-common","ui.router.state","ui.router","anguFixedHeaderTable","cgForm","security","steps","audioService","langToggle"])),function(a){return a.controller("AppController",["$scope","$window","AppService","IDService","$state","$rootScope","StateTransitions","$http","_","$stateParams","$modal","$q","toaster","$log","JsonSchemaListService","SchemaLoader","SchemaFactory","Audio","Lang",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t,u,v,w;return w=function(a,b){var c;return c=g[a],b&&(f.$stateParams[c.param]=b),e.go(c.to,f.$stateParams)},a.appRoot={},a.appRoot.localKeyboardInput=!1,a.appRoot.addNew=function(){return d.getNextID().then(function(a){return w(e.current.name,a)},function(){return w(e.current.name,void 0)})},a.cleanup=function(){var a;return a=b.confirm("Are you sure ?"),a?c.cleanup():void 0},v={},a.person={},a.metadata={},u=function(){var b;return b=function(b){var c;return c=[],b.forEach(function(a){return c=c.concat(a.synonyms)}),a.metadata.synonyms=c},h.get("assets/metadata/diseaseSynonyms.json").success(function(a){return v=a,b(a)}),h.get("assets/metadata/ageGroups.json").success(function(b){return a.metadata.ageGroups=b})},a.handleCauseOfDeath=function(b){var d;return d=f.$stateParams.deathId,c.postData("respondentcod",{deathId:d,summary:b}).then(function(){return n.info("saved respondent cod")}),a.person.disease=void 0,v.forEach(function(c){return i.contains(c.synonyms,b)?a.person.disease=c.disease:void 0}),a.person.disease=a.person.disease||"others",e.go("enum.eslDetail.birthDetails",j)},a.changeLanguage=function(a){var b,c,d;return f.lang=""!==a?"_"+a:a,d="en"===a?"":a+"/",b=function(a,b){return i.each(a,function(a,c){return q.put(a.replace(".json",""),b[c])})},c=function(a){return p.loadAllSchemas(a,"assets/jsonSchema/"+d).then(function(c){return b(a,c)})},o.getSchemaList("mvm").then(function(a){return c(a)})},u(),a.changeLanguage("gj"),a.steps=[{label:"Summary"},{label:"Positive Symptoms"},{label:"Probing Symptoms"},{label:"Medical Inf"},{label:"Narrative"}],f.getSymptomList=function(b){var c;return c=(new Date).getTime(),console.log("loading "+b+" symptom list"),h.get("assets/symptoms/"+b+".json?"+c).success(function(b){return a.symptomList=b,a.symptomList.forEach(function(a){return a.active=!1})})},t=function(){return a.participant={respondentCOD:"",medicalInformation:""},a.probing={},a.positiveSymptoms=[],a.negativeSymptoms=[],a.sortedSymptoms=[]},t(),a.selectSymptom=function(b){return b.active=!b.active,a.positiveSymptoms=i.filter(a.symptomList,function(a){return a.active})},a.filterSymptoms=function(){return a.positiveSymptoms=i.filter(a.symptomList,function(a){return a.active}),a.negativeSymptoms=i.filter(a.symptomList,function(a){return!a.active})},a.sortedSymptoms=[],a.clearSymptomOrdering=function(){return a.positiveSymptoms=i.filter(a.symptomList,function(a){return a.active}),a.negativeSymptoms=i.filter(a.symptomList,function(a){return!a.active}),a.sortedSymptoms=[]},a.extractSymptom=function(b){return a.sortedSymptoms.push(b),a.positiveSymptoms=i.remove(a.positiveSymptoms,function(a){return a.name!==b.name})},a.step1Complete=function(){return e.go("steps.step2")},a.readNotes=function(){var a;return r.stop(f.$stateParams.deathId,"summary"),a=k.open({templateUrl:"tpls/summary.jade",controller:"ModalInstanceCtrl"})},a.saveVA=function(){var b,d,g,h;return a.participant.narrative.length<124?void alert("Narrative is very short"):(b=f.$stateParams.deathId,g=function(a,b){return c.postData(a,b)},d=[],a.positiveSymptoms.forEach(function(a){var b;return b={name:a.name,probe:[]},a.properties.forEach(function(a){return b.probe.push({name:a.name,comment:a.comment,comments:a.comments})}),d.push(b)}),h=[g("respondentcod",{deathId:b,summary:a.participant.respondentCOD}),g("medicalinfo",{deathId:b,summary:a.participant.medicalInformation}),g("narrative",{deathId:b,summary:a.participant.narrative}),g("positiveSymptoms",{deathId:b,summary:JSON.stringify(d)})],l.all(h).then(function(){return m.pop("success","","Saved Successfully"),t(),c.getData("death",b).then(function(b){return console.log(b),j.houseId=b.houseId,j.householdId=b.householdId,console.log("keyboar flasg"),console.log(a.appRoot.localKeyboardInput),a.appRoot.localKeyboardInput===!0&&(s["switch"](),a.appRoot.localKeyboardInput=!1),e.go("enum.householdDetail.esl",j)})}))}}]),a.controller("ModalInstanceCtrl",["$scope","$modalInstance","AppService","$rootScope",function(a,b,c,d){return a.ok=function(a){return c.postData("feedback",{deathId:d.$stateParams.deathId,cooperation:a,surveytype:"va",surveyor:d.user.id}),b.close()}}]),a.filter("sentencecase",function(){return function(a){return a.substr(0,1).toUpperCase()+a.substr(1,a.length)}})}(angular.module("myApp")),function(a){return a.run(["$state","$stateParams","$rootScope","JsonSchemaListService","SchemaLoader","_","$log","SchemaFactory","Lang","Audio",function(a,b,c,d,e,f,g,h,i,j){var k,l,m;return k="mvm",c.$state=a,c.$stateParams=b,c.lang="",d.getSchemaList(k).then(function(a){return m(a)}),m=function(a){return e.loadAllSchemas(a,"assets/jsonSchema/").then(function(b){return l(a,b)})},l=function(a,b){return f.each(b,function(b,c){return h.put(a[c].replace(".json",""),b)})},c.$on("$stateChangeSuccess",function(a,b){var d,e,f,g,h;return d=c.$stateParams.deathId,h=b.name,f=function(){return h.indexOf("steps")>-1},g=function(){return h.indexOf("vaDetail")>-1},e=function(){return h.indexOf("eslDetail")>-1},(f()||g()||e())&&(c.restoreSession={state:h,params:JSON.stringify(c.$stateParams)}),"steps.step1"===b.name?j.start("full",d):"steps.step5"===b.name?(d=c.$stateParams.deathId,j.stop(d,"full").then(function(){return j.start("summary",d)})):void 0})}])}(angular.module("myApp")),function(a){return a.factory("AppService",["$http","toaster",function(a,b){var c;return c=function(){return b.pop("error","","Failed to fetch data")},{cleanup:function(){return a.get("api/data/cleanup").then(function(){return b.pop("success","","Cleaned up Successfully")},c)},getData:function(b,d){return a.get("api/entity/"+b+"/"+d).then(function(a){return a.data},c)},postData:function(b,c){return a.post("api/entity/"+b,c)}}}])}(angular.module("myApp.appService",["toaster"])),function(a){return a.config(["$stateProvider",function(a){return a.state("areaResolver",{url:"/enum/area/areaResolver/:areaId",templateUrl:"areaResolver/areaResolver.jade",controller:"AreaResolverCtrl"})}]),a.controller("AreaResolverCtrl",["$scope","$http","$stateParams","AppService","$state",function(a,b,c,d,e){var f;return f=c.areaId,d.getData("area",f).then(function(b){var d;return a.subject=b,d="enum.areaDetail.house",a.proceed=function(){return e.go(d,c)}})}])}(angular.module("myApp.areaResolver",["myApp.appService","ui.router"])),function(a){return a.factory("Audio",["$http",function(a){var b;return b=function(a){return console.log(a)},{stop:function(c,d){return a.get("api/audio/stop/"+d+"/"+c).then(function(){return b("Audio recording stopped")})},start:function(c,d){return a.get("api/audio/start/"+c+"/"+d).then(function(){return b("Audio recording started")})}}}])}(angular.module("audioService",[])),function(a){return a.config(["$stateProvider",function(a){return a.state("dashboard",{url:"/dashboard",templateUrl:"dashboard/dashboard.jade",controller:"Dashboard"})}])}(angular.module("dashboard",["ui.grid","dashboardService","ui.router","toaster"])),function(a){return a.controller("Dashboard",["$scope","$timeout","DashboardService","$q","$log","$http","toaster",function(a,b,c,d,e,f,g){var h,i,j,k;return k=a,k.progress={},h=["va","esl","downloads"],i=void 0,j=function(){var a;return a=h.map(function(a){return c.progressOf(a)}),d.all(a).then(function(a){return a.forEach(function(a,b){return k.progress[h[b]]=a}),i=b(j,5e3)})},j(),a.$on("$destroy",function(){return e.info("killed dashboard live update"),b.cancel(i)}),k.distributeData=function(){var a,b;return a=function(){return g.pop("success","","Distribution Successful")},b=function(){return g.pop("error","","Distribution Failed")},f.get("api/distribute").then(a,b)}}])}(angular.module("dashboard")),function(a){return a.factory("DashboardService",["$http","$log",function(a,b){var c,d;return c=function(){return b.error("error","","Failed to get dashboard data")},d=function(b){return a.get(b).then(function(a){return a.data},c)},{progressOf:function(a){var b;return b="api/dashboard/"+a,d(b)}}}])}(angular.module("dashboardService",[])),function(a){return a.controller("DataGridCtrl",["$scope","GridFactory","$state","AppService","$stateParams","_",function(a,b,c,d,e,f){var g;return a.canAddMore=!0,g={member:{entity:"household",variable:"householdCount",next:"enum.householdDetail.commonQs"},death:{entity:"deathInf",variable:"deceasedCount",next:"enum.householdDetail.esl"}},b.getData().then(function(){var h,i,j;return h=b.data.data.rows.length,j=c.current.name.split("."),i=g[f.last(j)],a.nextState=i.next,d.getData(i.entity,e.householdId).then(function(b){return a.canAddMore=b.householdCount?h<b[i.variable]-1:h<b[i.variable]})})}])}(angular.module("myApp.dataGrid",["ui.router","cgGrid","myApp.appService","myApp.lodash"])),function(a){return a.config(["$stateProvider","enumRoutes","RouteConfigHandler",function(a,b,c){return a.state(b.name,{url:b.url,templateUrl:b.tpl}),c.configRoutesForChildren(a,b.name,b.children)}])}(angular.module("enum",["ui.router","myApp.routeConfigHandler","enumRoutes","myApp.dataGrid"])),angular.module("enumRoutes",[]).constant("enumRoutes",{name:"enum",url:"/enum",tpl:"enum/enum.jade",children:[{name:"area",url:"/area",tpl:"tpls/dataGridCentered.jade",title:"Areas",msg:"Select an Area",children:[]},{name:"cod",url:"/area/:areaId/house/:houseId/household/:householdId/esl/:deathId/cod",tpl:"tpls/cod.html"},{name:"areaDetail",url:"/area/:areaId",tpl:"tpls/pageDetail.jade",title:"Houses",prevState:{name:"enum.area",title:"Areas"},children:[{name:"house",url:"/house",tpl:"tpls/dataGrid.jade",title:"Houses",addNew:!0,msg:"Add/Select a House"}]},{name:"houseDetail",url:"/area/:areaId/house/:houseId",tpl:"tpls/pageDetail.jade",title:"Households",prevState:{name:"enum.areaDetail.house",title:"Houses"},children:[{name:"basicInf",url:"/basicInf",tpl:"tpls/surveyFormDirective.jade",title:"Basic Inf"},{name:"household",url:"/household",tpl:"tpls/dataGrid.jade",title:"Households",addNew:!0,msg:"Add/Select a Household"}]},{name:"householdDetail",url:"/area/:areaId/house/:houseId/household/:householdId",tpl:"tpls/pageDetail.jade",defaultState:"member",title:"Members",prevState:{name:"enum.houseDetail.household",title:"Households"},children:[{name:"basicInf",url:"/basicInf",tpl:"tpls/surveyFormDirective.jade",title:"Basic Information"},{name:"deathInf",url:"/deathInf",tpl:"tpls/surveyFormDirective.jade",title:"Death Inf"},{name:"consent",url:"/consent",tpl:"tpls/surveyFormDirective.jade",title:"Consent"},{name:"esl",url:"/esl",tpl:"enum/dataGrid/dataGrid.jade",title:"Deaths",addNew:!0}]},{name:"visitDetail",url:"/area/:areaId/house/:houseId/household/:householdId/visit/:visitId",tpl:"tpls/pageDetail.jade",title:"",prevState:{name:"enum.householdDetail.visit",title:"Visits"},children:[{name:"basicInf",url:"/basicInf",tpl:"tpls/surveyFormDirective.jade",title:"Basic Inf"}]},{name:"memberDetail",url:"/area/:areaId/house/:houseId/household/:householdId/member/:memberId",tpl:"tpls/pageDetail.jade",title:"",prevState:{name:"enum.householdDetail.member",title:"Members"},children:[{name:"basicInf",url:"/basicInf",tpl:"tpls/surveyFormDirective.jade",title:"Basic Inf"}]},{name:"deathDetail",url:"/area/:areaId/house/:houseId/household/:householdId/death/:deathId",tpl:"tpls/pageDetail.jade",title:"",prevState:{name:"enum.householdDetail.esl",title:"Deaths"},children:[{name:"basicInf",url:"/basicInf",tpl:"tpls/surveyFormDirective.jade",title:"Basic Inf"}]},{name:"vaDetail",url:"/area/:areaId/house/:houseId/household/:householdId/va/:deathId",tpl:"tpls/pageDetail.jade",title:"",prevState:{name:"enum.householdDetail.esl",title:"Deaths"},children:[{name:"neonate",url:"/neonate",tpl:"tpls/surveyFormDirective.jade",title:"Birth/Delivery Details"},{name:"vaInjury",url:"/injury",tpl:"tpls/surveyFormDirective.jade",title:"Injury"},{name:"vaChild",url:"/child",tpl:"tpls/surveyFormDirective.jade",title:"Child Birth Details"},{name:"adult",url:"/adult",tpl:"tpls/surveyFormDirective.jade",title:"Past Medical History"},{name:"maternal",url:"/maternal",tpl:"tpls/surveyFormDirective.jade",title:"Pregnancy Details"},{name:"tobaccoDeath",url:"/tobaccoDeath",tpl:"tpls/surveyFormDirective.jade",title:"Tobacco Deceased"},{name:"tobaccoResp",url:"/tobaccoResp",tpl:"tpls/surveyFormDirective.jade",title:"Tobacco Respondent"}]},{name:"eslDetail",url:"/area/:areaId/house/:houseId/household/:householdId/esl/:deathId",tpl:"enum/esl/esl.html",title:"",prevState:{name:"enum.householdDetail.esl",title:"Deaths"},children:[{label:"Birth Details",name:"birthDetails",range:"0-5"},{label:"Immunization",name:"immunization",range:"0-15"},{label:"Illness/Skin",name:"illnessSkin",range:"0-100"},{label:"Fever",name:"fever",range:"0-100"},{label:"Breathing Problems",name:"breathing",range:"0-100"},{label:"Chest Pain",name:"chestPain",range:"1-100"},{label:"Diarrhoea",name:"diarrhoeaVomit",range:"0-100"},{label:"Abdominal Problems",name:"abdominalUrine",range:"0-100"},{label:"Consciousness",name:"consciousness",range:"0-100"},{label:"Paralysis",name:"paralysis",range:"5-100"},{label:"Weight",name:"weight",range:"1-100"},{label:"Injury",name:"injury",range:"0-100"},{label:"Pregnancy",name:"pregnancy",range:"12-49"},{label:"Medical History",name:"medicalHistory",range:"1-100"},{label:"Health Care",name:"healthcare",range:"0-100"},{label:"Tobacco",name:"tobacco",range:"5-100"},{label:"Feedback",name:"feedback",range:"0-100"}]}]}),function(a){a.controller("EslCtrl",["$scope","$state","$rootScope","AppService","$stateParams","toaster",function(a,b,c,d,e,f){function g(a,b){switch(b){case"Days":return a/365;case"Months":return 30*a/365;case"Years":return a}}function h(a){var b=[{name:"neonatal",range:"0-0.077"},{name:"child1",range:"0.077-1"},{name:"child2",range:"1-5.01"},{name:"child3",range:"5-15"},{name:"adult",range:"15-100"}],c=_.find(b,function(b){var c=b.range.split("-");return a>=parseFloat(c[0])&&a<parseFloat(c[1])});return c.name}function i(b){function c(a){return _.find(d.diseases,function(b){return a==b.name})}var d=_.find(a.metadata.ageGroups,function(a){return a.name==b}),e=c(a.person.disease)||c("others");return(d.first?d.first+",":"")+e.pattern+","+d.last+",17"}var j=e.deathId,k={};a.eslConfigChildren=[{label:"Birth Details",name:"birthDetails",range:"0-5.01"},{label:"Immunization",name:"immunization",range:"0-15"},{label:"Illness/Skin",name:"illnessSkin",range:"0-100"},{label:"Fever",name:"fever",range:"0-100"},{label:"Breathing Problems",name:"breathing",range:"0-100"},{label:"Chest Pain",name:"chestPain",range:"1-100"},{label:"Diarrhoea",name:"diarrhoeaVomit",range:"0-100"},{label:"Abdominal Problems",name:"abdominalUrine",range:"0-100"},{label:"Consciousness",name:"consciousness",range:"0-100"},{label:"Paralysis",name:"paralysis",range:"5-100"},{label:"Weight",name:"weight",range:"1-100"},{label:"Injury",name:"injury",range:"0-100"},{label:"Pregnancy",name:"pregnancy",range:"12-49",sex:"Female"},{label:"Medical History",name:"medicalHistory",range:"1-100"},{label:"Health Care",name:"healthcare",range:"0-100"},{label:"Tobacco",name:"tobacco",range:"5-100"},{label:"Feedback",name:"feedback",range:"0-100"}],a.eslConfig={name:"eslDetail",url:"/area/:areaId/house/:houseId/household/:householdId/esl/:deathId",tpl:"enum/esl/esl.html",title:"",prevState:{name:"enum.householdDetail.esl",title:"ESL"},children:[]},d.getData("death",j).then(function(c){k=c,k.age=g(k.age_value,k.age_unit);var d=i(h(k.age)),f=d.split(",");f.forEach(function(b){a.eslConfig.children.push(a.eslConfigChildren[parseFloat(b-1)])}),("Male"==k.sex||"Female"==k.sex&&k.age<12)&&_.remove(a.eslConfig.children,function(a){return"pregnancy"==a.name}),b.go("enum.eslDetail."+a.eslConfig.children[0].name,e)}),a.handleEslNav=function(){var c=_.findIndex(a.eslConfig.children,function(a){return b.current.name=="enum.eslDetail."+a.name}),d=a.eslConfig.children[c+1],g=d?"enum.eslDetail."+d.name:"enum.householdDetail.esl";b.go(g,e),"enum.householdDetail.esl"==g&&f.pop("success","","Saved Successfully")}}])}(angular.module("esl",["ui.router","myApp.appService","toaster"])),function(a){return a.factory("Lang",["$http",function(a){return{"switch":function(){return console.log("Language Switched"),a.get("api/langToggle")}}}])}(angular.module("langToggle",[])),function(a){return a.config(["$stateProvider",function(a){return a.state("report",{url:"/report/:reportId",templateUrl:"report/report.jade",controller:"ReportCtrl"})}])}(angular.module("myApp.report",["ui.router","sideMenu"])),function(a){return a.controller("ReportCtrl",["$window","$scope",function(a,b){var c;return c=b,c.reportOptions={skin:"dhx_skyblue",width:.8*a.innerWidth+"px",height:.8*a.innerHeight+"px"},c.reportMenu=[{id:1,label:"Enumeration",items:[{id:11,label:"Areas"},{id:12,label:"Houses"},{id:13,label:"Households"},{id:14,label:"Members"},{id:15,label:"Deaths"},{id:16,label:"Narrative"}]},{id:3,label:"Users & Teams",items:[{id:31,label:"Surveyors"}]}]}])}(angular.module("myApp.report")),function(a){return a.config(["$stateProvider",function(a){return a.state("resampling",{url:"/resampling",templateUrl:"resampling/resampling.jade",controller:"ResamplingCtrl"}).state("resamplingSurvey",{url:"/resampling/:memberId",templateUrl:"tpls/resampling.jade"})}]),a.controller("ResamplingCtrl",["$scope","$stateParams","$http","$state",function(a,b,c,d){var e;return e=a,c.get("api/resampling").then(function(a){return e.resampling=a.data,console.log(a.data)}),e.resampleSurvey=function(a){return b.memberId=a,d.go("resamplingSurvey",b)}}])}(angular.module("resampling",["ui.router"])),function(a){return a.config(["$stateProvider",function(a){return a.state("resolver",{url:"/enum/area/:areaId/house/:houseId/household/:householdId/resolver/:deathId",templateUrl:"resolver/resolver.jade",controller:"resolverCtrl"})}]),a.controller("resolverCtrl",["$scope","$http","$stateParams","AppService","$state","Lang",function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n;return h=c.deathId,n=void 0,l=function(a,b,c){return"Female"===c&&"Years"===b&&a>=15&&50>a},j=function(a,b){return"Years"===b&&a>=15},k=function(a,b){var c;return c=g(a,b),c>.079&&15>c},m=function(a,b){return"Days"===b&&30>a},a.enableLocalKeyboard=function(b){return a.appRoot.localKeyboardInput=b,f["switch"]()},i=function(a,b,c,d){return"esl"===a?"enum.cod":"va"===a?j(b,c)?"enum.vaDetail.adult":l(b,c,d)?"enum.vaDetail.maternal":m(b,c)?"enum.vaDetail.neonate":k(b,c)?"enum.vaDetail.vaInjury":"steps.step1":void 0},d.getData("death",h).then(function(b){var d;return a.subject=b,d=i(b.surveytype,b.age_value,b.age_unit,b.sex),a.proceed=function(){return e.go(d,c)}}),g=function(a,b){switch(b){case"Days":return a/365;case"Months":return 30*a/365;case"Years":return a}}}])}(angular.module("myApp.resolver",["myApp.appService","ui.router","langToggle"])),function(a){return a.config(["$stateProvider",function(a){return a.state("restore",{url:"/restore",templateUrl:"restore/restore.jade",controller:"restoreCtrl"})
}]),a.controller("restoreCtrl",["$rootScope","$state",function(a,b){var c;return(c=function(){var c,d;return console.log("restoring previous session"),console.log(a.restoreSession),d=a.restoreSession.state,c=a.restoreSession.params,b.go(d,JSON.parse(c))})()}])}(angular.module("myApp.restore",["ui.router"])),function(a){return a.constant("StateTransitions",{"enum.areaDetail.house":{to:"enum.houseDetail.basicInf",param:"houseId"},"enum.houseDetail.household":{to:"enum.householdDetail.basicInf",param:"householdId"},"enum.householdDetail.member":{to:"enum.memberDetail.basicInf",param:"memberId"},"enum.householdDetail.visit":{to:"enum.visitDetail.basicInf",param:"visitId"},"enum.householdDetail.head":{to:"enum.headDetail.basicInf",param:"memberId"},"enum.householdDetail.hosp":{to:"enum.hospDetail.basicInf",param:"memberId"},"enum.householdDetail.esl":{to:"enum.deathDetail.basicInf",param:"deathId"},"hc.householdDetail.visit":{to:"hc.visitDetail.basicInf",param:"visitId"}})}(angular.module("myApp.stateTransitions",[])),function(a){a.config(["$stateProvider",function(a){a.state("steps",{url:"/va/area/:areaId/vaDeath/:deathId/steps",templateUrl:"steps/steps.html"});for(var b=1;6>b;b++)a.state("steps.step"+b,{url:"/step"+b,templateUrl:"steps/step"+b+".html"})}]),a.controller("VACtrl",["$http","$log","$stateParams","AppService","$rootScope",function(a,b,c,d,e){d.getData("death",c.deathId).then(function(a){e.domain="Years"==a.age_unit&&a.age_value>=15?"adult":"child",console.log("domain "+e.domain),e.getSymptomList(e.domain)})}])}(angular.module("steps",["ui.router","checklist-model"])),function(a){return a.config(["$stateProvider",function(a){return a.state("va",{url:"/va",templateUrl:"va/va.jade"}).state("va.area",{url:"/area",templateUrl:"tpls/dataGridCentered.jade",title:"Areas",msg:"Select an Area",children:[]}).state("va.areaDetail",{url:"/area/:areaId",templateUrl:"tpls/pageDetail.jade",title:"VA Deaths",data:{prev:{name:"va.area",title:"Areas"}}}).state("va.areaDetail.death",{url:"/vaDeath",templateUrl:"tpls/dataGrid.jade",title:"VA Deaths"})}])}(angular.module("va",["ui.router","myApp.dataGrid"])),function(a){return a.directive("keypressEvents",["$document","jQuery",function(a,b){var c;return c=function(){return a.bind("keypress",function(a){var c,d;return c=b(a.target||a.srcElement),d=function(a){return!a.is("input:text,input:password,textarea")},8===a.keyCode&&d()?a.preventDefault():void 0})},{restrict:"A",link:c}}])}(angular.module("myApp.backSpaceNav",["myApp.jQuery"])),function(a){return a.factory("FileUploadService",["$http","toaster",function(a,b){var c,d;return d="api/fileEntity/",c={transformRequest:angular.identity,headers:{"Content-Type":void 0}},{upload:function(e,f){return a.post(d+f,e,c).success(function(){return console.log("success"),b.pop("success","","Uploaded Successfully")}).error(function(){return b.pop("error","","Error while uploading")})}}}])}(angular.module("fileUploadService",["toaster"])),function(a){return a.directive("focus",["$timeout",function(a){var b;return b=function(b,c){var d;return d=function(b){var d;return d=function(){return c[0].focus()},"true"===b?a(d,0):void 0},b.$watch("trigger",d)},{scope:{trigger:"@focus"},link:b}}])}(angular.module("myApp.focus",[])),function(a){return a.factory("IDService",["$http","$location","$log",function(a,b,c){return{getNextID:function(){return a.get("api/IDService"+b.url()).then(function(a){return console.log(a),a.data.id},function(){return c.error("Error getting next id")})}}}])}(angular.module("myApp.idService",[])),function(a){return a.factory("jQuery",["$window",function(a){return a.jQuery}])}(angular.module("myApp.jQuery",[])),function(a){return a.factory("JsonSchemaListService",["$http","$window","$log",function(a,b,c){var d,e,f;return d=function(){return/7000/.test(b.location.href)?"dev":"prod"},f=function(a,b){return"dev"===a?b:""},e=function(a){var b;return b=d(),"api/survey/jsonSchemaList/"+b+"/"+f(b,a)},{getSchemaList:function(b){var d;return d=e(b),a.get(d).then(function(a){return a.data},function(){return c.error("Failed to load json schema")})}}}])}(angular.module("myApp.jsonSchemaListService",[])),function(a){return a.factory("_",["$window",function(a){return a._}])}(angular.module("myApp.lodash",[])),function(a){return a.constant("RouteConfigHandler",{configRoutesForChildren:function(a,b,c){var d;return d=this,angular.forEach(c,function(e){var f,g,h,i;return i=function(a){return a.children?d.getData(a,c,b):{}},h=function(a){var b;return(null!=(b=a.children)?b.length:void 0)>0},g=i(e),f=h(e),a.state(b+"."+e.name,{url:e.url||"/"+e.name,templateUrl:e.tpl||"tpls/surveyFormCustomNav.jade",title:e.title,addNew:e.addNew,msg:e.msg,data:g,"abstract":f}),e.children?d.configRoutesForChildren(a,b+"."+e.name,e.children):void 0})},getData:function(a,b,c){var d,e;return e=a.prevState,d={prev:e,children:a.children,thisState:{name:c+"."+a.name,title:a.title,addNew:a.addNew}}}})}(angular.module("myApp.routeConfigHandler",[])),function(a){return a.factory("SchemaLoader",["$http","$q","$log","_",function(a,b,c,d){var e;return e=(new Date).getTime(),{loadAllSchemas:function(f,g){var h,i,j;return i=d.map(f,function(b){return a.get(g+b+"?"+e)}),j=function(a){return d.map(a,function(a){return a.data})},h=function(){return c.error("Failed to load json schemas")},b.all(i).then(j,h)}}}])}(angular.module("myApp.schemaLoader",["myApp.lodash"])),function(a){a.directive("accessLevel",["Auth",function(a){function b(b,c,d){function e(){if(f&&g){var b=a.authorize(g,f)?h:"none";c.css("display",b)}}var f,g,h=c.css("display");b.user=a.user,b.$watch("user",function(a){a.role&&(f=a.role),e()},!0),d.$observe("accessLevel",function(a){a&&(g=b.$eval(a)),e()})}return{restrict:"A",link:b}}])}(angular.module("accessLevel",["authService"])),function(){}(angular.module("auth",["authService","accessLevel"])),function(a){return a.factory("AuthDefaultConfig",function(){return{authUrl:"api/security/auth",registerUrl:"api/user",logoutUrl:"api/security/logout"}})}(angular.module("authDefaultConfig",[])),function(a){a.factory("Auth",["$http","$cookieStore","routingConfig","AuthDefaultConfig","$rootScope",function(a,b,c,d,e){function f(a){angular.extend(i,a)}var g=c.accessLevels(),h=c.userRoles(),i=b.get("user")||{username:"",role:h["public"]};return i=angular.fromJson(i),e.user=i,b.remove("user"),{authorize:function(a,b){return void 0===b&&(b=i.role),a.bitMask&b.bitMask},isLoggedIn:function(a){return void 0===a&&(a=i),a.role.title==h.user.title||a.role.title==h.manager.title},register:function(b,c,e){a.post(d.registerUrl,b).success(function(a){f(a),c()}).error(e)},login:function(b,c,e){a.post(d.authUrl,b).success(function(a){f(a),c(a)}).error(e)},logout:function(b,c){a.get(d.logoutUrl).success(function(){f({username:"",role:h["public"]}),b()}).error(c)},accessLevels:g,userRoles:h,user:i}}])}(angular.module("authService",["routingConfig","authDefaultConfig"])),function(a){var b={roles:["public","user","manager"],accessLevels:{"public":"*",anon:["public"],user:["user","manager"],manager:["manager"]}};a.constant("routingConfig",{userRoles:function(){var a=b.roles,c="01",d={};for(var e in a){var f=parseInt(c,2);d[a[e]]={bitMask:f,title:a[e]},c=(f<<1).toString(2)}return d},accessLevels:function(){var a=this.userRoles(),c=b.accessLevels,d={};for(var e in c){var f,g;if("string"==typeof c[e])if("*"==c[e]){f="";for(g in a)f+="1";d[e]={bitMask:parseInt(f,2),title:c[e]}}else console.log("Access Control Error: Could not parse '"+c[e]+"' as access definition for level '"+e+"'");else{f=0;for(g in c[e])a.hasOwnProperty(c[e][g])?f|=a[c[e][g]].bitMask:console.log("Access Control Error: Could not find role '"+c[e][g]+"' in registered roles while building access for '"+e+"'");d[e]={bitMask:f,title:c[e][g]}}}return d}})}(angular.module("routingConfig",["ui.router"])),function(a){return a.config(["$stateProvider","routingConfig",function(a,b){var c;return c=b.accessLevels(),a.state("forgotPassword",{url:"/forgotPassword",templateUrl:"security/forgotPassword/forgotPassword.jade",controller:"ForgotPasswordCtrl",controllerAs:"forgotPassword",access:c.anon})}])}(angular.module("forgotPassword",["ui.router","auth"])),function(a){return a.controller("ForgotPasswordCtrl",["toaster",function(a){return this.sendEmail=function(){return a.pop("success","","Password sent to your email")}}])}(angular.module("forgotPassword")),function(a){return a.config(["$stateProvider","routingConfig",function(a,b){var c;return c=b.accessLevels(),a.state("login",{url:"/login",controller:"LoginCtrl",templateUrl:"security/login/login.jade",access:c.anon})}])}(angular.module("login",["ui.router","auth","toaster","angular-md5"])),function(a){return a.controller("LoginCtrl",["$scope","$rootScope","$location","$window","Auth","toaster","md5",function(a,b,c,d,e,f,g){var h;return h=a,h.login=function(a,d){var h,i,j;return h={username:a,password:g.createHash(d)},j=function(e){return b.user=e,c.path("/"),a="",d=""},i=function(){return f.pop("error","","Invalid username/password")},e.login(h,j,i)}}])}(angular.module("login")),function(a){a.controller("NavCtrl",["$location","Auth","$rootScope",function(a,b,c){var d=this;d.user=b.user,d.userRoles=b.userRoles,d.accessLevels=b.accessLevels,d.logout=function(){b.logout(function(){c.user={username:"",role:d.userRoles["public"]},a.path("/login")},function(){c.error="Failed to logout"})}}])}(angular.module("navigation",["auth"])),function(a){return a.config(["$stateProvider","routingConfig",function(a,b){var c;return c=b.accessLevels(),a.state("register",{url:"/register",controller:"RegisterCtrl",templateUrl:"security/register/register.jade",access:c.anon})}])}(angular.module("register",["ui.router","auth","toaster"])),function(a){return a.controller("RegisterCtrl",["$rootScope","$scope","$location","Auth","toaster",function(a,b,c,d,e){return b.role=d.userRoles.user,b.userRoles=d.userRoles,b.register=function(b){return e.pop("info","Alert","Registration successful !"),d.register(b,function(){return c.path("/")},function(b){return a.error=b})}}])}(angular.module("register")),function(a){a.config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","$provide",function(a,b,c,d,e){e.factory("errorInterceptor",["$location","$q",function(a,b){return{responseError:function(c){return 401===c.status&&a.path("/login"),b.reject(c)}}}]),d.interceptors.push("errorInterceptor")}]).run(["$rootScope","$location","Auth","$cookieStore","$timeout","routingConfig",function(a,b,c,d,e,f){a.accessLevels=f.accessLevels(),a.$on("$stateChangeStart",function(d,e){if(e.access=e.access||f.accessLevels().user,a.error=null,!c.authorize(e.access)){var g=c.isLoggedIn()?"/":"/login";b.path(g)}})}])}(angular.module("security",["ui.router","ngCookies","auth","login","forgotPassword","register","navigation"])),function(a){return a.directive("sideMenu",function(){return{restrict:"E",scope:{menuOptions:"=config"},templateUrl:"sideMenu/sideMenu.jade"}})}(angular.module("sideMenu",["ui.router"])),function(a){return a.factory("ProgressService",["$http","$log","toaster","$rootScope",function(a,b,c,d){var e,f,g;return e=function(a){return c.pop("error","",a)},f=function(a){return"user"===a?"Sync Failed.Retry.":"Sync Failed.Check Internet connection.Retry"},g=f(d.user.role.title),{startSync:function(){return a.get("api/sync/dataSync/"+d.user.role.title).then(function(){return c.pop("success","","Sync Successful")},function(){return c.pop("error","",g)})},getNetworkStatus:function(){return a.get("api/sync/networkStatus").then(function(a){return a.data.status},function(){return c.pop("error","","Failed to get Network status")})},getStatus:function(b){return a.get("api/sync/status/"+b).then(function(a){return a.data},function(){return c.pop("error","","Failed to get status of"+b)})}}}])}(angular.module("progressService",["toaster"])),function(a){return a.config(["$stateProvider",function(a){return a.state("sync",{url:"/sync",templateUrl:"sync/sync.jade",controller:"SyncCtrl"})}])}(angular.module("sync",["ui.router","progressService","toaster","ui.bootstrap"])),function(a){return a.controller("SyncCtrl",["$scope","ProgressService","$q","$timeout","$log",function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p;return p=a,k={networkStatus:1e4,progress:1e3},j=void 0,l=void 0,n=function(){return b.getNetworkStatus().then(function(a){return p.networkStatus=a,a?void 0:j=d(n,k.networkStatus)})},n(),h=function(){return d.cancel(j)},g=["download","upload","fileupload"],p.total={download:void 0,upload:void 0,fileupload:void 0},p.progress={download:0,upload:0,fileupload:0},p.pendingUploads=void 0,p.pendingFileUploads=void 0,f=function(a,b){return Math.floor(100*(a-b)/a)},o=function(){var a;return a=g.map(function(a){return b.getStatus(a)}),c.all(a).then(function(a){return a.forEach(function(b,c){return p.total[g[c]]||(p.total[g[c]]=b),p.progress[g[c]]=f(p.total[g[c]],b),p.pendingUploads=a[1],p.pendingFileUploads=a[2]}),l=d(o,k.progress)})},i=function(){return e.info("Polling killed"),p.syncRequestActive=!1,d.cancel(j),d.cancel(l)},m=function(){return p.syncRequestActive=!1,e.info("Sync completed"),d(i,3e3)},o(),p.startSync=function(){return p.syncRequestActive=!0,b.startSync().then(m,i)},a.$on("$destroy",i)}])}(angular.module("sync")),angular.module("templates-app",["enum/esl/esl.html","steps/step1.html","steps/step2.html","steps/step3.html","steps/step4.html","steps/step5.html","steps/steps.html","tpls/cod.html","areaResolver/areaResolver.jade","dashboard/dashboard.jade","enum/dataGrid/dataGrid.jade","enum/enum.jade","formTemplates/alcoholForm.jade","formTemplates/ffqForm.jade","formTemplates/ffqOtherForm.jade","formTemplates/medicalHistoryForm.jade","report/report.jade","resampling/resampling.jade","resolver/resolver.jade","restore/restore.jade","tpls/alcoholFormDirective.jade","tpls/dataGrid.jade","tpls/dataGridCentered.jade","tpls/ffqFormDirective.jade","tpls/ffqOtherFormDirective.jade","tpls/fmhDiseaseFormDirective.jade","tpls/pageDetail.jade","tpls/pageDetailNavDisabled.jade","tpls/resampling.jade","tpls/standardFormDirective.jade","tpls/summary.jade","tpls/surveyFormCustomNav.jade","tpls/surveyFormDirective.jade","va/va.jade"]),angular.module("enum/esl/esl.html",[]).run(["$templateCache",function(a){a.put("enum/esl/esl.html",'<div ng-controller="EslCtrl">\n    <div class="row clearfix"></div>\n    <div class=\'col-md-2\'\n         ng-init="parent=eslConfig.thisState;prev=eslConfig.prevState;">\n        <a ng-click="$state.go(prev.name,$stateParams)" href=\'\'>&laquo; Back to {{prev.title}} </a>\n\n        <div class="well sidebar-nav sidebar-nav-fixed" style="margin-left:10px;overflow:scroll;height: 400px">\n            <ul class="nav nav-list">\n\n                <li class="nav-header"></li>\n                <li ui-sref-active="sidebarActive"\n                    ng-repeat="childState in eslConfig.children">\n                    <a ui-sref="{{parent.name}}.{{childState.name}}">\n                        {{childState.label}}\n                    </a>\n                </li>\n            </ul>\n        </div>\n    </div>\n    <div class=\'col-md-9\' style="padding-top:15px">\n        <div ui-view></div>\n    </div>\n    <div class="col-md-1"></div>\n</div>\n')}]),angular.module("steps/step1.html",[]).run(["$templateCache",function(a){a.put("steps/step1.html",'<div class="row clearfix">\n    <h3>VA(Narrative)</h3>\n    <h5>\n        Tell me what happened in the last few months before death ?\n    </h5>\n\n    <textarea rows="5" style="width: 100%" placeholder="Only write key points" ng-model="participant.respondentCOD"\n              class="form-control"></textarea><br/>\n\n    <div align="center"><a ng-disabled="participant.respondentCOD.length<10" ng-click="step1Complete()" class="btn btn-primary">Next Step &raquo;</a></div>\n</div>')}]),angular.module("steps/step2.html",[]).run(["$templateCache",function(a){a.put("steps/step2.html",'<div class="row clearfix">\n    <h4>Cardinal Symptoms</h4>\n\n\n        <div ng-repeat="symptom in symptomList" class="col-md-4">\n            <div class="col-md-4"></div>\n            <div ng-click="selectSymptom(symptom)" style="border:3px solid #eee;" class="active-{{symptom.active}}"><img\n                    width="60" height="60" ng-src="assets/images/symptoms/{{domain}}/{{symptom.name}}.jpg"/><strong>\n                &nbsp;\n                {{symptom.label | sentencecase}}</strong></div>\n        </div>\n\n\n        <div class="col-md-4">\n            <h4>Which came first ?\n                <button class="btn btn-danger btn-sm" ng-click="clearSymptomOrdering()">Clear Ordering</button>\n            </h4>\n\n            <div class="well">\n                <ul class="list-group">\n                    <li ng-repeat="symptom in positiveSymptoms">\n                        <a class="list-group-item" href="" ng-click="extractSymptom(symptom)">\n                            <strong>{{symptom.label | sentencecase}}</strong></a>\n                    </li>\n                </ul>\n            </div>\n\n\n        </div>\n        <div class="col-md-4">\n            <strong>In Order</strong>\n\n            <div class="well">\n\n                <ul data-as-sortable="board.dragControlListeners" data-ng-model="sortedSymptoms" class="list-group">\n                    <li ng-repeat="symptom in sortedSymptoms" data-as-sortable-item=""\n                        class="list-group-item text-primary">\n                        <div data-as-sortable-item-handle=""><strong>{{$index+1}}.{{symptom.label |\n                            sentencecase}}</strong></div>\n                    </li>\n                </ul>\n            </div>\n\n            <div align="center" style="margin-top:10px">\n                <a\n                        ng-disabled="positiveSymptoms.length>0?(positiveSymptoms.length>0 || sortedSymptoms.length>0):false"\n                        ui-sref="steps.step3"\n                        ng-click="filterSymptoms()"\n                        class="btn btn-primary">Next Step &raquo;</a>\n            </div>\n        </div>\n\n</div>')}]),angular.module("steps/step3.html",[]).run(["$templateCache",function(a){a.put("steps/step3.html",'<div class="row clearfix">\n    <h4>Probe positive symptoms</h4>\n\n    <form class="form-horizontal" ng-submit="$state.go(\'steps.step4\',$stateParams)">\n\n        <div ng-repeat="symptom in sortedSymptoms" class="container">\n            <hr/>\n            <div class="col-md-12"><img ng-src="assets/images/symptoms/{{domain}}/{{symptom.name}}.jpg" width="70"\n                                        height="70"/><span\n                    class="label label-primary">{{$index+1}} {{symptom.label | sentencecase}}</span>\n\n\n                <div ng-repeat="prob in symptom.properties" class="form-group">\n\n                    <label class="text text-danger col-sm-4 control-label"\n                           style="font-weight: bolder">{{prob[\'label\'+lang]}}</label>\n\n                    <div class="col-sm-8">\n                        <textarea ng-if="!prob.items" ng-model="prob.comment" class="form-control"></textarea>\n                    </div>\n\n                    <div ng-if="prob.type==\'radio\'">\n\n                        <label ng-repeat="item in prob.items" class="radio-inline">\n                            <input value="{{item[\'value\'+lang]}}" type="radio"\n                                   name="{{symptom.name}}_{{prob.name}}"\n                                   ng-model="prob.comment" required/><span>{{item[\'text\'+lang]}} </span>\n                        </label>\n                    </div>\n                    <div ng-if="prob.type==\'checkbox\'">\n                        <label ng-repeat="item in prob.items" class="checkbox-inline">\n                            <span ng-if="$index==0">\n                            <input checklist-model="prob.comments" checklist-value="item[\'value\'+lang]"\n                                   type="checkbox"\n                                   name="{{symptom.name}}_{{prob.name}}[]"\n                                   ng-model="prob.comment" ng-required="prob.comments ? prob.comments.length<1:true"/><span>{{item[\'text\'+lang]}}</span>\n                            </span>\n                            <span ng-if="$index!=0">\n                                <input checklist-model="prob.comments" checklist-value="item[\'value\'+lang]"\n                                       type="checkbox"\n                                       name="{{symptom.name}}_{{prob.name}}[]"\n                                       ng-model="prob.comment" /><span>{{item[\'text\'+lang]}}</span>\n\n\n                            </span>\n                        </label>\n                    </div>\n\n\n                </div>\n\n            </div>\n        </div>\n        <div align="center">\n            <button type="submit" class="btn btn-primary">Next Step &raquo;</button>\n        </div>\n    </form>\n</div>')}]),angular.module("steps/step4.html",[]).run(["$templateCache",function(a){a.put("steps/step4.html",'<div class="row clearfix">\n    <h4>Past Medical Treatment Information</h4>\n    <ul>\n        <li>Hospital Discharge Notes</li>\n        <li>Name of the Hospital/Doctor</li>\n        <li>Any Treatment given/Diagnosis made</li>\n    </ul>\n    <textarea style="width:100%;" rows="5" placeholder="Past Medical Treatment Information" ng-model="participant.medicalInformation" class="form-control"></textarea><br/>\n    <div align="center"><a ng-disabled="participant.medicalInformation.length<10" ui-sref="steps.step5" class="btn btn-primary">Next Step &raquo;</a></div>\n</div>')}]),angular.module("steps/step5.html",[]).run(["$templateCache",function(a){a.put("steps/step5.html",'<div class="row clearfix" ng-init="readNotesToRespondent=false">\n    <div class="col-md-12">\n        <h4>Notes & Narrative\n            <button ng-click="readNotes();readNotesToRespondent=true" class="btn btn-primary btn-sm">Review Done</button>\n        </h4>\n    </div>\n    <div class="col-md-5">\n        <div style="height:400px;overflow:scroll;">\n            <div class="panel-body">\n                <span class="label label-primary">RESPONDENT SUMMARY</span>\n\n\n                <p>{{participant.respondentCOD}}</p>\n\n                <hr/>\n                <span class="label label-primary">POSITIVE SYMPTOMS</span>\n\n\n                <div ng-repeat="symptom in positiveSymptoms"><strong class="label label-warning">{{symptom.label |\n                    lowercase}}</strong>\n\n                    <p><span ng-repeat="prob in symptom.properties">\n                        <span>\n                            <span style="color: darkgray" ng-if="prob.comment || prob.comments">{{prob[\'label\'+lang]}} : </span> {{prob.comment}} {{prob.comments.join(",")}} &nbsp; <br/>\n                        </span>\n                    </span>\n                    </p>\n                </div>\n                <hr/>\n                <span class="label label-primary">MEDICAL INFO</span>\n\n                <p>{{participant.medicalInformation}}</p>\n            </div>\n        </div>\n    </div>\n    <div class="col-md-6">\n        Narrative\n        <div class="panel-body">\n            <textarea ng-disabled="!readNotesToRespondent" ng-model="participant.narrative" placeholder="Narrative"\n                      rows="18"\n                      style="width:100%" class="form-control"></textarea>\n            <br/>\n            <button ng-disabled="!readNotesToRespondent" class="btn btn-success"\n                    ng-click="saveVA(participant.narrative)">Finish\n            </button>\n        </div>\n    </div>\n\n</div>')}]),angular.module("steps/steps.html",[]).run(["$templateCache",function(a){a.put("steps/steps.html",'<div class="container">\n<div  ng-controller="VACtrl">\n    <ul class="breadcrumb">\n        <li ui-sref-active="active"><a ui-sref="steps.step1">Respondent Summary</a> <span class="divider"></span></li>\n        <li ui-sref-active="active"><a ui-sref="steps.step2">Positive Symptoms</a> <span class="divider"></span></li>\n        <li ui-sref-active="active"><a ui-sref="steps.step3">Probe Symptoms</a> <span class="divider"></span></li>\n        <li ui-sref-active="active"><a ui-sref="steps.step4">Medical Treatment Information</a> <span\n                class="divider"></span></li>\n        <li ui-sref-active="active"><a ui-sref="steps.step5">Notes/Narrative</a> <span class="divider"></span></li>\n    </ul>\n    <div ui-view="" data-anim-speed="700" class="anim-in-out anim-fade"></div>\n</div>\n</div>')}]),angular.module("tpls/cod.html",[]).run(["$templateCache",function(a){a.put("tpls/cod.html",'<div class="container" >\n    <div class="row clearfix">\n        <div class="col-md-12 column">\n            <h2 align="center">\n                ESL\n            </h2>\n            <h3>\n                What did the respondent think that this person died of ?\n            </h3>\n\n            <input class="form-control" type="text" ng-model="cod" class="form-control"\n                   typeahead="synonym for synonym in metadata.synonyms | filter:$viewValue" focus="true" ng-enter="handleCauseOfDeath(cod)" />\n            <br/>\n            <div align="center">\n                <button class="btn btn-primary btn-lg" ng-click="handleCauseOfDeath(cod)">Next</button>\n            </div>\n\n        </div>\n    </div>\n</div>')}]),angular.module("areaResolver/areaResolver.jade",[]).run(["$templateCache",function(a){a.put("areaResolver/areaResolver.jade",'<div align="center" class="container">\n  <h4>AreaId    : {{subject.areaId}}</h4>\n  <h4>Name      : {{subject.name}}</h4>\n  <h4>Area Code : {{subject.landmark}}</h4>\n  <div></div><a ng-click="proceed()" class="btn btn-primary btn-lg">Confirm and Proceed</a>\n</div>')}]),angular.module("dashboard/dashboard.jade",[]).run(["$templateCache",function(a){a.put("dashboard/dashboard.jade",'<div class="container">\n  <h3>Today\'s Progress</h3>\n  <row class="clearfix">\n    <div class="col-md-4">\n      <h4> VA</h4>\n      <div ui-grid="{data:progress.va}" class="myGrid"></div>\n    </div>\n    <div class="col-md-4">\n      <h4>ESL</h4>\n      <div ui-grid="{data:progress.esl}" class="myGrid"></div>\n    </div>\n    <div class="col-md-4">\n      <h4>Pending Downloads</h4>\n      <div ui-grid="{data:progress.downloads}" class="myGrid"></div>\n    </div>\n  </row>\n  <!--row.clearfix-->\n  <!--    .col-md-3-->\n  <!--        h4-->\n  <!--            a(style="padding-top:5px",href="",ng-click="distributeData()") Distribute Data-->\n  <!---->\n</div>')}]),angular.module("enum/dataGrid/dataGrid.jade",[]).run(["$templateCache",function(a){a.put("enum/dataGrid/dataGrid.jade",'<div ng-controller="DataGridCtrl">\n  <!-- Grid Heading-->\n  <h4><span ng-show="$state.current.addNew" ng-if="canAddMore">\n      <button ng-click="appRoot.addNew()" focus="true" class="btn btn-info btn-small"><i class="icon-plus-sign icon-white"></i> Add</button></span>        {{$state.current.title}}</h4>\n  <!-- Grid Report-->\n  <dhtmlx-grid></dhtmlx-grid>\n  <!--h4-->\n'+"  <!--    button.btn.btn-primary(focus='true', ui-sref='{{nextState}}', ng-if='!canAddMore') Next &raquo;-->\n</div>")}]),angular.module("enum/enum.jade",[]).run(["$templateCache",function(a){a.put("enum/enum.jade",'<div ui-view=""></div>')}]),angular.module("formTemplates/alcoholForm.jade",[]).run(["$templateCache",function(a){a.put("formTemplates/alcoholForm.jade",'<form ng-submit="onSubmit(data)" action="javascript:void(0)">\n  <input ng-repeat="elm in schema.hiddenElements" type="hidden" value="{{elm.value}}" ng-model="data[elm.name]"/>\n  <div>\n    <table class="table table-striped table-bordered">\n      <thead>\n        <tr style="background-color:darkgrey;color:#f5f5f5" ng-init="headings=[\'Product\',\'Days per week 1 to 7(actual no of days)\',\'Quantity (On a typical day)\']">\n          <th ng-repeat="heading in headings">{{heading}}</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr ng-repeat="(mainIndex,alcohol) in schema.properties" ng-init="unit=[\'glass\',\'shot\',\'bottle\',\'glass\']">\n          <td ng-if="alcohol.type!=\'heading\'">{{alcohol.label}}</td>\n          <td ng-if="alcohol.type!=\'heading\'">\n            <input focus="{{mainIndex==1}}" type="text" ng-model="data[alcohol.name+\'_frequency\']" data-bvalidator="between[0:7],required" ng-focus="alcoholFreqFocus(data)" ng-blur="alcoholFreqFocus(data)" class="form-control"/>\n          </td>\n          <td ng-if="alcohol.type!=\'heading\'" ng-repeat="day in [\'typicalDay\']">\n            <label>\n              <input ng-model="data[alcohol.name+\'_\'+day]" type="text" value="" data-bvalidator="between[0:10],required" ng-disabled="data[alcohol.name+\'_frequency\']==0" class="form-control"/> {{unit[mainIndex-1]}}\n            </label>\n          </td>\n        </tr>\n      </tbody>\n    </table><b>\n      Note: The quantity of alcohol consumption to be added: *Unit: Beer; bottle = 750 ml, 1 bottle=2 cans, 1\n      bottle = 4 glasses, Spirit; shot = 50 ml, 1 bottle=15 shots</b>\n  </div>\n  <div class="controls">\n    <button type="submit" data-plus-as-tab="false" class="btn btn-primary">Save</button>\n  </div>\n</form>')}]),angular.module("formTemplates/ffqForm.jade",[]).run(["$templateCache",function(a){a.put("formTemplates/ffqForm.jade",'<form ng-submit="onSubmit(data)" action="javascript:void(0)">\n  <input ng-repeat="elm in schema.hiddenElements" type="hidden" value="{{elm.value}}" ng-model="data[elm.name]"/>\n  <h4>Average Use last year</h4>\n  <table fixed-header="" table-height="{{(schema.properties.length * 60&gt;380?380:schema.properties.length * 60)}}px" class="table table-striped table-bordered">\n    <thead>\n      <tr style="background-color: darkgrey;color: #f5f5f5" ng-init="headings=[\'Food/Drink Item\',\'Never\',\'1-3 per month\',\'Once a week\',\'2-5 per week\',\'Once a day or Most days\',\'2-3 per day\',\'Measure\',\'Unit\']">\n        <th ng-repeat="heading in headings">{{heading}}</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr ng-repeat="(mainIndex,element) in schema.properties">\n        <td>{{element.label}}</td>\n        <td ng-repeat="item in [0,1,2,3,4,5]">\n          <label class="radio-inline">\n            <div ng-if="$index==0">\n              <input focus="{{$index==0 &amp;&amp; mainIndex==0}}" type="radio" data-bvalidator="required" data-bvalidator-msg="Please select an option" value="{{item}}" ng-model="data[element.name+\'_frequency\']" name="{{element.name}}"/>\n            </div>\n            <div ng-if="$index!=0">\n              <input type="radio" value="{{item}}" ng-model="data[element.name+\'_frequency\']" name="{{element.name}}"/>\n            </div>\n          </label>\n        </td>\n        <td class="col-xs-2">\n          <input type="text" placeholder="Measure" data-bvalidator="between[1:99],required" ng-model="data[element.name+\'_measure\']" ng-disabled="data[element.name+\'_frequency\']==0" class="form-control"/>\n        </td>\n        <td class="col-xs-2">\n          <select data-bvalidator="required" ng-model="data[element.name+\'_unit\']" data-bvalidator-msg="Please select an option" ng-disabled="data[element.name+\'_frequency\']==0" class="form-control">\n            <option value=""></option>\n            <option ng-repeat="item in element.items" value="{{item.value}}">{{item.text}}</option>\n          </select>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  <div class="controls">\n    <button type="submit" data-plus-as-tab="false" class="btn btn-primary">Save</button>\n  </div>\n</form>')}]),angular.module("formTemplates/ffqOtherForm.jade",[]).run(["$templateCache",function(a){a.put("formTemplates/ffqOtherForm.jade",'<form ng-submit="onSubmit(data)" action="javascript:void(0)">\n  <input ng-repeat="elm in schema.hiddenElements" type="hidden" value="{{elm.value}}" ng-model="data[elm.name]"/>\n  <h4>Average Use last year</h4>\n  <table fixed-header="" table-height="{{(schema.properties.length * 60&gt;380?380:schema.properties.length * 60)}}px" class="table table-striped table-bordered">\n    <thead>\n      <tr style="background-color: darkgrey;color: #f5f5f5" ng-init="headings=[\'Food/Drink Item\',\'1-3 per month\',\'Once a week\',\'2-4 per week\',\'5-6 per week\',\'Once a day\',\'2-3 per day\',\'4-5 per day\',\'6+ per day\',\'Measure\',\'Unit\']">\n        <th ng-repeat="heading in headings">{{heading}}</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr ng-repeat="(mainIndex,element) in schema.properties">\n        <td>\n          <input focus="{{mainIndex==0}}" type="text" ng-model="data[element.name]" placeholder="Item" data-bvalidator="required" class="input input-mini"/>\n        </td>\n        <td ng-repeat="item in [1,2,3,4,5,6,7,8]">\n          <label class="radio-inline">\n            <div ng-if="$index==0">\n              <input type="radio" data-bvalidator="required" data-bvalidator-msg="Please select an option" value="{{item}}" ng-model="data[element.name+\'_frequency\']" name="{{element.name}}"/>\n            </div>\n            <div ng-if="$index!=0">\n              <input type="radio" value="{{item}}" ng-model="data[element.name+\'_frequency\']" name="{{element.name}}"/>\n            </div>\n          </label>\n        </td>\n        <td>\n          <input type="text" placeholder="Measure" data-bvalidator="between[1:99],required" ng-model="data[element.name+\'_measure\']" ng-disabled="data[element.name+\'_frequency\']==0" class="input input-mini"/>\n        </td>\n        <td>\n          <select data-bvalidator="required" ng-model="data[element.name+\'_unit\']" data-bvalidator-msg="Please select an option" ng-disabled="data[element.name+\'_frequency\']==0" class="input-medium">\n            <option value=""></option>\n            <option ng-repeat="item in element.items" value="{{item.value}}">{{item.text}}</option>\n          </select>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  <div class="controls">\n    <button type="submit" data-plus-as-tab="false" class="btn btn-primary">Save</button>\n  </div>\n</form>')
}]),angular.module("formTemplates/medicalHistoryForm.jade",[]).run(["$templateCache",function(a){a.put("formTemplates/medicalHistoryForm.jade",'<form ng-submit="onSubmit(data)" action="javascript:void(0)">\n  <input ng-repeat="elm in schema.hiddenElements" type="hidden" value="{{elm.value}}" ng-model="data[elm.name]"/>\n  <table class="table table-striped table-bordered">\n    <thead>\n      <tr style="background-color:darkgrey;color:#f5f5f5" ng-init="headings=[\'Person\',\'Stroke\',\'Heart Attack\',\'Diabetes\',\'Cancer\']">\n        <th ng-repeat="heading in headings">{{heading}}</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr ng-repeat="(mainIndex,person) in schema.properties">\n        <td ng-if="person.type!=\'heading\'">{{person.label}}</td>\n        <td ng-if="person.type!=\'heading\'" ng-repeat="disease in [\'stroke\',\'heartAttack\',\'diabetes\',\'cancer\']">\n          <label class="radio">\n            <input name="{{person.name}}_{{disease}}" data-bvalidator="required" focus="{{mainIndex==1 &amp;&amp; $index==0}}" value="Yes" type="radio" ng-model="data[person.name+\'_\'+disease]"/>Yes\n          </label>\n          <label class="radio">\n            <input name="{{person.name}}_{{disease}}" value="No" type="radio" ng-model="data[person.name+\'_\'+disease]"/>No\n          </label>\n          <label class="radio">\n            <input name="{{person.name}}_{{disease}}" value="Unknown" type="radio" ng-model="data[person.name+\'_\'+disease]"/>Unknown\n          </label>\n          <div ng-if="person.name==\'siblings\' || person.name==\'children\'" ng-show="data[person.name+\'_\'+disease]==\'Yes\'">\n            <input type="text" placeholder="How many ?" ng-model="data[person.name+\'_\'+disease+\'_count\']" data-bvalidator="between[1:10],required" class="input input-small"/>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  <div class="controls">\n    <button type="submit" data-plus-as-tab="false" class="btn btn-primary">Save</button>\n  </div>\n</form>')}]),angular.module("report/report.jade",[]).run(["$templateCache",function(a){a.put("report/report.jade",'<div class="col-md-2 column">\n  <side-menu config="reportMenu"></side-menu>\n</div>\n<div class="col-md-10 column">\n  <dhtmlx-grid options="reportOptions"></dhtmlx-grid>\n</div>')}]),angular.module("resampling/resampling.jade",[]).run(["$templateCache",function(a){a.put("resampling/resampling.jade",'<div class="container">\n  <h3>Today\'s Resampling</h3>\n  <table class="table table-condensed">\n    <tr ng-repeat="member in resampling">\n      <td><a ng-click="resampleSurvey(member.deathId)" href="">{{member.deathId}}</a></td>\n      <td>{{member.name}}</td>\n      <td>{{member.houseno}}</td>\n      <td>{{member.age}}</td>\n      <td>{{member.sex}}</td>\n      <td>{{member.status}}</td>\n    </tr>\n  </table>\n</div>')}]),angular.module("resolver/resolver.jade",[]).run(["$templateCache",function(a){a.put("resolver/resolver.jade",'<div ng-controller="resolverCtrl" align="center" class="container">\n  <h4>{{subject.name}}</h4>\n  <h4>{{subject.age_value}} {{subject.age_unit}}</h4>\n  <h4>{{subject.sex}}</h4>\n  <div></div><a ng-click="proceed()" class="btn btn-primary btn-lg">Confirm and Proceed</a>\n  <div ng-show="subject.surveytype==\'va\'">\n    <input ng-change="enableLocalKeyboard(localKeyboardInput)" type="checkbox" ng-model="localKeyboardInput"/><span><b> Use Gujrathi Keyboard</b></span>\n  </div>\n</div>')}]),angular.module("restore/restore.jade",[]).run(["$templateCache",function(a){a.put("restore/restore.jade",'<h3 align="center">Restoring Session ...</h3>')}]),angular.module("tpls/alcoholFormDirective.jade",[]).run(["$templateCache",function(a){a.put("tpls/alcoholFormDirective.jade",'<table-form template-url="formTemplates/alcoholForm.jade"></table-form>')}]),angular.module("tpls/dataGrid.jade",[]).run(["$templateCache",function(a){a.put("tpls/dataGrid.jade",'<h4><span ng-show="$state.current.addNew">\n    <button ng-click="appRoot.addNew()" focus="true" class="btn btn-primary btn-sm"> Add New</button></span><span>&nbsp; {{$state.current.title}}</span></h4>\n<dhtmlx-grid></dhtmlx-grid>')}]),angular.module("tpls/dataGridCentered.jade",[]).run(["$templateCache",function(a){a.put("tpls/dataGridCentered.jade",'<div class="col-md-2 column"></div>\n<div class="col-md-9 column">\n  <h4><span ng-show="$state.current.addNew">\n      <button ng-click="appRoot.addNew()" focus="true" class="btn btn-primary btn-sm"> Add New</button></span><span>&nbsp; {{$state.current.title}}</span></h4>\n  <dhtmlx-grid></dhtmlx-grid>\n</div>')}]),angular.module("tpls/ffqFormDirective.jade",[]).run(["$templateCache",function(a){a.put("tpls/ffqFormDirective.jade",'<table-form template-url="formTemplates/ffqForm.jade"></table-form>')}]),angular.module("tpls/ffqOtherFormDirective.jade",[]).run(["$templateCache",function(a){a.put("tpls/ffqOtherFormDirective.jade",'<table-form template-url="formTemplates/ffqOtherForm.jade"></table-form>')}]),angular.module("tpls/fmhDiseaseFormDirective.jade",[]).run(["$templateCache",function(a){a.put("tpls/fmhDiseaseFormDirective.jade",'<table-form template-url="formTemplates/medicalHistoryForm.jade"></table-form>')}]),angular.module("tpls/pageDetail.jade",[]).run(["$templateCache",function(a){a.put("tpls/pageDetail.jade",'<div style="margin-left:10px" ng-init="childStates=$state.current.data.children;parent=$state.current.data.thisState;prev=$state.current.data.prev;" class="col-md-2 column"><a ng-click="$state.go(prev.name,$stateParams)" href="">&laquo; Back to {{prev.title}}</a>\n  <div class="well sidebar-nav sidebar-nav-fixed">\n    <ul class="nav nav-list">\n      <li class="nav-header"></li>\n      <li ui-sref-active="sidebarActive" ng-repeat="childState in childStates"><a ui-sref="{{parent.name}}.{{childState.name}}">{{childState.title}}</a></li>\n    </ul>\n  </div>\n</div>\n<div style="padding-top:15px" class="col-md-9 column">\n  <div ui-view=""></div>\n</div>\n<div class="col-md-1 column"></div>')}]),angular.module("tpls/pageDetailNavDisabled.jade",[]).run(["$templateCache",function(a){a.put("tpls/pageDetailNavDisabled.jade",'<div style="margin-left:10px" ng-init="childStates=$state.current.data.children;parent=$state.current.data.thisState;prev=$state.current.data.prev;" class="col-md-2 column"><a ui-sref="{{prev.name}}({{$stateParams}})" href="" ng-if="prev.name!=\'\'">&laquo; Back to {{prev.title}}</a>\n  <div style="height:550px ;overflow: scroll" class="well sidebar-nav sidebar-nav-fixed">\n    <ul class="nav nav-list">\n      <li class="nav-header"></li>\n      <li ng-class="{sidebarActive:$state.includes(parent.name+\'.\'+childState.name)}" ng-repeat="childState in childStates"><a>{{childState.title}}</a></li>\n    </ul>\n  </div>\n</div>\n<div style="padding-top:15px" class="col-md-9 column">\n  <div ui-view=""></div>\n</div>\n<div class="col-md-1 column"></div>\n<div class="col-md-1 column"></div>')}]),angular.module("tpls/resampling.jade",[]).run(["$templateCache",function(a){a.put("tpls/resampling.jade",'<div class="container">\n  <standard-form randomsize="5" randomtotal="18"></standard-form>\n</div>')}]),angular.module("tpls/standardFormDirective.jade",[]).run(["$templateCache",function(a){a.put("tpls/standardFormDirective.jade","<standard-form></standard-form>")}]),angular.module("tpls/summary.jade",[]).run(["$templateCache",function(a){a.put("tpls/summary.jade",'<div class="modal-header">\n  <h3 class="modal-title"> Confirm with the Respondent</h3>\n</div>\n<div class="modal-body">\n  <div class="checkbox">\n    <label>\n      <input type="checkbox" ng-model="data.confirm1"/><span class="text text-primary">Is this information correct ?</span>\n    </label>\n  </div>\n  <div class="checkbox">\n    <label>\n      <input type="checkbox" ng-model="data.confirm2"/>\n      <spantext class="text-primary">Is there anything I missed out ?</spantext>\n    </label>\n  </div>\n  <div class="checkbox">\n    <label>\n      <input type="checkbox" ng-model="data.confirm3"/>\n      <spantext class="text-primary">Do you want to add anything  ?</spantext>\n    </label>\n  </div>\n  <form class="form-horizontal">\n    <label>Respondents Co-operation</label><br/>\n    <label class="radio-inline">\n      <input type="radio" ng-model="data.respCooperation" value="Good" required="required" name="resp"/><span>Good</span>\n    </label>\n    <label class="radio-inline">\n      <input type="radio" ng-model="data.respCooperation" value="Poor" required="required" name="resp"/><span>Poor</span>\n    </label><br/>\n    <button type="submit" ng-click="ok(data.respCooperation)" ng-show="data.confirm1 &amp;&amp; data.confirm2 &amp;&amp; data.confirm3 &amp;&amp; data.respCooperation" class="btn btn-primary btn-primary">Continue..</button>\n  </form>\n  <p ng-show="data.confirm1 &amp;&amp; data.confirm2 &amp;&amp; data.confirm3 &amp;&amp; data.respCooperation" class="text text-success">Now request the respodent to give you some time to write your narrative</p><br/>\n</div>')}]),angular.module("tpls/surveyFormCustomNav.jade",[]).run(["$templateCache",function(a){a.put("tpls/surveyFormCustomNav.jade",'<survey-form on-save="handleEslNav(data)"></survey-form>')}]),angular.module("tpls/surveyFormDirective.jade",[]).run(["$templateCache",function(a){a.put("tpls/surveyFormDirective.jade","<survey-form></survey-form>")}]),angular.module("va/va.jade",[]).run(["$templateCache",function(a){a.put("va/va.jade",'<div ui-view=""></div>')}]),angular.module("templates-common",["security/forgotPassword/forgotPassword.jade","security/login/login.jade","security/register/register.jade","sideMenu/sideMenu.jade","sync/sync.jade"]),angular.module("security/forgotPassword/forgotPassword.jade",[]).run(["$templateCache",function(a){a.put("security/forgotPassword/forgotPassword.jade",'<div style="margin-top: 10%">\n  <div class="col-md-4 column"></div>\n  <div class="col-md-4 column">\n    <div class="panel panel-info">\n      <div class="panel-heading">\n        <h3 class="panel-title">Forgot Password</h3>\n      </div>\n      <!-- Forgot Password Form-->\n      <div class="panel-body">\n        <form ng-submit="forgotPassword.sendEmail(email)" role="form">\n          <div class="form-group">\n            <label>Email</label>\n            <input type="email" ng-model="email" required="" autofocus="" placeholder="Email" class="form-control"/>\n          </div>\n          <button type="submit" class="btn btn-info">Send Email</button>\n        </form>\n        <div style="margin-top: 10px"><a href="#/login">&laquo; Login</a></div>\n      </div>\n      <!-- Ends-->\n    </div>\n  </div>\n</div>')}]),angular.module("security/login/login.jade",[]).run(["$templateCache",function(a){a.put("security/login/login.jade",'<div style="margin-top: 10%">\n  <div class="col-md-4 column"></div>\n  <div class="col-md-4 column">\n    <div class="panel panel-info">\n      <div class="panel-heading">\n        <h3 class="panel-title"><strong>COD Anand Study</strong></h3>\n      </div>\n      <!-- Login Form-->\n      <div class="panel-body">\n        <form role="form" ng-submit="login(username,password)">\n          <div class="form-group">\n            <!--label Username-->\n            <input type="text" ng-model="username" required="" autofocus="" placeholder="Enter Username" class="form-control"/>\n          </div>\n          <div class="form-group">\n            <!--label Password-->\n            <input type="password" ng-model="password" required="" placeholder="Password" class="form-control"/>\n          </div>\n          <button type="submit" class="btn btn-info">Login</button>\n        </form>\n        <!--div(style=\'margin-top: 10px\')-->\n        <!--   a(href=\'#/register\') Sing Up |-->\n        <!---->\n        <!--   a(href=\'#/forgotPassword\')  Forgot Password-->\n      </div>\n      <!-- Ends-->\n    </div>\n  </div>\n</div>')}]),angular.module("security/register/register.jade",[]).run(["$templateCache",function(a){a.put("security/register/register.jade",'<div style="margin-top: 2%">\n  <div class="col-md-2 column"></div>\n  <div class="col-md-8 column"><a href="#/login"> &raquo; Back to Login</a>\n    <div class="panel panel-info">\n      <div class="panel-heading">\n        <h3 class="panel-title">Sign Up</h3>\n      </div>\n      <!-- Registration Form-->\n      <div class="panel-body">\n        <form ng-submit="register(user)" role="form">\n          <div class="form-group">\n            <label>First Name</label>\n            <input type="text" ng-model="email" required="" autofocus="" placeholder="First Name" class="form-control"/>\n          </div>\n          <div class="form-group">\n            <label>Last Name</label>\n            <input type="text" ng-model="email" required="" autofocus="" placeholder="Last Name" class="form-control"/>\n          </div>\n          <div class="form-group">\n            <label>Email</label>\n            <input type="text" ng-model="email" required="" autofocus="" placeholder="Email" class="form-control"/>\n          </div>\n          <button type="submit" class="btn btn-info">Sign Up</button>\n        </form>\n      </div>\n      <!-- Ends-->\n    </div>\n  </div>\n</div>')}]),angular.module("sideMenu/sideMenu.jade",[]).run(["$templateCache",function(a){a.put("sideMenu/sideMenu.jade",'<div class="sidebar">\n  <ul>\n    <li ng-repeat="menu in menuOptions"><span class="heading">{{menu.label}}</span>\n      <ul>\n        <li ng-repeat="menuItem in menu.items"><a ng-href="#/report/{{menuItem.id}}">{{menuItem.label}}</a></li>\n      </ul>\n    </li>\n  </ul>\n</div>')}]),angular.module("sync/sync.jade",[]).run(["$templateCache",function(a){a.put("sync/sync.jade",'<div style="margin-top:10px" class="container">\n  <!--Network status-->\n  <div ng-hide="networkStatus" class="alert alert-danger">Wifi Network Not Connected</div>\n  <div ng-show="networkStatus" class="alert alert-success">Wifi Connected Successfully</div>\n  <div>\n    <button ng-click="startSync()" ng-disabled="syncRequestActive" ng-show="networkStatus || user.role.title ==\'manager\' " class="btn btn-primary">Synchronize</button>\n  </div>\n  <div style="margin-top:10px">\n    <p>Download</p>\n    <progressbar value="progress.download" type="info"><b>{{progress.download}} %</b></progressbar>\n    <p>Upload</p>\n    <progressbar value="progress.upload" type="info"><b>{{progress.upload}} %</b></progressbar>\n    <p>FileUpload</p>\n    <progressbar value="progress.fileupload" type="info"><b>{{progress.fileupload}} %</b></progressbar>\n  </div>\n  <h4>Pending Uploads      - {{pendingUploads}}</h4>\n  <h4>Pending File Uploads - {{pendingFileUploads}}</h4>\n</div>')}]);